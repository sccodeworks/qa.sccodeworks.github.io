"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[9652],{99652:(q,S,n)=>{n.r(S),n.d(S,{GenerateSalesJournalComponent:()=>at});var l=n(24006),h=n(50692),v=n(70879),O=n(35226),A=n.n(O),t=n(94650),C=n(19132),T=n(5032),I=n(36895),Z=n(4859),E=n(59549),V=n(44144),s=n(73546),f=n(39505);function o(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Start Date is required. "),t.qZA())}function m(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use YYYY-MM-DD. "),t.qZA())}function d(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," End Date is required. "),t.qZA())}function D(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use YYYY-MM-DD. "),t.qZA())}function G(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Starting Customer must be a number with up to 4 digits or *FIRST. "),t.qZA())}function Y(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Special characters are not allowed. "),t.qZA())}function y(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Special characters are not allowed. "),t.qZA())}function Q(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,' Ending Customer must be a number with up to 4 digits or *LAST". '),t.qZA())}function K(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Special characters are not allowed. "),t.qZA())}function W(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Special characters are not allowed. "),t.qZA())}function F(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,' Ending Building Number must be a number with up to 3 digits or *"LAST. '),t.qZA())}function k(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Special characters are not allowed. "),t.qZA())}function w(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Special characters are not allowed. "),t.qZA())}function $(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Print Support is required. "),t.qZA())}function j(a,u){if(1&a&&(t.TgZ(0,"mat-form-field",11)(1,"mat-label"),t._uU(2,"Print Support"),t.qZA(),t._UZ(3,"input",27),t.YNc(4,$,2,0,"mat-error",8),t.qZA()),2&a){const e=t.oxw();let r;t.xp6(4),t.Q6J("ngIf",(null==(r=e.form.get("PrintSupport"))?null:r.invalid)&&((null==(r=e.form.get("PrintSupport"))?null:r.dirty)||(null==(r=e.form.get("PrintSupport"))?null:r.touched)))}}function H(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Report Name is required. "),t.qZA())}function X(a,u){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Report Description is required. "),t.qZA())}function z(a,u){1&a&&(t.TgZ(0,"div"),t._uU(1,"Email is required."),t.qZA())}function tt(a,u){1&a&&(t.TgZ(0,"div"),t._uU(1,"Please enter a valid email address."),t.qZA())}function et(a,u){if(1&a&&(t.TgZ(0,"mat-error"),t.YNc(1,z,2,0,"div",8),t.YNc(2,tt,2,0,"div",8),t.qZA()),2&a){const e=t.oxw(2);let r,i;t.xp6(1),t.Q6J("ngIf",null==(r=e.form.get("Email"))||null==r.errors?null:r.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=e.form.get("Email"))||null==i.errors?null:i.errors.email)}}function rt(a,u){if(1&a&&(t.TgZ(0,"mat-form-field",11)(1,"mat-label"),t._uU(2,"Email:"),t.qZA(),t._UZ(3,"input",28),t.YNc(4,et,3,2,"mat-error",8),t.qZA()),2&a){const e=t.oxw();let r;t.xp6(4),t.Q6J("ngIf",(null==(r=e.form.get("Email"))?null:r.invalid)&&((null==(r=e.form.get("Email"))?null:r.dirty)||(null==(r=e.form.get("Email"))?null:r.touched)))}}let at=(()=>{class a{constructor(e,r,i,p){this.fb=e,this.router=r,this.route=i,this.AccountingReportsService=p,this.reportBreakoutOptions=["*NONE","*BUILDING","*CUSTOMER"],this.StartingCustomerOptions=["*FIRST"],this.EndingCustomerOptions=["*LAST"],this.StartingBuildingNumberOptions=["*FIRST"],this.EndingBuildingNumberOptions=["*LAST"],this.SpecialAttributeOptions=["*NONE"],this.SpecialAttributevalueOptions=["*NONE"],this.OutputOptions=["*ARCHIVE","*BOTH","*PRINT","*EMAIL"],this.user=localStorage.getItem("userName")}ngOnInit(){this.form=this.fb.group({StartDate:["",[l.kI.required,this.dateValidator()]],EndDate:["",[l.kI.required,this.dateValidator()]],StartingCustomer:["",[this.startingCustomerValidator()]],StartingCustomerSuffix:["",[this.maxLengthValidator(2),this.alphanumericValidator()]],StartingCustomerSuffix2:["",[this.maxLengthValidator(2),this.alphanumericValidator()]],EndingCustomer:["",[this.endingCustomerValidator()]],EndingCustomerSuffix:["",[this.maxLengthValidator(2),this.alphanumericValidator()]],EndingCustomerSuffix2:["",[this.maxLengthValidator(2),this.alphanumericValidator()]],StartingBuildingNumber:["",[this.maxLengthValidator(2),this.alphanumericValidator()]],EndingBuildingNumber:["",[this.endingBuildingNumber()]],ReportBreakOuts:["",[this.maxLengthValidator(9),this.alphanumericValidator()]],SpecialAttribute:["",[this.maxLengthValidator(10),this.alphanumericValidator()]],SpecialAttributeValue:["",[this.maxLengthValidator(30),this.alphanumericValidator()]],OutPut:["",[this.maxLengthValidator(8),this.alphanumericValidator()]],PrintSupport:["",[this.maxLengthValidator(4),this.alphanumericValidator()]],ReportName:["",[this.maxLengthValidator(10),this.alphanumericValidator()]],ReportDesc:["",[this.maxLengthValidator(50),this.alphanumericValidator()]],Email:["",[this.emailValidator()]]}),this.form.get("OutPut")?.valueChanges.subscribe(e=>{this.updateValidators()}),this.form.get("StartingCustomer")?.valueChanges.subscribe(e=>{"*FIRST"===e&&this.form.get("StartingCustomer")?.setValue("0",{emitEvent:!1})}),this.form.get("EndingCustomer")?.valueChanges.subscribe(e=>{"*LAST"===e&&this.form.get("EndingCustomer")?.setValue("9999",{emitEvent:!1})}),this.form.get("ReportBreakOuts")?.valueChanges.subscribe(e=>{"*BUILDING"===e&&this.form.get("ReportBreakOuts")?.setValue("BLDG",{emitEvent:!1}),"*NONE"===e&&this.form.get("ReportBreakOuts")?.setValue(" ",{emitEvent:!1}),"*CUSTOMER"===e&&this.form.get("ReportBreakOuts")?.setValue("CUST",{emitEvent:!1})}),this.form.get("EndingBuildingNumber")?.valueChanges.subscribe(e=>{"*LAST"===e&&this.form.get("EndingBuildingNumber")?.setValue("999",{emitEvent:!1})})}maxLengthValidator(e){return r=>{const i=r.value;return i&&i.length<=e?null:{maxLengthExceeded:!0}}}alphanumericValidator(){return e=>/^[a-zA-Z0-9 *]*$/.test(e.value)?null:{invalidCharacter:!0}}emailValidator(){return e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)?null:{invalidEmail:!0}}dateValidator(){return e=>/^\d{4}-\d{2}-\d{2}$/.test(e.value)?null:{invalidDate:!0}}startingCustomerValidator(){return e=>{const r=e.value;return/^\d{0,4}$/.test(r)&&r.length<=4||"*FIRST"===r?null:{invalidStartingCustomer:!0}}}endingCustomerValidator(){return e=>{const r=e.value;return/^\d{0,4}$/.test(r)&&r.length<=4||"*LAST"===r?null:{invalidEndingCustomer:!0}}}endingBuildingNumber(){return e=>{const r=e.value;return/^\d{0,3}$/.test(r)&&r.length<=4||"*LAST"===r?null:{invalidEndingBuildingNumber:!0}}}updateValidators(){const e=this.form.get("OutPut")?.value,r=this.form.get("ReportName"),i=this.form.get("ReportDesc"),p=this.form.get("Email"),_=this.form.get("PrintSupport");"*EMAIL"===e?(r?.clearValidators(),i?.clearValidators(),p?.setValidators([l.kI.required,l.kI.email]),_?.clearValidators()):"*PRINT"===e?(r?.clearValidators(),i?.clearValidators(),p?.clearValidators(),_?.setValidators([l.kI.required])):(r?.setValidators([l.kI.required]),i?.setValidators([l.kI.required]),p?.clearValidators(),"*ARCHIVE"===e?_?.clearValidators():_?.setValidators([l.kI.required])),r?.updateValueAndValidity(),i?.updateValueAndValidity(),p?.updateValueAndValidity(),_?.updateValueAndValidity()}shouldDisplayEmailField(){const e=this.form.get("OutPut")?.value;return"*BOTH"===e||"*EMAIL"===e}shouldDisplayPrintSupport(){return"*ARCHIVE"!==this.form.get("OutPut")?.value}getCurrentDate(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}GenerateSalesJournal(){const e=this.form.value;console.log(this.form.errors),Object.keys(this.form.controls).forEach(r=>{console.log(r,this.form.get(r)?.errors)}),"*FIRST"===e.StartingCustomer&&(e.StartingCustomer="0"),"*LAST"===e.EndingCustomer&&(e.EndingCustomer="9999"),"*LAST"===e.EndingBuildingNumber&&(e.EndingBuildingNumber="999"),"*BUILDING"===e.ReportBreakOuts&&(e.ReportBreakOuts="BLDG"),"*NONE"===e.ReportBreakOuts&&(e.ReportBreakOuts=""),"*CUSTOMER"===e.ReportBreakOuts&&(e.ReportBreakOuts="CUST"),this.GenerateSalesJournalSubscription&&this.GenerateSalesJournalSubscription.unsubscribe(),this.GenerateSalesJournalSubscription=this.AccountingReportsService.GenerateSalesJournal(e.StartDate,e.EndDate,e.StartingCustomer,e.StartingCustomerSuffix,e.StartingCustomerSuffix2,e.EndingCustomer,e.EndingCustomerSuffix,e.EndingCustomerSuffix2,e.StartingBuildingNumber,e.EndingBuildingNumber,e.SpecialAttribute,e.SpecialAttributeValue,e.ReportBreakOuts,e.OutPut,e.PrintSupport,e.ReportName,e.ReportDesc,e.Email).subscribe(r=>{const p=r[0].data[r[0].data.length-1].value;"Successfully Submitted"===p?(this.successMessage(p),this.router.navigate(["/main-nav/GenerateSalesJournal/read"])):this.failureMessage(p)})}successMessage(e){A().fire(e,"","success")}failureMessage(e){A().fire(e,"","error")}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(C.F0),t.Y36(C.gz),t.Y36(T.A))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-generate-sales-journal"]],standalone:!0,features:[t.jDz],decls:68,vars:26,consts:[[1,"over-Flow"],[1,"title"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["type","date","matInput","","formControlName","StartDate"],[4,"ngIf"],["type","date","matInput","","formControlName","EndDate"],["appearance","outline","formControlName","StartingCustomer","label","Starting Customer ",3,"options"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","StartingCustomerSuffix"],["matInput","","formControlName","StartingCustomerSuffix2"],["appearance","outline","formControlName","EndingCustomer","label","Ending Customer ",3,"options"],["matInput","","formControlName","EndingCustomerSuffix"],["matInput","","formControlName","EndingCustomerSuffix2"],["appearance","outline","formControlName","StartingBuildingNumber","label","Starting Building Number  ",3,"options"],["appearance","outline","formControlName","EndingBuildingNumber","label","Ending Building Number  ",3,"options"],["appearance","outline","formControlName","SpecialAttribute","label","Special Attribute",1,"full-width",3,"options"],["appearance","outline","formControlName","SpecialAttributeValue","label","Special Attribute value",1,"full-width",3,"options"],["appearance","outline","formControlName","ReportBreakOuts","label","Report Breakout",1,"full-width",3,"options"],["appearance","outline","formControlName","OutPut","label","Output",1,"full-width",3,"options"],["appearance","outline","class","full-width2",4,"ngIf"],["matInput","","formControlName","ReportName"],["matInput","","formControlName","ReportDesc"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"],["matInput","","formControlName","PrintSupport"],["matInput","","formControlName","Email","placeholder","Enter your email"]],template:function(e,r){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t._uU(3," Sales Journal "),t.qZA()(),t.TgZ(4,"mat-card-content",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"Start Date:"),t.qZA(),t._UZ(11,"input",7),t.YNc(12,o,2,0,"mat-error",8),t.YNc(13,m,2,0,"mat-error",8),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"End Date"),t.qZA(),t._UZ(17,"input",9),t.YNc(18,d,2,0,"mat-error",8),t.YNc(19,D,2,0,"mat-error",8),t.qZA(),t._UZ(20,"custom-input-autocomplete",10),t.YNc(21,G,2,0,"mat-error",8),t.TgZ(22,"mat-form-field",11)(23,"mat-label"),t._uU(24," Starting Customer Suffix "),t.qZA(),t._UZ(25,"input",12),t.YNc(26,Y,2,0,"mat-error",8),t.qZA(),t.TgZ(27,"mat-form-field",11)(28,"mat-label"),t._uU(29," Starting Customer Suffix II "),t.qZA(),t._UZ(30,"input",13),t.YNc(31,y,2,0,"mat-error",8),t.qZA(),t._UZ(32,"custom-input-autocomplete",14),t.YNc(33,Q,2,0,"mat-error",8),t.TgZ(34,"mat-form-field",11)(35,"mat-label"),t._uU(36,"Ending Customer Suffix"),t.qZA(),t._UZ(37,"input",15),t.YNc(38,K,2,0,"mat-error",8),t.qZA(),t.TgZ(39,"mat-form-field",11)(40,"mat-label"),t._uU(41,"Ending Customer Suffix II"),t.qZA(),t._UZ(42,"input",16),t.YNc(43,W,2,0,"mat-error",8),t.qZA(),t._UZ(44,"br")(45,"custom-input-autocomplete",17)(46,"custom-input-autocomplete",18),t.YNc(47,F,2,0,"mat-error",8),t._UZ(48,"custom-input-autocomplete",19),t.YNc(49,k,2,0,"mat-error",8),t._UZ(50,"custom-input-autocomplete",20),t.YNc(51,w,2,0,"mat-error",8),t._UZ(52,"custom-input-autocomplete",21)(53,"custom-input-autocomplete",22),t.YNc(54,j,5,1,"mat-form-field",23),t.TgZ(55,"mat-form-field",11)(56,"mat-label"),t._uU(57,"Report Name"),t.qZA(),t._UZ(58,"input",24),t.YNc(59,H,2,0,"mat-error",8),t.qZA(),t.TgZ(60,"mat-form-field",11)(61,"mat-label"),t._uU(62,"Report Description"),t.qZA(),t._UZ(63,"input",25),t.YNc(64,X,2,0,"mat-error",8),t.qZA(),t.YNc(65,rt,5,1,"mat-form-field",23),t.qZA()(),t.TgZ(66,"button",26),t.NdJ("click",function(){return r.GenerateSalesJournal()}),t._uU(67,"Submit"),t.qZA()()()()),2&e){let i,p,_,N,b,U,B,J,R,P,x,L,M,g,c;t.xp6(5),t.Q6J("formGroup",r.form),t.xp6(7),t.Q6J("ngIf",null==(i=r.form.get("StartDate"))?null:i.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(p=r.form.get("StartDate"))?null:p.hasError("invalidDate")),t.xp6(5),t.Q6J("ngIf",null==(_=r.form.get("EndDate"))?null:_.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(N=r.form.get("EndDate"))?null:N.hasError("invalidDate")),t.xp6(1),t.Q6J("options",r.StartingCustomerOptions),t.xp6(1),t.Q6J("ngIf",null==(b=r.form.get("StartingCustomer"))?null:b.hasError("invalidStartingCustomer")),t.xp6(5),t.Q6J("ngIf",null==(U=r.form.get("StartingCustomerSuffix"))?null:U.hasError("invalidCharacter")),t.xp6(5),t.Q6J("ngIf",null==(B=r.form.get("StartingCustomerSuffix2"))?null:B.hasError("invalidCharacter")),t.xp6(1),t.Q6J("options",r.EndingCustomerOptions),t.xp6(1),t.Q6J("ngIf",null==(J=r.form.get("EndingCustomer"))?null:J.hasError("invalidEndingCustomer")),t.xp6(5),t.Q6J("ngIf",null==(R=r.form.get("EndingCustomerSuffix"))?null:R.hasError("invalidCharacter")),t.xp6(5),t.Q6J("ngIf",null==(P=r.form.get("EndingCustomerSuffix2"))?null:P.hasError("invalidCharacter")),t.xp6(2),t.Q6J("options",r.StartingBuildingNumberOptions),t.xp6(1),t.Q6J("options",r.EndingBuildingNumberOptions),t.xp6(1),t.Q6J("ngIf",null==(x=r.form.get("EndingBuildingNumber"))?null:x.hasError("invalidEndingBuildingNumber")),t.xp6(1),t.Q6J("options",r.SpecialAttributeOptions),t.xp6(1),t.Q6J("ngIf",null==(L=r.form.get("SpecialAttribute"))?null:L.hasError("invalidCharacter")),t.xp6(1),t.Q6J("options",r.SpecialAttributevalueOptions),t.xp6(1),t.Q6J("ngIf",null==(M=r.form.get("SpecialAttributeValue"))?null:M.hasError("invalidCharacter")),t.xp6(1),t.Q6J("options",r.reportBreakoutOptions),t.xp6(1),t.Q6J("options",r.OutputOptions),t.xp6(1),t.Q6J("ngIf",r.shouldDisplayPrintSupport()),t.xp6(5),t.Q6J("ngIf",(null==(g=r.form.get("ReportName"))?null:g.invalid)&&((null==(g=r.form.get("ReportName"))?null:g.dirty)||(null==(g=r.form.get("ReportName"))?null:g.touched))),t.xp6(5),t.Q6J("ngIf",(null==(c=r.form.get("ReportDesc"))?null:c.invalid)&&((null==(c=r.form.get("ReportDesc"))?null:c.dirty)||(null==(c=r.form.get("ReportDesc"))?null:c.touched))),t.xp6(1),t.Q6J("ngIf",r.shouldDisplayEmailField())}},dependencies:[v.m,I.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,Z.lW,E.TO,E.KE,E.hX,V.Nt,s.a8,s.dk,s.dn,s.n5,h.j,f.L]}),a})()},39505:(q,S,n)=>{n.d(S,{L:()=>V});var l=n(24006),h=n(59549),v=n(69751),O=n(68675),A=n(54004),t=n(94650),C=n(36895),T=n(47957),I=n(3238),Z=n(44144);function E(s,f){if(1&s&&(t.TgZ(0,"mat-option",4),t._uU(1),t.qZA()),2&s){const o=f.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}let V=(()=>{class s{constructor(o){this.fb=o,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=m=>{},this.onChange=m=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new v.y,this.filteredOptions=this.control.valueChanges.pipe((0,O.O)(this.value),(0,A.U)(m=>this._filter(m)))}setDescribedByIds(o){}onContainerClick(o){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(o){null!=o&&(this.control.setValue(o),this.value=o)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o}_filter(o){if(null==o||0==o.length)return this.options;const m=o.toLowerCase(),d=this.options.filter(D=>D.toLowerCase().includes(m));return!this.disabled&&1===d.length&&this.control.value!=d[0]&&o.length>=(this.previousValue?.length??0)&&this.control.setValue(d[0]),this.onChange(this.control.value),this.previousValue=this.control.value,d}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(l.qu))},s.\u0275cmp=t.Xpm({type:s,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(o,m){2&o&&t.uIk("aria-describedby",m.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[t._Bn([{provide:l.JU,multi:!0,useExisting:s},{provide:h.Eo,useExisting:s}],[{provide:l.gN,useExisting:l.sg}])],decls:8,vars:8,consts:[[3,"appearance"],["matInput","",3,"id","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,m){if(1&o&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t._UZ(3,"input",1),t.TgZ(4,"mat-autocomplete",null,2),t.YNc(6,E,2,2,"mat-option",3),t.ALo(7,"async"),t.qZA()()),2&o){const d=t.MAs(5);t.Q6J("appearance",m.appearance),t.xp6(2),t.Oqu(m.label),t.xp6(1),t.Q6J("id",m.id)("formControl",m.control)("matAutocomplete",d),t.xp6(3),t.Q6J("ngForOf",t.lcZ(7,6,m.filteredOptions))}},dependencies:[C.sg,l.Fj,l.JJ,l.oH,T.XC,T.ZL,I.ey,h.KE,h.hX,Z.Nt,C.Ov]}),s})()}}]);