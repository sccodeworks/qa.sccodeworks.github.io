"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[4711],{39505:(S,g,n)=>{n.d(g,{L:()=>P});var _=n(24006),f=n(59549),c=n(69751),A=n(68675),t=n(54004),a=n(94650),y=n(36895),T=n(47957),D=n(3238),v=n(44144);function E(u,h){if(1&u&&(a.TgZ(0,"mat-option",4),a._uU(1),a.qZA()),2&u){const i=h.$implicit;a.Q6J("value",i),a.xp6(1),a.Oqu(i)}}let P=(()=>{class u{constructor(i){this.fb=i,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=p=>{},this.onChange=p=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new c.y,this.filteredOptions=this.control.valueChanges.pipe((0,A.O)(this.value),(0,t.U)(p=>this._filter(p)))}setDescribedByIds(i){}onContainerClick(i){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(i){null!=i&&(this.control.setValue(i),this.value=i)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i}_filter(i){if(null==i||0==i.length)return this.options;const p=i.toLowerCase(),d=this.options.filter(O=>O.toLowerCase().includes(p));return!this.disabled&&1===d.length&&this.control.value!=d[0]&&i.length>=(this.previousValue?.length??0)&&this.control.setValue(d[0]),this.onChange(this.control.value),this.previousValue=this.control.value,d}}return u.\u0275fac=function(i){return new(i||u)(a.Y36(_.qu))},u.\u0275cmp=a.Xpm({type:u,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(i,p){2&i&&a.uIk("aria-describedby",p.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[a._Bn([{provide:_.JU,multi:!0,useExisting:u},{provide:f.Eo,useExisting:u}],[{provide:_.gN,useExisting:_.sg}])],decls:8,vars:8,consts:[[3,"appearance"],["matInput","",3,"id","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,p){if(1&i&&(a.TgZ(0,"mat-form-field",0)(1,"mat-label"),a._uU(2),a.qZA(),a._UZ(3,"input",1),a.TgZ(4,"mat-autocomplete",null,2),a.YNc(6,E,2,2,"mat-option",3),a.ALo(7,"async"),a.qZA()()),2&i){const d=a.MAs(5);a.Q6J("appearance",p.appearance),a.xp6(2),a.Oqu(p.label),a.xp6(1),a.Q6J("id",p.id)("formControl",p.control)("matAutocomplete",d),a.xp6(3),a.Q6J("ngForOf",a.lcZ(7,6,p.filteredOptions))}},dependencies:[y.sg,_.Fj,_.JJ,_.oH,T.XC,T.ZL,D.ey,f.KE,f.hX,v.Nt,y.Ov]}),u})()},74711:(S,g,n)=>{n.r(g),n.d(g,{ActivitySupplyPoolComponent:()=>z});var _=n(98739),f=n(70879),c=n(7155),A=n(50692),t=n(94650),a=n(24006),y=n(19132),T=n(65412),D=n(11527),v=n(36895),E=n(97392),P=n(4859),u=n(59549),h=n(44144),i=n(73546),p=n(34894),d=n(39505);function O(e,l){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use DD-MM-YYYY. "),t.qZA())}function Z(e,l){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use DD-MM-YYYY. "),t.qZA())}function U(e,l){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Date"),t.qZA())}function M(e,l){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o.WTDATE)}}function I(e,l){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Reference"),t.qZA())}function B(e,l){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o.WKREFNO)}}function N(e,l){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Wr/Bol"),t.qZA())}function R(e,l){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o.WKDOCN)}}function b(e,l){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Description"),t.qZA())}function L(e,l){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o.WKTDESC)}}function W(e,l){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Transaction Type"),t.qZA())}function Y(e,l){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o.WKTTYPE)}}function x(e,l){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Quantity"),t.qZA())}function K(e,l){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o.SNQTY)}}function Q(e,l){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Balance"),t.qZA())}function J(e,l){if(1&e&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&e){const o=l.$implicit;t.xp6(1),t.Oqu(o.WBALNC)}}function q(e,l){1&e&&t._UZ(0,"tr",37)}function F(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"tr",38),t.NdJ("click",function(){const m=t.CHM(o).$implicit,C=t.oxw();return t.KtG(C.rowClick(m))}),t.qZA()}}const w=function(){return[8,16,24]};let z=(()=>{class e{constructor(o,s,r,m){this.fb=o,this.router=s,this.matDialog=r,this.supplyPoolSvc=m,this.displayedColumns=["Date","Reference","WrBol","Description","TransType","Quantity","Balance"],this.searchTextDisplay=!1,this.dataSource=new c.by,this.duplicateSource=[],this.editedRows=[],this.columnShowHideList=[],this.user=localStorage.getItem("userName")||"",this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.includeOptions=["I","O","A"],this.url="/main-nav/supplyPool/read",this.date=new Date,this.firstDay=new Date(this.date.getFullYear(),this.date.getMonth(),1),this.statusValue="AC"}ngOnInit(){const o=(new Date).toISOString().split("T")[0];this.element=history.state;const s=this.pageSize;this.editedRows=[];const r=this.pageNumber;this.form=this.fb.group({supplyType:this.element.S3TYPE,pool:this.element.WKNAME,startDate:this.firstDay.toLocaleDateString("fr-CA"),endDate:o,status:this.statusValue,includeType1:"",includeType2:"",includeType3:""}),this.getActivity(s,r),this.dataSource.filterPredicate=this.createFilter()}getActivity(o,s){var r=this.form.value;this.poolSubscription&&this.poolSubscription.unsubscribe(),this.poolSubscription=this.supplyPoolSvc.getSupplyPoolActivity(this.user,this.element.S3TYPE,this.element.S3STOR,this.element.S3SSFX,this.element.S3CONS,this.element.S3CARR,r.startDate,r.endDate,r.includeType1,r.includeType2,r.includeType3,o,s).subscribe(m=>{var C=JSON.parse(m[0].data[1]?.value);this.dataSource.data=C.returnedData,this.totalRecords=C.TotalRecords})}getActivityBySearch(o){const s=this.pageSize;this.currentFilters=o,this.paginator.firstPage(),this.getActivity(s,this.pageNumber)}createFilter(){return(o,s)=>{const r=JSON.parse(s);return Object.keys(r).every(m=>o[m].toString().toLowerCase().includes(r[m].toLowerCase()))}}onPaginateChange(o){this.pageSize=o.pageSize,this.getActivity(o.pageSize,o.pageIndex+1)}ngOnDestroy(){this.poolSubscription&&this.poolSubscription.unsubscribe()}rowClick(o){this.selectedRow=o}searchSupplyPool(){this.searchTextDisplay=1!=this.searchTextDisplay}onBack(){this.router.navigate([this.url])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(a.qu),t.Y36(y.F0),t.Y36(T.uw),t.Y36(D.x))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-activity-supply-pool"]],viewQuery:function(o,s){if(1&o&&t.Gf(_.NW,5),2&o){let r;t.iGM(r=t.CRH())&&(s.paginator=r.first)}},standalone:!0,features:[t.jDz],decls:73,vars:13,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","supplyType","appUppercase",""],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["type","date","matInput","","formControlName","startDate"],[4,"ngIf"],["type","date","matInput","","formControlName","endDate"],["readonly","","matInput","","formControlName","pool"],["readonly","","matInput","","formControlName","status"],["appearance","outline","formControlName","includeType1","label","Include Type1",1,"full-width",3,"options"],["appearance","outline","formControlName","includeType2","label","Include Type2",1,"full-width",3,"options"],["appearance","outline","formControlName","includeType3","label","Include Type3",1,"full-width",3,"options"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Date"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Reference"],["matColumnDef","WrBol"],["matColumnDef","Description"],["matColumnDef","TransType"],["matColumnDef","Quantity"],["matColumnDef","Balance"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(o,s){if(1&o&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return s.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Supply Activity Inquiry"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4),t.NdJ("ngSubmit",function(){return s.getActivityBySearch(s.form.value)}),t.TgZ(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Supply Type"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"div",9)(16,"label",10),t._uU(17,"Date"),t.qZA(),t.TgZ(18,"div",11)(19,"mat-form-field",7)(20,"mat-label"),t._uU(21,"Start Date"),t.qZA(),t._UZ(22,"input",12),t.YNc(23,O,2,0,"mat-error",13),t.qZA(),t.TgZ(24,"mat-form-field",7)(25,"mat-label"),t._uU(26,"End Date"),t.qZA(),t._UZ(27,"input",14),t.YNc(28,Z,2,0,"mat-error",13),t.qZA()()(),t._UZ(29,"br"),t.TgZ(30,"mat-form-field",7)(31,"mat-label"),t._uU(32,"Pool"),t.qZA(),t._UZ(33,"input",15),t.qZA(),t.TgZ(34,"mat-form-field",7)(35,"mat-label"),t._uU(36,"Status "),t.qZA(),t._UZ(37,"input",16),t.qZA(),t.TgZ(38,"div",9)(39,"label",10),t._uU(40,"Include Types"),t.qZA(),t.TgZ(41,"div",11),t._UZ(42,"custom-input-autocomplete",17)(43,"custom-input-autocomplete",18)(44,"custom-input-autocomplete",19),t.qZA()()()(),t.TgZ(45,"button",20),t._uU(46," Search "),t.qZA()()(),t.TgZ(47,"table",21),t.ynx(48,22),t.YNc(49,U,2,0,"th",23),t.YNc(50,M,2,1,"td",24),t.BQk(),t.ynx(51,25),t.YNc(52,I,2,0,"th",23),t.YNc(53,B,2,1,"td",24),t.BQk(),t.ynx(54,26),t.YNc(55,N,2,0,"th",23),t.YNc(56,R,2,1,"td",24),t.BQk(),t.ynx(57,27),t.YNc(58,b,2,0,"th",23),t.YNc(59,L,2,1,"td",24),t.BQk(),t.ynx(60,28),t.YNc(61,W,2,0,"th",23),t.YNc(62,Y,2,1,"td",24),t.BQk(),t.ynx(63,29),t.YNc(64,x,2,0,"th",23),t.YNc(65,K,2,1,"td",24),t.BQk(),t.ynx(66,30),t.YNc(67,Q,2,0,"th",23),t.YNc(68,J,2,1,"td",24),t.BQk(),t.YNc(69,q,1,0,"tr",31),t.YNc(70,F,1,0,"tr",32),t.qZA(),t.TgZ(71,"mat-paginator",33,34),t.NdJ("page",function(m){return s.onPaginateChange(m)}),t.qZA()()),2&o){let r,m;t.xp6(8),t.Q6J("formGroup",s.form),t.xp6(15),t.Q6J("ngIf",null==(r=s.form.get("startDate"))?null:r.hasError("invalidDate")),t.xp6(5),t.Q6J("ngIf",null==(m=s.form.get("endDate"))?null:m.hasError("invalidDate")),t.xp6(14),t.Q6J("options",s.includeOptions),t.xp6(1),t.Q6J("options",s.includeOptions),t.xp6(1),t.Q6J("options",s.includeOptions),t.xp6(3),t.Q6J("dataSource",s.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(1),t.Q6J("length",s.totalRecords)("pageSizeOptions",t.DdM(12,w))("pageSize",s.pageSize)}},dependencies:[f.m,v.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,_.NW,E.Hw,P.lW,u.TO,u.KE,u.hX,h.Nt,i.a8,i.dk,i.dn,i.n5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,p.e,A.j,d.L]}),e})()}}]);