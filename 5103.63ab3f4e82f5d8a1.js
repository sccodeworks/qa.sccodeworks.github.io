"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[5103],{69501:(U,D,r)=>{r.d(D,{J:()=>h});var p=r(24006),c=r(47957),T=r(59549),O=r(44144),v=r(69751),S=r(68675),M=r(54004),t=r(70879),o=r(94650),a=r(36895),s=r(3238);function u(l,_){if(1&l&&(o.TgZ(0,"mat-option",6),o._uU(1),o.qZA()),2&l){const e=_.$implicit;o.Q6J("value",e),o.xp6(1),o.AsE(" ",e.value," - ",e.description," ")}}function d(l,_){1&l&&(o.TgZ(0,"mat-error"),o._uU(1,"Please select a valid option."),o.qZA())}let h=(()=>{class l{constructor(e){this.fb=e,this.options=[],this.value=null,this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.onChange=i=>{this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new v.y,this.filteredOptions=this.control.valueChanges.pipe((0,S.O)(""),(0,M.U)(i=>this._filter(i)))}_filter(e){if(null==e||0===e.length)return this.errorState=!1,this.options;let i="";"string"==typeof e&&(i=e.toLowerCase());const C=this.options.filter(f=>{const E=f.value?.toString().toLowerCase(),n=f.description?.toLowerCase();return E.includes(i)||n.includes(i)});return this.errorState=0===C.length&&e.length>0,C}writeValue(e){this.control.setValue(e&&"object"==typeof e?`${e.value} - ${e.description}`:"string"==typeof e?e:""),this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0}onOptionSelected(e){this.writeValue(e),this.onChange(e.value),this.autocompleteTrigger.closePanel()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}setDescribedByIds(e){}onContainerClick(e){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}}return l.\u0275fac=function(e){return new(e||l)(o.Y36(p.qu))},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-dropdown"]],viewQuery:function(e,i){if(1&e&&o.Gf(c.ZL,7),2&e){let C;o.iGM(C=o.CRH())&&(i.autocompleteTrigger=C.first)}},hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("aria-describedby",i.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},standalone:!0,features:[o._Bn([{provide:p.JU,multi:!0,useExisting:l},{provide:T.Eo,useExisting:l}],[{provide:p.gN,useExisting:p.sg}]),o.jDz],decls:9,vars:9,consts:[[3,"appearance"],["matInput","",3,"formControl","placeholder","matAutocomplete","blur"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(e,i){if(1&e&&(o.TgZ(0,"mat-form-field",0)(1,"mat-label"),o._uU(2),o.qZA(),o.TgZ(3,"input",1),o.NdJ("blur",function(){return i.markAsTouched()}),o.qZA(),o.TgZ(4,"mat-autocomplete",2,3),o.NdJ("optionSelected",function(f){return i.onOptionSelected(f.option.value)}),o.YNc(6,u,2,3,"mat-option",4),o.ALo(7,"async"),o.qZA(),o.YNc(8,d,2,0,"mat-error",5),o.qZA()),2&e){const C=o.MAs(5);o.Q6J("appearance",i.appearance),o.xp6(2),o.Oqu(i.label),o.xp6(1),o.Q6J("formControl",i.control)("placeholder",i.placeholder)("matAutocomplete",C),o.xp6(3),o.Q6J("ngForOf",o.lcZ(7,7,i.filteredOptions)),o.xp6(2),o.Q6J("ngIf",i.control.invalid&&i.control.touched)}},dependencies:[t.m,a.sg,a.O5,p.Fj,p.JJ,p.oH,T.TO,T.KE,T.hX,O.Nt,s.ey,a.Ov,p.UX,c.Bb,c.XC,c.ZL,T.lN,O.c]}),l})()},16799:(U,D,r)=>{r.d(D,{x:()=>M});var p=r(80529),c=r(75625),T=r(70262),O=r(62843),v=r(92340),S=r(94650);let M=(()=>{class t{constructor(a){this.httpClient=a,this.url=v.N.API_BASE_URL,this.httpHeader={headers:new p.WM({"Content-Type":"application/json"})}}getTaskCodes(a,s,u,d,h,l){return this.httpClient.get(this.url+`/TaskCodes/read?user=${a}&storer=${s}&suffix=${u}&status=${d}&recordsPerPage=${h}&pageNo=${l}`)}TaskCodesCreate(a,s,u,d,h,l,_,e,i,C,f,E,n,m){return this.httpClient.post(this.url+"/TaskCodes/create",{TSTASK:a,TSSTOR:s,TSSSFX:u,TSDESC:d,TSMINM:h,TSBASE:l,TSRATE:_,TSLEGC:e,TSLEGS:i,TSMKUP:C,TSQUOT:f,TSAUTO:E,TSVARC:n,user:m}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}TaskCodesUpdate(a,s,u,d,h,l,_,e,i,C,f,E,n,m){return this.httpClient.put(this.url+"/TaskCodes/update",{TSTASK:a,TSSTOR:s,TSSSFX:u,TSDESC:d,TSMINM:h,TSBASE:l,TSRATE:_,TSLEGC:e,TSLEGS:i,TSMKUP:C,TSQUOT:f,TSAUTO:E,TSVARC:n,user:m}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}taskCodesCopyTask(a,s,u,d,h,l,_,e,i,C,f,E,n,m,A,g){return this.httpClient.put(this.url+"/TaskCodes/copyTask",{user:a,taskCode:s,storer1:u,storerSuffix1:d,storer2:h,storerSuffix2:l,description:_,minimum:e,base:i,rate:C,ledgerCode:f,ledgerCodeSuffix:E,markup:n,taskOnQuote:m,autoCharge:A,recalculate:g}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}TaskCodesCopySet(a,s,u,d){return this.httpClient.put(this.url+"/TaskCodes/CopySet",{storer:a,suffix:s,storerNumber:u,storerSuffix:d}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}taskCodesConstraint(a,s,u,d,h,l,_,e){return this.httpClient.post(this.url+"/TaskCodes/constraint",{documentType:a,taskCode:s,storer:u,suffix:d,constraintF:h,relationship:l,constraintV:_,status:e}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}TaskCodesActivate(a,s,u){return this.httpClient.put(this.url+"/TaskCodes/activate",{taskCode:a,storer:s,suffix:u}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}TaskCodesDeactivate(a,s,u){return this.httpClient.put(this.url+"/TaskCodes/Deactivate",{taskCode:a,storer:s,suffix:u}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}taskCodesDelete(a,s,u){return this.httpClient.delete(this.url+`/TaskCodes/delete?taskId=${a}&storer=${s}&suffix=${u}`)}getTaskCodesAttributes(a,s,u,d){return this.httpClient.get(this.url+`/TaskCodes/Attributes?user=${a}&key=${s}&recordsPerPage=${u}&pageNo=${d}`)}TaskCodesAttributesCreate(a,s,u,d,h,l,_,e){return this.httpClient.post(this.url+"/TaskCodes/Attributes/create",{user:a,EAFLID:s,EAKEY:u,EAATRB:d,EAVALU:h,EASTAT:l,EATMST:_,EAUSER:e}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}TaskCodesAttributesUpdate(a,s,u,d,h,l,_,e){return this.httpClient.put(this.url+"/TaskCodes/Attributes/update",{EAFLID:a,EAKEY:s,EAATRB:u,EAVALU:d,EASTAT:h,EATMST:l,EAUSER:_,user:e}).pipe((0,c.X)(1),(0,T.K)(this.httpError))}taskCodesAttributesDelete(a,s){return this.httpClient.delete(this.url+`/TaskCodes/Attributes/delete?key=${a}&attribute=${s}`)}httpError(a){let s="";return s=a.error instanceof ErrorEvent?a.error.message:`Error Code: ${a.status}\nMessage: ${a.message}`,console.log(s),(0,O._)(()=>new Error(s))}}return t.\u0275fac=function(a){return new(a||t)(S.LFG(p.eN))},t.\u0275prov=S.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},5103:(U,D,r)=>{r.r(D),r.d(D,{WwTaskcodesAddComponent:()=>C});var p=r(24006),c=r(65412),T=r(70879),O=r(35226),v=r.n(O),S=r(48529),M=r(69501),t=r(94650),o=r(19132),a=r(16799),s=r(11240),u=r(97392),d=r(4859),h=r(59549),l=r(44144),_=r(84385),e=r(3238),i=r(73546);let C=(()=>{class f{constructor(n,m,A,g,P,Z){this.data=n,this.dialogRef=m,this.router=A,this.fb=g,this.TaskCodesService=P,this.storerSvc=Z,this.user=localStorage.getItem("userName")||"",this.storerOptions=[]}fetchStorer(){this.storerSvc.getnewStorer(this.user,"","","","","","","").subscribe(n=>{this.result=n;var m=this.result[0].data[1]?.value,A=JSON.parse(m);this.storerSource=A.returnedData,console.log(this.storerSource),this.storerOptions=this.storerSource.map(g=>({value:g.STORE,description:g.STNAME}))})}ngOnDestroy(){this.getAll2Subscription&&this.getAll2Subscription.unsubscribe()}ngOnInit(){this.form=this.fb.group({TSTASK:"",TSSTOR:"",TSSSFX:"",TSDESC:"",TSMINM:".00",TSBASE:"",TSRATE:".0000",TSLEGC:["",[p.kI.required]],TSLEGS:"",TSMKUP:"",TSQUOT:"Y",TSAUTO:"N",TSVARC:"Y"}),this.fetchStorer()}TaskCodesCreate(){var n=this.form.value;this.getAll2Subscription&&this.getAll2Subscription.unsubscribe(),this.getAll2Subscription=this.TaskCodesService.TaskCodesCreate(S.R.fullSlotAisl(n.TSTASK),n.TSSTOR,n.TSSSFX,n.TSDESC,n.TSMINM,n.TSBASE,n.TSRATE,n.TSLEGC,n.TSLEGS,n.TSMKUP,n.TSQUOT,n.TSAUTO,n.TSVARC,this.user).subscribe(m=>{const g=JSON.parse(m[0].data[m[0].data.length-1].value).returnedData.message;"Record Created Successfully"===g?(this.successMessage(g),this.closeDialog(),this.router.navigate(["/main-nav/task-codes/read"])):this.failureMessage(g)})}successMessage(n){v().fire(n,"","success")}failureMessage(n){v().fire(n,"","error")}closeDialog(){this.dialogRef.close()}}return f.\u0275fac=function(n){return new(n||f)(t.Y36(c.WI),t.Y36(c.so),t.Y36(o.F0),t.Y36(p.qu),t.Y36(a.x),t.Y36(s.h))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-ww-taskcodes-add"]],standalone:!0,features:[t.jDz],decls:74,vars:3,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","TSTASK"],["appearance","outline","formControlName","TSSTOR","label","Storer","placeholder","Search or Enter storer",3,"options"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","TSDESC"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","TSRATE"],["matInput","","formControlName","TSBASE",2,"text-transform","uppercase"],["matInput","","formControlName","TSMINM"],["matInput","","formControlName","TSLEGC"],["appearance","outline"],["matInput","","formControlName","TSLEGS"],["matInput","","formControlName","TSMKUP"],["formControlName","TSAUTO"],["value","I"],["value","O"],["value","N"],["matInput","","formControlName","TSVARC",2,"text-transform","uppercase"],["matInput","","formControlName","TSQUOT",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(n,m){1&n&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Task Code Maintenance"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return m.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Task Code"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t._UZ(16,"app-dropdown",10),t.TgZ(17,"mat-form-field",11)(18,"mat-label"),t._uU(19,"Description"),t.qZA(),t.TgZ(20,"textarea",12),t._uU(21," Description"),t.qZA()(),t.TgZ(22,"div",13)(23,"label",14),t._uU(24,"Rate/Base"),t.qZA(),t.TgZ(25,"div",15)(26,"mat-form-field",8)(27,"mat-label"),t._uU(28,"Rate"),t.qZA(),t._UZ(29,"input",16),t.qZA(),t.TgZ(30,"mat-form-field",8)(31,"mat-label"),t._uU(32,"Base"),t.qZA(),t._UZ(33,"input",17),t.qZA()()(),t.TgZ(34,"mat-form-field",8)(35,"mat-label"),t._uU(36,"Minimum"),t.qZA(),t._UZ(37,"input",18),t.qZA(),t.TgZ(38,"div",13)(39,"label",14),t._uU(40,"Ledger Code"),t.qZA(),t.TgZ(41,"div",15)(42,"mat-form-field",8)(43,"mat-label"),t._uU(44,"Ledger"),t.qZA(),t._UZ(45,"input",19),t.qZA(),t.TgZ(46,"mat-form-field",20)(47,"mat-label"),t._uU(48,"sub-code"),t.qZA(),t._UZ(49,"input",21),t.qZA()()(),t.TgZ(50,"mat-form-field",8)(51,"mat-label"),t._uU(52,"Markup"),t.qZA(),t._UZ(53,"input",22),t.qZA(),t.TgZ(54,"mat-form-field",8)(55,"mat-label"),t._uU(56,"Auto Charge"),t.qZA(),t.TgZ(57,"mat-select",23)(58,"mat-option",24),t._uU(59,"I"),t.qZA(),t.TgZ(60,"mat-option",25),t._uU(61,"O"),t.qZA(),t.TgZ(62,"mat-option",26),t._uU(63,"N"),t.qZA()()(),t.TgZ(64,"mat-form-field",8)(65,"mat-label"),t._uU(66,"Recalculate At Posting"),t.qZA(),t._UZ(67,"input",27),t.qZA(),t.TgZ(68,"mat-form-field",8)(69,"mat-label"),t._uU(70,"Task on Quote"),t.qZA(),t._UZ(71,"input",28),t.qZA()()(),t.TgZ(72,"button",29),t.NdJ("click",function(){return m.TaskCodesCreate()}),t._uU(73,"Add"),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",m.form),t.xp6(7),t.Q6J("options",m.storerOptions),t.xp6(56),t.Q6J("disabled",!(m.form.valid&&m.form.dirty)))},dependencies:[T.m,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,u.Hw,d.lW,h.KE,h.hX,l.Nt,_.gD,e.ey,i.a8,i.dk,i.dn,i.n5,M.J]}),f})()}}]);