"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[67131],{67131:(P,b,s)=>{s.r(b),s.d(b,{InvInquirySiType2Component:()=>G});var D=s(98739),u=s(7155),d=s(70879),A=s(36895),e=s(94650),g=s(24006),Z=s(65412),M=s(19132),T=s(81543),N=s(97392),t=s(4859),i=s(59549),r=s(44144),l=s(99602),c=s(73546);function _(a,m){1&a&&(e.TgZ(0,"th",39),e._uU(1," Item "),e.qZA())}function v(a,m){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const n=m.$implicit;e.xp6(1),e.hij(" ",n.WKITDSC," ")}}function f(a,m){1&a&&(e.TgZ(0,"th",39),e._uU(1," On Hand Balance "),e.qZA())}function I(a,m){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const n=m.$implicit;e.xp6(1),e.AsE(" ",0!==n.WK1BALN?n.WK1BALN:""," ",0!==n.WK1BUNT?n.WK1BUNT:""," ")}}function C(a,m){1&a&&(e.TgZ(0,"th",39),e._uU(1," On Hand Weight "),e.qZA())}function S(a,m){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const n=m.$implicit;e.xp6(1),e.AsE(" ",0!==n.WK1WGHT?n.WK1WGHT:""," ",n.WK1WUNT," ")}}function R(a,m){1&a&&(e.TgZ(0,"th",39),e._uU(1," Rate "),e.qZA())}function O(a,m){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"number"),e.qZA()),2&a){const n=m.$implicit;e.xp6(1),e.AsE(" ",0!==n.WKRATE?e.xi3(2,2,n.WKRATE,"1.2-2"):""," ",n.WK1QUNT," ")}}function K(a,m){1&a&&(e.TgZ(0,"th",39),e._uU(1," Charge Amount "),e.qZA())}function W(a,m){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const n=m.$implicit;e.xp6(1),e.hij(" ",0!==n.WKAMT?n.WKAMT:"","")}}function q(a,m){1&a&&(e.TgZ(0,"th",39),e._uU(1," Minimum charge "),e.qZA())}function $(a,m){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const n=m.$implicit;e.xp6(1),e.Oqu(n.WK1MIN)}}function B(a,m){1&a&&e._UZ(0,"tr",41)}function L(a,m){1&a&&e._UZ(0,"tr",42)}const x=function(){return[8,16,24]};let G=(()=>{class a{constructor(n,o,p,h){this.fb=n,this.matDialog=o,this.router=p,this.RecvSvc=h,this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.duplicateSource=[],this.dataSource=new u.by,this.user=localStorage.getItem("userName")||"",this.displayedColumns=["Item","OnHandBalance","OnHandWeight","Rate","ChargeAmount","Minimumcharge"],this.period="",this.totalAmountDue=0,this.total=0,this.item="",this.receivablesUrl="/main-nav/receivables/read"}ngOnInit(){this.element=history.state,console.log(this.element);const n=new Date,o=(0,A.p6)(n,"yyyy-MM-dd","en-US"),p=(0,A.p6)(n,"HH:mm","en-US");this.form=this.fb.group({Date:[new Date],Time:[this.formatCurrentTime()],S1STOR:{value:this.element.Name,disabled:!0},INVNO:{value:this.element.invoice,disabled:!0},GENDT:{value:o,disabled:!0},GENTM:{value:p,disabled:!0},WKITEM:this.item}),this.getStorageInvoice(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const n=new Date;return`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`}ngOnDestroy(){this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe()}createFilter(){return(n,o)=>{const p=JSON.parse(o);return Object.keys(p).every(h=>n[h]?.toString().toLowerCase().includes(p[h].toLowerCase())||!1)}}resetSearch(){this.form.reset(),this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,1)}onPaginateChange(n){this.pageSize=n.pageSize,this.getStorageInvoice(n.pageSize,n.pageIndex+1)}getStorageInvoice(n,o){const p=this.currentFilters||{},{WKINVN:h=`${this.element.invoice}`}=p;this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe(),this.StorageInvoicesSubscription=this.RecvSvc.FreightInv(this.user,h,n,o).subscribe(y=>{console.log(y);var E=JSON.parse(y[0].data[1]?.value);const U=E.returnedData;this.dataSource.data=U,this.totalRecords=E.TotalRecords,this.loadGeneratedDateTime(U[0].WKGEND),this.totalAmountDue=E["Total Amount Due"],this.period=E.Period,this.item=E?.WKITEM||"",console.log("Assigned item:",this.item),this.form.patchValue({WKITEM:this.item})})}loadGeneratedDateTime(n){const o=n.replace('WKGEND":"',"").replace(/"/g,""),p="20"+o.substring(1,3),h=o.substring(3,5),y=o.substring(5,7),E=o.substring(7,9),U=o.substring(9,11);this.form.patchValue({GENDT:new Date(`${p}-${h}-${y}`),GENTM:`${E}:${U}`})}onBack(){this.router.navigate([this.receivablesUrl])}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(g.qu),e.Y36(Z.uw),e.Y36(M.F0),e.Y36(T.Z))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inv-inquiry-si-type2"]],viewQuery:function(n,o){if(1&n&&e.Gf(D.NW,5),2&n){let p;e.iGM(p=e.CRH())&&(o.paginator=p.first)}},standalone:!0,features:[e.jDz],decls:84,vars:17,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","INVNO",2,"text-transform","uppercase"],["readonly","","matInput","","formControlName","Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["DatePicker",""],["readonly","","matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],["appearance","outline",1,"full-width2"],["readonly","","matInput","",3,"value"],["matInput","","formControlName","WKITEM"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["readonly","","matInput","","formControlName","GENDT",3,"matDatepicker"],["GeneratedDatePicker",""],["readonly","","matInput","","type","time","formControlName","GENTM","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","readonly","","formControlName","S1STOR",2,"text-transform","uppercase"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","OnHandBalance"],["matColumnDef","OnHandWeight"],["matColumnDef","Rate"],["matColumnDef","ChargeAmount"],["matColumnDef","Minimumcharge"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],[1,"buttons","button3"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){if(1&n&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),e.NdJ("click",function(){return o.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before "),e.qZA()(),e._uU(6," Storage Invoice Inquiry"),e.qZA()(),e.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13," Invoice "),e.qZA(),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"mat-form-field",7)(16,"mat-label"),e._uU(17,"Date "),e.qZA(),e._UZ(18,"input",9)(19,"mat-datepicker-toggle",10)(20,"mat-datepicker",null,11),e.qZA(),e.TgZ(22,"mat-form-field",7)(23,"mat-label"),e._uU(24,"Time"),e.qZA(),e._UZ(25,"input",12),e.qZA(),e.TgZ(26,"mat-form-field",13)(27,"mat-label"),e._uU(28," Period "),e.qZA(),e._UZ(29,"input",14),e.qZA(),e.TgZ(30,"mat-form-field",7)(31,"mat-label"),e._uU(32,"Position to Item"),e.qZA(),e._UZ(33,"input",15),e.qZA(),e.TgZ(34,"div",16)(35,"label",17),e._uU(36,"Generated"),e.qZA(),e.TgZ(37,"div",18)(38,"mat-form-field",7)(39,"mat-label"),e._uU(40,"Generated Date "),e.qZA(),e._UZ(41,"input",19)(42,"mat-datepicker-toggle",10)(43,"mat-datepicker",null,20),e.qZA(),e.TgZ(45,"mat-form-field",7)(46,"mat-label"),e._uU(47,"Generated Time"),e.qZA(),e._UZ(48,"input",21),e.qZA()()(),e.TgZ(49,"mat-form-field",13)(50,"mat-label"),e._uU(51," Storer "),e.qZA(),e._UZ(52,"input",22),e.qZA()()()()(),e.TgZ(53,"table",23),e.ynx(54,24),e.YNc(55,_,2,0,"th",25),e.YNc(56,v,2,1,"td",26),e.BQk(),e.ynx(57,27),e.YNc(58,f,2,0,"th",25),e.YNc(59,I,2,2,"td",26),e.BQk(),e.ynx(60,28),e.YNc(61,C,2,0,"th",25),e.YNc(62,S,2,2,"td",26),e.BQk(),e.ynx(63,29),e.YNc(64,R,2,0,"th",25),e.YNc(65,O,3,5,"td",26),e.BQk(),e.ynx(66,30),e.YNc(67,K,2,0,"th",25),e.YNc(68,W,2,1,"td",26),e.BQk(),e.ynx(69,31),e.YNc(70,q,2,0,"th",25),e.YNc(71,$,2,1,"td",26),e.BQk(),e.YNc(72,B,1,0,"tr",32),e.YNc(73,L,1,0,"tr",33),e.qZA(),e._UZ(74,"br"),e.TgZ(75,"div",34),e._UZ(76,"br")(77,"br"),e.TgZ(78,"div",35)(79,"button",36),e._uU(80),e.ALo(81,"number"),e.qZA()()(),e.TgZ(82,"mat-paginator",37,38),e.NdJ("page",function(h){return o.onPaginateChange(h)}),e.qZA()()),2&n){const p=e.MAs(21),h=e.MAs(44);e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(10),e.Q6J("matDatepicker",p),e.xp6(1),e.Q6J("for",p),e.xp6(10),e.Q6J("value",o.period),e.xp6(12),e.Q6J("matDatepicker",h),e.xp6(1),e.Q6J("for",h),e.xp6(11),e.Q6J("dataSource",o.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(7),e.hij(" Total Amount : $",e.xi3(81,13,o.totalAmountDue,"1.2-2")," "),e.xp6(2),e.Q6J("length",o.totalRecords)("pageSizeOptions",e.DdM(16,x))("pageSize",o.pageSize)}},dependencies:[d.m,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.sg,g.u,D.NW,N.Hw,t.lW,i.KE,i.hX,i.R9,r.Nt,l.Mq,l.hl,l.nW,c.a8,c.dk,c.dn,c.n5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,A.JJ]}),a})()},81543:(P,b,s)=>{s.d(b,{Z:()=>M});var D=s(80529),u=s(75625),d=s(70262),A=s(54004),e=s(62843),g=s(92340),Z=s(94650);let M=(()=>{class T{constructor(t){this.httpClient=t,this.url=g.N.API_BASE_URL,this.recal="/Receivables/Recalculate",this.httpHeader={headers:new D.WM({"Content-Type":"application/json"})}}getReceivables(t,i,r,l,c,_,v,f,I,C,S,R,O){return this.httpClient.get(this.url+"/Receivables/read?",{params:{user:t,invoice:i??"",customerNumber:r??"",customerSuffix:l??"",customerSecondSuffix:c??"",refNumber:_??"",startDate:v??"",endDate:f??"",building:I??"",status:C??"",type:S??"",recordsPerPage:R??"",pageNo:O??""}})}getReceivablesDetails(t,i,r){return this.httpClient.get(this.url+`/Receivables/details/read?user=${t}&invoice=${i}&seqNum=${r}`)}getReceivableInquiry(t,i){return this.httpClient.get(this.url+`/Receivables/read/inquiry?user=${t}&invoice=${i}`)}getAdjustmentInquiry(t,i){return this.httpClient.get(this.url+`/Receivables/read/adjInquiry?user=${t}&invoice=${i}`)}getInvoiceInquiry(t,i,r){return this.httpClient.get(this.url+`/Receivables/read/invoiceInquiry?user=${t}&HGCTL=${i}&invoice=${r}`)}getReceivablesAdjustInvoice(){return this.httpClient.get(this.url+"/Receivables/invoiceinquiry")}getAll(t){return this.httpClient.get(this.url+`/Receivables/readAll?user=${t}`)}adjustInvoiceRead(t,i){return this.httpClient.get(this.url+`/Receivables/adjust/read?user=${t}&invoice=${i}`)}adjustInvoiceUpdate(t,i,r,l,c,_,v,f,I,C,S,R){return this.httpClient.put(this.url+"/Receivables/adjust/update",{user:t,invoice:i,sequence:r,date:l,amount:c,description:_,ledgerCode:v,ledgerSubCode:f,customer:I,suffix1:C,suffix2:S,status:R}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}creditinvoice(t,i,r,l,c,_,v,f,I,C){return this.httpClient.put(this.url+"/Receivables/update/credit",{invoiceNumber:t,building:i,date:r,type:l,description:c,customer:_,reference:v,amount:f,balance:I,reason:C}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}getComment(t,i,r,l){return this.httpClient.get(this.url+`/Receivables/comments/read?user=${t}&key=${i}&recordsPerPage=${r}&pageNo=${l}`)}updateComment(t,i,r,l,c,_){return this.httpClient.put(this.url+"/Receivables/comments/update",{user:t,fileID:i,key:r,sub:l,seq:c,comment:_}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}createComment(t,i,r,l,c){return this.httpClient.post(this.url+"/Receivables/comments/create",{user:t,fileID:i,key:r,sub:l,comment:c}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}deleteComment(t,i,r,l,c){return this.httpClient.delete(this.url+`/Receivables/comments/delete?user=${t}&fileID=${i}&key=${r}&sub=${l}&seq=${c}`)}Print(t,i,r,l,c){return this.httpClient.put(this.url+"/Receivables/Print",{InvoiceNumber:t,ReportType:i,FileExtension:r,EmailAddress:l,user:c}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}UpdateLedgerCode(t,i,r,l,c,_,v,f){return this.httpClient.put(this.url+"/Receivables/UpdateLedgerCode",{InvoiceNumber:t,SequenceNumber:i,InvoiceDate:r,LineAmount:l,LedgerCode:c,LedgerSubCode:_,BuildingNumber:v,user:f}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}EmailDetail(t,i){return this.httpClient.put(this.url+"/Receivables/Email/Details",{user:t,InvoiceNumber:i}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}EmailDetailsNew(t,i){return this.httpClient.put(this.url+"/Receivables/EmailDetailsNew",{user:t,InvoiceNumber:i}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}Recalculate(t,i){return this.httpClient.put(this.url+this.recal,{user:t,InvoiceNumber:i}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}ReceivingCover(t,i,r){return this.httpClient.put(this.url+"/Receivables/ReceivingCover",{user:t,InvoiceNumber:i,ReturnCode:r}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}MicCover(t,i,r,l,c){return this.httpClient.put(this.url+"/Receivables/MicCover",{user:t,InvoiceNumber:i,StorerNumber:r,StorerSuffix:l,ReturnCode:c}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}deleteReceivables(t,i){return this.httpClient.delete(this.url+`/Receivables/delete/receivable?invoice=${t}&description=${i}`)}FreightInv(t,i,r,l){return this.httpClient.get(this.url+"/Receivables/read/invoiceInquiry?",{params:{user:t,WKINVN:i??"",recordsPerPage:r??"",pageNo:l??""}})}readReceivablesTallyInquiryService(t,i){return this.httpClient.get(this.url+`/ihcrud/tallyinquiry?user=${t}&tally=${i}`).pipe((0,A.U)(r=>r[0]))}httpError(t){let i="";return i=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(i),(0,e._)(()=>new Error(i))}}return T.\u0275fac=function(t){return new(t||T)(Z.LFG(D.eN))},T.\u0275prov=Z.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()}}]);