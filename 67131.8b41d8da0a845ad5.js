"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[67131],{67131:(O,Z,l)=>{l.r(Z),l.d(Z,{InvInquirySiType2Component:()=>G});var D=l(98739),u=l(7155),d=l(70879),A=l(36895),e=l(94650),g=l(24006),b=l(65412),U=l(19132),T=l(81543),N=l(97392),t=l(4859),i=l(59549),n=l(44144),o=l(99602),c=l(73546);function _(r,m){1&r&&(e.TgZ(0,"th",40),e._uU(1," Item "),e.qZA())}function v(r,m){if(1&r&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&r){const a=m.$implicit;e.xp6(1),e.hij(" ",a.WKITDSC," ")}}function f(r,m){1&r&&(e.TgZ(0,"th",40),e._uU(1," On Hand Balance "),e.qZA())}function I(r,m){if(1&r&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&r){const a=m.$implicit;e.xp6(1),e.AsE(" ",0!==a.WK1BALN?a.WK1BALN:""," ",0!==a.WK1BUNT?a.WK1BUNT:""," ")}}function C(r,m){1&r&&(e.TgZ(0,"th",40),e._uU(1," On Hand Weight "),e.qZA())}function S(r,m){if(1&r&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&r){const a=m.$implicit;e.xp6(1),e.AsE(" ",0!==a.WK1WGHT?a.WK1WGHT:""," ",a.WK1WUNT," ")}}function R(r,m){1&r&&(e.TgZ(0,"th",40),e._uU(1," Rate "),e.qZA())}function P(r,m){if(1&r&&(e.TgZ(0,"td",41),e._uU(1),e.ALo(2,"number"),e.qZA()),2&r){const a=m.$implicit;e.xp6(1),e.AsE(" ",0!==a.WKRATE?e.xi3(2,2,a.WKRATE,"1.2-2"):""," ",a.WK1QUNT," ")}}function K(r,m){1&r&&(e.TgZ(0,"th",40),e._uU(1," Charge Amount "),e.qZA())}function W(r,m){if(1&r&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&r){const a=m.$implicit;e.xp6(1),e.hij(" ",0!==a.WKAMT?a.WKAMT:"","")}}function q(r,m){1&r&&(e.TgZ(0,"th",40),e._uU(1," Minimum charge "),e.qZA())}function B(r,m){if(1&r&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&r){const a=m.$implicit;e.xp6(1),e.Oqu(a.WK1MIN)}}function $(r,m){1&r&&e._UZ(0,"tr",42)}function L(r,m){1&r&&e._UZ(0,"tr",43)}const x=function(){return[8,16,24]};let G=(()=>{class r{constructor(a,s,p,h){this.fb=a,this.matDialog=s,this.router=p,this.RecvSvc=h,this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.duplicateSource=[],this.dataSource=new u.by,this.user=localStorage.getItem("userName")||"",this.displayedColumns=["Item","OnHandBalance","OnHandWeight","Rate","ChargeAmount","Minimumcharge"],this.period="",this.totalAmountDue=0,this.total=0,this.item="",this.receivablesUrl="/main-nav/receivables/read"}ngOnInit(){this.element=history.state,console.log(this.element);const a=new Date,s=(0,A.p6)(a,"yyyy-MM-dd","en-US"),p=(0,A.p6)(a,"HH:mm","en-US");this.form=this.fb.group({Date:[new Date],Time:[this.formatCurrentTime()],S1STOR:{value:this.element.Name,disabled:!0},INVNO:{value:this.element.invoice,disabled:!0},GENDT:{value:s,disabled:!0},GENTM:{value:p,disabled:!0},WKITEM:this.item}),this.getStorageInvoice(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const a=new Date;return`${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`}ngOnDestroy(){this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe()}createFilter(){return(a,s)=>{const p=JSON.parse(s);return Object.keys(p).every(h=>a[h]?.toString().toLowerCase().includes(p[h].toLowerCase())||!1)}}resetSearch(){this.form.reset(),this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,1)}onPaginateChange(a){this.pageSize=a.pageSize,this.getStorageInvoice(a.pageSize,a.pageIndex+1)}getStorageInvoice(a,s){const p=this.currentFilters||{},{WKINVN:h=`${this.element.invoice}`}=p;this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe(),this.StorageInvoicesSubscription=this.RecvSvc.FreightInv(this.user,h,a,s).subscribe(E=>{console.log(E);var y=JSON.parse(E[0].data[1]?.value);const M=y.returnedData;this.dataSource.data=M,this.totalRecords=y.TotalRecords,this.loadGeneratedDateTime(M[0].WKGEND),this.totalAmountDue=y["Total Amount Due"],this.period=y.Period,this.item=y?.WKITEM||"",console.log("Assigned item:",this.item),this.form.patchValue({WKITEM:this.item})})}loadGeneratedDateTime(a){const s=a.replace('WKGEND":"',"").replace(/"/g,""),p="20"+s.substring(1,3),h=s.substring(3,5),E=s.substring(5,7),y=s.substring(7,9),M=s.substring(9,11);this.form.patchValue({GENDT:new Date(`${p}-${h}-${E}`),GENTM:`${y}:${M}`})}onBack(){this.router.navigate([this.receivablesUrl])}}return r.\u0275fac=function(a){return new(a||r)(e.Y36(g.qu),e.Y36(b.uw),e.Y36(U.F0),e.Y36(T.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-inv-inquiry-si-type2"]],viewQuery:function(a,s){if(1&a&&e.Gf(D.NW,5),2&a){let p;e.iGM(p=e.CRH())&&(s.paginator=p.first)}},standalone:!0,features:[e.jDz],decls:81,vars:17,consts:[[1,"over-Flow"],[1,"mat-card-head"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form","main-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","INVNO",2,"text-transform","uppercase"],["readonly","","matInput","","formControlName","Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["DatePicker",""],["readonly","","matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],["appearance","outline",1,"full-width2"],["readonly","","matInput","",3,"value"],["matInput","","formControlName","WKITEM"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["readonly","","matInput","","formControlName","GENDT",3,"matDatepicker"],["GeneratedDatePicker",""],["readonly","","matInput","","type","time","formControlName","GENTM","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","readonly","","formControlName","S1STOR",2,"text-transform","uppercase"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","OnHandBalance"],["matColumnDef","OnHandWeight"],["matColumnDef","Rate"],["matColumnDef","ChargeAmount"],["matColumnDef","Minimumcharge"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"summary-container","info"],[1,"summary-row","align-between"],[1,"summary-pill"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,s){if(1&a&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title",2)(3,"button",3),e.NdJ("click",function(){return s.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before"),e.qZA()(),e._uU(6," Storage Invoice Inquiry"),e.qZA()(),e.TgZ(7,"mat-card-content",4)(8,"form",5)(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),e._uU(13," Invoice "),e.qZA(),e._UZ(14,"input",9),e.qZA(),e.TgZ(15,"mat-form-field",8)(16,"mat-label"),e._uU(17,"Date "),e.qZA(),e._UZ(18,"input",10)(19,"mat-datepicker-toggle",11)(20,"mat-datepicker",null,12),e.qZA(),e.TgZ(22,"mat-form-field",8)(23,"mat-label"),e._uU(24,"Time"),e.qZA(),e._UZ(25,"input",13),e.qZA(),e.TgZ(26,"mat-form-field",14)(27,"mat-label"),e._uU(28," Period "),e.qZA(),e._UZ(29,"input",15),e.qZA(),e.TgZ(30,"mat-form-field",8)(31,"mat-label"),e._uU(32,"Position to Item"),e.qZA(),e._UZ(33,"input",16),e.qZA(),e.TgZ(34,"div",17)(35,"label",18),e._uU(36,"Generated"),e.qZA(),e.TgZ(37,"div",19)(38,"mat-form-field",8)(39,"mat-label"),e._uU(40,"Generated Date "),e.qZA(),e._UZ(41,"input",20)(42,"mat-datepicker-toggle",11)(43,"mat-datepicker",null,21),e.qZA(),e.TgZ(45,"mat-form-field",8)(46,"mat-label"),e._uU(47,"Generated Time"),e.qZA(),e._UZ(48,"input",22),e.qZA()()(),e.TgZ(49,"mat-form-field",14)(50,"mat-label"),e._uU(51," Storer "),e.qZA(),e._UZ(52,"input",23),e.qZA()()()()(),e.TgZ(53,"table",24),e.ynx(54,25),e.YNc(55,_,2,0,"th",26),e.YNc(56,v,2,1,"td",27),e.BQk(),e.ynx(57,28),e.YNc(58,f,2,0,"th",26),e.YNc(59,I,2,2,"td",27),e.BQk(),e.ynx(60,29),e.YNc(61,C,2,0,"th",26),e.YNc(62,S,2,2,"td",27),e.BQk(),e.ynx(63,30),e.YNc(64,R,2,0,"th",26),e.YNc(65,P,3,5,"td",27),e.BQk(),e.ynx(66,31),e.YNc(67,K,2,0,"th",26),e.YNc(68,W,2,1,"td",27),e.BQk(),e.ynx(69,32),e.YNc(70,q,2,0,"th",26),e.YNc(71,B,2,1,"td",27),e.BQk(),e.YNc(72,$,1,0,"tr",33),e.YNc(73,L,1,0,"tr",34),e.qZA(),e.TgZ(74,"div",35)(75,"div",36)(76,"div",37),e._uU(77),e.ALo(78,"number"),e.qZA()()(),e.TgZ(79,"mat-paginator",38,39),e.NdJ("page",function(h){return s.onPaginateChange(h)}),e.qZA()()),2&a){const p=e.MAs(21),h=e.MAs(44);e.xp6(8),e.Q6J("formGroup",s.form),e.xp6(10),e.Q6J("matDatepicker",p),e.xp6(1),e.Q6J("for",p),e.xp6(10),e.Q6J("value",s.period),e.xp6(12),e.Q6J("matDatepicker",h),e.xp6(1),e.Q6J("for",h),e.xp6(11),e.Q6J("dataSource",s.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",s.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",s.displayedColumns),e.xp6(4),e.hij(" Total Amount : $",e.xi3(78,13,s.totalAmountDue,"1.2-2")," "),e.xp6(2),e.Q6J("length",s.totalRecords)("pageSizeOptions",e.DdM(16,x))("pageSize",s.pageSize)}},dependencies:[d.m,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.sg,g.u,D.NW,N.Hw,t.lW,i.KE,i.hX,i.R9,n.Nt,o.Mq,o.hl,o.nW,c.a8,c.dk,c.dn,c.n5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,A.JJ]}),r})()},81543:(O,Z,l)=>{l.d(Z,{Z:()=>U});var D=l(80529),u=l(75625),d=l(70262),A=l(54004),e=l(62843),g=l(92340),b=l(94650);let U=(()=>{class T{constructor(t){this.httpClient=t,this.url=g.N.API_BASE_URL,this.recal="/Receivables/Recalculate",this.httpHeader={headers:new D.WM({"Content-Type":"application/json"})}}getReceivables(t,i,n,o,c,_,v,f,I,C,S,R,P){return this.httpClient.get(this.url+"/Receivables/read?",{params:{user:t,invoice:i??"",customerNumber:n??"",customerSuffix:o??"",customerSecondSuffix:c??"",refNumber:_??"",startDate:v??"",endDate:f??"",building:I??"",status:C??"",type:S??"",recordsPerPage:R??"",pageNo:P??""}})}getReceivablesDetails(t,i,n){return this.httpClient.get(this.url+`/Receivables/details/read?user=${t}&invoice=${i}&seqNum=${n}`)}getReceivableInquiry(t,i){return this.httpClient.get(this.url+`/Receivables/read/inquiry?user=${t}&invoice=${i}`)}getInvoiceInquiry(t,i,n){return this.httpClient.get(this.url+`/Receivables/read/invoiceInquiry?user=${t}&HGCTL=${i}&invoice=${n}`)}getReceivablesAdjustInvoice(){return this.httpClient.get(this.url+"/Receivables/invoiceinquiry")}getAll(t){return this.httpClient.get(this.url+`/Receivables/readAll?user=${t}`)}getAdjustmentInquiry(t,i,n,o){return this.httpClient.get(this.url+"/Receivables/read/adjInquiry??",{params:{user:t,invoice:i??"",recordsPerPage:n??"",pageNo:o??""}})}adjustInvoiceRead(t,i,n,o){return this.httpClient.get(this.url+"/Receivables/adjust/read?",{params:{user:t,invoice:i??"",recordsPerPage:n??"",pageNo:o??""}})}adjustInvoiceUpdate(t,i,n,o,c,_,v,f,I,C,S,R){return this.httpClient.put(this.url+"/Receivables/adjust/update",{user:t,invoice:i,sequence:n,date:o,amount:c,description:_,ledgerCode:v,ledgerSubCode:f,customer:I,suffix1:C,suffix2:S,status:R}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}creditinvoice(t,i,n,o,c,_,v,f,I,C){return this.httpClient.put(this.url+"/Receivables/update/credit",{invoiceNumber:t,building:i,date:n,type:o,description:c,customer:_,reference:v,amount:f,balance:I,reason:C}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}getComment(t,i,n,o){return this.httpClient.get(this.url+`/Receivables/comments/read?user=${t}&key=${i}&recordsPerPage=${n}&pageNo=${o}`)}updateComment(t,i,n,o,c,_){return this.httpClient.put(this.url+"/Receivables/comments/update",{user:t,fileID:i,key:n,sub:o,seq:c,comment:_}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}createComment(t,i,n,o,c){return this.httpClient.post(this.url+"/Receivables/comments/create",{user:t,fileID:i,key:n,sub:o,comment:c}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}deleteComment(t,i,n,o,c){return this.httpClient.delete(this.url+`/Receivables/comments/delete?user=${t}&fileID=${i}&key=${n}&sub=${o}&seq=${c}`)}Print(t,i,n,o,c){return this.httpClient.put(this.url+"/Receivables/Print",{InvoiceNumber:t,ReportType:i,FileExtension:n,EmailAddress:o,user:c}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}UpdateLedgerCode(t,i,n,o,c,_,v,f){return this.httpClient.put(this.url+"/Receivables/UpdateLedgerCode",{InvoiceNumber:t,SequenceNumber:i,InvoiceDate:n,LineAmount:o,LedgerCode:c,LedgerSubCode:_,BuildingNumber:v,user:f}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}EmailDetail(t,i){return this.httpClient.put(this.url+"/Receivables/Email/Details",{user:t,InvoiceNumber:i}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}EmailDetailsNew(t,i){return this.httpClient.put(this.url+"/Receivables/EmailDetailsNew",{user:t,InvoiceNumber:i}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}Recalculate(t,i){return this.httpClient.put(this.url+this.recal,{user:t,InvoiceNumber:i}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}ReceivingCover(t,i,n){return this.httpClient.put(this.url+"/Receivables/ReceivingCover",{user:t,InvoiceNumber:i,ReturnCode:n}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}MicCover(t,i,n,o,c){return this.httpClient.put(this.url+"/Receivables/MicCover",{user:t,InvoiceNumber:i,StorerNumber:n,StorerSuffix:o,ReturnCode:c}).pipe((0,u.X)(1),(0,d.K)(this.httpError))}deleteReceivables(t,i){return this.httpClient.delete(this.url+`/Receivables/delete/receivable?invoice=${t}&description=${i}`)}FreightInv(t,i,n,o){return this.httpClient.get(this.url+"/Receivables/read/invoiceInquiry?",{params:{user:t,WKINVN:i??"",recordsPerPage:n??"",pageNo:o??""}})}readReceivablesTallyInquiryService(t,i){return this.httpClient.get(this.url+`/ihcrud/tallyinquiry?user=${t}&tally=${i}`).pipe((0,A.U)(n=>n[0]))}httpError(t){let i="";return i=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(i),(0,e._)(()=>new Error(i))}}return T.\u0275fac=function(t){return new(t||T)(b.LFG(D.eN))},T.\u0275prov=b.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()}}]);