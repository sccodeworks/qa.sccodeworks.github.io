"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[78058,67904,34894,26628,70096,49741],{34894:(R,C,a)=>{a.d(C,{e:()=>E});var i=a(94650),g=a(24006);let E=(()=>{class _{constructor(r,t){this.el=r,this.control=t}onInputChange(r){const t=this.el.nativeElement,D=t.value.toUpperCase();t.value=D,this.control&&this.control.control&&this.control.control.setValue(D,{emitEvent:!1})}}return _.\u0275fac=function(r){return new(r||_)(i.Y36(i.SBq),i.Y36(g.a5))},_.\u0275dir=i.lG2({type:_,selectors:[["","appUppercase",""]],hostBindings:function(r,t){1&r&&i.NdJ("input",function(d){return t.onInputChange(d)})},standalone:!0}),_})()},79979:(R,C,a)=>{a.d(C,{C:()=>D});var i=a(80529),g=a(61135),E=a(75625),_=a(70262),T=a(62843),r=a(92340),t=a(94650);let D=(()=>{class d{constructor(s){this.httpClient=s,this.carrierDataSource=new g.X([]),this.url=r.N.API_BASE_URL,this.httpHeader={headers:new i.WM({"Content-Type":"application/json"})}}updatecarrierDataSource(s){let p=this.carrierDataSource.getValue();p.unshift(...s),this.carrierDataSource.next(p)}getCarrier(s,p,l){return this.httpClient.get(this.url+`/carriers/read?user=${s}&carrierCode=${p}&carrierName=${l}`)}getAllCarriers(s,p,l){return this.httpClient.get(this.url+`/carriers/readAll?user=${s}&pageNum=${p}&recordsPerPage=${l}`)}createCarrier(s,p,l,f,o,u,h,P,U,I,y,B,A,Z,e){return this.httpClient.post(this.url+"/carriers/create",{carrierCode:s,carrierName:p,carrierAdd1:l,carrierAdd2:f,zipcode:o,suffix:u,carrierScacCode:h,hazardousMaterials:P,palletExchange:U,billFrequency:I,loadingAllowance:y,hundredWeight:B,minimumAmount:A,maximumAmount:Z,user:e}).pipe((0,E.X)(1),(0,_.K)(this.httpError))}updateCarrier(s,p,l,f,o,u,h,P,U,I,y,B,A,Z,e){return this.httpClient.put(this.url+"/carriers/update",{carrierCode:s,carrierName:p,carrierAdd1:l,carrierAdd2:f,zipcode:o,suffix:u,carrierScacCode:h,hazardousMaterials:P,palletExchange:U,billFrequency:I,loadingAllowance:y,hundredWeight:B,minimumAmount:A,maximumAmount:Z,user:e}).pipe((0,E.X)(1),(0,_.K)(this.httpError))}getCarrierNames(){return this.httpClient.get(this.url+"/carriers/carrierName")}getCarrierCode(){return this.httpClient.get(this.url+"/carriers/carriercode")}httpError(s){let p="";return p=s.error instanceof ErrorEvent?s.error.message:`Error Code: ${s.status}\nMessage: ${s.message}`,console.log(p),(0,T._)(()=>new Error(p))}}return d.\u0275fac=function(s){return new(s||d)(t.LFG(i.eN))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},39505:(R,C,a)=>{a.d(C,{L:()=>p});var i=a(24006),g=a(59549),E=a(69751),_=a(68675),T=a(54004),r=a(94650),t=a(36895),D=a(47957),d=a(3238),M=a(44144);function s(l,f){if(1&l&&(r.TgZ(0,"mat-option",4),r._uU(1),r.qZA()),2&l){const o=f.$implicit;r.Q6J("value",o),r.xp6(1),r.Oqu(o)}}let p=(()=>{class l{constructor(o){this.fb=o,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=u=>{},this.onChange=u=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new E.y,this.filteredOptions=this.control.valueChanges.pipe((0,_.O)(this.value),(0,T.U)(u=>this._filter(u)))}setDescribedByIds(o){}onContainerClick(o){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(o){null!=o&&(this.control.setValue(o),this.value=o)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o}_filter(o){if(null==o||0==o.length)return this.options;const u=o.toLowerCase(),h=this.options.filter(P=>P.toLowerCase().includes(u));return!this.disabled&&1===h.length&&this.control.value!=h[0]&&o.length>=(this.previousValue?.length??0)&&this.control.setValue(h[0]),this.onChange(this.control.value),this.previousValue=this.control.value,h}}return l.\u0275fac=function(o){return new(o||l)(r.Y36(i.qu))},l.\u0275cmp=r.Xpm({type:l,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(o,u){2&o&&r.uIk("aria-describedby",u.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[r._Bn([{provide:i.JU,multi:!0,useExisting:l},{provide:g.Eo,useExisting:l}],[{provide:i.gN,useExisting:i.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,u){if(1&o&&(r.TgZ(0,"mat-form-field",0)(1,"mat-label"),r._uU(2),r.qZA(),r._UZ(3,"input",1),r.TgZ(4,"mat-autocomplete",null,2),r.YNc(6,s,2,2,"mat-option",3),r.ALo(7,"async"),r.qZA()()),2&o){const h=r.MAs(5);r.Q6J("appearance",u.appearance),r.xp6(2),r.Oqu(u.label),r.xp6(1),r.Q6J("id",u.id)("placeholder",u.placeholder)("formControl",u.control)("matAutocomplete",h),r.xp6(3),r.Q6J("ngForOf",r.lcZ(7,7,u.filteredOptions))}},dependencies:[t.sg,i.Fj,i.JJ,i.oH,D.XC,D.ZL,d.ey,g.KE,g.hX,M.Nt,t.Ov]}),l})()},78058:(R,C,a)=>{a.r(C),a.d(C,{DockAppointmentComponent:()=>B});var i=a(24006),g=a(70879),E=a(35226),_=a.n(E),T=a(48529),r=a(86385),t=a(94650),D=a(65412),d=a(19132),M=a(15627),s=a(79979),p=a(72122),l=a(97392),f=a(4859),o=a(59549),u=a(44144),h=a(84385),P=a(3238),U=a(73546),I=a(34894),y=a(39505);let B=(()=>{class A{constructor(e,n,c,m,v,O){this.fb=e,this.matDialog=n,this.router=c,this.iHeaderSvc=m,this.ICarSvc=v,this.dockSchedulerService=O,this.user=localStorage.getItem("userName"),this.tallyNum=null,this.carrierOptions=[],this.tallyUrl="/main-nav/tallys/read"}ngOnInit(){this.element=history.state;const e=this.element?.dockAppointment;this.dockApptDefaults=Array.isArray(e)?e[0]:e,this.tallyNum=this.element?.tally?.IHTALY??this.element?.IHTALY??null,this.form=this.fb.group({appointmentNum:{value:this.dockApptDefaults?.DSAPPT||0,disabled:!0},building:{value:this.dockApptDefaults?.DSBLDG||"",disabled:!0},inOut:{value:this.dockApptDefaults?.DSINOU||"",disabled:!0},scacCode:[this.dockApptDefaults?.DSSCAC||"",i.kI.required],requestDate:[this.formatDate(this.dockApptDefaults?.REQDT)||"",i.kI.required],requestTime:[this.formatTime(this.dockApptDefaults?.REQTM)||""],appointmentType:[this.dockApptDefaults?.DSATYP||""],loadType:[this.dockApptDefaults?.DSLTYP||""],expectedDuration:[this.dockApptDefaults?.DSDURN||""],quantityExpected:[this.dockApptDefaults?.DSQTY||""],weightExpected:[this.dockApptDefaults?.DSWGHT||""],trailerNumber:[this.dockApptDefaults?.DSTRAL||""],priority:[this.dockApptDefaults?.DSPRTY||""],contact:[this.dockApptDefaults?.DSCONT||""],phone:[this.dockApptDefaults?.DSCNPH||""],email:[this.dockApptDefaults?.DSCNEM||""]}),this.fetchCarriers()}fetchCarriers(){this.ICarSvc.getCarrierCode().subscribe(e=>{for(const n of e)this.carrierOptions.push(n.CRSCAC)})}ngOnDestroy(){this.dockApptSubscription&&this.dockApptSubscription.unsubscribe()}onBack(){this.router.navigateByUrl(this.tallyUrl)}get isUpdateMode(){return!!this.dockApptDefaults?.DSAPPT&&0!==Number(this.dockApptDefaults.DSAPPT)}dockAppointmentCreate(){const e=this.form.getRawValue();let n="0000";if(e.requestTime){const[c,m]=e.requestTime.split(":").map(v=>v.padStart(2,"0"));n=`${c}${m}`}this.dockApptSubscription=this.iHeaderSvc.createDockAppt(this.user??"",this.tallyNum??0,e.appointmentNum,T.R.fullBuilding(e.building),e.inOut,e.scacCode,e.requestDate,Number(n),e.appointmentType,e.loadType,e.expectedDuration,e.quantityExpected,e.weightExpected,e.trailerNumber,e.priority,e.contact,e.phone,e.email).subscribe(c=>{const m=c[0]?.data,v=m?.[m.length-2]?.value?.trim(),O=m?.[m.length-1]?.value?.trim(),S=m?.[2]?.value;if("Dock Appointment Updated Successfully"===O)return this.successMessage(O),void this.router.navigateByUrl(this.tallyUrl);if("Dock Appointment Created Successfully"===O){if(this.dockApptDefaults.DSAPPT=S,v.includes("Call DSCRUD"))return void this.openCommentsFromTally();this.successMessage(O),this.router.navigateByUrl(this.tallyUrl)}else this.failureMessage(O)})}openCommentsFromTally(){const e={...this.dockApptDefaults,fromTallyCreate:!0,apptNumber:this.dockApptDefaults.DSAPPT,tally:this.element.tally};this.router.navigateByUrl("/main-nav/dock-scheduler/comments/read",{state:e})}formatDate(e){if(!e)return"";if("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const n=String(e).replace(/\D/g,"");if(8===n.length)return`${n.substring(0,4)}-${n.substring(4,6)}-${n.substring(6,8)}`;if(6===n.length){const c=n.substring(0,2),m=n.substring(2,4);return`${"20"+n.substring(4,6)}-${c}-${m}`}return""}formatTime(e){if(!e)return"";const n=String(e).replace(/\D/g,"");return 6===n.length||4===n.length?`${n.substring(0,2)}:${n.substring(2,4)}`:""}successMessage(e){_().fire(e,"","success")}failureMessage(e){_().fire(e||"Operation failed","","error")}}return A.\u0275fac=function(e){return new(e||A)(t.Y36(i.qu),t.Y36(D.uw),t.Y36(d.F0),t.Y36(M.X),t.Y36(s.C),t.Y36(p.A))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-dock-appointment"]],standalone:!0,features:[t.jDz],decls:103,vars:4,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","appointmentNum"],["matInput","","formControlName","building","appUppercase","","maxlength","3"],["matInput","","formControlName","inOut","appUppercase","","maxlength","1"],["formControlName","scacCode","label","Carrier Code","appearance","outline","required","",1,"full-width2",3,"options"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","type","date","formControlName","requestDate"],["matInput","","type","time","formControlName","requestTime"],["formControlName","appointmentType"],["value","TR"],["value","PG"],["value","RC"],["value","DT"],["value","RT"],["value","SH"],["formControlName","loadType"],["value","S"],["value","F"],["value","C"],["value","P"],["value","K"],["matInput","","formControlName","expectedDuration"],["matInput","","formControlName","quantityExpected"],["matInput","","formControlName","weightExpected"],["matInput","","formControlName","trailerNumber","appUppercase",""],["matInput","","formControlName","priority"],["matInput","","formControlName","contact"],["matInput","","formControlName","phone"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","email"],[1,"footer"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return n.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Maintain Dock Schedule"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Appointment"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Building"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",7)(20,"mat-label"),t._uU(21,"In/Out"),t.qZA(),t._UZ(22,"input",10),t.qZA(),t._UZ(23,"custom-input-autocomplete",11)(24,"br"),t.TgZ(25,"div",12)(26,"label",13),t._uU(27,"Request"),t.qZA(),t.TgZ(28,"div",14)(29,"mat-form-field",7)(30,"mat-label"),t._uU(31,"Request Date"),t.qZA(),t._UZ(32,"input",15),t.qZA(),t.TgZ(33,"mat-form-field",7)(34,"mat-label"),t._uU(35,"Request Time"),t.qZA(),t._UZ(36,"input",16),t.qZA()()(),t.TgZ(37,"mat-form-field",7)(38,"mat-label"),t._uU(39,"Appointment Type"),t.qZA(),t.TgZ(40,"mat-select",17)(41,"mat-option",18),t._uU(42,"TR = Trailer"),t.qZA(),t.TgZ(43,"mat-option",19),t._uU(44,"PG = Piggyback"),t.qZA(),t.TgZ(45,"mat-option",20),t._uU(46,"RC = Railcar"),t.qZA(),t.TgZ(47,"mat-option",21),t._uU(48,"DT = Drop trailer"),t.qZA(),t.TgZ(49,"mat-option",22),t._uU(50,"RT = Return"),t.qZA(),t.TgZ(51,"mat-option",23),t._uU(52,"SH = Shuttle"),t.qZA()()(),t.TgZ(53,"mat-form-field",7)(54,"mat-label"),t._uU(55,"Load Type"),t.qZA(),t.TgZ(56,"mat-select",24)(57,"mat-option",25),t._uU(58,"S = Slip Sheet"),t.qZA(),t.TgZ(59,"mat-option",26),t._uU(60,"F = Floor unloaded"),t.qZA(),t.TgZ(61,"mat-option",27),t._uU(62,"C = Clamp"),t.qZA(),t.TgZ(63,"mat-option",28),t._uU(64,"P = Pallet"),t.qZA(),t.TgZ(65,"mat-option",29),t._uU(66,"K = Sack"),t.qZA()()(),t.TgZ(67,"mat-form-field",7)(68,"mat-label"),t._uU(69,"Expected Duration"),t.qZA(),t._UZ(70,"input",30),t.qZA(),t.TgZ(71,"mat-form-field",7)(72,"mat-label"),t._uU(73,"Quantity Expected"),t.qZA(),t._UZ(74,"input",31),t.qZA(),t.TgZ(75,"mat-form-field",7)(76,"mat-label"),t._uU(77,"Weight Expected"),t.qZA(),t._UZ(78,"input",32),t.qZA(),t.TgZ(79,"mat-form-field",7)(80,"mat-label"),t._uU(81,"Trailer Number"),t.qZA(),t._UZ(82,"input",33),t.qZA(),t.TgZ(83,"mat-form-field",7)(84,"mat-label"),t._uU(85,"Priority"),t.qZA(),t._UZ(86,"input",34),t.qZA(),t.TgZ(87,"mat-form-field",7)(88,"mat-label"),t._uU(89,"Contact"),t.qZA(),t._UZ(90,"input",35),t.qZA(),t.TgZ(91,"mat-form-field",7)(92,"mat-label"),t._uU(93,"Phone"),t.qZA(),t._UZ(94,"input",36),t.qZA(),t.TgZ(95,"mat-form-field",37)(96,"mat-label"),t._uU(97,"Email"),t.qZA(),t.TgZ(98,"textarea",38),t._uU(99,"Email"),t.qZA()()()(),t.TgZ(100,"div",39)(101,"button",40),t.NdJ("click",function(){return n.dockAppointmentCreate()}),t._uU(102),t.qZA()()()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",n.form),t.xp6(15),t.Q6J("options",n.carrierOptions),t.xp6(78),t.Q6J("disabled",!n.form.valid),t.xp6(1),t.hij(" ",n.isUpdateMode?"Update":"Create"," "))},dependencies:[g.m,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.nD,i.sg,i.u,l.Hw,f.lW,o.KE,o.hX,u.Nt,h.gD,P.ey,U.a8,U.dk,U.dn,U.n5,I.e,r.j,y.L]}),A})()}}]);