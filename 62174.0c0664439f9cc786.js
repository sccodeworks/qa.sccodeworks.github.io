"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[62174],{62174:(Q,h,a)=>{a.r(h),a.d(h,{ScheduledMovesComponent:()=>b});var g=a(94766),f=a(35226),E=a.n(f),C=a(48529),P=a(70879),D=a(53330),O=a(10692),m=a(39870),U=a(85139),t=a(94650),v=a(19132),R=a(49713),S=a(11240),A=a(16082),L=a(65412),u=a(24006),I=a(30294),T=a(4859),M=a(59549),B=a(44144),_=a(73546);let b=(()=>{class o{constructor(e,s,l,r,i,n,c,d){this.activeRouter=e,this.iBldSvc=s,this.storerService=l,this.iMoveQueueSvc=r,this.router=i,this.matDialog=n,this.fb=c,this.loginSvc=d,this.totalRecords=0,this.user=localStorage.getItem("userName"),this.building=localStorage.getItem("building"),this.storer=localStorage.getItem("storer"),this.form=this.fb.group({Storer:"",Building:"",name:"",Message:""}),this.countMsg="Call MQCRUD,MQU830R for Cycle Count",this.lpFullPlalletMsg="Call MQU805RLP for Next Screen.",this.RF_EQUIP_SUCCESS_KEY="rfEquipSuccess",this.transactionNumber=0}ngOnInit(){this.name=localStorage.getItem("name"),this.result=this.iBldSvc.getBuilding(this.user,C.R.fullBuilding(this.building)).subscribe(e=>{this.result=e;var s=this.result[0].data[1]?.value,l=JSON.parse(s);this.buildingValue=[this.building,l.returnedData[0].BUNAME].join(" ")}),this.result1=this.storerService.storerSearch(this.user,"",this.storer,"","","").subscribe(e=>{this.result=e;var s=this.result[0].data[1]?.value,l=JSON.parse(s);this.storerValue=[this.storer,l.returnedData[0].STNAME].join(" ")}),this.result=this.iMoveQueueSvc.readMessage(this.user,this.building).subscribe(e=>{this.result=e;var s=this.result[0].data[1]?.value,l=JSON.parse(s);this.message=l.returnedData[0].MSMESG})}update(){this.result=this.iMoveQueueSvc.updateFirstCall("FIRST",this.user).subscribe(e=>{this.firstCall=e;const s=this.firstCall[0].data,l=s[s.length-1].value?.trim(),r=s[3].value?.trim();this.transactionNumber=r,["Call MQI815CR for New Order Notificaton. Call MQU805R for Full Pallet Pick.","Call MQI815CR for New Order Notificaton. Call MQU811RC for Partial pallet select. Call MQU806CR for Partial pallet Pick.","Call MQI815CR for New Order Notificaton. Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick","Call MQI815CR for New Order Notificaton. Call MQU805RLP for LP full Pallet Pick."].some(n=>n.toUpperCase()===l.toUpperCase())?this.new():l.toUpperCase()!==this.countMsg.toUpperCase()?"Call MQU805RLP for LP full Pallet Pick."!==l?"Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick"!==l?this.failureMessage(l):this.matDialog.open(U.V,{width:"1000px",maxHeight:"80vh",data:s,autoFocus:!1,disableClose:!0}):this.handleLPFullPick(r):this.iMoveQueueSvc.cycleCount(this.user,r).subscribe(n=>{var d=JSON.parse(n[0].data[1]?.value).returnedData;d.transaction=r,this.router.navigate(["/main-nav/schedMoves/locationAudit"],{state:[d,s]})})})}handleLPFullPick(e){this.iMoveQueueSvc.LPfullPalletPicking(this.user,e).subscribe(s=>{const l=s?.[0]?.data||[],r=l[l.length-1]?.value?.trim()||"";"Display Equipment screen"!==r?"Call MQU805RLP for Next Screen."!==r?this.failureMessage(r):this.matDialog.open(D.w,{width:"1000px",maxHeight:"90vh",data:l,autoFocus:!1}):this.openEquipmentSelection().subscribe(i=>{i?this.handleLPFullPick(e):this.showEquipmentError()})})}openEquipmentSelection(){return this.matDialog.open(O.o,{width:"500px",maxHeight:"80vh",autoFocus:!1}).afterClosed()}showEquipmentError(){const e=new m.e("Confirm Action","","Equipment was not selected or found");this.matDialog.open(m.d,{maxWidth:"400px",data:e})}failureMessage(e){E().fire(e,"","error")}new(){var e=this.firstCall[0].data;e.transaction=this.transactionNumber,this.matDialog.open(g.z,{width:"1000px",maxHeight:"90vh",data:e,autoFocus:!1})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v.gz),t.Y36(R.z),t.Y36(S.h),t.Y36(A.e),t.Y36(v.F0),t.Y36(L.uw),t.Y36(u.qu),t.Y36(I.r))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-scheduled-moves"]],standalone:!0,features:[t.jDz],decls:26,vars:5,consts:[[1,"over-Flow"],[1,"title"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["disabled","","matInput","",3,"value"],["appearance","outline",1,"full-width","w-100"],["mat-raised-button","",1,"buttons","addButton",3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t._uU(3," Initial Scheduled Move Processing"),t.qZA()(),t.TgZ(4,"mat-card-content",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10," Storer "),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.TgZ(12,"mat-form-field",6)(13,"mat-label"),t._uU(14," Building"),t.qZA(),t._UZ(15,"input",7),t.qZA(),t.TgZ(16,"mat-form-field",6)(17,"mat-label"),t._uU(18," Welcome"),t.qZA(),t._UZ(19,"input",7),t.qZA(),t.TgZ(20,"mat-form-field",8),t._UZ(21,"mat-label")(22,"textarea",7),t.qZA()()(),t.TgZ(23,"div")(24,"button",9),t.NdJ("click",function(){return s.update()}),t._uU(25," Next "),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",s.form),t.xp6(6),t.s9C("value",s.storerValue),t.xp6(4),t.s9C("value",s.buildingValue),t.xp6(4),t.s9C("value",s.name),t.xp6(3),t.s9C("value",s.message))},dependencies:[P.m,u._Y,u.JL,u.sg,T.lW,M.KE,M.hX,B.Nt,_.a8,_.dk,_.dn,_.n5]}),o})()}}]);