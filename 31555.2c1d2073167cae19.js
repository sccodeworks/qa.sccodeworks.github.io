"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[31555],{31555:(k,p,l)=>{l.r(p),l.d(p,{CreateComponent:()=>M});var a=l(24006),_=l(48529),f=l(35226),c=l.n(f),g=l(70879),T=l(86385),t=l(94650),Z=l(19132),A=l(15627),U=l(79979),d=l(36895),h=l(97392),C=l(4859),u=l(59549),q=l(44144),v=l(84385),b=l(3238),m=l(73546),E=l(39505);function I(o,n){1&o&&(t.TgZ(0,"div"),t._uU(1," Storer is required "),t.qZA())}function N(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Received From is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function O(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Quantity is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function D(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Only "),t.TgZ(2,"strong"),t._uU(3,"numbers"),t.qZA(),t._uU(4,"are allowed "),t.qZA())}function y(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Only Alphabets and numbers are allowed "),t.qZA())}function S(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Authorization must be less than 22 characters "),t.qZA())}function R(o,n){if(1&o&&(t.TgZ(0,"mat-option",64),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function P(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addTally())}),t._uU(1," Create "),t.qZA()}}let M=(()=>{class o{constructor(e,r,i,s,L){this.router=e,this.iHeaderSvc=r,this.fb=i,this.carrierSvc=s,this.route=L,this.result=[],this.carrierOptions=[],this.update=!0,this.minDate=(new Date).toLocaleDateString("fr-CA"),this.StorerOptions=[],this.storerResult=[],this.hasError=(W,B)=>this.form.controls[W].hasError(B)}ngOnInit(){localStorage.getItem("LoggedIn")?(this.user=localStorage.getItem("userName"),this.building=localStorage.getItem("building")):(this.user=_.R.user,this.building=_.R.building),this.form=this.fb.group({storer:["",[a.kI.required,a.kI.min(0),a.kI.pattern("[0-9]{1,10}")]],storerRef:[""],billTo:[""],billToSfx:[""],billToSfx2:[""],invoice:[""],building:[""],status:[""],loadType:["",[a.kI.required]],recptType:["",[a.kI.required]],recvdFrom:["",[a.kI.required]],qty:["",[a.kI.required,a.kI.min(0),a.kI.pattern("[0-9]{1,10}")]],schdldArrival:[""],carrier:[""],actualArrival:["",[a.kI.required]],schdldtime:[""],actualtime:[""],wgt:[""],pro:[""],car:[""],authorization:["",[a.kI.pattern(/^[A-Z0-9]{22}$/),a.kI.minLength(22),a.kI.maxLength(22)]],seal1:[""],seal2:[""],invoiceDate:["",[a.kI.required]],broken1:[""],broken2:[""],returnValue:[""],notification:[""],specialCharge:[""],chargeType:[""]}),this.carrierSvc.getAllCarriers(this.user,1,50).subscribe(e=>{this.result=e;var r=this.result[0].data[1]?.value,i=JSON.parse(r);this.carrierSource=i.returnedData,console.log("ALL CARRIERS DATA FOR ORDER UPDATE 2 DROPDOWN :"),console.log(this.carrierSource);for(const s of this.carrierSource)this.carrierOptions.push(s.CRNUMB)}),this.route.params.subscribe(e=>{this.tallyId=e.id}),this.tallyId?(this.update=!0,this.getAllSubscription=this.iHeaderSvc.getAll(this.user,this.building).subscribe(e=>{})):this.update=!1,this.loadStorers()}loadStorers(){this.iHeaderSvc.getStorerAndSuffixCodes().subscribe(e=>{this.storerResult=e,this.StorerOptions=this.storerResult.map(r=>`${r.STORE} - ${r.STNAME}`)})}ngOnDestroy(){this.getAllSubscription&&this.getAllSubscription.unsubscribe(),this.getTallyHeadersSubscription&&this.getTallyHeadersSubscription.unsubscribe()}addTally(){var e=this.form.value;e.returnValue=e.returnValue||"N",e.broken1=e.broken1||"N",e.broken2=e.broken2||"N",e.specialCharge=e.specialCharge||"N",e.loadType=null!=e.loadType?e.loadType.toUpperCase():null,e.recptType=null!=e.recptType?e.recptType.toUpperCase():null,e.recvdFrom=null!=e.recvdFrom?e.recvdFrom.toUpperCase():null,this.result=this.iHeaderSvc.createTally(e.storer,e.storerRef,e.status,e.loadType,e.recptType,e.recvdFrom,e.qty,e.schdldArrival,e.carrier?e.carrier.toUpperCase():"",e.actualArrival,e.building,e.pro?e.pro.toUpperCase():"",e.wgt,this.user,e.schdldtime,e.actualtime,e.authorization?e.authorization.toUpperCase():"",e.car?e.car.toUpperCase():"",e.seal1?e.seal1.toUpperCase():"",e.seal2?e.seal2.toUpperCase():"",e.invoiceDate,e.returnValue,e.broken1,e.broken2,e.specialCharge,e.notification,e.chargeType,e.billTo,e.billToSfx,e.billToSfx2).subscribe(r=>{if(this.result=r,console.log(this.result),JSON.parse(this.result[0].data[1].value).success){const i=JSON.parse(this.result[0].data[1].value).returnedData.message;this.successMessage(i),this.router.navigate(["/main-nav/tallys/read"])}else{const i=JSON.parse(this.result[0].data[1].value).returnedData.message;this.failureMessage(i)}})}successMessage(e){c().fire(e,"","success"),this.router.navigate(["/main-nav/tallys/read"])}failureMessage(e){c().fire(e,"","error")}onBack(){this.router.navigate(["/main-nav/tallys/read"])}fetchHeaders(){return this.getTallyHeadersSubscription&&this.getTallyHeadersSubscription.unsubscribe(),this.iHeaderSvc.getTallyHeaders().subscribe(e=>{})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.F0),t.Y36(A.X),t.Y36(a.qu),t.Y36(U.C),t.Y36(Z.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create"]],standalone:!0,features:[t.jDz],decls:230,vars:11,consts:[[1,"over-Flow"],[1,"mat-card-head"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form","main-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["formControlName","storer","label","Storer","appearance","outline","required","",1,"full-width",3,"options"],[4,"ngIf"],["appearance","outline",1,"full-width"],["matInput","","formControlName","storerRef",2,"text-transform","uppercase"],[1,"row-break"],["matInput","","formControlName","invoice","readonly",""],["matInput","","formControlName","building","readonly",""],["formControlName","status",3,"disabled"],["value",""],["value","I"],["value","A"],["value","P"],["value","S"],["value","W"],["value","D"],["value","C"],["value","N"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","billTo"],["matInput","","formControlName","billToSfx",2,"text-transform","uppercase"],["matInput","","formControlName","billToSfx2",2,"text-transform","uppercase"],["formControlName","loadType"],["value","F"],["formControlName","recptType"],["value","L"],["value","O"],["value","T"],["matInput","","required","","formControlName","recvdFrom",2,"text-transform","uppercase"],["matInput","","formControlName","qty"],["appearance","outline","formControlName","returnValue"],["value","Y"],["matInput","","formControlName","authorization",2,"text-transform","uppercase"],["matInput","","type","date","formControlName","schdldArrival"],["matInput","","type","time","formControlName","schdldtime"],["matInput","","type","date","formControlName","actualArrival","required",""],["matInput","","type","time","formControlName","actualtime","required",""],["matInput","","formControlName","pro",2,"text-transform","uppercase"],["formControlName","carrier","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","car",2,"text-transform","uppercase"],["matInput","","formControlName","seal1",2,"text-transform","uppercase"],["formControlName","broken1"],["matInput","","formControlName","seal2",2,"text-transform","uppercase"],["formControlName","broken2"],["formControlName","notification"],["value","E"],["matInput","","type","date","formControlName","invoiceDate"],["formControlName","specialCharge"],["matInput","","formControlName","wgt"],["formControlName","chargeType"],["value","H"],[1,"footer"],["type","reset","mat-raised-button","",1,"buttons","cancel-btn"],["class","buttons addButton new-tally-form-btn","type","submit","mat-raised-button","",3,"click",4,"ngIf"],[3,"value"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title",2)(3,"button",3),t.NdJ("click",function(){return r.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"arrow_back "),t.qZA()(),t._uU(6," Tally Create"),t.qZA()(),t.TgZ(7,"mat-card-content",4)(8,"form",5)(9,"div",6)(10,"div",7)(11,"custom-input-autocomplete",8),t.YNc(12,I,2,0,"div",9),t.qZA(),t.TgZ(13,"mat-form-field",10)(14,"mat-label"),t._uU(15," Storer Reference "),t.qZA(),t._UZ(16,"input",11),t.qZA(),t.TgZ(17,"div",12)(18,"mat-form-field",10)(19,"mat-label"),t._uU(20," Invoice "),t.qZA(),t._UZ(21,"input",13),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label"),t._uU(24," Building "),t.qZA(),t._UZ(25,"input",14),t.qZA(),t.TgZ(26,"mat-form-field",10)(27,"mat-label"),t._uU(28," Status "),t.qZA(),t.TgZ(29,"mat-select",15)(30,"mat-option",16),t._uU(31,"--select--"),t.qZA(),t.TgZ(32,"mat-option",17),t._uU(33," I - Intransit "),t.qZA(),t.TgZ(34,"mat-option",18),t._uU(35," A - Arrived (at dock) "),t.qZA(),t.TgZ(36,"mat-option",19),t._uU(37," P - Put Away "),t.qZA(),t.TgZ(38,"mat-option",20),t._uU(39," S - Submitted for W/R print "),t.qZA(),t.TgZ(40,"mat-option",21),t._uU(41," W - W/R printed "),t.qZA(),t.TgZ(42,"mat-option",22),t._uU(43," D - Deleted "),t.qZA(),t.TgZ(44,"mat-option",23),t._uU(45," C - Cancelled "),t.qZA(),t.TgZ(46,"mat-option",24),t._uU(47," N - Notified of Warehouse Receipt "),t.qZA()()()(),t.TgZ(48,"div",25)(49,"label",26),t._uU(50,"Bill To"),t.qZA(),t.TgZ(51,"div",27)(52,"mat-form-field",10)(53,"mat-label"),t._uU(54,"Bill To"),t.qZA(),t._UZ(55,"input",28),t.qZA(),t.TgZ(56,"mat-form-field",10)(57,"mat-label"),t._uU(58,"Suffix"),t.qZA(),t._UZ(59,"input",29),t.qZA(),t.TgZ(60,"mat-form-field",10)(61,"mat-label"),t._uU(62," Suffix 2"),t.qZA(),t._UZ(63,"input",30),t.qZA()()(),t.TgZ(64,"mat-form-field",10)(65,"mat-label"),t._uU(66,"Load Type "),t.qZA(),t.TgZ(67,"mat-select",31)(68,"mat-option",16),t._uU(69,"--select--"),t.qZA(),t.TgZ(70,"mat-option",20),t._uU(71,"S = Slip Sheet "),t.qZA(),t.TgZ(72,"mat-option",32),t._uU(73,"F = Floor unloaded "),t.qZA(),t.TgZ(74,"mat-option",23),t._uU(75,"C = Clamp "),t.qZA(),t.TgZ(76,"mat-option",19),t._uU(77,"P = Pallet "),t.qZA()()(),t.TgZ(78,"mat-form-field",10)(79,"mat-label"),t._uU(80,"Receipt Type "),t.qZA(),t.TgZ(81,"mat-select",33)(82,"mat-option",16),t._uU(83,"--select--"),t.qZA(),t.TgZ(84,"mat-option",34),t._uU(85," L = Less than truckload "),t.qZA(),t.TgZ(86,"mat-option",23),t._uU(87," C = Car load "),t.qZA(),t.TgZ(88,"mat-option",20),t._uU(89," S = 20 Ft. Container "),t.qZA(),t.TgZ(90,"mat-option",35),t._uU(91," O = Container "),t.qZA(),t.TgZ(92,"mat-option",19),t._uU(93," P = Pallet"),t.qZA(),t.TgZ(94,"mat-option",36),t._uU(95," T = Truckload"),t.qZA()()(),t.TgZ(96,"mat-form-field",10)(97,"mat-label"),t._uU(98,"Received From "),t.qZA(),t._UZ(99,"input",37),t.YNc(100,N,4,0,"mat-error",9),t.qZA(),t.TgZ(101,"mat-form-field",10)(102,"mat-label"),t._uU(103,"Total Quantity "),t.qZA(),t._UZ(104,"input",38),t.YNc(105,O,4,0,"mat-error",9),t.YNc(106,D,5,0,"mat-error",9),t.qZA(),t.TgZ(107,"mat-form-field",10)(108,"mat-label"),t._uU(109,"Returned"),t.qZA(),t.TgZ(110,"mat-select",39)(111,"mat-option",16),t._uU(112,"--select--"),t.qZA(),t.TgZ(113,"mat-option",40),t._uU(114,"Yes"),t.qZA(),t.TgZ(115,"mat-option",24),t._uU(116,"No"),t.qZA()()(),t.TgZ(117,"mat-form-field",10)(118,"mat-label"),t._uU(119,"Authorization "),t.qZA(),t._UZ(120,"input",41),t.YNc(121,y,2,0,"mat-error",9),t.YNc(122,S,2,0,"mat-error",9),t.qZA(),t.TgZ(123,"mat-form-field",10)(124,"mat-label"),t._uU(125,"Schedule Arrival date"),t.qZA(),t._UZ(126,"input",42),t.qZA(),t.TgZ(127,"mat-form-field",10)(128,"mat-label"),t._uU(129,"Schedule Arrival time"),t.qZA(),t._UZ(130,"input",43),t.qZA(),t.TgZ(131,"mat-form-field",10)(132,"mat-label"),t._uU(133,"Actual Arrival date"),t.qZA(),t._UZ(134,"input",44),t.qZA(),t.TgZ(135,"mat-form-field",10)(136,"mat-label"),t._uU(137,"Actual Arrival time"),t.qZA(),t._UZ(138,"input",45),t.qZA(),t.TgZ(139,"mat-form-field",10)(140,"mat-label"),t._uU(141,"Pro Number"),t.qZA(),t._UZ(142,"input",46),t.qZA(),t.TgZ(143,"mat-form-field",10)(144,"mat-label"),t._uU(145,"Carrier"),t.qZA(),t.TgZ(146,"mat-select",47),t.YNc(147,R,2,2,"mat-option",48),t.qZA()(),t.TgZ(148,"mat-form-field",10)(149,"mat-label"),t._uU(150,"Car/Trailer No"),t.qZA(),t._UZ(151,"input",49),t.qZA(),t.TgZ(152,"div",12)(153,"mat-form-field",10)(154,"mat-label"),t._uU(155,"Seal 1"),t.qZA(),t._UZ(156,"input",50),t.qZA(),t.TgZ(157,"mat-form-field",10)(158,"mat-label"),t._uU(159,"Broken"),t.qZA(),t.TgZ(160,"mat-select",51)(161,"mat-option",16),t._uU(162,"--select--"),t.qZA(),t.TgZ(163,"mat-option",40),t._uU(164,"Yes"),t.qZA(),t.TgZ(165,"mat-option",24),t._uU(166,"No"),t.qZA()()()(),t.TgZ(167,"div",12)(168,"mat-form-field",10)(169,"mat-label"),t._uU(170,"Seal 2"),t.qZA(),t._UZ(171,"input",52),t.qZA(),t.TgZ(172,"mat-form-field",10)(173,"mat-label"),t._uU(174,"Broken"),t.qZA(),t.TgZ(175,"mat-select",53)(176,"mat-option",16),t._uU(177,"--select--"),t.qZA(),t.TgZ(178,"mat-option",40),t._uU(179,"Yes"),t.qZA(),t.TgZ(180,"mat-option",24),t._uU(181,"No"),t.qZA()()()(),t.TgZ(182,"mat-form-field",10)(183,"mat-label"),t._uU(184,"Notification"),t.qZA(),t.TgZ(185,"mat-select",54)(186,"mat-option",16),t._uU(187,"--select--"),t.qZA(),t.TgZ(188,"mat-option",22),t._uU(189," D - Receiving Documents exist"),t.qZA(),t.TgZ(190,"mat-option",55),t._uU(191," E - Electronic/EDI "),t.qZA(),t.TgZ(192,"mat-option",24),t._uU(193,"N - No notification was received"),t.qZA()()(),t.TgZ(194,"mat-form-field",10)(195,"mat-label"),t._uU(196,"Invoice Date"),t.qZA(),t._UZ(197,"input",56),t.qZA(),t.TgZ(198,"mat-form-field",10)(199,"mat-label"),t._uU(200,"Special Charge"),t.qZA(),t.TgZ(201,"mat-select",57)(202,"mat-option",16),t._uU(203,"--select--"),t.qZA(),t.TgZ(204,"mat-option",40),t._uU(205,"Yes"),t.qZA(),t.TgZ(206,"mat-option",24),t._uU(207,"No"),t.qZA()()(),t.TgZ(208,"mat-form-field",10)(209,"mat-label"),t._uU(210,"Override Weight"),t.qZA(),t._UZ(211,"input",58),t.qZA(),t.TgZ(212,"mat-form-field",10)(213,"mat-label"),t._uU(214," Charge Type "),t.qZA(),t.TgZ(215,"mat-select",59)(216,"mat-option",16),t._uU(217,"--select--"),t.qZA(),t.TgZ(218,"mat-option",24),t._uU(219,"N = No Charge W/R "),t.qZA(),t.TgZ(220,"mat-option",22),t._uU(221," D = Distribution Only W/R "),t.qZA(),t.TgZ(222,"mat-option",20),t._uU(223,"S = Storage Only W/R "),t.qZA(),t.TgZ(224,"mat-option",60),t._uU(225," H = Handling Only W/R "),t.qZA()()()()(),t.TgZ(226,"div",61)(227,"button",62),t._uU(228,"Cancel"),t.qZA(),t.YNc(229,P,2,0,"button",63),t.qZA()()()()),2&e){let i;t.xp6(8),t.Q6J("formGroup",r.form),t.xp6(3),t.Q6J("options",r.StorerOptions),t.xp6(1),t.Q6J("ngIf",(null==(i=r.form.get("storer"))?null:i.touched)&&(null==(i=r.form.get("storer"))?null:i.hasError("required"))),t.xp6(17),t.Q6J("disabled",!0),t.xp6(71),t.Q6J("ngIf",r.form.controls.recvdFrom.hasError("required")),t.xp6(5),t.Q6J("ngIf",r.form.controls.storer.hasError("required")),t.xp6(1),t.Q6J("ngIf",r.form.controls.qty.hasError("pattern")),t.xp6(15),t.Q6J("ngIf",r.hasError("authorization","pattern")),t.xp6(1),t.Q6J("ngIf",r.hasError("authorization","minlength")||r.hasError("authorization","maxlength")),t.xp6(25),t.Q6J("ngForOf",r.carrierOptions),t.xp6(82),t.Q6J("ngIf",!r.update)}},dependencies:[g.m,d.sg,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,h.Hw,C.lW,u.TO,u.KE,u.hX,q.Nt,v.gD,b.ey,m.a8,m.dk,m.dn,m.n5,T.j,E.L]}),o})()}}]);