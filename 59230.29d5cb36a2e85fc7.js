"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[59230],{39505:(P,D,a)=>{a.d(D,{L:()=>T});var n=a(24006),m=a(59549),C=a(69751),g=a(68675),A=a(54004),s=a(94650),t=a(36895),E=a(47957),v=a(3238),M=a(44144);function S(u,h){if(1&u&&(s.TgZ(0,"mat-option",4),s._uU(1),s.qZA()),2&u){const e=h.$implicit;s.Q6J("value",e),s.xp6(1),s.Oqu(e)}}let T=(()=>{class u{constructor(e){this.fb=e,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=r=>{},this.onChange=r=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new C.y,this.filteredOptions=this.control.valueChanges.pipe((0,g.O)(this.value),(0,A.U)(r=>this._filter(r)))}setDescribedByIds(e){}onContainerClick(e){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(e){null!=e&&(this.control.setValue(e),this.value=e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}_filter(e){if(null==e||0==e.length)return this.options;const r=e.toLowerCase(),_=this.options.filter(b=>b.toLowerCase().includes(r));return!this.disabled&&1===_.length&&this.control.value!=_[0]&&e.length>=(this.previousValue?.length??0)&&this.control.setValue(_[0]),this.onChange(this.control.value),this.previousValue=this.control.value,_}}return u.\u0275fac=function(e){return new(e||u)(s.Y36(n.qu))},u.\u0275cmp=s.Xpm({type:u,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(e,r){2&e&&s.uIk("aria-describedby",r.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[s._Bn([{provide:n.JU,multi:!0,useExisting:u},{provide:m.Eo,useExisting:u}],[{provide:n.gN,useExisting:n.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,r){if(1&e&&(s.TgZ(0,"mat-form-field",0)(1,"mat-label"),s._uU(2),s.qZA(),s._UZ(3,"input",1),s.TgZ(4,"mat-autocomplete",null,2),s.YNc(6,S,2,2,"mat-option",3),s.ALo(7,"async"),s.qZA()()),2&e){const _=s.MAs(5);s.Q6J("appearance",r.appearance),s.xp6(2),s.Oqu(r.label),s.xp6(1),s.Q6J("id",r.id)("placeholder",r.placeholder)("formControl",r.control)("matAutocomplete",_),s.xp6(3),s.Q6J("ngForOf",s.lcZ(7,7,r.filteredOptions))}},dependencies:[t.sg,n.Fj,n.JJ,n.oH,E.XC,E.ZL,v.ey,m.KE,m.hX,M.Nt,t.Ov]}),u})()},59230:(P,D,a)=>{a.r(D),a.d(D,{SetApptEntryDefaultsComponent:()=>B});var n=a(24006),m=a(70879),C=a(35226),g=a.n(C),A=a(86385),s=a(48529),t=a(94650),E=a(19132),v=a(67347),M=a(65412),S=a(36895),T=a(4859),u=a(59549),h=a(44144),e=a(73546),r=a(39505);function _(p,O){if(1&p){const o=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.createDefault())}),t._uU(1," Create "),t.qZA()}if(2&p){const o=t.oxw();t.Q6J("disabled",!o.form.valid)}}function b(p,O){if(1&p){const o=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(o);const l=t.oxw();return t.KtG(l.updateDefaults())}),t._uU(1," Update "),t.qZA()}if(2&p){const o=t.oxw();t.Q6J("disabled",!(o.form.valid&&o.form.dirty))}}let B=(()=>{class p{constructor(o,i,l,d){this.fb=o,this.router=i,this.appSvc=l,this.matDialog=d,this.user=localStorage.getItem("userName")||"",this.dataSource=[],this.showCreate=!1,this.showUpdate=!1,this.inOutOptions=["I","O"],this.currentDSSTAT="",this.url="/Maintenance/read"}ngOnInit(){this.form=this.fb.group({inOut:"",building:["",[n.kI.maxLength(3),n.kI.required]]}),this.getDefaults()}ngOnDestroy(){this.apptDefaultsSubscription&&this.apptDefaultsSubscription.unsubscribe()}getDefaults(){this.apptDefaultsSubscription&&this.apptDefaultsSubscription.unsubscribe(),this.apptDefaultsSubscription=this.appSvc.SetApptEntry(this.user).subscribe(o=>{const l=JSON.parse(o[0].data[1]?.value).returnedData||[];this.dataSource=l;const f=!0===history.state?.openAddAfterCreate;if(0===l.length)return this.showCreate=!0,this.showUpdate=!1,this.form.reset(),void(this.currentDSSTAT="");const c=l[0];this.form.patchValue({inOut:c.DSINOU||"",building:c.DSBLDG||""}),this.currentDSSTAT=c.DSSTAT||"",localStorage.setItem("buildingEntry",c.DSBLDG||""),localStorage.setItem("inOut",c.DSINOU||""),f?this.router.navigateByUrl("/main-nav/WorkWithDockScheduler/add",{state:[c.DSBLDG,c.DSINOU]}):(this.showCreate=!1,this.showUpdate=!0)})}createDefault(o=!1){const i=this.form.value;this.apptDefaultsSubscription&&this.apptDefaultsSubscription.unsubscribe(),this.apptDefaultsSubscription=this.appSvc.createEntry(this.user,i.inOut,s.R.fullBuilding(i.building),"AC").subscribe(l=>{const f=JSON.parse(l[0].data[l[0].data.length-1].value).returnedData.message;if(f.toUpperCase()===s.R.createMsg.toUpperCase()){localStorage.setItem("buildingEntry",i.building),localStorage.setItem("inOut",i.inOut);const c=history.state;o||c?.openAddAfterCreate?this.router.navigateByUrl("/main-nav/WorkWithDockScheduler/add",{state:[i.building,i.inOut]}):(this.successMessage(f),this.router.navigate([this.url]))}else this.failureMessage(f)})}updateDefaults(){const o=this.form.value;this.apptDefaultsSubscription&&this.apptDefaultsSubscription.unsubscribe(),this.apptDefaultsSubscription=this.appSvc.updateEntry(this.user,o.inOut,s.R.fullBuilding(o.building),this.currentDSSTAT).subscribe(i=>{const d=JSON.parse(i[0].data[i[0].data.length-1].value).returnedData.message;d.toUpperCase()===s.R.updateMsg.toUpperCase()?(this.successMessage(d),this.router.navigate([this.url])):this.failureMessage(d)})}successMessage(o){g().fire(o,"","success")}failureMessage(o){g().fire(o,"","error")}}return p.\u0275fac=function(o){return new(o||p)(t.Y36(n.qu),t.Y36(E.F0),t.Y36(v.D),t.Y36(M.uw))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-set-appt-entry-defaults"]],standalone:!0,features:[t.jDz],decls:16,vars:4,consts:[[1,"over-Flow"],[1,"title"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline","formControlName","inOut","label","In/Out*",3,"options"],["appearance","outline",1,"full-width"],["matInput","","required","","formControlName","building","maxlength","3"],["mat-button","","class","buttons addButton","mat-raised-button","",3,"disabled","click",4,"ngIf"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(o,i){1&o&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t._uU(3,"Set Appointment Entry Defaults"),t.qZA()(),t.TgZ(4,"mat-card-content",2)(5,"form",3)(6,"div",4)(7,"div",5),t._UZ(8,"custom-input-autocomplete",6),t.TgZ(9,"mat-form-field",7)(10,"mat-label"),t._uU(11,"Building"),t.qZA(),t._UZ(12,"input",8),t.qZA()()(),t.TgZ(13,"div"),t.YNc(14,_,2,1,"button",9),t.YNc(15,b,2,1,"button",9),t.qZA()()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(3),t.Q6J("options",i.inOutOptions),t.xp6(6),t.Q6J("ngIf",i.showCreate),t.xp6(1),t.Q6J("ngIf",i.showUpdate))},dependencies:[m.m,S.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.nD,n.sg,n.u,T.lW,u.KE,u.hX,h.Nt,e.a8,e.dk,e.dn,e.n5,A.j,r.L]}),p})()}}]);