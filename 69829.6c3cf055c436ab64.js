"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[69829],{69829:(ne,h,s)=>{s.r(h),s.d(h,{ReceivablesInvoiceInquirySiComponent:()=>te});var d=s(98739),l=s(7155),T=s(70879),S=s(81360),e=s(94650),m=s(24006),C=s(19132),b=s(81543),g=s(36895),y=s(97392),v=s(28255),A=s(4859),f=s(59549),Z=s(44144),I=s(99602),p=s(73546),D=s(10266),q=s(90455);function R(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14)(2,"div",50)(3,"span",51),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(4,"mat-slide-toggle",52),e.NdJ("ngModelChange",function(a){const c=e.CHM(t).$implicit;return e.KtG(c.isActive=a)})("change",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.toggleColumn(r))}),e._uU(5),e.qZA()()()(),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(4),e.Q6J("ngModel",t.isActive),e.xp6(1),e.hij(" ",t.name," ")}}function N(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1," Item "),e.qZA())}function U(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.WKITDSC," ")}}function E(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Balance"),e.qZA())}function M(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.lnq("",0!==t.WK1BALN?t.WK1BALN:""," ",0!==t.WK1BALN&&0!==t.WK1BUNT?" ":"","",0!==t.WK1BUNT?t.WK1BUNT:"","")}}function W(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Weight"),e.qZA())}function P(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.lnq("",0!==t.WK1WGHT?t.WK1WGHT:""," ",0!==t.WK1WGHT&&0!==t.WK1WUNT?" ":"","",0!==t.WK1WUNT?t.WK1WUNT:"","")}}function O(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Date Received"),e.qZA())}function K(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.WKS1RCVD)}}function x(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Charge Amount"),e.qZA())}function B(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(0!==t.WKAMT?t.WKAMT:"")}}function L(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"MN"),e.qZA())}function G(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.WK1MIN)}}function Y(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Transaction Date"),e.qZA())}function w(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.WKS1TRAN)}}function H(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Shipped"),e.qZA())}function Q(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.WSHIP)}}function J(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Rate"),e.qZA())}function $(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(0!==t.WKRATE?t.WKRATE:"")}}function k(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Days Past Grace"),e.qZA())}function F(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(0!==t.WKPGRAC?t.WKPGRAC:"")}}function z(i,o){1&i&&(e.TgZ(0,"th",53),e._uU(1,"Months Storage"),e.qZA())}function j(i,o){if(1&i&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(0!==t.WKS1MULT?t.WKS1MULT:"")}}function V(i,o){1&i&&e._UZ(0,"tr",55)}function X(i,o){1&i&&e._UZ(0,"tr",56)}const ee=function(){return[8,16,24]};let te=(()=>{class i{constructor(t,n,a){this.fb=t,this.router=n,this.RecvSvc=a,this.dataSource=new l.by,this.duplicateSource=[],this.user=localStorage.getItem("userName")||"",this.editedRows=[],this.searchTextDisplay=!1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.displayedColumns=["Item","Balance","Weight","DateReceived","ChargeAmount","MN"],this.columnShowHideList=[],this.headerActions=[],this.menuItems=[],this.actions=[],this.totalAmountDue=0,this.Storer=0,this.StorerName="",this.isNavigating=!1,this.receivablesUrl="/main-nav/receivables/read"}toggleColumn(t){if(t.isActive)this.displayedColumns.splice(t.position>this.displayedColumns.length-1?this.displayedColumns.length-1:t.position,0,t.name);else{let n=this.displayedColumns.indexOf(t.name);n>-1&&this.displayedColumns.splice(n,1)}}initializeColumnProperties(){this.displayedColumns.forEach((t,n)=>{"Actions"!=t&&this.columnShowHideList.push({position:n,name:t,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"TransactionDate",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Shipped",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Rate",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"DaysPastGrace",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"MonthsStorage",isActive:!1})}searchItem(){this.searchTextDisplay=1!=this.searchTextDisplay}ngOnInit(){this.element=history.state;const t=history.state;this.element=t.row||t;const n=[...t.headerActions||[],...t.menuItems||[]];this.actions=n.filter(c=>c.action!==t.disabledAction),this.form=this.fb.group({invoiceNumber:this.element.WKINV,PositiontoItem:"",GENDT:"",GENTM:"",Period:this.element.AHDESC}),this.initializeColumnProperties(),this.editedRows=[],this.getInvInquirySI(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}ngOnDestroy(){this.invoiceInquirySubscription&&this.invoiceInquirySubscription.unsubscribe()}createFilter(){return(t,n)=>{const a=JSON.parse(n);return Object.keys(a).every(r=>t[r].toString().toLowerCase().includes(a[r].toLowerCase()))}}getInvInquirySI(t,n){const a=this.currentFilters||{},{WKINVN:r=`${this.element.WKINV}`}=a;this.invoiceInquirySubscription&&this.invoiceInquirySubscription.unsubscribe(),this.invoiceInquirySubscription=this.RecvSvc.FreightInv(this.user,r,t,n).subscribe(c=>{try{const u=JSON.parse(c[0].data[1]?.value),_=u.returnedData;if("SI1"===u.Type)return void this.router.navigate(["/main-nav/receivables/invoice-inquiry-Storage-SI2"],{state:{invoice:this.element.WKINV,Name:_[0].WKSNAME}});this.displayedColumns=98===_[0]?.WKS1TYPE?["Item"]:["Item","Balance","Weight","DateReceived","ChargeAmount","MN"],this.dataSource.data=_,this.loadGeneratedDateTime(_[0].WKGEND),this.totalAmountDue=u["Total Amount Due"],this.Storer=_[0].S1STOR,this.StorerName=_[0].WKSNAME,this.fullStorer=`${this.Storer}  ${this.StorerName}`,this.totalAmountDue=u["Total Amount Due"],console.log(this.fullStorer),this.totalRecords=u.TotalRecords}catch(u){console.error("Error processing response:",u)}})}loadGeneratedDateTime(t){const n=t.replace('WKGEND":"',"").replace(/"/g,""),a="20"+n.substring(1,3),r=n.substring(3,5),c=n.substring(5,7),u=n.substring(7,9),_=n.substring(9,11);this.form.patchValue({GENDT:new Date(`${a}-${r}-${c}`),GENTM:`${u}:${_}`})}onPaginateChange(t){this.pageSize=t.pageSize,this.getInvInquirySI(t.pageSize,t.pageIndex+this.pageNumber)}getInquireBySearch(t){this.currentFilters=t,this.paginator.firstPage(),this.getInvInquirySI(this.pageSize,this.pageNumber)}resetSearch(){this.form.reset(),this.currentFilters=null,this.paginator.firstPage(),this.getInvInquirySI(this.pageSize,this.pageNumber)}onBack(){this.router.navigate([this.receivablesUrl])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.qu),e.Y36(C.F0),e.Y36(b.Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-receivables-invoice-inquiry-si"]],viewQuery:function(t,n){if(1&t&&e.Gf(d.NW,5),2&t){let a;e.iGM(a=e.CRH())&&(n.paginator=a.first)}},standalone:!0,features:[e.jDz],decls:101,vars:20,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],[1,"menu-container"],["mainMenuButton","matMenu"],[1,"grid-container"],[4,"ngFor","ngForOf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["mat-button","","type","reset","value","Reset","matTooltip","Reset",1,"addButton","buttons",3,"click"],[3,"title","row","actions","disabledAction"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","invoiceNumber"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","Period"],["matInput","","formControlName","positionToItem"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","GENDT","readonly","",3,"matDatepicker"],["GeneratedDatePicker",""],["matInput","","formControlName","GENTM","readonly",""],["matInput","",3,"value"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Balance"],["matColumnDef","Weight"],["matColumnDef","DateReceived"],["matColumnDef","ChargeAmount"],["matColumnDef","MN"],["matColumnDef","TransactionDate"],["matColumnDef","Shipped"],["matColumnDef","Rate"],["matColumnDef","DaysPastGrace"],["matColumnDef","MonthsStorage"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side1"],[1,"buttons","button3"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],[1,"grid-item"],[3,"click"],[2,"color","blue",3,"ngModel","ngModelChange","change"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),e.NdJ("click",function(){return n.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before "),e.qZA()(),e._uU(6,"Grace Period Exception Inquiry"),e.qZA(),e.TgZ(7,"div",3)(8,"mat-menu",4,5)(10,"div",6),e.YNc(11,R,6,2,"ng-container",7),e.qZA()(),e.TgZ(12,"button",8,9)(14,"mat-icon"),e._uU(15,"visibility_off"),e.qZA()(),e.TgZ(16,"button",10),e.NdJ("click",function(){return n.resetSearch()}),e.TgZ(17,"mat-icon"),e._uU(18,"loop"),e.qZA()()()(),e._UZ(19,"app-receivable-breadcrumbs",11),e.TgZ(20,"mat-card-content",12)(21,"form",13)(22,"div",14)(23,"div",15)(24,"mat-form-field",16)(25,"mat-label"),e._uU(26," Invoice Number "),e.qZA(),e._UZ(27,"input",17),e.qZA(),e.TgZ(28,"mat-form-field",18)(29,"mat-label"),e._uU(30," Period "),e.qZA(),e._UZ(31,"input",19),e.qZA(),e.TgZ(32,"mat-form-field",16)(33,"mat-label"),e._uU(34,"Position to Item"),e.qZA(),e._UZ(35,"input",20),e.qZA(),e.TgZ(36,"div",21)(37,"label",22),e._uU(38,"Generated"),e.qZA(),e.TgZ(39,"div",23)(40,"mat-form-field",16)(41,"mat-label"),e._uU(42,"Generated Date "),e.qZA(),e._UZ(43,"input",24)(44,"mat-datepicker",null,25),e.qZA(),e.TgZ(46,"mat-form-field",16)(47,"mat-label"),e._uU(48,"Generated Time"),e.qZA(),e._UZ(49,"input",26),e.qZA()()(),e.TgZ(50,"mat-form-field",18)(51,"mat-label"),e._uU(52," Storer "),e.qZA(),e._UZ(53,"input",27),e.qZA()()(),e.TgZ(54,"button",28),e._uU(55," Search "),e.qZA()()(),e._UZ(56,"br"),e.TgZ(57,"table",29),e.ynx(58,30),e.YNc(59,N,2,0,"th",31),e.YNc(60,U,2,1,"td",32),e.BQk(),e.ynx(61,33),e.YNc(62,E,2,0,"th",31),e.YNc(63,M,2,3,"td",32),e.BQk(),e.ynx(64,34),e.YNc(65,W,2,0,"th",31),e.YNc(66,P,2,3,"td",32),e.BQk(),e.ynx(67,35),e.YNc(68,O,2,0,"th",31),e.YNc(69,K,2,1,"td",32),e.BQk(),e.ynx(70,36),e.YNc(71,x,2,0,"th",31),e.YNc(72,B,2,1,"td",32),e.BQk(),e.ynx(73,37),e.YNc(74,L,2,0,"th",31),e.YNc(75,G,2,1,"td",32),e.BQk(),e.ynx(76,38),e.YNc(77,Y,2,0,"th",31),e.YNc(78,w,2,1,"td",32),e.BQk(),e.ynx(79,39),e.YNc(80,H,2,0,"th",31),e.YNc(81,Q,2,1,"td",32),e.BQk(),e.ynx(82,40),e.YNc(83,J,2,0,"th",31),e.YNc(84,$,2,1,"td",32),e.BQk(),e.ynx(85,41),e.YNc(86,k,2,0,"th",31),e.YNc(87,F,2,1,"td",32),e.BQk(),e.ynx(88,42),e.YNc(89,z,2,0,"th",31),e.YNc(90,j,2,1,"td",32),e.BQk(),e.YNc(91,V,1,0,"tr",43),e.YNc(92,X,1,0,"tr",44),e.qZA(),e._UZ(93,"br"),e.TgZ(94,"div",45)(95,"div",46)(96,"button",47),e._uU(97),e.ALo(98,"number"),e.qZA()()(),e.TgZ(99,"mat-paginator",48,49),e.NdJ("page",function(r){return n.onPaginateChange(r)}),e.qZA()()),2&t){const a=e.MAs(9),r=e.MAs(45);e.xp6(11),e.Q6J("ngForOf",n.columnShowHideList),e.xp6(1),e.Q6J("matMenuTriggerFor",a),e.xp6(7),e.Q6J("title","Grace Period Exception Inquiry")("row",n.element)("actions",n.actions)("disabledAction","ReceivablesDetails"),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(22),e.Q6J("matDatepicker",r),e.xp6(10),e.Q6J("value",n.StorerName),e.xp6(4),e.Q6J("dataSource",n.dataSource),e.xp6(34),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(5),e.hij(" Total Amount Due : $",e.xi3(98,16,n.totalAmountDue,"1.2-2")," "),e.xp6(2),e.Q6J("length",n.totalRecords)("pageSizeOptions",e.DdM(19,ee))("pageSize",n.pageSize)}},dependencies:[T.m,g.sg,m._Y,m.Fj,m.JJ,m.JL,m.On,m.sg,m.u,d.NW,y.Hw,v.VK,v.p6,A.lW,f.KE,f.hX,Z.Nt,I.Mq,I.hl,p.a8,p.dk,p.dn,p.n5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,D.gM,q.Rr,g.JJ,S.F]}),i})()}}]);