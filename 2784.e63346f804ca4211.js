"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[2784],{72784:(w,h,r)=>{r.r(h),r.d(h,{StorageInvoiceInquiryComponent:()=>Q});var p=r(98739),l=r(7155),I=r(70879),v=r(35226),S=r.n(v),_=r(36895),t=r(94650),f=r(19132),A=r(11240),m=r(24006),b=r(65412),E=r(97392),Z=r(4859),T=r(59549),D=r(44144),g=r(73546),C=r(10266);function y(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchStorer())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function M(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchStorer())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function O(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1," Item "),t.qZA())}function N(n,i){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.HOy(" ",e.WKITDSC," ",e.WKS1LOT1," ",e.WKS1LOT2," ",e.WKS1LOT3," ")}}function U(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1," On Hand Balance "),t.qZA())}function q(n,i){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.AsE(" ",0!==e.WK1BALN?e.WK1BALN:""," ",0!==e.WK1BUNT?e.WK1BUNT:""," ")}}function P(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1," On Hand Weight "),t.qZA())}function W(n,i){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.AsE(" ",0!==e.WK1WGHT?e.WK1WGHT:""," ",e.WK1WUNT," ")}}function R(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1," Rate "),t.qZA())}function B(n,i){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij("",0!==e.WKRATE?e.WKRATE:""," ")}}function K(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1," Charge Amount "),t.qZA())}function x(n,i){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",0!==e.WKAMT?e.WKAMT:"","")}}function G(n,i){1&n&&(t.TgZ(0,"th",43),t._uU(1," Minimum charge "),t.qZA())}function L(n,i){if(1&n&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.WK1MIN)}}function F(n,i){1&n&&t._UZ(0,"tr",45)}function J(n,i){1&n&&t._UZ(0,"tr",46)}function Y(n,i){1&n&&(t.TgZ(0,"div",47),t._uU(1," Invoice exceeds reasonable amount for the storer, reasonable storer amount set at $500.00 "),t.qZA())}const H=function(){return[8,16,24]};let Q=(()=>{class n{constructor(e,o,a,c,s,u){this.router=e,this.StorerServiceService=o,this.fb=a,this.route=c,this.matDialog=s,this.cdr=u,this.StorerRead="/main-nav/storer",this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.duplicateSource=[],this.displayedColumns=["Item","OnHandBalance","OnHandWeight","Rate","ChargeAmount","Minimumcharge"],this.dataSource=new l.by,this.user=localStorage.getItem("userName")||"",this.INITIAL_PAGE=1,this.DEFAULT_PAGE_SIZE=8,this.searchTextDisplay=!0,this.period="",this.totalAmountDue=0,this.total=0,this.item=""}ngOnInit(){this.element=history.state;const e=new Date,o=(0,_.p6)(e,"yyyy-MM-dd","en-US"),a=(0,_.p6)(e,"HH:mm","en-US");this.S1STOR=this.element.STORE,this.S1SSFX=this.element.STSFX,this.STNAME=this.element.STNAME,this.form=this.fb.group({Date:[{value:o,disabled:!0}],Time:[{value:a,disabled:!0}],S1STOR:[{value:this.element.STORE+"\xa0"+this.element.STNAME,disabled:!0}],S1SSFX:[{value:this.S1SSFX,disabled:!0}],INVNO:[{value:"",disabled:!0}],GENDT:[{value:"",disabled:!0}],GENTM:[{value:"",disabled:!0}],WKITEM:[this.item],SNAME:[{value:"",disabled:!0}]}),this.getStorageInvoice(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}ngOnDestroy(){this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe()}createFilter(){return(e,o)=>{const a=JSON.parse(o);return Object.keys(a).every(c=>e[c]?.toString().toLowerCase().includes(a[c].toLowerCase())||!1)}}searchStorer(){this.searchTextDisplay=1!=this.searchTextDisplay}getInquireBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,this.INITIAL_PAGE)}resetSearch(){this.form.reset(),this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,1)}onPaginateChange(e){this.pageSize=e.pageSize,this.getStorageInvoice(e.pageSize,e.pageIndex+1)}getStorageInvoice(e,o){const c=this.form.controls.WKITEM.value||"";this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe(),this.StorageInvoicesSubscription=this.StorerServiceService.StorageInvoiceInquiry(this.user,this.element.STORE,this.element.STSFX,"","0",c,e,o).subscribe(s=>{console.log(s);var u=JSON.parse(s[0].data[1]?.value);const d=u.returnedData;this.dataSource.data=d,this.totalRecords=u.TotalRecords,this.loadGeneratedDateTime(d[0].WKGEND),this.GeneratedDate=u["Generated Date"],this.GeneratedTime=u["Generated Time"],this.totalAmountDue=u["Total Amount Due"],this.item=u?.WKITEM||"",console.log("Assigned item:",this.item),this.form.patchValue({WKITEM:this.item})})}loadGeneratedDateTime(e){const o=e.replace('WKGEND":"',"").replace(/"/g,""),a="20"+o.substring(1,3),c=o.substring(3,5),s=o.substring(5,7),u=o.substring(7,9),d=o.substring(9,11);this.form.patchValue({GENDT:new Date(`${a}-${c}-${s}`),GENTM:`${u}:${d}`})}onPrintAccessInvoice(){const o=this.element.STORE,a=this.form.get("S1SSFX")?.value;this.StorerServiceService.PrintStorageInvoice("P",o,a,"").subscribe({next:s=>{console.log("Print Access Invoice response:",s);const u=s.msg||"Submitted Successfully";"Submitted Successfully"===u?this.successMessage(u):this.failureMessage(u)},error:s=>{console.error("Print Access Invoice error:",s),this.failureMessage("Submission Failed")}})}onPostAccessInvoice(){const o=this.element.STORE,a=this.form.get("S1SSFX")?.value;this.StorerServiceService.PostStorageInvoice("U",o,a,"").subscribe({next:s=>{console.log("Post Access Invoice response:",s);const u=s.msg||"Submitted Successfully";"Submitted Successfully"===u?this.successMessage(u):this.failureMessage(u)},error:s=>{console.error("Post Access Invoice error:",s),this.failureMessage("Submission Failed")}})}successMessage(e){S().fire(e,"","success")}failureMessage(e){S().fire(e,"","error")}onBack(){this.router.navigate([this.StorerRead])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.F0),t.Y36(A.h),t.Y36(m.qu),t.Y36(f.gz),t.Y36(b.uw),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-storage-invoice-inquiry"]],viewQuery:function(e,o){if(1&e&&t.Gf(p.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first)}},standalone:!0,features:[t.jDz],decls:84,vars:17,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Storage invoice details",3,"click",4,"ngIf"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Date"],["matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","formControlName","WKITEM",2,"text-transform","uppercase"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","GENDT",3,"value"],["matInput","","formControlName","GENTM",3,"value"],["matInput","","formControlName","S1STOR",2,"text-transform","uppercase"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","OnHandBalance"],["matColumnDef","OnHandWeight"],["matColumnDef","Rate"],["matColumnDef","ChargeAmount"],["matColumnDef","Minimumcharge"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],["class","warn",4,"ngIf"],[1,"Content-page-both-right"],[1,"right-side-content"],[1,"buttons","button3"],["mat-raised-button","","type","submit",1,"buttons","addButton","tally-search-btn",3,"click"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Storage invoice details",1,"addButton",3,"click"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"warn"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return o.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Storage Invoice Inquiry"),t.qZA(),t.TgZ(7,"div",3),t.YNc(8,y,3,0,"button",4),t.YNc(9,M,3,0,"button",5),t.qZA()(),t.TgZ(10,"mat-card-content",6)(11,"form",7),t.NdJ("ngSubmit",function(){return o.getInquireBySearch(o.form.value)}),t.TgZ(12,"div",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),t._uU(16,"Date "),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"mat-form-field",10)(19,"mat-label"),t._uU(20,"Time"),t.qZA(),t._UZ(21,"input",12),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label"),t._uU(24,"Position to Item"),t.qZA(),t._UZ(25,"input",13),t.qZA(),t.TgZ(26,"div",14)(27,"label",15),t._uU(28,"Generated"),t.qZA(),t.TgZ(29,"div",16)(30,"mat-form-field",10)(31,"mat-label"),t._uU(32,"Generated Date "),t.qZA(),t._UZ(33,"input",17),t.qZA(),t.TgZ(34,"mat-form-field",10)(35,"mat-label"),t._uU(36,"Generated Time"),t.qZA(),t._UZ(37,"input",18),t.qZA()()(),t.TgZ(38,"mat-form-field",10)(39,"mat-label"),t._uU(40," Storer "),t.qZA(),t._UZ(41,"input",19),t.qZA()()(),t.TgZ(42,"button",20),t._uU(43," Search "),t.qZA()()(),t.TgZ(44,"table",21),t.ynx(45,22),t.YNc(46,O,2,0,"th",23),t.YNc(47,N,2,4,"td",24),t.BQk(),t.ynx(48,25),t.YNc(49,U,2,0,"th",23),t.YNc(50,q,2,2,"td",24),t.BQk(),t.ynx(51,26),t.YNc(52,P,2,0,"th",23),t.YNc(53,W,2,2,"td",24),t.BQk(),t.ynx(54,27),t.YNc(55,R,2,0,"th",23),t.YNc(56,B,2,1,"td",24),t.BQk(),t.ynx(57,28),t.YNc(58,K,2,0,"th",23),t.YNc(59,x,2,1,"td",24),t.BQk(),t.ynx(60,29),t.YNc(61,G,2,0,"th",23),t.YNc(62,L,2,1,"td",24),t.BQk(),t.YNc(63,F,1,0,"tr",30),t.YNc(64,J,1,0,"tr",31),t.qZA(),t._UZ(65,"br"),t.TgZ(66,"div",32)(67,"div",33),t.YNc(68,Y,2,0,"div",34),t.qZA()(),t.TgZ(69,"div",35),t._UZ(70,"br"),t.TgZ(71,"div",36)(72,"button",37),t._uU(73),t.ALo(74,"number"),t.qZA()()(),t._UZ(75,"br"),t.TgZ(76,"div",32)(77,"div",33)(78,"button",38),t.NdJ("click",function(){return o.onPostAccessInvoice()}),t._uU(79,"Post & Print"),t.qZA(),t.TgZ(80,"button",38),t.NdJ("click",function(){return o.onPrintAccessInvoice()}),t._uU(81," Print "),t.qZA()()(),t.TgZ(82,"mat-paginator",39,40),t.NdJ("page",function(c){return o.onPaginateChange(c)}),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!o.searchTextDisplay),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(22),t.Q6J("value",o.GeneratedDate),t.xp6(4),t.Q6J("value",o.GeneratedTime),t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(4),t.Q6J("ngIf",o.totalAmountDue>500),t.xp6(5),t.hij(" Total Amount : $",t.xi3(74,13,o.totalAmountDue,"1.2-2")," "),t.xp6(9),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(16,H))("pageSize",o.pageSize))},dependencies:[I.m,_.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,p.NW,E.Hw,Z.lW,T.KE,T.hX,D.Nt,g.a8,g.dk,g.dn,g.n5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,C.gM,_.JJ]}),n})()}}]);