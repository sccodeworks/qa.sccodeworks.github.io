"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[6741,11790,38754,85645],{11790:(y,A,r)=>{r.d(A,{y:()=>l});var g=r(65412),i=r(94650),W=r(97392),f=r(4859);let I=(()=>{class p{constructor(_,e){this.dialogRef=_,this.data=e}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return p.\u0275fac=function(_){return new(_||p)(i.Y36(g.so),i.Y36(g.WI))},p.\u0275cmp=i.Xpm({type:p,selectors:[["app-alert-dialog"]],decls:16,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["aria-label","Close dialog",1,"close-btn",3,"click"],[1,"icon-wrapper"],["src","assets/svg/icons/Delete.svg","alt","Delete",1,"delete-svg-icon"],[1,"confirm-dialog-title"],[1,"confirmation-message"],[1,"footer","confirm-dialog"],["mat-raised-button","","id","no-button",1,"buttons","cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","id","yes-button",1,"buttons","removeButton","new-tally-form-btn",3,"mat-dialog-close"]],template:function(_,e){1&_&&(i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i.NdJ("click",function(){return e.closeDialog()}),i.TgZ(3,"mat-icon"),i._uU(4,"close"),i.qZA()(),i.TgZ(5,"div",3),i._UZ(6,"img",4),i.qZA(),i.TgZ(7,"h2",5),i._uU(8,"Confirmation"),i.qZA(),i.TgZ(9,"span",6),i._uU(10),i.qZA()(),i.TgZ(11,"div",7)(12,"button",8),i._uU(13,"Cancel"),i.qZA(),i.TgZ(14,"button",9),i._uU(15,"Delete"),i.qZA()()()),2&_&&(i.xp6(10),i.Oqu(e.data.message),i.xp6(2),i.Q6J("mat-dialog-close",!1),i.xp6(2),i.Q6J("mat-dialog-close",!0))},dependencies:[W.Hw,f.lW,g.ZT]}),p})(),l=(()=>{class p{constructor(_){this.dialog=_}openCustomAlert(_){return this.dialog.open(I,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:_}})}}return p.\u0275fac=function(_){return new(_||p)(i.LFG(g.uw))},p.\u0275prov=i.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},39505:(y,A,r)=>{r.d(A,{L:()=>U});var g=r(24006),i=r(59549),W=r(69751),f=r(68675),I=r(54004),l=r(94650),p=r(36895),Z=r(47957),_=r(3238),e=r(44144);function b(v,M){if(1&v&&(l.TgZ(0,"mat-option",4),l._uU(1),l.qZA()),2&v){const c=M.$implicit;l.Q6J("value",c),l.xp6(1),l.Oqu(c)}}let U=(()=>{class v{constructor(c){this.fb=c,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=d=>{},this.onChange=d=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new W.y,this.filteredOptions=this.control.valueChanges.pipe((0,f.O)(this.value),(0,I.U)(d=>this._filter(d)))}setDescribedByIds(c){}onContainerClick(c){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(c){null!=c&&(this.control.setValue(c),this.value=c)}registerOnChange(c){this.onChange=c}registerOnTouched(c){this.onTouched=c}setDisabledState(c){this.disabled=c}_filter(c){if(null==c||0==c.length)return this.options;const d=c.toLowerCase(),C=this.options.filter(z=>z.toLowerCase().includes(d));return!this.disabled&&1===C.length&&this.control.value!=C[0]&&c.length>=(this.previousValue?.length??0)&&this.control.setValue(C[0]),this.onChange(this.control.value),this.previousValue=this.control.value,C}}return v.\u0275fac=function(c){return new(c||v)(l.Y36(g.qu))},v.\u0275cmp=l.Xpm({type:v,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(c,d){2&c&&l.uIk("aria-describedby",d.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[l._Bn([{provide:g.JU,multi:!0,useExisting:v},{provide:i.Eo,useExisting:v}],[{provide:g.gN,useExisting:g.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(c,d){if(1&c&&(l.TgZ(0,"mat-form-field",0)(1,"mat-label"),l._uU(2),l.qZA(),l._UZ(3,"input",1),l.TgZ(4,"mat-autocomplete",null,2),l.YNc(6,b,2,2,"mat-option",3),l.ALo(7,"async"),l.qZA()()),2&c){const C=l.MAs(5);l.Q6J("appearance",d.appearance),l.xp6(2),l.Oqu(d.label),l.xp6(1),l.Q6J("id",d.id)("placeholder",d.placeholder)("formControl",d.control)("matAutocomplete",C),l.xp6(3),l.Q6J("ngForOf",l.lcZ(7,7,d.filteredOptions))}},dependencies:[p.sg,g.Fj,g.JJ,g.oH,Z.XC,Z.ZL,_.ey,i.KE,i.hX,e.Nt,p.Ov]}),v})()},6741:(y,A,r)=>{r.r(A),r.d(A,{WorkWithMemorizedInvoicesComponent:()=>ve});var g=r(70879),i=r(24006),W=r(98739),f=r(7155),I=r(35226),l=r.n(I),p=r(65412),Z=r(48529),_=r(86385),e=r(94650),b=r(19132),U=r(18740),v=r(20025),M=r(97392),c=r(4859),d=r(59549),C=r(44144),z=r(84385),N=r(3238),T=r(73546),x=r(39505);let L=(()=>{class o{constructor(t,n,s,m,u,h,S){this.anyvariable=t,this.router=n,this.route=s,this.fb=m,this.MemorizedInvoices=u,this.generalInvoicesService=h,this.dialogRef=S,this.user=localStorage.getItem("userName"),this.memoOptions=[],this.dataSource1=new f.by,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.url="/main-nav/MemorizedInvoices/read"}ngOnDestroy(){this.getMemorizedInvoicesSubscription&&this.getMemorizedInvoicesSubscription.unsubscribe()}ngOnInit(){this.form=this.fb.group({baseControlNumber:"",frequency:"",period:"",description:"",date:"",status:"AC"}),this.fetchControlNumbers()}fetchControlNumbers(){this.generalInvoicesService.getControlCodes().subscribe(t=>{this.result=t;for(const n of this.result)this.memoOptions.push(n.HGCTL)})}addMemorizedInvoice(){var t=this.form.value;this.MemorizedInvoices.createMemorizedInvoices(t.baseControlNumber,t.frequency,t.period,t.description,t.date,this.user).subscribe(n=>{const m=JSON.parse(n[0].data[n[0].data.length-1].value).returnedData,h="Control Number :\xa0 "+m.Controlnumber+"\xa0Created Successfully";m.message.toUpperCase()===Z.R.createMsg.toUpperCase()?(this.successMessage(h),this.closeDialog(),this.router.navigate([this.url])):this.failureMessage(m.message)})}successMessage(t){l().fire(t,"","success")}failureMessage(t){l().fire(t,"","error")}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.WI),e.Y36(b.F0),e.Y36(b.gz),e.Y36(i.qu),e.Y36(U.D),e.Y36(v.m),e.Y36(p.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-work-with-memorized-invoices"]],standalone:!0,features:[e.jDz],decls:63,vars:3,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["formControlName","baseControlNumber","label","Base Control Number","appearance","outline",1,"full-width2",3,"options"],["appearance","outline",1,"full-width"],["required","","formControlName","frequency"],["value","*MONTHLY"],["value","*HALFMONTH"],["value","*WEEKLY"],["required","","formControlName","period"],["value","*THISM"],["value","*LASTM"],["value","*THISW"],["value","*LASTW"],["value","*NONE"],["appearance","outline",1,"full-width2"],["required","","matInput","","formControlName","description","maxlength","30"],["required","","formControlName","date"],["value","*CURRENT"],["value","*START"],["value","*END"],["readonly","","matInput","","formControlName","status"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),e._uU(4,"Maintain Memorized Invoice"),e.qZA()(),e.TgZ(5,"button",2),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(6,"mat-icon",3),e._uU(7,"close"),e.qZA()()(),e.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7),e._UZ(12,"custom-input-autocomplete",8)(13,"br"),e.TgZ(14,"mat-form-field",9)(15,"mat-label"),e._uU(16," Frequency "),e.qZA(),e.TgZ(17,"mat-select",10)(18,"mat-option",11),e._uU(19," *MONTHLY "),e.qZA(),e.TgZ(20,"mat-option",12),e._uU(21," *HALFMONTH "),e.qZA(),e.TgZ(22,"mat-option",13),e._uU(23," *WEEKLY "),e.qZA()()(),e.TgZ(24,"mat-form-field",9)(25,"mat-label"),e._uU(26," Period "),e.qZA(),e.TgZ(27,"mat-select",14)(28,"mat-option",15),e._uU(29," *THISM "),e.qZA(),e.TgZ(30,"mat-option",16),e._uU(31," *LASTM "),e.qZA(),e.TgZ(32,"mat-option",17),e._uU(33," *THISW "),e.qZA(),e.TgZ(34,"mat-option",18),e._uU(35," *LASTW "),e.qZA(),e.TgZ(36,"mat-option",19),e._uU(37," *NONE "),e.qZA()()(),e.TgZ(38,"mat-form-field",20)(39,"mat-label"),e._uU(40,"Description Leader"),e.qZA(),e._UZ(41,"input",21),e.TgZ(42,"mat-hint"),e._uU(43," Only "),e.TgZ(44,"strong"),e._uU(45,"30 characters "),e.qZA(),e._uU(46," are allowed"),e.qZA()(),e.TgZ(47,"mat-form-field",9)(48,"mat-label"),e._uU(49," Invoice Date "),e.qZA(),e.TgZ(50,"mat-select",22)(51,"mat-option",23),e._uU(52," *CURRENT "),e.qZA(),e.TgZ(53,"mat-option",24),e._uU(54," *START "),e.qZA(),e.TgZ(55,"mat-option",25),e._uU(56," *END "),e.qZA()()(),e.TgZ(57,"mat-form-field",9)(58,"mat-label"),e._uU(59,"Status Code"),e.qZA(),e._UZ(60,"input",26),e.qZA()()(),e.TgZ(61,"button",27),e.NdJ("click",function(){return n.addMemorizedInvoice()}),e._uU(62," Create "),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("options",n.memoOptions),e.xp6(49),e.Q6J("disabled",!(n.form.valid&&n.form.dirty)))},dependencies:[g.m,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.nD,i.sg,i.u,M.Hw,c.lW,d.KE,d.bx,d.hX,C.Nt,z.gD,N.ey,T.a8,T.dk,T.dn,T.n5,_.j,x.L]}),o})(),E=(()=>{class o{constructor(t,n,s,m,u){this.anyvariable=t,this.router=n,this.fb=s,this.MemorizedInvoices=m,this.dialogRef=u,this.user=localStorage.getItem("userName")}ngOnInit(){this.form=this.fb.group({ControlNumber:this.anyvariable.WkCTL,BaseControlNumber:[this.anyvariable.WkBCTL,i.kI.pattern("[0-9]{1,7}")],Frequency:this.anyvariable.WKFREQ,Period:this.anyvariable.WCMGPERD,DescriptionLeader:[this.anyvariable.WCMGDESC,i.kI.maxLength(30)],InvoiceDate:this.anyvariable.WCMGDATE,LastRun:this.anyvariable.WCMGLAST,StatusCode:[this.anyvariable.WCMGSTAT,i.kI.maxLength(2)]})}ngOnDestroy(){this.getMemorizedInvoicesSubscription&&this.getMemorizedInvoicesSubscription.unsubscribe()}updateMemorizedInvoices(){var t=this.form.value;console.log(t),this.getMemorizedInvoicesSubscription&&this.getMemorizedInvoicesSubscription.unsubscribe(),this.getMemorizedInvoicesSubscription=this.MemorizedInvoices.updateMemorizedInvoices(this.user,t.ControlNumber,t.BaseControlNumber,t.Frequency,t.Period,t.DescriptionLeader,t.InvoiceDate,t.LastRun,t.StatusCode).subscribe(n=>{const m=JSON.parse(n[0].data[n[0].data.length-1].value).returnedData.message;"Record Updated Successfully"===m?(this.successMessage(m),this.closeDialog(),this.router.navigate(["/main-nav/MemorizedInvoices/read"])):this.failureMessage(m)})}successMessage(t){l().fire(t,"","success")}failureMessage(t){l().fire(t,"","error")}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.WI),e.Y36(b.F0),e.Y36(i.qu),e.Y36(U.D),e.Y36(p.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-update-work-with-memorized-invoices"]],standalone:!0,features:[e.jDz],decls:83,vars:1,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","ControlNumber"],["matInput","","formControlName","BaseControlNumber","maxlength","7"],["formControlName","Frequency"],["value","*MONTHLY"],["value","*HALFMONTH"],["value","*WEEKLY"],["formControlName","Period"],["value","*THISM"],["value","*LASTM"],["value","*THISW"],["value","*LASTW"],["value","*NONE"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","DescriptionLeader","maxlength","30"],["formControlName","InvoiceDate"],["value","*CURRENT"],["value","*START"],["value","*END"],["required","","matInput","","formControlName","LastRun"],["matInput","","formControlName","StatusCode","maxlength","2",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),e._uU(4,"Maintain Memorized Invoice"),e.qZA()(),e.TgZ(5,"button",2),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(6,"mat-icon",3),e._uU(7,"close"),e.qZA()()(),e.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Control Number"),e.qZA(),e._UZ(15,"input",9),e.qZA(),e.TgZ(16,"mat-form-field",8)(17,"mat-label"),e._uU(18,"Base Control Number"),e.qZA(),e._UZ(19,"input",10),e.TgZ(20,"mat-hint"),e._uU(21," Only "),e.TgZ(22,"strong"),e._uU(23,"numbers upto 7 digits "),e.qZA(),e._uU(24," are allowed"),e.qZA()(),e.TgZ(25,"mat-form-field",8)(26,"mat-label"),e._uU(27," Frequency "),e.qZA(),e.TgZ(28,"mat-select",11)(29,"mat-option",12),e._uU(30," *MONTHLY "),e.qZA(),e.TgZ(31,"mat-option",13),e._uU(32," *HALFMONTH "),e.qZA(),e.TgZ(33,"mat-option",14),e._uU(34," *WEEKLY "),e.qZA()()(),e.TgZ(35,"mat-form-field",8)(36,"mat-label"),e._uU(37," Period "),e.qZA(),e.TgZ(38,"mat-select",15)(39,"mat-option",16),e._uU(40," *THISM "),e.qZA(),e.TgZ(41,"mat-option",17),e._uU(42," *LASTM "),e.qZA(),e.TgZ(43,"mat-option",18),e._uU(44," *THISW "),e.qZA(),e.TgZ(45,"mat-option",19),e._uU(46," *LASTW "),e.qZA(),e.TgZ(47,"mat-option",20),e._uU(48," *NONE "),e.qZA()()(),e.TgZ(49,"mat-form-field",21)(50,"mat-label"),e._uU(51,"Description Leader"),e.qZA(),e._UZ(52,"input",22),e.TgZ(53,"mat-hint"),e._uU(54," Only "),e.TgZ(55,"strong"),e._uU(56,"30 characters "),e.qZA(),e._uU(57," are allowed"),e.qZA()(),e.TgZ(58,"mat-form-field",8)(59,"mat-label"),e._uU(60," Invoice Date "),e.qZA(),e.TgZ(61,"mat-select",23)(62,"mat-option",24),e._uU(63," *CURRENT "),e.qZA(),e.TgZ(64,"mat-option",25),e._uU(65," *START "),e.qZA(),e.TgZ(66,"mat-option",26),e._uU(67," *END "),e.qZA()()(),e.TgZ(68,"mat-form-field",21)(69,"mat-label"),e._uU(70,"Last Run"),e.qZA(),e._UZ(71,"input",27),e.qZA(),e.TgZ(72,"mat-form-field",8)(73,"mat-label"),e._uU(74,"Status Code"),e.qZA(),e._UZ(75,"input",28),e.TgZ(76,"mat-hint"),e._uU(77," Only "),e.TgZ(78,"strong"),e._uU(79,"2 characters "),e.qZA(),e._uU(80," are allowed"),e.qZA()()()(),e.TgZ(81,"button",29),e.NdJ("click",function(){return n.updateMemorizedInvoices()}),e._uU(82,"Update"),e.qZA()()()()),2&t&&(e.xp6(9),e.Q6J("formGroup",n.form))},dependencies:[g.m,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.nD,i.sg,i.u,M.Hw,c.lW,d.KE,d.bx,d.hX,C.Nt,z.gD,N.ey,T.a8,T.dk,T.dn,T.n5]}),o})();var O=r(11790),D=r(36895),q=r(28255),Y=r(10266),F=r(90455);function R(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.searchMemorizedInvoices())}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function B(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.searchMemorizedInvoices())}),e.TgZ(1,"mat-icon"),e._uU(2,"search"),e.qZA()()}}function H(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"span",35),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(1,"mat-slide-toggle",36),e.NdJ("ngModelChange",function(s){const u=e.CHM(t).$implicit;return e.KtG(u.isActive=s)})("change",function(){const m=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.toggleColumn(m))}),e._uU(2),e.qZA(),e._UZ(3,"br"),e.qZA()}if(2&o){const t=a.$implicit;e.xp6(1),e.Q6J("ngModel",t.isActive),e.xp6(1),e.hij(" ",t.name," ")}}function w(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"form",37),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.getInvoiceBySearch(s.form.value))}),e.TgZ(1,"div",38)(2,"div",39)(3,"mat-form-field",40)(4,"mat-label"),e._uU(5," Control Number"),e.qZA(),e._UZ(6,"input",41),e.qZA(),e.TgZ(7,"mat-form-field",40)(8,"mat-label"),e._uU(9," Customer"),e.qZA(),e._UZ(10,"input",42),e.qZA(),e.TgZ(11,"mat-form-field",40)(12,"mat-label"),e._uU(13," Frequency "),e.qZA(),e.TgZ(14,"mat-select",43)(15,"mat-option",44),e._uU(16," *MONTHLY "),e.qZA(),e.TgZ(17,"mat-option",45),e._uU(18," *HALFMONTH "),e.qZA(),e.TgZ(19,"mat-option",46),e._uU(20," *WEEKLY "),e.qZA()()()()(),e.TgZ(21,"button",47),e._uU(22," Search "),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form)}}function J(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Number"),e.qZA())}function G(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WkCTL)}}function Q(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Type"),e.qZA())}function P(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WCHGTYPE)}}function K(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Customer"),e.qZA())}function $(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WKCUST)}}function j(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Building"),e.qZA())}function X(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WCHGBLDG)}}function V(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Amount"),e.qZA())}function ee(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WCHGAMT)}}function te(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Frequency"),e.qZA())}function oe(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WKFREQ)}}function ie(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Period"),e.qZA())}function ne(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WCMGPERD)}}function ae(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Date"),e.qZA())}function se(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WCMGDATE)}}function re(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Status"),e.qZA())}function le(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WCMGSTAT)}}function me(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1," Description Leader "),e.qZA())}function ce(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WCMGDESC)}}function ue(o,a){1&o&&(e.TgZ(0,"th",48),e._uU(1,"Last Generated"),e.qZA())}function de(o,a){if(1&o&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.WCMGLAST)}}function pe(o,a){1&o&&e._UZ(0,"th",50)}function he(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"td",49)(1,"div",51)(2,"button",52)(3,"mat-icon"),e._uU(4,"more_vert"),e.qZA()(),e.TgZ(5,"ul",53)(6,"li")(7,"button",54),e.NdJ("click",function(){const m=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.updateMemorizedInvoices(m))}),e.TgZ(8,"mat-icon",55),e._uU(9,"edit"),e.qZA(),e.TgZ(10,"mat-label"),e._uU(11,"Update"),e.qZA()()(),e.TgZ(12,"li")(13,"button",54),e.NdJ("click",function(){const m=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.deleteMemorizedInvoices(m))}),e.TgZ(14,"mat-icon",56),e._uU(15,"delete"),e.qZA(),e.TgZ(16,"mat-label"),e._uU(17,"Delete"),e.qZA()()(),e.TgZ(18,"li")(19,"button",54),e.NdJ("click",function(){const m=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.generateMemorizedInvoices(m))}),e.TgZ(20,"mat-icon",55),e._uU(21,"comment"),e.qZA(),e.TgZ(22,"mat-label"),e._uU(23,"Generate Memo Invoice"),e.qZA()()()()()()}}function ge(o,a){1&o&&e._UZ(0,"tr",57)}function fe(o,a){1&o&&e._UZ(0,"tr",58)}const _e=function(){return[8,16,24]};let ve=(()=>{class o{constructor(t,n,s,m,u,h){this.fb=t,this.matDialog=n,this.router=s,this.route=m,this.CustomAlertService=u,this.memoService=h,this.displayedColumns=["Number","TP","Customer","Bldg","Amount","Frequency","Period","Date","St","Actions"],this.dataSource=new f.by,this.user=localStorage.getItem("userName"),this.editedRows=[],this.searchTextDisplay=!1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.columnShowHideList=[],this.controlNumber=""}ngOnInit(){this.initializeColumnProperties(),this.editedRows=[],this.form=this.fb.group({CLT:["",i.kI.pattern("[0-9]{1,7}")],CUST:["",i.kI.pattern("[0-9]{1,4}")],FREQ:""}),this.getMemorizedInvoices(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}resetSearch(){this.form.reset();const t=this.pageSize,n=this.pageNumber;this.currentFilters=null,this.paginator.firstPage(),this.getMemorizedInvoices(t,n)}createFilter(){return(t,n)=>{const s=JSON.parse(n);return Object.keys(s).every(m=>t[m].toString().toLowerCase().includes(s[m].toLowerCase()))}}ngOnDestroy(){this.memoSubscription&&this.memoSubscription.unsubscribe()}getMemorizedInvoices(t,n){const s=this.currentFilters||{},{CLT:m="",CUST:u="",FREQ:h=""}=s;this.memoSubscription&&this.memoSubscription.unsubscribe(),this.memoSubscription=this.memoService.getMemorizedInvoices(this.user,m,u,h,t,n).subscribe(S=>{var k=JSON.parse(S[0].data[1]?.value);this.dataSource.data=k.returnedData,this.totalRecords=k.TotalRecords})}getInvoiceBySearch(t){this.currentFilters=t,this.paginator.firstPage(),this.getMemorizedInvoices(this.pageSize,this.pageNumber)}onPaginateChange(t){this.pageSize=t.pageSize,this.getMemorizedInvoices(t.pageSize,t.pageIndex+1)}searchMemorizedInvoices(){this.searchTextDisplay=1!=this.searchTextDisplay}toggleColumn(t){if(t.isActive)this.displayedColumns.splice(t.position>this.displayedColumns.length-1?this.displayedColumns.length-1:t.position,0,t.name);else{let n=this.displayedColumns.indexOf(t.name);n>-1&&this.displayedColumns.splice(n,1)}console.log(this.displayedColumns)}initializeColumnProperties(){this.displayedColumns.forEach((t,n)=>{"Actions"!=t&&"LastChangedBy"!=t&&this.columnShowHideList.push({position:n,name:t,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Description Leader",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Last Generated",isActive:!1})}addMemorizedInvoices(){this.matDialog.open(L,{width:"1000px",maxHeight:"80vh",autoFocus:!1})}updateMemorizedInvoices(t){this.matDialog.open(E,{width:"1000px",maxHeight:"80vh",data:t,autoFocus:!1})}deleteMemorizedInvoices(t){this.CustomAlertService.openCustomAlert("Are you sure you want to delete this control number: "+t.WkCTL+"? ").afterClosed().subscribe(s=>{s&&(this.memoSubscription&&this.memoSubscription.unsubscribe(),this.memoSubscription=this.memoService.deleteMemorizedInvoices(this.user,t.WkCTL,t.WkBCTL,t.WKFREQ,t.WCMGPERD,t.WCMGDESC,t.WCMGDATE,t.WCMGLAST,t.WCMGSTAT).subscribe(m=>{const h=JSON.parse(m[0].data[m[0].data.length-1].value).returnedData.message;"Record Deleted Successfully"===h?(this.successMessage(h),this.getMemorizedInvoices()):(this.failureMessage(h),this.getMemorizedInvoices())}))})}generateMemorizedInvoices(t){var u;this.memoSubscription&&this.memoSubscription.unsubscribe(),this.memoSubscription=this.memoService.memoInvoiceGenerate((u=t.WkCTL,7,String(u).padStart(7,"0"))).subscribe(u=>{const h=u?.[0]?.data?.[u[0].data.length-1]?.value;h?.toUpperCase()==="SUBMITTED SUCCESSFULLY".toUpperCase()?(this.successMessage(h),this.getMemorizedInvoices()):this.failureMessage(h)})}successMessage(t){l().fire(t,"","success")}failureMessage(t){l().fire(t,"","error")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(p.uw),e.Y36(b.F0),e.Y36(b.gz),e.Y36(O.y),e.Y36(U.D))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-work-with-memorized-invoices"]],viewQuery:function(t,n){if(1&t&&e.Gf(W.NW,5),2&t){let s;e.iGM(s=e.CRH())&&(n.paginator=s.first)}},standalone:!0,features:[e.jDz],decls:63,vars:12,consts:[[1,"over-Flow"],[1,"title"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search MemorizedInvoices",3,"click",4,"ngIf"],["mat-button","","matTooltip","Add Memorized Invoices",1,"addButton",3,"click"],["mainMenuButton","matMenu"],[3,"click",4,"ngFor","ngForOf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["mat-button","","type","reset","value","Reset","matTooltip","Reset invoice values",1,"addButton","buttons",3,"click"],[1,"tally-serach-form"],[3,"formGroup","ngSubmit",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Number"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","TP"],["matColumnDef","Customer"],["matColumnDef","Bldg"],["matColumnDef","Amount"],["matColumnDef","Frequency"],["matColumnDef","Period"],["matColumnDef","Date"],["matColumnDef","St"],["matColumnDef","Description Leader"],["matColumnDef","Last Generated"],["matColumnDef","Actions"],["mat-header-cell","","class","tally_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search MemorizedInvoices",1,"addButton",3,"click"],[3,"click"],[2,"color","blue",3,"ngModel","ngModelChange","change"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","CLT"],["matInput","","formControlName","CUST"],["formControlName","FREQ"],["value","*MONTHLY"],["value","*HALFMONTH"],["value","*WEEKLY"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"tally_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e._uU(3," Work With Memorized Invoices "),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,R,3,0,"button",3),e.YNc(6,B,3,0,"button",4),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.addMemorizedInvoices()}),e.TgZ(8,"mat-icon"),e._uU(9,"add"),e.qZA()(),e.TgZ(10,"mat-menu",null,6),e.YNc(12,H,4,2,"span",7),e.qZA(),e.TgZ(13,"button",8,9)(15,"mat-icon"),e._uU(16,"visibility_off"),e.qZA()(),e.TgZ(17,"button",10),e.NdJ("click",function(){return n.resetSearch()}),e.TgZ(18,"mat-icon"),e._uU(19,"loop"),e.qZA()()()(),e.TgZ(20,"mat-card-content",11),e.YNc(21,w,23,1,"form",12),e.qZA(),e.TgZ(22,"table",13),e.ynx(23,14),e.YNc(24,J,2,0,"th",15),e.YNc(25,G,2,1,"td",16),e.BQk(),e.ynx(26,17),e.YNc(27,Q,2,0,"th",15),e.YNc(28,P,2,1,"td",16),e.BQk(),e.ynx(29,18),e.YNc(30,K,2,0,"th",15),e.YNc(31,$,2,1,"td",16),e.BQk(),e.ynx(32,19),e.YNc(33,j,2,0,"th",15),e.YNc(34,X,2,1,"td",16),e.BQk(),e.ynx(35,20),e.YNc(36,V,2,0,"th",15),e.YNc(37,ee,2,1,"td",16),e.BQk(),e.ynx(38,21),e.YNc(39,te,2,0,"th",15),e.YNc(40,oe,2,1,"td",16),e.BQk(),e.ynx(41,22),e.YNc(42,ie,2,0,"th",15),e.YNc(43,ne,2,1,"td",16),e.BQk(),e.ynx(44,23),e.YNc(45,ae,2,0,"th",15),e.YNc(46,se,2,1,"td",16),e.BQk(),e.ynx(47,24),e.YNc(48,re,2,0,"th",15),e.YNc(49,le,2,1,"td",16),e.BQk(),e.ynx(50,25),e.YNc(51,me,2,0,"th",15),e.YNc(52,ce,2,1,"td",16),e.BQk(),e.ynx(53,26),e.YNc(54,ue,2,0,"th",15),e.YNc(55,de,2,1,"td",16),e.BQk(),e.ynx(56,27),e.YNc(57,pe,1,0,"th",28),e.YNc(58,he,24,0,"td",16),e.BQk(),e.YNc(59,ge,1,0,"tr",29),e.YNc(60,fe,1,0,"tr",30),e.qZA(),e.TgZ(61,"mat-paginator",31,32),e.NdJ("page",function(m){return n.onPaginateChange(m)}),e.qZA()()),2&t){const s=e.MAs(11);e.xp6(5),e.Q6J("ngIf",n.searchTextDisplay),e.xp6(1),e.Q6J("ngIf",!n.searchTextDisplay),e.xp6(6),e.Q6J("ngForOf",n.columnShowHideList),e.xp6(1),e.Q6J("matMenuTriggerFor",s),e.xp6(8),e.Q6J("ngIf",n.searchTextDisplay),e.xp6(1),e.Q6J("dataSource",n.dataSource),e.xp6(37),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("length",n.totalRecords)("pageSizeOptions",e.DdM(11,_e))("pageSize",n.pageSize)}},dependencies:[g.m,D.sg,D.O5,i._Y,i.Fj,i.JJ,i.JL,i.On,i.sg,i.u,W.NW,M.Hw,q.VK,q.p6,c.lW,d.KE,d.hX,C.Nt,z.gD,N.ey,T.a8,T.dk,T.dn,T.n5,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,Y.gM,F.Rr]}),o})()}}]);