"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[25621],{25621:(j,f,r)=>{r.r(f),r.d(f,{ReceivablesInvoiceInquiryRIComponent:()=>H});var h=r(98739),l=r(7155),v=r(70879),T=r(81360),e=r(94650),R=r(19132),u=r(24006),b=r(81543),g=r(36895),y=r(97392),Z=r(4859),I=r(59549),q=r(44144),d=r(99602),_=r(73546),C=r(10266);function D(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.searchAccessInvInq())}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA()()}}function A(t,a){if(1&t){const n=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.searchAccessInvInq())}),e.TgZ(1,"mat-icon"),e._uU(2,"search"),e.qZA()()}}function N(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Date"),e.qZA())}function E(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WDATE)}}function U(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Tally"),e.qZA())}function O(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WTALLY)}}function P(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Reference Number"),e.qZA())}function M(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WREFNO)}}function x(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Pieces"),e.qZA())}function S(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WPIECE)}}function W(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Weight"),e.qZA())}function B(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WWEIGH)}}function k(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Type"),e.qZA())}function Y(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WTYPE)}}function Q(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Return Payment Type"),e.qZA())}function J(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WRTNTP)}}function K(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Consignee"),e.qZA())}function L(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WCONS)}}function G(t,a){1&t&&(e.TgZ(0,"th",48),e._uU(1,"Min"),e.qZA())}function w(t,a){if(1&t&&(e.TgZ(0,"td",49),e._uU(1),e.qZA()),2&t){const n=a.$implicit;e.xp6(1),e.Oqu(n.WMIN)}}function F(t,a){1&t&&e._UZ(0,"tr",50)}function $(t,a){1&t&&e._UZ(0,"tr",51)}const z=function(){return[8,16,24]};let H=(()=>{class t{constructor(n,i,o){this.router=n,this.fb=i,this.RecvSvc=o,this.dataSource=new l.by,this.duplicateSource=[],this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.searchTextDisplay=!1,this.user=localStorage.getItem("userName")||"",this.headerActions=[],this.menuItems=[],this.actions=[],this.displayedColumns=["Date","Tally","ReferenceNo","Pieces","Weight","Type","RtnPayTp","Consignee","Min"],this.period="",this.totalAmountDue=0,this.StorerName="",this.receivablesUrl="/main-nav/receivables/read"}ngOnInit(){this.element=history.state;const n=history.state;this.element=n.row||n;const i=[...n.headerActions||[],...n.menuItems||[]];this.actions=i.filter(m=>m.action!==n.disabledAction),console.log(this.element),this.form=this.fb.group({invoiceNumber:{value:this.element.WKINV,disabled:!0},date:[new Date],time:[this.formatCurrentTime()],GENDT:"",GENTM:"",pageOf:"1"}),this.getInvInquiryRI(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}ngOnDestroy(){this.invoiceInquirySubscription&&this.invoiceInquirySubscription.unsubscribe()}formatCurrentTime(){const n=new Date;return`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`}createFilter(){return(n,i)=>{const o=JSON.parse(i);return Object.keys(o).every(c=>{const m=n[c]?.toString().toLowerCase()||"",s=o[c].toLowerCase();return m.includes(s)})}}resetSearch(){this.form.reset(),this.currentFilters=null,this.paginator.firstPage(),this.getInvInquiryRI(this.pageSize,1)}getInvInquiryRI(n,i){const o=this.currentFilters||{},{WKINVN:c=`${this.element.WKINV}`}=o;this.invoiceInquirySubscription&&this.invoiceInquirySubscription.unsubscribe(),this.invoiceInquirySubscription=this.RecvSvc.FreightInv(this.user,c,n,i).subscribe(m=>{var s=JSON.parse(m[0].data[1]?.value),p=s.returnedData;this.dataSource.data=p,this.period=s.Period,this.totalAmountDue=s["Total Amount Due"],this.loadGeneratedDateTime(p[0].WKGEND),this.StorerName=s.StorerName,this.totalRecords=s.TotalRecords})}loadGeneratedDateTime(n){const i=n.replace('WKGEND":"',"").replace(/"/g,""),o="20"+i.substring(1,3),c=i.substring(3,5),m=i.substring(5,7),s=i.substring(7,9),p=i.substring(9,11);this.form.patchValue({GENDT:new Date(`${o}-${c}-${m}`),GENTM:`${s}:${p}`})}getBySearch(n){this.currentFilters=n,this.paginator.firstPage(),this.getInvInquiryRI(this.pageSize,1)}searchAccessInvInq(){this.searchTextDisplay=1!=this.searchTextDisplay}onPaginateChange(n){this.pageSize=n.pageSize,this.getInvInquiryRI(n.pageSize,n.pageIndex+1)}onBack(){this.router.navigate([this.receivablesUrl])}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(R.F0),e.Y36(u.qu),e.Y36(b.Z))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-receivables-invoice-inquiry-ri"]],viewQuery:function(n,i){if(1&n&&e.Gf(h.NW,5),2&n){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first)}},standalone:!0,features:[e.jDz],decls:97,vars:24,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","search AccessInvInq",3,"click",4,"ngIf"],[3,"title","row","actions","disabledAction"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","invoiceNumber"],["appearance","outline",1,"full-width2"],["readonly","","matInput","","readonly","",3,"value"],["readonly","","matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["datePicker",""],["readonly","","matInput","","type","Time","formControlName","time","placeholder","HH:mm","id","generatedtime"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["readonly","","matInput","","formControlName","GENDT",3,"matDatepicker"],["GeneratedDatePicker",""],["readonly","","matInput","","type","time","formControlName","GENTM","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","formControlName","pageOf"],["readonly","","matInput","",3,"value"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Tally"],["matColumnDef","ReferenceNo"],["matColumnDef","Pieces"],["matColumnDef","Weight"],["matColumnDef","Type"],["matColumnDef","RtnPayTp"],["matColumnDef","Consignee"],["matColumnDef","Min"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],[1,"buttons","button3"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","search AccessInvInq",1,"addButton",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,i){if(1&n&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),e.NdJ("click",function(){return i.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before "),e.qZA()(),e._uU(6,"Receiving Invoice Worksheet Inquiry "),e.qZA(),e.TgZ(7,"div",3),e.YNc(8,D,3,0,"button",4),e.YNc(9,A,3,0,"button",5),e.qZA()(),e._UZ(10,"app-receivable-breadcrumbs",6),e.TgZ(11,"mat-card-content",7)(12,"form",8)(13,"div",9)(14,"div",10)(15,"mat-form-field",11)(16,"mat-label"),e._uU(17," Invoice Number "),e.qZA(),e._UZ(18,"input",12),e.qZA(),e.TgZ(19,"mat-form-field",13)(20,"mat-label"),e._uU(21,"Period"),e.qZA(),e._UZ(22,"input",14),e.qZA(),e.TgZ(23,"mat-form-field",11)(24,"mat-label"),e._uU(25,"date "),e.qZA(),e._UZ(26,"input",15)(27,"mat-datepicker-toggle",16)(28,"mat-datepicker",null,17),e.qZA(),e.TgZ(30,"mat-form-field",11)(31,"mat-label"),e._uU(32,"Time"),e.qZA(),e._UZ(33,"input",18),e.qZA(),e.TgZ(34,"div",19)(35,"label",20),e._uU(36,"Generated"),e.qZA(),e.TgZ(37,"div",21)(38,"mat-form-field",11)(39,"mat-label"),e._uU(40,"Generated Date "),e.qZA(),e._UZ(41,"input",22)(42,"mat-datepicker-toggle",16)(43,"mat-datepicker",null,23),e.qZA(),e.TgZ(45,"mat-form-field",11)(46,"mat-label"),e._uU(47,"Generated Time"),e.qZA(),e._UZ(48,"input",24),e.qZA()()(),e.TgZ(49,"mat-form-field",11)(50,"mat-label"),e._uU(51," Page Of "),e.qZA(),e._UZ(52,"input",25),e.qZA(),e.TgZ(53,"mat-form-field",13)(54,"mat-label"),e._uU(55," Storer "),e.qZA(),e._UZ(56,"input",26),e.qZA()()()()(),e._UZ(57,"br"),e.TgZ(58,"table",27),e.ynx(59,28),e.YNc(60,N,2,0,"th",29),e.YNc(61,E,2,1,"td",30),e.BQk(),e.ynx(62,31),e.YNc(63,U,2,0,"th",29),e.YNc(64,O,2,1,"td",30),e.BQk(),e.ynx(65,32),e.YNc(66,P,2,0,"th",29),e.YNc(67,M,2,1,"td",30),e.BQk(),e.ynx(68,33),e.YNc(69,x,2,0,"th",29),e.YNc(70,S,2,1,"td",30),e.BQk(),e.ynx(71,34),e.YNc(72,W,2,0,"th",29),e.YNc(73,B,2,1,"td",30),e.BQk(),e.ynx(74,35),e.YNc(75,k,2,0,"th",29),e.YNc(76,Y,2,1,"td",30),e.BQk(),e.ynx(77,36),e.YNc(78,Q,2,0,"th",29),e.YNc(79,J,2,1,"td",30),e.BQk(),e.ynx(80,37),e.YNc(81,K,2,0,"th",29),e.YNc(82,L,2,1,"td",30),e.BQk(),e.ynx(83,38),e.YNc(84,G,2,0,"th",29),e.YNc(85,w,2,1,"td",30),e.BQk(),e.YNc(86,F,1,0,"tr",39),e.YNc(87,$,1,0,"tr",40),e.qZA(),e.TgZ(88,"div",41),e._UZ(89,"br")(90,"br"),e.TgZ(91,"div",42)(92,"button",43),e._uU(93),e.ALo(94,"number"),e.qZA()()(),e.TgZ(95,"mat-paginator",44,45),e.NdJ("page",function(c){return i.onPaginateChange(c)}),e.qZA()()),2&n){const o=e.MAs(29),c=e.MAs(44);e.xp6(8),e.Q6J("ngIf",i.searchTextDisplay),e.xp6(1),e.Q6J("ngIf",!i.searchTextDisplay),e.xp6(1),e.Q6J("title","Receiving Invoice Worksheet Inquiry")("row",i.element)("actions",i.actions)("disabledAction","ReceivablesDetails"),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(10),e.Q6J("value",i.period),e.xp6(4),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(14),e.Q6J("matDatepicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(14),e.Q6J("value",i.StorerName),e.xp6(2),e.Q6J("dataSource",i.dataSource),e.xp6(28),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(6),e.hij(" Total Amount : $",e.xi3(94,20,i.totalAmountDue,"1.2-2")," "),e.xp6(2),e.Q6J("length",i.totalRecords)("pageSizeOptions",e.DdM(23,z))("pageSize",i.pageSize)}},dependencies:[v.m,g.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,h.NW,y.Hw,Z.lW,I.KE,I.hX,I.R9,q.Nt,d.Mq,d.hl,d.nW,_.a8,_.dk,_.dn,_.n5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,C.gM,g.JJ,T.F]}),t})()}}]);