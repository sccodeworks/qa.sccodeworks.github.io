"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[67285],{67285:(U,g,o)=>{o.r(g),o.d(g,{TallysOutboundEDIComponent:()=>j});var D=o(15861),T=o(98739),c=o(77579),p=o(78372),f=o(71884),i=o(7155),_=o(70879),t=o(94650),m=o(19132),s=o(24006),u=o(36895),C=o(97392),y=o(4859),E=o(59549),R=o(44144),M=o(84385),P=o(3238),Z=o(73546);function S(a,n){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Reference 1"),t.qZA())}function v(a,n){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.Reference1)}}function N(a,n){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Reference 2"),t.qZA())}function q(a,n){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.Reference2)}}function B(a,n){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Reference 3"),t.qZA())}function x(a,n){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.Reference3)}}function L(a,n){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Reference date"),t.qZA())}function w(a,n){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.Rfdate)}}function z(a,n){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Trading partner"),t.qZA())}function k(a,n){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.Trdptr)}}function W(a,n){1&a&&(t.TgZ(0,"th",50),t._uU(1,"Date/time conn"),t.qZA())}function K(a,n){if(1&a&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.DateTimeConn)}}function Y(a,n){1&a&&t._UZ(0,"th",52)}function Q(a,n){1&a&&(t.TgZ(0,"td",51)(1,"div",53)(2,"button",54)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t._UZ(5,"ul",55),t.qZA()())}function J(a,n){1&a&&t._UZ(0,"tr",56)}function G(a,n){1&a&&t._UZ(0,"tr",57)}function F(a,n){1&a&&(t.TgZ(0,"div",58),t._UZ(1,"img",59),t.TgZ(2,"h3",60),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",61),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}const $=function(){return[8,16,24]};let j=(()=>{class a{constructor(e,l){this.router=e,this.fb=l,this.user=localStorage.getItem("userName"),this.displayedColumns=["Reference1","Reference2","Reference3","Rfdate","Trdptr","DateTimeConn","Actions"],this.dataSource=new i.by([]),this.searchInput$=new c.x,this.isSearchMode=!1,this.allData=[],this.filteredData=[],this.pageData=[],this.pageSize=8,this.totalRecords=0,this.pageNumber=1,this.isLoading=!0,this.noData=!1}ngOnInit(){this.element=history.state,this.form=this.fb.group({dataView:"R",includeNullDates:"",acknowledgement:"",status:"",group:"",messageID:"",messageClass:"",tradingPartner:"",dateTimeConn:"",ref1:"",ref2:"",ref3:"",d12:""}),this.searchInput$.pipe((0,p.b)(500),(0,f.x)()).subscribe(e=>{this.handleSearch(e)}),this.initializeData([])}ngOnDestroy(){this.outboundSubscription&&this.outboundSubscription.unsubscribe(),this.searchInput$.complete()}initializeData(e){this.isLoading=!1,this.allData=e,this.filteredData=[...e],this.totalRecords=e.length,this.dataSource.data=e,this.noData=0===e.length,this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.length=this.totalRecords,this.paginator.pageIndex=(this.pageNumber||1)-1,this.paginator.pageSize=this.pageSize),this.noData?this.dataSource.data=[]:this.loadPage(this.pageNumber||1)}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.initializeData(this.dataSource.data||[]);this.isSearchMode=!0,this.loadSearchChunks(e,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}applyManualFilter(e){this.filteredData=this.allData.filter(l=>Object.values(l).some(r=>String(r).toLowerCase().includes(e))),this.noData=0===this.filteredData.length,this.totalRecords=this.filteredData.length,this.noData?this.dataSource.data=[]:this.loadPage(1)}loadPage(e){const l=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(l,l+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(e){this.pageSize=e.pageSize,this.loadPage(e.pageIndex+1)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}loadSearchChunks(e,l){var r=this;return(0,D.Z)(function*(){const{chunkSize:d,maxCalls:H}=r.getSearchStrategy(r.totalRecords||0);let A=1,b=0,h=[];for(;b<H;){const I=(A-1)*d,O=r.allData.slice(I,I+d),X=O.filter(V=>Object.values(V).some(tt=>String(tt).toLowerCase().includes(e)));if(h.push(...X),h.length>0||O.length<d)break;A++,b++}r.allData=h,r.filteredData=h,r.totalRecords=h.length,l?.()})()}onBack(){this.router.navigateByUrl("/main-nav/tallys/read",{state:this.element})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.F0),t.Y36(s.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tallys-outbound-edi"]],viewQuery:function(e,l){if(1&e&&t.Gf(T.NW,5),2&e){let r;t.iGM(r=t.CRH())&&(l.paginator=r.first)}},standalone:!0,features:[t.jDz],decls:110,vars:9,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width2"],["formControlName","dataView"],["value","*BLANK"],["value","D"],["value","M"],["value","R"],["value","T"],["appearance","outline",1,"full-width"],["matInput","","formControlName","includeNullDates"],["matInput","","formControlName","acknowledgement"],["matInput","","formControlName","status"],["matInput","","formControlName","group"],["matInput","","formControlName","messageID"],["matInput","","formControlName","messageClass"],["matInput","","formControlName","tradingPartner"],["matInput","","formControlName","dateTimeConn"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","ref1"],["matInput","","formControlName","ref2"],["matInput","","formControlName","ref3"],["matInput","","formControlName","d12"],["mat-table","","id","myTable",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Reference1"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Reference2"],["matColumnDef","Reference3"],["matColumnDef","Rfdate"],["matColumnDef","Trdptr"],["matColumnDef","DateTimeConn"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"pageSizeOptions","length","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,l){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return l.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Work with all messages by reference fields "),t.qZA(),t.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.TgZ(11,"input",6),t.NdJ("input",function(d){return l.applyGlobalFilterInput(d.target.value)}),t.qZA()()()(),t.TgZ(12,"mat-card-content",7)(13,"form",8)(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Data view"),t.qZA(),t.TgZ(19,"mat-select",12)(20,"mat-option",13),t._uU(21,"*BLANK"),t.qZA(),t.TgZ(22,"mat-option",14),t._uU(23,"D-By date"),t.qZA(),t.TgZ(24,"mat-option",15),t._uU(25,"M-By message ID "),t.qZA(),t.TgZ(26,"mat-option",16),t._uU(27,"R-By reference & date flds"),t.qZA(),t.TgZ(28,"mat-option",17),t._uU(29,"T-By trading partner"),t.qZA()()(),t.TgZ(30,"mat-form-field",18)(31,"mat-label"),t._uU(32,"Include null dates"),t.qZA(),t._UZ(33,"input",19),t.qZA(),t.TgZ(34,"mat-form-field",18)(35,"mat-label"),t._uU(36,"Acknowledgement"),t.qZA(),t._UZ(37,"input",20),t.qZA(),t.TgZ(38,"mat-form-field",18)(39,"mat-label"),t._uU(40,"Status"),t.qZA(),t._UZ(41,"input",21),t.qZA(),t.TgZ(42,"mat-form-field",18)(43,"mat-label"),t._uU(44,"Group"),t.qZA(),t._UZ(45,"input",22),t.qZA(),t.TgZ(46,"mat-form-field",18)(47,"mat-label"),t._uU(48,"Message ID"),t.qZA(),t._UZ(49,"input",23),t.qZA(),t.TgZ(50,"mat-form-field",18)(51,"mat-label"),t._uU(52,"Message class"),t.qZA(),t._UZ(53,"input",24),t.qZA(),t.TgZ(54,"mat-form-field",18)(55,"mat-label"),t._uU(56,"Trading partner"),t.qZA(),t._UZ(57,"input",25),t.qZA(),t.TgZ(58,"mat-form-field",18)(59,"mat-label"),t._uU(60,"Date/time Conn"),t.qZA(),t._UZ(61,"input",26),t.qZA(),t.TgZ(62,"div",27)(63,"label",28),t._uU(64,"Pos"),t.qZA(),t.TgZ(65,"div",29)(66,"mat-form-field",18)(67,"mat-label"),t._uU(68,"Reference 1"),t.qZA(),t._UZ(69,"input",30),t.qZA(),t.TgZ(70,"mat-form-field",18)(71,"mat-label"),t._uU(72,"Reference 2"),t.qZA(),t._UZ(73,"input",31),t.qZA(),t.TgZ(74,"mat-form-field",18)(75,"mat-label"),t._uU(76,"Reference 3"),t.qZA(),t._UZ(77,"input",32),t.qZA(),t.TgZ(78,"mat-form-field",18)(79,"mat-label"),t._uU(80,"D1/2"),t.qZA(),t._UZ(81,"input",33),t.qZA()()(),t._UZ(82,"br"),t.qZA()()()(),t.TgZ(83,"table",34),t.ynx(84,35),t.YNc(85,S,2,0,"th",36),t.YNc(86,v,2,1,"td",37),t.BQk(),t.ynx(87,38),t.YNc(88,N,2,0,"th",36),t.YNc(89,q,2,1,"td",37),t.BQk(),t.ynx(90,39),t.YNc(91,B,2,0,"th",36),t.YNc(92,x,2,1,"td",37),t.BQk(),t.ynx(93,40),t.YNc(94,L,2,0,"th",36),t.YNc(95,w,2,1,"td",37),t.BQk(),t.ynx(96,41),t.YNc(97,z,2,0,"th",36),t.YNc(98,k,2,1,"td",37),t.BQk(),t.ynx(99,42),t.YNc(100,W,2,0,"th",36),t.YNc(101,K,2,1,"td",37),t.BQk(),t.ynx(102,43),t.YNc(103,Y,1,0,"th",44),t.YNc(104,Q,6,0,"td",37),t.BQk(),t.YNc(105,J,1,0,"tr",45),t.YNc(106,G,1,0,"tr",46),t.qZA(),t.YNc(107,F,6,0,"div",47),t.TgZ(108,"mat-paginator",48,49),t.NdJ("page",function(d){return l.onPaginateChange(d)}),t.qZA()()),2&e&&(t.xp6(13),t.Q6J("formGroup",l.form),t.xp6(70),t.Q6J("dataSource",l.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",l.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.displayedColumns),t.xp6(1),t.Q6J("ngIf",!l.isLoading&&l.noData),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(8,$))("length",l.totalRecords)("pageSize",l.pageSize))},dependencies:[_.m,u.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.NW,C.Hw,y.lW,E.KE,E.hX,E.qo,R.Nt,M.gD,P.ey,Z.a8,Z.dk,Z.dn,Z.n5,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk]}),a})()},15861:(U,g,o)=>{function D(c,p,f,i,_,t,m){try{var s=c[t](m),u=s.value}catch(C){return void f(C)}s.done?p(u):Promise.resolve(u).then(i,_)}function T(c){return function(){var p=this,f=arguments;return new Promise(function(i,_){var t=c.apply(p,f);function m(u){D(t,i,_,m,s,"next",u)}function s(u){D(t,i,_,m,s,"throw",u)}m(void 0)})}}o.d(g,{Z:()=>T})}}]);