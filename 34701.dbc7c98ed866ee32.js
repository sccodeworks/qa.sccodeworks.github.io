"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[34701],{34701:(K,A,o)=>{o.r(A),o.d(A,{InvoiceInquiryGIComponent:()=>L});var m=o(7155),h=o(70879),t=o(94650),Z=o(19132),v=o(24006),U=o(81543),b=o(98739),q=o(97392),I=o(4859),R=o(59549),e=o(44144),i=o(73546),r=o(36895);const s=["paginator"];function c(n,u){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Charge Description"),t.qZA())}function _(n,u){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&n){const a=u.$implicit;t.xp6(1),t.AsE("",a.WKDESC,"\xa0",a.CGCMNT,"")}}function C(n,u){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Quantity"),t.qZA())}function f(n,u){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const a=u.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.DGQTY,"1.2-2"))}}function g(n,u){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Rate"),t.qZA())}function D(n,u){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const a=u.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.DGRATE,"1.4-4"))}}function E(n,u){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Basis"),t.qZA())}function T(n,u){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&n){const a=u.$implicit;t.xp6(1),t.Oqu(a.DGBASE)}}function O(n,u){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Amount"),t.qZA())}function $(n,u){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const a=u.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,a.DGAMT,"1.2-2"))}}function G(n,u){1&n&&(t.TgZ(0,"th",30),t._uU(1,"Minimum Charges"),t.qZA())}function B(n,u){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&n){const a=u.$implicit;t.xp6(1),t.Oqu(a.DGMINM)}}function S(n,u){1&n&&t._UZ(0,"tr",32)}function W(n,u){if(1&n){const a=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const M=t.CHM(a).$implicit,y=t.oxw();return t.KtG(y.rowClick(M))}),t.qZA()}}const x=function(){return[8,16,24]};let L=(()=>{class n{constructor(a,l,d){this.router=a,this.fb=l,this.RecvSvc=d,this.title="",this.header="",this.mailTo="",this.totalDue=0,this.billTO="",this.acctOf="",this.car="",this.duplicateSource=[],this.currentFilters=null,this.user=localStorage.getItem("userName")||"",this.displayedColumns=["chargeDescription","quantity","rate","basis","amount","minimumCharges"],this.receivablesUrl="/main-nav/receivables/read"}ngOnInit(){this.element=history.state,console.log(this.element),this.form=this.fb.group({BillTo:{value:"",disabled:!0},AcctOf:{value:this.element.AHCUST,disabled:!0},RefNo:{value:this.element.AHREF,disabled:!0},CarTr:{value:"",disabled:!0},Date:{value:this.element.AHDATE,disabled:!0},Building:{value:this.element.AHBLDG,disabled:!0},invoice:{value:this.element.WKINV,disabled:!0}}),this.getGeneralInvoiceInquiry()}ngOnDestroy(){this.inquirySubscription&&this.inquirySubscription.unsubscribe()}formatTitle(a){let l=a.replace(/([A-Z])\s/g,"$1");return l=l.replace(/\s{2,}/g," "),l=l.toLowerCase().split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "),l}getGeneralInvoiceInquiry(a,l){const d=this.currentFilters||{},{WKINVN:M=`${this.element.WKINV}`}=d;this.inquirySubscription&&this.inquirySubscription.unsubscribe(),this.inquirySubscription=this.RecvSvc.FreightInv(this.user,M,a,l).subscribe(y=>{console.log(y);const P=y[0]?.data[1]?.value,N=P?JSON.parse(P):null;if(console.log(N),N){this.duplicateSource=N.returnedData||[],this.dataSource=new m.by(this.duplicateSource);const p=this.duplicateSource[0];p?(this.mailTo=`${p.SYNAME||""} ${p.SYADD1||""} ${p.SYADD2||""} ${p.SYADD3||""}`.trim(),this.totalDue=p.HGAMT||0,this.car=p.HGCAR||"",this.title=this.formatTitle(p.WKHDG||""),this.header="EN"===this.WKSTAT?"Worksheet":"",this.billTO=`${p.WKSNAME||""}\xa0${p.WKADDR1||""}\xa0${p.WKADDR2||""}\xa0${p.WKADDR3||""}`.trim(),this.acctOf=p.WKACTOF||""):(this.billTO=this.element?.WKCUST||"",this.acctOf=this.element?.WKCUST||"")}})}rowClick(a){this.selectedRow=a}onBack(){this.router.navigate([this.receivablesUrl])}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(Z.F0),t.Y36(v.qu),t.Y36(U.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-invoice-inquiry-gi"]],viewQuery:function(a,l){if(1&a&&t.Gf(s,5),2&a){let d;t.iGM(d=t.CRH())&&(l.paginator=d.first)}},standalone:!0,features:[t.jDz],decls:72,vars:16,consts:[[1,"over-Flow"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","invoice"],["appearance","outline",1,"full-width2"],["matInput","","disabled","",3,"value"],["matInput","","formControlName","RefNo"],["matInput","","formControlName","Date"],["matInput","","formControlName","Building"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","chargeDescription"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","quantity"],["matColumnDef","rate"],["matColumnDef","basis"],["matColumnDef","amount"],["matColumnDef","minimumCharges"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],[1,"buttons","button3"],[1,"left-side1"],["showFirstLastButtons","",1,"tally-table-pagination",3,"pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(a,l){1&a&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title")(3,"button",1),t.NdJ("click",function(){return l.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before"),t.qZA()(),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-content",2)(8,"form",3)(9,"div",4)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Invoice Number"),t.qZA(),t._UZ(14,"input",7),t.qZA(),t.TgZ(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"Bill To"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",8)(20,"mat-label"),t._uU(21,"Account Of"),t.qZA(),t._UZ(22,"input",9),t.qZA(),t.TgZ(23,"mat-form-field",6)(24,"mat-label"),t._uU(25,"Reference Number"),t.qZA(),t._UZ(26,"input",10),t.qZA(),t.TgZ(27,"mat-form-field",8)(28,"mat-label"),t._uU(29,"Car / Trailer Number"),t.qZA(),t._UZ(30,"input",9),t.qZA(),t.TgZ(31,"mat-form-field",6)(32,"mat-label"),t._uU(33,"Date"),t.qZA(),t._UZ(34,"input",11),t.qZA(),t.TgZ(35,"mat-form-field",6)(36,"mat-label"),t._uU(37,"Building"),t.qZA(),t._UZ(38,"input",12),t.qZA()()()()(),t.TgZ(39,"table",13),t.ynx(40,14),t.YNc(41,c,2,0,"th",15),t.YNc(42,_,2,2,"td",16),t.BQk(),t.ynx(43,17),t.YNc(44,C,2,0,"th",15),t.YNc(45,f,3,4,"td",16),t.BQk(),t.ynx(46,18),t.YNc(47,g,2,0,"th",15),t.YNc(48,D,3,4,"td",16),t.BQk(),t.ynx(49,19),t.YNc(50,E,2,0,"th",15),t.YNc(51,T,2,1,"td",16),t.BQk(),t.ynx(52,20),t.YNc(53,O,2,0,"th",15),t.YNc(54,$,3,4,"td",16),t.BQk(),t.ynx(55,21),t.YNc(56,G,2,0,"th",15),t.YNc(57,B,2,1,"td",16),t.BQk(),t.YNc(58,S,1,0,"tr",22),t.YNc(59,W,1,0,"tr",23),t.qZA(),t._UZ(60,"br")(61,"br"),t.TgZ(62,"div",24)(63,"div",25)(64,"button",26),t._uU(65),t.qZA()(),t.TgZ(66,"div",27)(67,"button",26),t._uU(68),t.ALo(69,"number"),t.qZA()()(),t._UZ(70,"mat-paginator",28,29),t.qZA()),2&a&&(t.xp6(6),t.AsE(" ",l.title," ",l.header," "),t.xp6(2),t.Q6J("formGroup",l.form),t.xp6(10),t.s9C("value",l.billTO),t.xp6(4),t.s9C("value",l.acctOf),t.xp6(8),t.s9C("value",l.car),t.xp6(9),t.Q6J("dataSource",l.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",l.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.displayedColumns),t.xp6(6),t.hij("Mail Payment to : ",l.mailTo,""),t.xp6(3),t.hij("Total Due : $",t.xi3(69,12,l.totalDue,"1.2-2"),""),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(15,x)))},dependencies:[h.m,v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,b.NW,q.Hw,I.lW,R.KE,R.hX,e.Nt,i.a8,i.dk,i.dn,i.n5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,r.JJ]}),n})()},81543:(K,A,o)=>{o.d(A,{Z:()=>q});var m=o(80529),h=o(75625),t=o(70262),Z=o(54004),v=o(62843),U=o(92340),b=o(94650);let q=(()=>{class I{constructor(e){this.httpClient=e,this.url=U.N.API_BASE_URL,this.recal="/Receivables/Recalculate",this.httpHeader={headers:new m.WM({"Content-Type":"application/json"})}}getReceivables(e,i,r,s,c,_,C,f,g,D,E,T,O){return this.httpClient.get(this.url+"/Receivables/read?",{params:{user:e,invoice:i??"",customerNumber:r??"",customerSuffix:s??"",customerSecondSuffix:c??"",refNumber:_??"",startDate:C??"",endDate:f??"",building:g??"",status:D??"",type:E??"",recordsPerPage:T??"",pageNo:O??""}})}getReceivablesDetails(e,i,r){return this.httpClient.get(this.url+`/Receivables/details/read?user=${e}&invoice=${i}&seqNum=${r}`)}getReceivableInquiry(e,i){return this.httpClient.get(this.url+`/Receivables/read/inquiry?user=${e}&invoice=${i}`)}getAdjustmentInquiry(e,i){return this.httpClient.get(this.url+`/Receivables/read/adjInquiry?user=${e}&invoice=${i}`)}getInvoiceInquiry(e,i,r){return this.httpClient.get(this.url+`/Receivables/read/invoiceInquiry?user=${e}&HGCTL=${i}&invoice=${r}`)}getReceivablesAdjustInvoice(){return this.httpClient.get(this.url+"/Receivables/invoiceinquiry")}getAll(e){return this.httpClient.get(this.url+`/Receivables/readAll?user=${e}`)}adjustInvoiceRead(e,i){return this.httpClient.get(this.url+`/Receivables/adjust/read?user=${e}&invoice=${i}`)}adjustInvoiceUpdate(e,i,r,s,c,_,C,f,g,D,E,T){return this.httpClient.put(this.url+"/Receivables/adjust/update",{user:e,invoice:i,sequence:r,date:s,amount:c,description:_,ledgerCode:C,ledgerSubCode:f,customer:g,suffix1:D,suffix2:E,status:T}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}creditinvoice(e,i,r,s,c,_,C,f,g,D){return this.httpClient.put(this.url+"/Receivables/update/credit",{invoiceNumber:e,building:i,date:r,type:s,description:c,customer:_,reference:C,amount:f,balance:g,reason:D}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}getComment(e,i,r,s){return this.httpClient.get(this.url+`/Receivables/comments/read?user=${e}&key=${i}&recordsPerPage=${r}&pageNo=${s}`)}updateComment(e,i,r,s,c,_){return this.httpClient.put(this.url+"/Receivables/comments/update",{user:e,fileID:i,key:r,sub:s,seq:c,comment:_}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}createComment(e,i,r,s,c){return this.httpClient.post(this.url+"/Receivables/comments/create",{user:e,fileID:i,key:r,sub:s,comment:c}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}deleteComment(e,i,r,s,c){return this.httpClient.delete(this.url+`/Receivables/comments/delete?user=${e}&fileID=${i}&key=${r}&sub=${s}&seq=${c}`)}Print(e,i,r,s,c){return this.httpClient.put(this.url+"/Receivables/Print",{InvoiceNumber:e,ReportType:i,FileExtension:r,EmailAddress:s,user:c}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}UpdateLedgerCode(e,i,r,s,c,_,C,f){return this.httpClient.put(this.url+"/Receivables/UpdateLedgerCode",{InvoiceNumber:e,SequenceNumber:i,InvoiceDate:r,LineAmount:s,LedgerCode:c,LedgerSubCode:_,BuildingNumber:C,user:f}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}EmailDetail(e,i){return this.httpClient.put(this.url+"/Receivables/Email/Details",{user:e,InvoiceNumber:i}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}EmailDetailsNew(e,i){return this.httpClient.put(this.url+"/Receivables/EmailDetailsNew",{user:e,InvoiceNumber:i}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}Recalculate(e,i){return this.httpClient.put(this.url+this.recal,{user:e,InvoiceNumber:i}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}ReceivingCover(e,i,r){return this.httpClient.put(this.url+"/Receivables/ReceivingCover",{user:e,InvoiceNumber:i,ReturnCode:r}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}MicCover(e,i,r,s,c){return this.httpClient.put(this.url+"/Receivables/MicCover",{user:e,InvoiceNumber:i,StorerNumber:r,StorerSuffix:s,ReturnCode:c}).pipe((0,h.X)(1),(0,t.K)(this.httpError))}deleteReceivables(e,i){return this.httpClient.delete(this.url+`/Receivables/delete/receivable?invoice=${e}&description=${i}`)}FreightInv(e,i,r,s){return this.httpClient.get(this.url+"/Receivables/read/invoiceInquiry?",{params:{user:e,WKINVN:i??"",recordsPerPage:r??"",pageNo:s??""}})}readReceivablesTallyInquiryService(e,i){return this.httpClient.get(this.url+`/ihcrud/tallyinquiry?user=${e}&tally=${i}`).pipe((0,Z.U)(r=>r[0]))}httpError(e){let i="";return i=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(i),(0,v._)(()=>new Error(i))}}return I.\u0275fac=function(e){return new(e||I)(b.LFG(m.eN))},I.\u0275prov=b.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()}}]);