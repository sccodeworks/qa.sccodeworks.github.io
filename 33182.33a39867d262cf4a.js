"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[33182,34894,11790,26628,38754,85645,70096,49741],{34894:(S,C,l)=>{l.d(C,{e:()=>d});var r=l(94650),c=l(24006);let d=(()=>{class f{constructor(h,u){this.el=h,this.control=u}onInputChange(h){const u=this.el.nativeElement,g=u.value.toUpperCase();u.value=g,this.control&&this.control.control&&this.control.control.setValue(g,{emitEvent:!1})}}return f.\u0275fac=function(h){return new(h||f)(r.Y36(r.SBq),r.Y36(c.a5))},f.\u0275dir=r.lG2({type:f,selectors:[["","appUppercase",""]],hostBindings:function(h,u){1&h&&r.NdJ("input",function(p){return u.onInputChange(p)})},standalone:!0}),f})()},11790:(S,C,l)=>{l.d(C,{y:()=>h});var r=l(65412),c=l(94650),d=l(97392),f=l(4859);let T=(()=>{class u{constructor(p,t){this.dialogRef=p,this.data=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return u.\u0275fac=function(p){return new(p||u)(c.Y36(r.so),c.Y36(r.WI))},u.\u0275cmp=c.Xpm({type:u,selectors:[["app-alert-dialog"]],decls:10,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["id","close-icon",3,"click"],[1,"content-span","full-width"],["mat-flat-button","","id","no-button",3,"mat-dialog-close"],["mat-flat-button","","id","yes-button",3,"mat-dialog-close"]],template:function(p,t){1&p&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),c.NdJ("click",function(){return t.closeDialog()}),c._uU(3,"close "),c.qZA(),c.TgZ(4,"span",3),c._uU(5),c.qZA()(),c.TgZ(6,"button",4),c._uU(7,"Cancel"),c.qZA(),c.TgZ(8,"button",5),c._uU(9,"Delete"),c.qZA()()),2&p&&(c.xp6(5),c.Oqu(t.data.message),c.xp6(1),c.Q6J("mat-dialog-close",!1),c.xp6(2),c.Q6J("mat-dialog-close",!0))},dependencies:[d.Hw,f.lW,r.ZT]}),u})(),h=(()=>{class u{constructor(p){this.dialog=p}openCustomAlert(p){return this.dialog.open(T,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:p}})}}return u.\u0275fac=function(p){return new(p||u)(c.LFG(r.uw))},u.\u0275prov=c.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},33182:(S,C,l)=>{l.r(C),l.d(C,{WwDockrulesComponent:()=>pt});var r=l(24006),c=l(98739),d=l(7155),f=l(65412),T=l(35226),h=l.n(T),u=l(70879),g=l(48529),p=l(86385),t=l(94650),k=l(12652),U=l(19132),w=l(36895),Z=l(97392),R=l(4859),b=l(59549),v=l(44144),_=l(73546),N=l(39505);const x=["itemInput"],M=["apptInput"],I=["emailInput"];function E(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"custom-input-autocomplete",16,17),t.NdJ("focus",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onItemFocus())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("options",e.msgIdOptions)}}function W(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"custom-input-autocomplete",18,19),t.NdJ("focus",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onApptFocus())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("options",e.apptOptions)}}function q(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"custom-input-autocomplete",20,21),t.NdJ("focus",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onEmailFocus())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("options",e.emailOptions)}}let Y=(()=>{class n{constructor(e,o,a,s,m,D){this.fb=e,this.DockrulesService=o,this.router=a,this.anyvariable=s,this.dialogRef=m,this.cdr=D,this.user=localStorage.getItem("userName")||"",this.msgIdOptions=[],this.msgIdMap=new Map,this.apptOptions=[],this.apptTypeMap=new Map,this.emailOptions=[],this.ruleTypeMap=new Map,this.dockUrl="/main-nav/dock-rules/read"}ngOnInit(){this.form=this.fb.group({TYPE:this.anyvariable.RUTYPE,RUDESC:this.anyvariable.RUDESC,RUMSGD:this.anyvariable.RUMSGD,apptStatus:this.anyvariable.RUAPST,email:this.anyvariable.RUEPNT}),this.fetchMessage(),this.fetchAppt(),this.fetchEmail()}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}applyFocusHack(e,o){if(e.length>0&&o?.control){const a=o.control.value||"";o.control.setValue(a+" "),setTimeout(()=>{o.control.setValue(a)},0)}}onItemFocus(){this.applyFocusHack(this.msgIdOptions,this.itemInputComponent)}onApptFocus(){this.applyFocusHack(this.apptOptions,this.apptInputComponent)}onEmailFocus(){this.applyFocusHack(this.emailOptions,this.emailInputComponent)}fetchMessage(){this.msgIdOptions=[],this.msgIdMap.clear(),this.DockrulesService.getMessage().subscribe(e=>{const o=new Set;e.forEach(a=>{const s=a.MSGID?.trim(),m=a.MESSAGE?.trim();if(!s)return;const D=m?`${s} - ${m}`:s;o.has(D)||(o.add(D),this.msgIdOptions.push(D),this.msgIdMap.set(D,s))}),this.cdr.detectChanges()})}fetchAppt(){this.DockrulesService.getapptStatus().subscribe(e=>{const o=e.filter((a,s,m)=>s===m.findIndex(D=>D.VLVALU?.trim()===a.VLVALU?.trim()));this.apptOptions=o.map(a=>{const s=`${a.VLVALU.trim()} - ${a.VLSDSC?.trim()||""}`;return this.apptTypeMap.set(s,a.VLVALU.trim()),s}),this.cdr.detectChanges()})}fetchEmail(){this.emailOptions=[],this.DockrulesService.emailPoint().subscribe(e=>{const o=new Set(e.map(a=>a.EPPOIN?.trim()).filter(a=>!!a));this.emailOptions=[...o],this.cdr.detectChanges()})}get normalizedType(){const e=this.form.get("TYPE")?.value;return(this.ruleTypeMap.get(e)||e||"").trim().toUpperCase()}get normalizedApptStatus(){const e=this.form.get("apptStatus")?.value;return(this.apptTypeMap.get(e)||e||"").trim()}isAddDisabled(){const e=this.normalizedType;return"DY"===e?!(this.form.get("RUDESC")?.value?.trim()&&this.normalizedApptStatus&&this.form.get("email")?.value?.trim()):"EN"!==e&&"CL"!==e||!(this.form.get("RUDESC")?.value?.trim()&&this.form.get("RUMSGD")?.value?.trim())}get normalizedMsgId(){const e=this.form.get("RUMSGD")?.value;return(this.msgIdMap.get(e)||e||"").trim()}updateDockrules(){const e=this.form.value;this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.updateDockrules(this.user,this.anyvariable.RUNMBR,this.anyvariable.RUTYPE,e.RUDESC,this.normalizedMsgId,e.apptStatus,e.email).subscribe(o=>{const s=o[0].data[o[0].data.length-1].value;s.toUpperCase()===g.R.update.toUpperCase()?(this.successMessage(s),this.closeDialog(),this.router.navigate([this.dockUrl])):this.failureMessage(s)})}successMessage(e){h().fire(e,"","success")}failureMessage(e){h().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(k.u),t.Y36(U.F0),t.Y36(f.WI),t.Y36(f.so),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ww-dockrules-change"]],viewQuery:function(e,o){if(1&e&&(t.Gf(x,5),t.Gf(M,5),t.Gf(I,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.itemInputComponent=a.first),t.iGM(a=t.CRH())&&(o.apptInputComponent=a.first),t.iGM(a=t.CRH())&&(o.emailInputComponent=a.first)}},standalone:!0,features:[t.jDz],decls:25,vars:5,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","readonly","","formControlName","TYPE"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","RUDESC","maxlength","30"],["formControlName","RUMSGD","label","Message ID*","appearance","outline","required","","class","large-input",3,"options","focus",4,"ngIf"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","","class","large-input",3,"options","focus",4,"ngIf"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options","focus",4,"ngIf"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"],["formControlName","RUMSGD","label","Message ID*","appearance","outline","required","",1,"large-input",3,"options","focus"],["itemInput",""],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","",1,"large-input",3,"options","focus"],["apptInput",""],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options","focus"],["emailInput",""]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Dock Rules"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Rule Type"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",10)(17,"mat-label"),t._uU(18,"Description"),t.qZA(),t._UZ(19,"input",11),t.qZA(),t.YNc(20,E,2,1,"custom-input-autocomplete",12),t.YNc(21,W,2,1,"custom-input-autocomplete",13),t.YNc(22,q,2,1,"custom-input-autocomplete",14),t.qZA()(),t.TgZ(23,"button",15),t.NdJ("click",function(){return o.updateDockrules()}),t._uU(24," Update "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("ngIf","EN"===o.normalizedType||"CL"===o.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===o.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===o.normalizedType),t.xp6(1),t.Q6J("disabled",!(o.form.valid&&o.form.dirty)))},dependencies:[u.m,w.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.nD,r.sg,r.u,Z.Hw,R.lW,b.KE,b.hX,v.Nt,_.a8,_.dk,_.dn,_.n5,p.j,N.L]}),n})();var J=l(11790);let F=(()=>{class n{constructor(e,o,a,s,m,D){this.CustomAlertService=e,this.DockrulesService=o,this.fb=a,this.anyvariable=s,this.router=m,this.dialogRef=D,this.user=localStorage.getItem("userName")||"",this.dockUrl="/main-nav/dock-rules/read"}ngOnInit(){this.form=this.fb.group({RUNMBR:this.anyvariable.RUNMBR,RUTYPE:this.anyvariable.RUTYPE,RUDESC:this.anyvariable.RUDESC,RUAPST:this.anyvariable.RUAPST,RUEPNT:this.anyvariable.RUEPNT,RUMSGD:this.anyvariable.RUMSGD,RUSEVR:this.anyvariable.RUSEVR,RUEXIT:this.anyvariable.RUEXIT,RUSTAT:this.anyvariable.RUSTAT}),this.form.disable()}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}deleteDockrules(){this.CustomAlertService.openCustomAlert("Are you sure you want to delete this Dock Rules: "+this.anyvariable.RUNMBR+"?").afterClosed().subscribe(o=>{o&&(this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.deleteDockrules(this.user,this.anyvariable.RUNMBR,this.anyvariable.RUDESC,this.anyvariable.RUTYPE,this.anyvariable.RUAPST,this.anyvariable.RUEPNT,this.anyvariable.RUMSGD,this.anyvariable.RUSEVR,this.anyvariable.RUEXIT,this.anyvariable.RUSTAT).subscribe(a=>{const s=JSON.parse(a[0].data[1].value).returnedData.message;s.toUpperCase()===g.R.deleteMsg.toUpperCase()?(this.successMessage(s),this.closeDialog(),this.router.navigate([this.dockUrl])):this.failureMessage(s)}))})}successMessage(e){h().fire(e,"","success")}failureMessage(e){h().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(J.y),t.Y36(k.u),t.Y36(r.qu),t.Y36(f.WI),t.Y36(U.F0),t.Y36(f.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ww-dockrules-delete"]],standalone:!0,features:[t.jDz],decls:54,vars:1,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","required","","formControlName","RUNMBR"],["matInput","","formControlName","RUTYPE"],["appearance","outline",1,"full-width","w-50"],["matInput","","formControlName","RUDESC"],["matInput","","required","","formControlName","RUAPST"],["matInput","","required","","formControlName","RUEPNT"],["matInput","","required","","formControlName","RUMSGD"],["matInput","","required","","formControlName","RUSEVR"],["matInput","","required","","formControlName","RUEXIT"],["matInput","","required","","formControlName","RUSTAT"],[2,"color","red","font-size","17px","margin-left","15px"],["mat-button","",1,"buttons","removeButton",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Delete a Dock Rule "),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14," Rule Number "),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18," Rule Type "),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",11)(21,"mat-label"),t._uU(22," Description "),t.qZA(),t._UZ(23,"input",12),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26," Appointment Status "),t.qZA(),t._UZ(27,"input",13),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30," Email Exit Point "),t.qZA(),t._UZ(31,"input",14),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34," Message ID "),t.qZA(),t._UZ(35,"input",15),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38," Message Severity "),t.qZA(),t._UZ(39,"input",16),t.qZA(),t.TgZ(40,"mat-form-field",8)(41,"mat-label"),t._uU(42," Exit Logic "),t.qZA(),t._UZ(43,"input",17),t.qZA(),t.TgZ(44,"mat-form-field",8)(45,"mat-label"),t._uU(46," Status Code "),t.qZA(),t._UZ(47,"input",18),t.qZA(),t.TgZ(48,"p",19),t._uU(49," Press <Enter> to confirm Deletion"),t._UZ(50,"br"),t._uU(51," Note: Constraints will also be deleted "),t.qZA()()(),t.TgZ(52,"button",20),t.NdJ("click",function(){return o.deleteDockrules()}),t._uU(53,"Delete"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form))},dependencies:[u.m,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,Z.Hw,R.lW,b.KE,b.hX,v.Nt,_.a8,_.dk,_.dn,_.n5]}),n})();var B=l(41802),G=l(10266),P=l(34894);function O(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchDockrules())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function H(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchDockrules())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function Q(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",27),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getBySearch(a.form.value))}),t.TgZ(1,"div",28)(2,"div",29)(3,"mat-form-field",30)(4,"mat-label"),t._uU(5,"Rule "),t.qZA(),t._UZ(6,"input",31),t.qZA(),t.TgZ(7,"mat-form-field",32)(8,"mat-label"),t._uU(9,"Description "),t.qZA(),t._UZ(10,"input",33),t.qZA(),t.TgZ(11,"mat-form-field",30)(12,"mat-label"),t._uU(13,"Type "),t.qZA(),t._UZ(14,"input",34),t.qZA()()(),t.TgZ(15,"button",35),t._uU(16," Search "),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.form)}}function z(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Rule Number "),t.qZA())}function L(n,i){if(1&n&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.RUNMBR," ")}}function $(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Type "),t.qZA())}function V(n,i){if(1&n&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.RUTYPE)}}function K(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1,"Description "),t.qZA())}function j(n,i){if(1&n&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.RUDESC," ")}}function X(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Appointment Status "),t.qZA())}function tt(n,i){if(1&n&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.RUAPST," ")}}function et(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Email Exit Point "),t.qZA())}function ot(n,i){if(1&n&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.RUEPNT," ")}}function nt(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Message Id "),t.qZA())}function at(n,i){if(1&n&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.RUMSGD," ")}}function st(n,i){1&n&&(t.TgZ(0,"th",36),t._uU(1," Rule Status "),t.qZA())}function it(n,i){if(1&n&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.hij(" ",e.RUSTAT," ")}}function rt(n,i){1&n&&t._UZ(0,"th",38)}function lt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",37)(1,"div",39)(2,"button",40)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",41)(6,"li")(7,"button",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.updateDockRule(s))}),t.TgZ(8,"mat-icon",43),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Edit"),t.qZA()()(),t.TgZ(12,"li")(13,"button",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.constraints(s))}),t.TgZ(14,"mat-icon",43),t._uU(15,"details"),t.qZA(),t.TgZ(16,"mat-label"),t._uU(17,"Constraints"),t.qZA()()(),t.TgZ(18,"li")(19,"button",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.deleteDockrules(s))}),t.TgZ(20,"mat-icon",44),t._uU(21,"delete"),t.qZA(),t.TgZ(22,"mat-label"),t._uU(23,"Delete"),t.qZA()()(),t.TgZ(24,"li")(25,"button",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.holdRule(s))}),t.TgZ(26,"mat-icon",43),t._uU(27,"call_made"),t.qZA(),t.TgZ(28,"mat-label"),t._uU(29,"Hold"),t.qZA()()(),t.TgZ(30,"li")(31,"button",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.releaseRule(s))}),t.TgZ(32,"mat-icon",43),t._uU(33,"call_made"),t.qZA(),t.TgZ(34,"mat-label"),t._uU(35,"Release"),t.qZA()()()()()()}}function ct(n,i){1&n&&t._UZ(0,"tr",45)}function ut(n,i){1&n&&t._UZ(0,"tr",46)}const mt=function(){return[8,16,24]};let pt=(()=>{class n{constructor(e,o,a,s){this.DockrulesService=e,this.fb=o,this.router=a,this.matDialog=s,this.displayedColumns=["RuleNumb","Typ","Description","AptSts","EmailExitPoint","MessageId","RuleStat","Actions"],this.user=localStorage.getItem("userName")||"",this.searchTextDisplay=!1,this.dataSource=new d.by,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.dockUrl="/main-nav/dockrules/read",this.constraintsUrl="/main-nav/dockrules/constraints"}ngOnInit(){this.form=this.fb.group({RUNMBR:["",r.kI.pattern(/^[0-9]{1,3}$/)],DESC:["",r.kI.pattern(/^.{1,30}$/)],TYPE:["",r.kI.pattern(/^[A-Za-z]{2}$/)]}),this.getDockrules(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}searchDockrules(){this.searchTextDisplay=1!=this.searchTextDisplay}getDockrules(e,o){const a=this.currentFilters||{},{RUNMBR:s="",DESC:m="",TYPE:D=""}=a;this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.getDockrules(this.user,s,m,D,e,o).subscribe(dt=>{var A=JSON.parse(dt[0].data[1]?.value),y=A.returnedData;this.parsedData=y,this.dataSource.data=y,this.totalRecords=A.TotalRecords})}createFilter(){return(e,o)=>{const a=JSON.parse(o);return Object.keys(a).every(s=>e[s].toString().toLowerCase().includes(a[s].toLowerCase()))}}getBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.getDockrules(this.pageSize,this.pageNumber)}resetSearch(){this.form.reset();const e=this.pageSize,o=this.pageNumber;this.currentFilters=null,this.paginator.firstPage(),this.getDockrules(e,o)}onPaginateChange(e){this.pageSize=e.pageSize,this.getDockrules(e.pageSize,e.pageIndex+1)}successMessage(e){h().fire(e,"","success")}failureMessage(e){h().fire(e,"","error")}addDockrules(){this.matDialog.open(B.WwDockrulesCreateComponent,{width:"1000px",maxHeight:"80vh",autoFocus:!1})}updateDockRule(e){this.matDialog.open(Y,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}constraints(e){this.router.navigateByUrl(this.constraintsUrl,{state:e})}deleteDockrules(e){this.matDialog.open(F,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}holdRule(e){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.hold(e.RUNMBR).subscribe(o=>{const s=o[0].data[o[0].data.length-1].value;s?.toUpperCase()===g.R.updated.toUpperCase()?(this.successMessage(s),this.getDockrules(this.pageSize,this.pageNumber)):this.failureMessage(s)})}releaseRule(e){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.release(e.RUNMBR).subscribe(o=>{const s=o[0].data[o[0].data.length-1].value;s?.toUpperCase()===g.R.updated.toUpperCase()?(this.successMessage(s),this.getDockrules(this.pageSize,this.pageNumber)):this.failureMessage(s)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k.u),t.Y36(r.qu),t.Y36(U.F0),t.Y36(f.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ww-dockrules"]],viewQuery:function(e,o){if(1&e&&t.Gf(c.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first)}},standalone:!0,features:[t.jDz],decls:44,vars:10,consts:[[1,"over-Flow"],[1,"title"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Dock Rules",3,"click",4,"ngIf"],["mat-button","","matTooltip","Add Dock Rules",1,"addButton",3,"click"],["mat-button","","type","reset","value","Reset","matTooltip","Reset dock rules",1,"addButton","buttons",3,"click"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup","ngSubmit",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","RuleNumb"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Typ"],["matColumnDef","Description"],["matColumnDef","AptSts"],["matColumnDef","EmailExitPoint"],["matColumnDef","MessageId"],["matColumnDef","RuleStat"],["matColumnDef","Actions"],["mat-header-cell","","class","tally_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Dock Rules",1,"addButton",3,"click"],[1,"form","over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","RUNMBR","maxlength","3"],["appearance","outline",1,"full-width","w-50"],["matInput","","formControlName","DESC","maxlength","30"],["matInput","","formControlName","TYPE","appUppercase","","maxlength","2"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"tally_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",1,"dropdown-item",3,"click"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t._uU(3," Work With Dock Rules "),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,O,3,0,"button",3),t.YNc(6,H,3,0,"button",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return o.addDockrules()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA()(),t.TgZ(10,"button",6),t.NdJ("click",function(){return o.resetSearch()}),t.TgZ(11,"mat-icon"),t._uU(12,"loop"),t.qZA()()()(),t.TgZ(13,"mat-card-content",7),t.YNc(14,Q,17,1,"form",8),t.qZA(),t.TgZ(15,"table",9),t.ynx(16,10),t.YNc(17,z,2,0,"th",11),t.YNc(18,L,2,1,"td",12),t.BQk(),t.ynx(19,13),t.YNc(20,$,2,0,"th",11),t.YNc(21,V,2,1,"td",12),t.BQk(),t.ynx(22,14),t.YNc(23,K,2,0,"th",11),t.YNc(24,j,2,1,"td",12),t.BQk(),t.ynx(25,15),t.YNc(26,X,2,0,"th",11),t.YNc(27,tt,2,1,"td",12),t.BQk(),t.ynx(28,16),t.YNc(29,et,2,0,"th",11),t.YNc(30,ot,2,1,"td",12),t.BQk(),t.ynx(31,17),t.YNc(32,nt,2,0,"th",11),t.YNc(33,at,2,1,"td",12),t.BQk(),t.ynx(34,18),t.YNc(35,st,2,0,"th",11),t.YNc(36,it,2,1,"td",12),t.BQk(),t.ynx(37,19),t.YNc(38,rt,1,0,"th",20),t.YNc(39,lt,36,0,"td",12),t.BQk(),t.YNc(40,ct,1,0,"tr",21),t.YNc(41,ut,1,0,"tr",22),t.qZA(),t.TgZ(42,"mat-paginator",23,24),t.NdJ("page",function(s){return o.onPaginateChange(s)}),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!o.searchTextDisplay),t.xp6(8),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(9,mt))("pageSize",o.pageSize))},dependencies:[u.m,w.O5,r._Y,r.Fj,r.JJ,r.JL,r.nD,r.sg,r.u,c.NW,Z.Hw,R.lW,b.KE,b.hX,v.Nt,_.a8,_.dk,_.dn,_.n5,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,G.gM,P.e]}),n})()}}]);