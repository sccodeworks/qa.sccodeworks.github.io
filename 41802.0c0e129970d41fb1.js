"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[41802],{39505:(U,v,o)=>{o.d(v,{L:()=>m});var d=o(24006),f=o(59549),g=o(69751),R=o(68675),P=o(54004),r=o(94650),t=o(36895),E=o(47957),C=o(3238),i=o(44144);function u(a,c){if(1&a&&(r.TgZ(0,"mat-option",4),r._uU(1),r.qZA()),2&a){const s=c.$implicit;r.Q6J("value",s),r.xp6(1),r.Oqu(s)}}let m=(()=>{class a{constructor(s){this.fb=s,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=l=>{},this.onChange=l=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new g.y,this.filteredOptions=this.control.valueChanges.pipe((0,R.O)(this.value),(0,P.U)(l=>this._filter(l)))}setDescribedByIds(s){}onContainerClick(s){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(s){null!=s&&(this.control.setValue(s),this.value=s)}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}setDisabledState(s){this.disabled=s}_filter(s){if(null==s||0==s.length)return this.options;const l=s.toLowerCase(),h=this.options.filter(T=>T.toLowerCase().includes(l));return!this.disabled&&1===h.length&&this.control.value!=h[0]&&s.length>=(this.previousValue?.length??0)&&this.control.setValue(h[0]),this.onChange(this.control.value),this.previousValue=this.control.value,h}}return a.\u0275fac=function(s){return new(s||a)(r.Y36(d.qu))},a.\u0275cmp=r.Xpm({type:a,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(s,l){2&s&&r.uIk("aria-describedby",l.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[r._Bn([{provide:d.JU,multi:!0,useExisting:a},{provide:f.Eo,useExisting:a}],[{provide:d.gN,useExisting:d.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(s,l){if(1&s&&(r.TgZ(0,"mat-form-field",0)(1,"mat-label"),r._uU(2),r.qZA(),r._UZ(3,"input",1),r.TgZ(4,"mat-autocomplete",null,2),r.YNc(6,u,2,2,"mat-option",3),r.ALo(7,"async"),r.qZA()()),2&s){const h=r.MAs(5);r.Q6J("appearance",l.appearance),r.xp6(2),r.Oqu(l.label),r.xp6(1),r.Q6J("id",l.id)("placeholder",l.placeholder)("formControl",l.control)("matAutocomplete",h),r.xp6(3),r.Q6J("ngForOf",r.lcZ(7,7,l.filteredOptions))}},dependencies:[t.sg,d.Fj,d.JJ,d.oH,E.XC,E.ZL,C.ey,f.KE,f.hX,i.Nt,t.Ov]}),a})()},12652:(U,v,o)=>{o.d(v,{u:()=>t});var d=o(80529),f=o(75625),g=o(70262),R=o(62843),P=o(92340),r=o(94650);let t=(()=>{class E{constructor(i){this.httpClient=i,this.url=P.N.API_BASE_URL,this.httpHeader={headers:new d.WM({"Content-Type":"application/json"})}}getDockrules(i,u,m,a,c,s){return this.httpClient.get(this.url+"/dockRules/read",{params:{user:i,rule:u??"",description:m??"",type:a??"",recordsPerPage:c??"",pageNo:s??""}})}createDockrules(i,u,m,a,c){return this.httpClient.post(this.url+"/dockRules/create",{type:i,description:u,message:m,apptStatus:a,email:c}).pipe((0,f.X)(1),(0,g.K)(this.httpError))}updateDockrules(i,u,m,a,c){return this.httpClient.put(this.url+"/dockRules/update",{user:i,rule:u,type:m,description:a,message:c}).pipe((0,f.X)(1),(0,g.K)(this.httpError))}deleteDockrules(i,u,m,a,c,s,l,h,T,A){return this.httpClient.delete(this.url+`/dockRules/deleteRule?user=${i}&rule=${u}&description=${m}&type=${a}&apptStatus=${c}&exitPoint=${s}&msgID=${l}&severity=${h}&exitLogic=${T}&status=${A}`)}getMessage(){return this.httpClient.get(this.url+"/dockRules/messages")}getRules(){return this.httpClient.get(this.url+"/dockRules/rules")}getapptStatus(){return this.httpClient.get(this.url+"/dockRules/apptStatus")}emailPoint(){return this.httpClient.get(this.url+"/dockRules/epoint")}hold(i){return this.httpClient.put(this.url+"/dockRules/hold",{rule:i}).pipe((0,f.X)(1),(0,g.K)(this.httpError))}release(i){return this.httpClient.put(this.url+"/dockRules/release",{rule:i}).pipe((0,f.X)(1),(0,g.K)(this.httpError))}constraintRead(i,u,m,a){return this.httpClient.get(this.url+"/dockRules/constraint/read",{params:{user:i,rule:u??"",recordsPerPage:m??"",pageNo:a??""}})}constraintCreate(i,u,m,a,c,s,l,h){return this.httpClient.post(this.url+"/dockRules/constraint/create",{user:i,ruleNumber:u,constraintNumber:m,andOr:a,constraint:c,relationshipOperator:s,constraintValue:l,valueIncrement:h}).pipe((0,f.X)(1),(0,g.K)(this.httpError))}constraintUpdate(i,u,m,a,c,s,l,h){return this.httpClient.put(this.url+"/dockRules/constraint/update",{user:i,ruleNumber:u,constraintNumber:m,andOr:a,constraint:c,relationshipOperator:s,constraintValue:l,valueIncrement:h}).pipe((0,f.X)(1),(0,g.K)(this.httpError))}constraintDelete(i,u,m){return this.httpClient.delete(this.url+`/dockRules/constraint/delete?user=${i}&rule=${u}&seq=${m}`)}constraints(){return this.httpClient.get(this.url+"/dockRules/constraints")}operators(){return this.httpClient.get(this.url+"/dockRules/operators")}values(){return this.httpClient.get(this.url+"/dockRules/values")}httpError(i){let u="";return u=i.error instanceof ErrorEvent?i.error.message:`Error Code: ${i.status}\nMessage: ${i.message}`,console.log(u),(0,R._)(()=>new Error(u))}}return E.\u0275fac=function(i){return new(i||E)(r.LFG(d.eN))},E.\u0275prov=r.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},41802:(U,v,o)=>{o.r(v),o.d(v,{WwDockrulesCreateComponent:()=>S});var d=o(65412),f=o(35226),g=o.n(f),R=o(70879),P=o(48529),r=o(86385),t=o(94650),E=o(12652),C=o(24006),i=o(19132),u=o(36895),m=o(97392),a=o(4859),c=o(59549),s=o(44144),l=o(73546),h=o(39505);const T=["itemInput"];function A(_,I){if(1&_&&t._UZ(0,"custom-input-autocomplete",17),2&_){const e=t.oxw();t.Q6J("options",e.msgIdOptions)}}function L(_,I){if(1&_&&t._UZ(0,"custom-input-autocomplete",18),2&_){const e=t.oxw();t.Q6J("options",e.apptOptions)}}function W(_,I){if(1&_&&t._UZ(0,"custom-input-autocomplete",19),2&_){const e=t.oxw();t.Q6J("options",e.emailOptions)}}let S=(()=>{class _{constructor(e,n,p,D,M,O){this.DockrulesService=e,this.anyvariable=n,this.dialogRef=p,this.fb=D,this.router=M,this.cdr=O,this.ruleOptions=[],this.ruleTypeMap=new Map,this.msgIdOptions=[],this.apptOptions=[],this.apptTypeMap=new Map,this.emailOptions=[],this.dockUrl="/main-nav/dock-rules/read"}ngOnInit(){this.form=this.fb.group({TYPE:[""],MSGID:[""],RUDESC:[""],apptStatus:[""],email:[""]}),this.fetchRules(),this.fetchMessage(),this.fetchAppt(),this.fetchEmail()}onItemFocus(){if(this.ruleOptions.length>0&&this.itemInputComponent?.control){const e=this.itemInputComponent.control.value||"";this.itemInputComponent.control.setValue(e+" "),setTimeout(()=>{this.itemInputComponent.control.setValue(e)},0)}}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}get normalizedType(){const e=this.form.get("TYPE")?.value;return(this.ruleTypeMap.get(e)||e||"").trim().toUpperCase()}get normalizedApptStatus(){const e=this.form.get("apptStatus")?.value;return(this.apptTypeMap.get(e)||e||"").trim()}fetchRules(){this.ruleOptions=[],this.ruleTypeMap.clear(),this.DockrulesService.getRules().subscribe(e=>{e.forEach(n=>{const p=n.VLVALU?.trim(),M=`${p} - ${n.VLSDSC?.trim()||""}`;this.ruleOptions.push(M),this.ruleTypeMap.set(M,p)}),this.cdr.detectChanges()})}fetchMessage(){this.msgIdOptions=[],this.DockrulesService.getMessage().subscribe(e=>{for(const n of e)n.RUMSGD&&""!==n.RUMSGD.trim()&&this.msgIdOptions.push(n.RUMSGD);this.cdr.detectChanges()})}fetchAppt(){this.DockrulesService.getapptStatus().subscribe(e=>{const n=e.filter((p,D,M)=>D===M.findIndex(O=>O.VLVALU?.trim()===p.VLVALU?.trim()));this.apptOptions=n.map(p=>{const D=`${p.VLVALU.trim()} - ${p.VLSDSC?.trim()||""}`;return this.apptTypeMap.set(D,p.VLVALU.trim()),D}),this.cdr.detectChanges()})}fetchEmail(){this.DockrulesService.emailPoint().subscribe(e=>{const n=e.map(p=>p.EPPOIN?.trim()).filter(p=>!!p);this.emailOptions=Array.from(new Set(n)),this.cdr.detectChanges()})}isAddDisabled(){const e=this.normalizedType;return"DY"===e?!(this.form.get("RUDESC")?.value?.trim()&&this.normalizedApptStatus&&this.form.get("email")?.value?.trim()):"EN"!==e&&"CL"!==e||!(this.form.get("RUDESC")?.value?.trim()&&this.form.get("MSGID")?.value?.trim())}addDockrules(){const e=this.form.value,n=this.normalizedType,p=this.normalizedApptStatus;this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.createDockrules(n,e.RUDESC,e.MSGID,p,e.email).subscribe(D=>{const O=D[0].data[D[0].data.length-1].value;O.toUpperCase()===P.R.create.toUpperCase()?(this.successMessage(O),this.closeDialog(),this.router.navigate([this.dockUrl])):this.failureMessage(O)})}successMessage(e){g().fire(e,"","success")}failureMessage(e){g().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return _.\u0275fac=function(e){return new(e||_)(t.Y36(E.u),t.Y36(d.WI),t.Y36(d.so),t.Y36(C.qu),t.Y36(i.F0),t.Y36(t.sBO))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-ww-dockrules-create"]],viewQuery:function(e,n){if(1&e&&t.Gf(T,5),2&e){let p;t.iGM(p=t.CRH())&&(n.itemInputComponent=p.first)}},standalone:!0,features:[t.jDz],decls:23,vars:6,consts:[[1,"over-Flow"],[1,"main-header-title"],[1,"title"],["mat-icon-button","",1,"closeIcon",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["formControlName","TYPE","label","Rule Type*","appearance","outline","required","",1,"large-input",3,"options","focus","click"],["itemInput",""],["appearance","outline",1,"full-width2"],["matInput","","required","","formControlName","RUDESC"],["formControlName","MSGID","label","Message ID*","appearance","outline","required","",3,"options",4,"ngIf"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","","class","large-input",3,"options",4,"ngIf"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options",4,"ngIf"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"],["formControlName","MSGID","label","Message ID*","appearance","outline","required","",3,"options"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","",1,"large-input",3,"options"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title",2),t._uU(4,"Maintain Dock Rules"),t.qZA()(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon",4),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"custom-input-autocomplete",9,10),t.NdJ("focus",function(){return n.onItemFocus()})("click",function(){return n.onItemFocus()}),t.qZA(),t.TgZ(14,"mat-form-field",11)(15,"mat-label"),t._uU(16,"Description"),t.qZA(),t._UZ(17,"input",12),t.qZA(),t.YNc(18,A,1,1,"custom-input-autocomplete",13),t.YNc(19,L,1,1,"custom-input-autocomplete",14),t.YNc(20,W,1,1,"custom-input-autocomplete",15),t.qZA()(),t.TgZ(21,"button",16),t.NdJ("click",function(){return n.addDockrules()}),t._uU(22," Add "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",n.form),t.xp6(3),t.Q6J("options",n.ruleOptions),t.xp6(6),t.Q6J("ngIf","EN"===n.normalizedType||"CL"===n.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===n.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===n.normalizedType),t.xp6(1),t.Q6J("disabled",n.isAddDisabled()))},dependencies:[R.m,u.O5,C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.sg,C.u,m.Hw,a.lW,c.KE,c.hX,s.Nt,l.a8,l.dk,l.dn,l.n5,r.j,h.L],styles:["custom-input-autocomplete.large-input mat-form-field{width:50%}"]}),_})()}}]);