"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[33182,34894,11790,26628,38754,85645,70096,49741],{34894:(R,T,l)=>{l.d(T,{e:()=>C});var f=l(94650),i=l(24006);let C=(()=>{class u{constructor(g,c){this.el=g,this.control=c}onInputChange(g){const c=this.el.nativeElement,h=c.value.toUpperCase();c.value=h,this.control&&this.control.control&&this.control.control.setValue(h,{emitEvent:!1})}}return u.\u0275fac=function(g){return new(g||u)(f.Y36(f.SBq),f.Y36(i.a5))},u.\u0275dir=f.lG2({type:u,selectors:[["","appUppercase",""]],hostBindings:function(g,c){1&g&&f.NdJ("input",function(p){return c.onInputChange(p)})},standalone:!0}),u})()},11790:(R,T,l)=>{l.d(T,{y:()=>g});var f=l(65412),i=l(94650),C=l(97392),u=l(4859);let _=(()=>{class c{constructor(p,D){this.dialogRef=p,this.data=D}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return c.\u0275fac=function(p){return new(p||c)(i.Y36(f.so),i.Y36(f.WI))},c.\u0275cmp=i.Xpm({type:c,selectors:[["app-alert-dialog"]],decls:16,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["aria-label","Close dialog",1,"close-btn",3,"click"],[1,"icon-wrapper"],["src","assets/svg/icons/Delete.svg","alt","Delete",1,"delete-svg-icon"],[1,"confirm-dialog-title"],[1,"confirmation-message"],[1,"footer","confirm-dialog"],["mat-raised-button","","id","no-button",1,"buttons","cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","id","yes-button",1,"buttons","removeButton","new-tally-form-btn",3,"mat-dialog-close"]],template:function(p,D){1&p&&(i.TgZ(0,"div",0)(1,"div",1)(2,"button",2),i.NdJ("click",function(){return D.closeDialog()}),i.TgZ(3,"mat-icon"),i._uU(4,"close"),i.qZA()(),i.TgZ(5,"div",3),i._UZ(6,"img",4),i.qZA(),i.TgZ(7,"h2",5),i._uU(8,"Confirmation"),i.qZA(),i.TgZ(9,"span",6),i._uU(10),i.qZA()(),i.TgZ(11,"div",7)(12,"button",8),i._uU(13,"Cancel"),i.qZA(),i.TgZ(14,"button",9),i._uU(15,"Delete"),i.qZA()()()),2&p&&(i.xp6(10),i.Oqu(D.data.message),i.xp6(2),i.Q6J("mat-dialog-close",!1),i.xp6(2),i.Q6J("mat-dialog-close",!0))},dependencies:[C.Hw,u.lW,f.ZT]}),c})(),g=(()=>{class c{constructor(p){this.dialog=p}openCustomAlert(p){return this.dialog.open(_,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:p}})}}return c.\u0275fac=function(p){return new(p||c)(i.LFG(f.uw))},c.\u0275prov=i.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},33182:(R,T,l)=>{l.r(T),l.d(T,{WwDockrulesComponent:()=>It});var f=l(15861),i=l(24006),C=l(98739),u=l(7155),_=l(65412),g=l(35226),c=l.n(g),h=l(70879),p=l(48529),D=l(86385),t=l(94650),k=l(12652),x=l(19132),y=l(36895),A=l(97392),N=l(4859),S=l(59549),I=l(44144),b=l(73546),q=l(39505);const Y=["itemInput"],F=["apptInput"],J=["emailInput"];function O(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"custom-input-autocomplete",17,18),t.NdJ("focus",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onItemFocus())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("options",e.msgIdOptions)}}function Q(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"custom-input-autocomplete",19,20),t.NdJ("focus",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onApptFocus())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("options",e.apptOptions)}}function P(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"custom-input-autocomplete",21,22),t.NdJ("focus",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onEmailFocus())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("options",e.emailOptions)}}let G=(()=>{class o{constructor(e,n,s,r,m,d){this.fb=e,this.DockrulesService=n,this.router=s,this.anyvariable=r,this.dialogRef=m,this.cdr=d,this.user=localStorage.getItem("userName")||"",this.msgIdOptions=[],this.msgIdMap=new Map,this.apptOptions=[],this.apptTypeMap=new Map,this.emailOptions=[],this.ruleTypeMap=new Map,this.dockUrl="/main-nav/dock-rules/read"}ngOnInit(){this.form=this.fb.group({TYPE:this.anyvariable.RUTYPE,RUDESC:this.anyvariable.RUDESC,RUMSGD:this.anyvariable.RUMSGD,apptStatus:this.anyvariable.RUAPST,email:this.anyvariable.RUEPNT}),this.fetchMessage(),this.fetchAppt(),this.fetchEmail()}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}applyFocusHack(e,n){if(e.length>0&&n?.control){const s=n.control.value||"";n.control.setValue(s+" "),setTimeout(()=>{n.control.setValue(s)},0)}}onItemFocus(){this.applyFocusHack(this.msgIdOptions,this.itemInputComponent)}onApptFocus(){this.applyFocusHack(this.apptOptions,this.apptInputComponent)}onEmailFocus(){this.applyFocusHack(this.emailOptions,this.emailInputComponent)}fetchMessage(){this.msgIdOptions=[],this.msgIdMap.clear(),this.DockrulesService.getMessage().subscribe(e=>{const n=new Set;e.forEach(s=>{const r=s.MSGID?.trim(),m=s.MESSAGE?.trim();if(!r)return;const d=m?`${r} - ${m}`:r;n.has(d)||(n.add(d),this.msgIdOptions.push(d),this.msgIdMap.set(d,r))}),this.cdr.detectChanges()})}fetchAppt(){this.DockrulesService.getapptStatus().subscribe(e=>{const n=e.filter((s,r,m)=>r===m.findIndex(d=>d.VLVALU?.trim()===s.VLVALU?.trim()));this.apptOptions=n.map(s=>{const r=`${s.VLVALU.trim()} - ${s.VLSDSC?.trim()||""}`;return this.apptTypeMap.set(r,s.VLVALU.trim()),r}),this.cdr.detectChanges()})}fetchEmail(){this.emailOptions=[],this.DockrulesService.emailPoint().subscribe(e=>{const n=new Set(e.map(s=>s.EPPOIN?.trim()).filter(s=>!!s));this.emailOptions=[...n],this.cdr.detectChanges()})}get normalizedType(){const e=this.form.get("TYPE")?.value;return(this.ruleTypeMap.get(e)||e||"").trim().toUpperCase()}get normalizedApptStatus(){const e=this.form.get("apptStatus")?.value;return(this.apptTypeMap.get(e)||e||"").trim()}isAddDisabled(){const e=this.normalizedType;return"DY"===e?!(this.form.get("RUDESC")?.value?.trim()&&this.normalizedApptStatus&&this.form.get("email")?.value?.trim()):"EN"!==e&&"CL"!==e||!(this.form.get("RUDESC")?.value?.trim()&&this.form.get("RUMSGD")?.value?.trim())}get normalizedMsgId(){const e=this.form.get("RUMSGD")?.value;return(this.msgIdMap.get(e)||e||"").trim()}updateDockrules(){const e=this.form.value;this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.updateDockrules(this.user,this.anyvariable.RUNMBR,this.anyvariable.RUTYPE,e.RUDESC,this.normalizedMsgId,e.apptStatus,e.email).subscribe(n=>{const r=n[0].data[n[0].data.length-1].value;r.toUpperCase()===p.R.update.toUpperCase()?(this.successMessage(r),this.closeDialog(),this.router.navigate([this.dockUrl])):this.failureMessage(r)})}successMessage(e){c().fire(e,"","success")}failureMessage(e){c().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(k.u),t.Y36(x.F0),t.Y36(_.WI),t.Y36(_.so),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ww-dockrules-change"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Y,5),t.Gf(F,5),t.Gf(J,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.itemInputComponent=s.first),t.iGM(s=t.CRH())&&(n.apptInputComponent=s.first),t.iGM(s=t.CRH())&&(n.emailInputComponent=s.first)}},standalone:!0,features:[t.jDz],decls:26,vars:5,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","readonly","","formControlName","TYPE"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","RUDESC","maxlength","30"],["formControlName","RUMSGD","label","Message ID*","appearance","outline","required","","class","large-input",3,"options","focus",4,"ngIf"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","","class","large-input",3,"options","focus",4,"ngIf"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options","focus",4,"ngIf"],[1,"footer"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"],["formControlName","RUMSGD","label","Message ID*","appearance","outline","required","",1,"large-input",3,"options","focus"],["itemInput",""],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","",1,"large-input",3,"options","focus"],["apptInput",""],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options","focus"],["emailInput",""]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Dock Rules"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Rule Type"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",10)(17,"mat-label"),t._uU(18,"Description"),t.qZA(),t._UZ(19,"input",11),t.qZA(),t.YNc(20,O,2,1,"custom-input-autocomplete",12),t.YNc(21,Q,2,1,"custom-input-autocomplete",13),t.YNc(22,P,2,1,"custom-input-autocomplete",14),t.qZA()(),t.TgZ(23,"div",15)(24,"button",16),t.NdJ("click",function(){return n.updateDockrules()}),t._uU(25," Update "),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",n.form),t.xp6(11),t.Q6J("ngIf","EN"===n.normalizedType||"CL"===n.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===n.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===n.normalizedType),t.xp6(2),t.Q6J("disabled",!(n.form.valid&&n.form.dirty)))},dependencies:[h.m,y.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.nD,i.sg,i.u,A.Hw,N.lW,S.KE,S.hX,I.Nt,b.a8,b.dk,b.dn,b.n5,D.j,q.L]}),o})();var B=l(11790);let z=(()=>{class o{constructor(e,n,s,r,m,d){this.CustomAlertService=e,this.DockrulesService=n,this.fb=s,this.anyvariable=r,this.router=m,this.dialogRef=d,this.user=localStorage.getItem("userName")||"",this.dockUrl="/main-nav/dock-rules/read"}ngOnInit(){this.form=this.fb.group({RUNMBR:this.anyvariable.RUNMBR,RUTYPE:this.anyvariable.RUTYPE,RUDESC:this.anyvariable.RUDESC,RUAPST:this.anyvariable.RUAPST,RUEPNT:this.anyvariable.RUEPNT,RUMSGD:this.anyvariable.RUMSGD,RUSEVR:this.anyvariable.RUSEVR,RUEXIT:this.anyvariable.RUEXIT,RUSTAT:this.anyvariable.RUSTAT}),this.form.disable()}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}deleteDockrules(){this.CustomAlertService.openCustomAlert("Are you sure you want to delete this Dock Rules: "+this.anyvariable.RUNMBR+"?").afterClosed().subscribe(n=>{n&&(this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.deleteDockrules(this.user,this.anyvariable.RUNMBR,this.anyvariable.RUDESC,this.anyvariable.RUTYPE,this.anyvariable.RUAPST,this.anyvariable.RUEPNT,this.anyvariable.RUMSGD,this.anyvariable.RUSEVR,this.anyvariable.RUEXIT,this.anyvariable.RUSTAT).subscribe(s=>{const r=JSON.parse(s[0].data[1].value).returnedData.message;r.toUpperCase()===p.R.deleteMsg.toUpperCase()?(this.successMessage(r),this.closeDialog(),this.router.navigate([this.dockUrl])):this.failureMessage(r)}))})}successMessage(e){c().fire(e,"","success")}failureMessage(e){c().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(B.y),t.Y36(k.u),t.Y36(i.qu),t.Y36(_.WI),t.Y36(x.F0),t.Y36(_.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ww-dockrules-delete"]],standalone:!0,features:[t.jDz],decls:56,vars:1,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","required","","formControlName","RUNMBR"],["matInput","","formControlName","RUTYPE"],["appearance","outline",1,"full-width","w-50"],["matInput","","formControlName","RUDESC"],["matInput","","required","","formControlName","RUAPST"],["matInput","","required","","formControlName","RUEPNT"],["matInput","","required","","formControlName","RUMSGD"],["matInput","","required","","formControlName","RUSEVR"],["matInput","","required","","formControlName","RUEXIT"],["matInput","","required","","formControlName","RUSTAT"],[1,"form-warning-message"],[1,"footer"],[1,"buttons","removeButton","new-tally-form-btn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Delete a Dock Rule "),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14," Rule Number "),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18," Rule Type "),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",11)(21,"mat-label"),t._uU(22," Description "),t.qZA(),t._UZ(23,"input",12),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26," Appointment Status "),t.qZA(),t._UZ(27,"input",13),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30," Email Exit Point "),t.qZA(),t._UZ(31,"input",14),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34," Message ID "),t.qZA(),t._UZ(35,"input",15),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38," Message Severity "),t.qZA(),t._UZ(39,"input",16),t.qZA(),t.TgZ(40,"mat-form-field",8)(41,"mat-label"),t._uU(42," Exit Logic "),t.qZA(),t._UZ(43,"input",17),t.qZA(),t.TgZ(44,"mat-form-field",8)(45,"mat-label"),t._uU(46," Status Code "),t.qZA(),t._UZ(47,"input",18),t.qZA(),t.TgZ(48,"div",19)(49,"p"),t._uU(50," Press <Enter> to confirm Deletion"),t._UZ(51,"br"),t._uU(52," Note: Constraints will also be deleted "),t.qZA()()()(),t.TgZ(53,"div",20)(54,"button",21),t.NdJ("click",function(){return n.deleteDockrules()}),t._uU(55," Delete "),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",n.form))},dependencies:[h.m,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,A.Hw,N.lW,S.KE,S.hX,I.Nt,b.a8,b.dk,b.dn,b.n5]}),o})();var H=l(41802),L=l(77579),$=l(78372),j=l(71884),K=l(80529),V=l(10266),X=l(34894);function tt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.searchDockrules())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Filter"),t.qZA()()}}function et(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.searchDockrules())}),t._UZ(1,"img",30),t.TgZ(2,"span"),t._uU(3,"Filter"),t.qZA()()}}function ot(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",31),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.getBySearch(s.form.value))}),t.TgZ(1,"div",32)(2,"div",33)(3,"mat-form-field",34)(4,"mat-label"),t._uU(5,"Rule "),t.qZA(),t._UZ(6,"input",35),t.qZA(),t.TgZ(7,"mat-form-field",36)(8,"mat-label"),t._uU(9,"Description "),t.qZA(),t._UZ(10,"input",37),t.qZA(),t.TgZ(11,"mat-form-field",34)(12,"mat-label"),t._uU(13,"Type "),t.qZA(),t._UZ(14,"input",38),t.qZA()()(),t.TgZ(15,"div",39)(16,"button",40),t._uU(17," Search "),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.form)}}function nt(o,a){1&o&&(t.TgZ(0,"th",41),t._uU(1," Rule Number "),t.qZA())}function st(o,a){if(1&o&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.RUNMBR," ")}}function it(o,a){1&o&&(t.TgZ(0,"th",41),t._uU(1," Type "),t.qZA())}function at(o,a){if(1&o&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.RUTYPE)}}function rt(o,a){1&o&&(t.TgZ(0,"th",41),t._uU(1,"Description "),t.qZA())}function lt(o,a){if(1&o&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.RUDESC," ")}}function ct(o,a){1&o&&(t.TgZ(0,"th",41),t._uU(1," Appointment Status "),t.qZA())}function ut(o,a){if(1&o&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.RUAPST," ")}}function pt(o,a){1&o&&(t.TgZ(0,"th",41),t._uU(1," Email Exit Point "),t.qZA())}function mt(o,a){if(1&o&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.RUEPNT," ")}}function dt(o,a){1&o&&(t.TgZ(0,"th",41),t._uU(1," Message Id "),t.qZA())}function ht(o,a){if(1&o&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.RUMSGD," ")}}function ft(o,a){1&o&&(t.TgZ(0,"th",41),t._uU(1," Rule Status "),t.qZA())}function gt(o,a){if(1&o&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.RUSTAT," ")}}function _t(o,a){1&o&&(t.TgZ(0,"th",43),t._uU(1," Actions "),t.qZA())}function Dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw().$implicit,d=t.oxw();return t.KtG(d.executeAction(r,m))}),t._UZ(1,"img",60),t.TgZ(2,"span",61),t._uU(3),t.qZA()()}if(2&o){const e=a.$implicit;t.Q6J("color",e.color),t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH),t.xp6(2),t.Oqu(e.label)}}function bt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"li",69)(1,"button",70),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw(2).$implicit,d=t.oxw();return t.KtG(d.handleRecentClick(r,m))}),t._uU(2),t.qZA()()}if(2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",e.label," ")}}function Ct(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"li",62)(1,"div",63)(2,"span",64),t._uU(3,"Recent Searches"),t.qZA(),t.TgZ(4,"button",65),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.clearRecentSearches())}),t.TgZ(5,"span",66),t._uU(6,"Clear"),t.qZA()()(),t.TgZ(7,"ul",67),t.YNc(8,bt,3,1,"li",68),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",e.filteredRecentSearches)}}function Tt(o,a){1&o&&(t.TgZ(0,"li",71)(1,"div",72)(2,"mat-icon",73),t._uU(3,"search"),t.qZA(),t.TgZ(4,"span",74),t._uU(5,"No results found"),t.qZA(),t.TgZ(6,"span",75),t._uU(7,"We couldn\u2019t find any items matching your search. Try adjusting your keywords."),t.qZA()()())}function St(o,a){if(1&o&&(t.ynx(0),t._UZ(1,"img",78),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH)}}function kt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.icon)}}function Zt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"li",76)(1,"button",70),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw().$implicit,d=t.oxw();return t.KtG(d.handleItemClick(r,m))}),t.YNc(2,St,2,2,"ng-container",77),t.YNc(3,kt,3,1,"ng-container",77),t._uU(4),t.qZA()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Q6J("ngIf",null==e.icon?null:e.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=e.icon&&e.icon.includes("assets"))),t.xp6(1),t.hij(" ",e.label," ")}}function Ut(o,a){if(1&o&&(t.ynx(0),t._UZ(1,"img",82),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH)}}function wt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-icon",83),t._uU(2),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.icon)}}function vt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"li",79)(1,"button",70),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw().$implicit,d=t.oxw();return t.KtG(d.handleItemClick(r,m))}),t.TgZ(2,"div",80),t.YNc(3,Ut,2,2,"ng-container",77),t.YNc(4,wt,3,1,"ng-container",77),t.TgZ(5,"span",81),t._uU(6),t.qZA()()()()}if(2&o){const e=a.$implicit,n=t.oxw(2);t.Q6J("hidden",n.filteredItems.includes(e)),t.xp6(3),t.Q6J("ngIf",null==e.icon?null:e.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=e.icon&&e.icon.includes("assets"))),t.xp6(2),t.Oqu(e.label)}}function Rt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",42)(1,"div",44)(2,"button",45),t._UZ(3,"img",46),t.qZA(),t.TgZ(4,"ul",47)(5,"li",48),t.YNc(6,Dt,4,4,"button",49),t.qZA(),t.TgZ(7,"li",50)(8,"mat-form-field",51)(9,"input",52),t.NdJ("ngModelChange",function(s){t.CHM(e);const r=t.oxw();return t.KtG(r.searchDropdownText=s)})("input",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onSearchChange())}),t.qZA()()(),t.YNc(10,Ct,9,1,"li",53),t.TgZ(11,"div",54),t._UZ(12,"hr",55),t.qZA(),t.YNc(13,Tt,8,0,"li",56),t.YNc(14,Zt,5,3,"li",57),t.YNc(15,vt,7,4,"li",58),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.headerActions),t.xp6(3),t.Q6J("ngModel",e.searchDropdownText),t.xp6(1),t.Q6J("ngIf",e.filteredRecentSearches.length>0),t.xp6(3),t.Q6J("ngIf",0===e.filteredItems.length),t.xp6(1),t.Q6J("ngForOf",e.filteredItems),t.xp6(1),t.Q6J("ngForOf",e.menuItems)}}function xt(o,a){1&o&&t._UZ(0,"tr",84)}function yt(o,a){1&o&&t._UZ(0,"tr",85)}function At(o,a){1&o&&(t.TgZ(0,"div",86),t._UZ(1,"img",87),t.TgZ(2,"h3",88),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",89),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}const Nt=function(){return[8,16,24]};let It=(()=>{class o{constructor(e,n,s,r,m){this.DockrulesService=e,this.fb=n,this.router=s,this.matDialog=r,this.http=m,this.allData=[],this.filteredData=[],this.pageData=[],this.duplicateSource=[],this.headerActions=[],this.menuItems=[],this.filteredItems=[],this.remainingItems=[],this.searchDropdownText="",this.recentSearches=[],this.filteredRecentSearches=[],this.isLoading=!0,this.noData=!1,this.searchInput$=new L.x,this.isSearchMode=!1,this.displayedColumns=["RuleNumb","Typ","Description","AptSts","EmailExitPoint","MessageId","RuleStat","Actions"],this.user=localStorage.getItem("userName")||"",this.searchTextDisplay=!1,this.dataSource=new u.by,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.dockUrl="/main-nav/dockrules/read",this.constraintsUrl="/main-nav/dockrules/constraints"}ngOnInit(){this.form=this.fb.group({RUNMBR:["",i.kI.pattern(/^[0-9]{1,3}$/)],DESC:["",i.kI.pattern(/^.{1,30}$/)],TYPE:["",i.kI.pattern(/^[A-Za-z]{2}$/)]});const e=this.pageSize,n=this.pageNumber;this.currentFilters=this.form.value,this.getDockrules(e,n),this.dataSource.filterPredicate=this.createFilter(),this.searchInput$.pipe((0,$.b)(500),(0,j.x)()).subscribe(s=>{this.handleSearch(s)}),this.http.get("assets/jsondata/dockRules.json").subscribe(s=>{this.headerActions=s.header,this.menuItems=s.items,this.filteredItems=[...this.menuItems],this.remainingItems=[...this.menuItems],this.searchConfig=s.search;const r=localStorage.getItem("recentSearches");if(r){const m=JSON.parse(r);this.recentSearches=this.menuItems.filter(d=>m.includes(d.label))}this.filteredRecentSearches=[...this.recentSearches]})}handleItemClick(e,n){this.executeAction(e,n),this.addToRecentSearches(e)}executeAction(e,n){"function"==typeof this[e.action]?this[e.action](n):console.warn("Action not implemented:",e.action)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.getDockrules(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(e,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}loadSearchChunks(e,n){var s=this;return(0,f.Z)(function*(){const r=s.currentFilters||{},{RUNMBR:m="",DESC:d="",TYPE:M=""}=r;s.dockRulesSubscription&&s.dockRulesSubscription.unsubscribe();const{chunkSize:w,maxCalls:v}=s.getSearchStrategy(s.totalRecords||0);let Z=1,E=0,U=[];for(;E<v;){const Mt=(yield s.DockrulesService.getDockrules(s.user,m,d,M,w,Z).toPromise())?.[0]?.data?.[1]?.value,W=JSON.parse(Mt)?.returnedData||[],Et=W.filter(Wt=>Object.values(Wt).some(qt=>String(qt).toLowerCase().includes(e)));if(U.push(...Et),U.length>0||W.length<w)break;Z++,E++}s.allData=U,s.filteredData=U,s.totalRecords=U.length,n?.()})()}applyManualFilter(e){this.filteredData=this.allData.filter(n=>Object.values(n).some(s=>String(s).toLowerCase().includes(e))),this.noData=0===this.filteredData.length,this.totalRecords=this.filteredData.length,this.noData?this.dataSource.data=[]:this.loadPage(1)}loadPage(e){const n=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(n,n+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}getDockrules(e,n){this.isLoading=!0,this.noData=!1,this.dataSource=new u.by([]);const s=this.currentFilters||{},{RUNMBR:r="",DESC:m="",TYPE:d=""}=s;this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.getDockrules(this.user,r,m,d,e,n).subscribe({next:M=>{this.isLoading=!1;const v=JSON.parse(M?.[0]?.data?.[1]?.value||"{}"),Z=v?.returnedData||[];this.totalRecords=v?.TotalRecords||0,this.dataSource.data=Z,this.noData=0===Z.length,this.paginator&&(this.paginator.length=this.totalRecords)},error:()=>this.handleNoData()})}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode?this.loadPage(e.pageIndex+1):this.getDockrules(e.pageSize,e.pageIndex+1)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}handleRecentClick(e,n){this.searchDropdownText=e.label,this.onSearchChange(),"function"==typeof this[e.action]&&this[e.action](n),this.addToRecentSearches(e)}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new u.by([])}onSearchChange(){const e=(this.searchDropdownText||"").toLowerCase();this.filteredItems=this.menuItems.filter(n=>n.label.toLowerCase().includes(e)),this.filteredRecentSearches=e?[]:[...this.recentSearches]}addToRecentSearches(e){this.recentSearches=this.recentSearches.filter(n=>n.label!==e.label),this.recentSearches.unshift(e),this.recentSearches.length>5&&this.recentSearches.pop(),localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches.map(n=>n.label))),this.filteredRecentSearches=[...this.recentSearches]}clearRecentSearches(){this.recentSearches=[],this.filteredRecentSearches=[],localStorage.removeItem("recentSearches")}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}searchDockrules(){this.searchTextDisplay=1!=this.searchTextDisplay}createFilter(){return(e,n)=>{const s=JSON.parse(n);return Object.keys(s).every(r=>e[r].toString().toLowerCase().includes(s[r].toLowerCase()))}}getBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.getDockrules(this.pageSize,this.pageNumber)}resetSearch(){this.form.reset();const e=this.pageSize,n=this.pageNumber;this.currentFilters=null,this.paginator.firstPage(),this.getDockrules(e,n)}successMessage(e){c().fire(e,"","success")}failureMessage(e){c().fire(e,"","error")}addDockrules(){this.matDialog.open(H.WwDockrulesCreateComponent,{panelClass:"right-dialog",autoFocus:!1})}updateDockRule(e){this.matDialog.open(G,{panelClass:"right-dialog",data:e,autoFocus:!1})}constraints(e){this.router.navigateByUrl(this.constraintsUrl,{state:e})}deleteDockrules(e){this.matDialog.open(z,{panelClass:"right-dialog",data:e,autoFocus:!1})}holdRule(e){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.hold(e.RUNMBR).subscribe(n=>{const r=n[0].data[n[0].data.length-1].value;r?.toUpperCase()===p.R.updated.toUpperCase()?(this.successMessage(r),this.getDockrules(this.pageSize,this.pageNumber)):this.failureMessage(r)})}releaseRule(e){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.release(e.RUNMBR).subscribe(n=>{const r=n[0].data[n[0].data.length-1].value;r?.toUpperCase()===p.R.updated.toUpperCase()?(this.successMessage(r),this.getDockrules(this.pageSize,this.pageNumber)):this.failureMessage(r)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.u),t.Y36(i.qu),t.Y36(x.F0),t.Y36(_.uw),t.Y36(K.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ww-dockrules"]],viewQuery:function(e,n){if(1&e&&t.Gf(C.NW,5),2&e){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},standalone:!0,features:[t.jDz],decls:49,vars:11,consts:[[1,"over-Flow"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Dock Rules",3,"click",4,"ngIf"],["mat-button","","type","reset","value","Reset","matTooltip","Reset Dock Rules",1,"addButton","buttons",3,"click"],["mat-button","","matTooltip","Add New Dock Rule",1,"addButton",3,"click"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup","ngSubmit",4,"ngIf"],["id","myTable","mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","RuleNumb"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Typ"],["matColumnDef","Description"],["matColumnDef","AptSts"],["matColumnDef","EmailExitPoint"],["matColumnDef","MessageId"],["matColumnDef","RuleStat"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Dock Rules",1,"addButton",3,"click"],["src","assets/svg/header/filter.svg"],[1,"form","over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","RUNMBR","maxlength","3"],["appearance","outline",1,"full-width","w-50"],["matInput","","formControlName","DESC","maxlength","30"],["matInput","","formControlName","TYPE","appUppercase","","maxlength","2"],[1,"footer"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn","dropup"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false","data-bs-toggle","dropdown","aria-expanded","false","data-bs-auto-close","outside","data-bs-boundary","viewport","data-bs-popper","auto","data-popper-placement","auto",1,"btn"],["src","assets/svg/dropdownicons/Action.svg","alt","Actions",1,"Actions"],[1,"dropdown-menu","p-3"],[1,"header-dropdown","mb-2","d-flex","justify-content-between"],["mat-raised-button","","class","action-btn",3,"color","click",4,"ngFor","ngForOf"],[1,"search-section"],["appearance","outline",1,"search-input"],["matInput","","placeholder","Type to search",1,"full-width-search",3,"ngModel","ngModelChange","input"],["class","recent-searches",4,"ngIf"],[1,"filtered-divider-container"],[1,"filtered-divider"],["class","no-results",4,"ngIf"],["class","mb-menu-label",4,"ngFor","ngForOf"],["class","menu-items mb-1",3,"hidden",4,"ngFor","ngForOf"],["mat-raised-button","",1,"action-btn",3,"color","click"],[1,"action-icon",3,"src","alt"],[1,"action-label"],[1,"recent-searches"],[1,"d-flex","justify-content-between","align-items-center"],[1,"Recent-search-label"],["mat-icon-button","",3,"click"],[1,"clear"],[1,"list-unstyled"],["class","mb-recent-label",4,"ngFor","ngForOf"],[1,"mb-recent-label"],[1,"w-100","text-start",3,"click"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"no-results-header"],[1,"no-results-text"],[1,"mb-menu-label"],[4,"ngIf"],[3,"src","alt"],[1,"menu-items","mb-1",3,"hidden"],[1,"menu-content"],[1,"menu-label"],[1,"menu-icon",3,"src","alt"],[1,"drop-menu-icon"],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"div",1)(3,"mat-form-field",2)(4,"mat-icon",3),t._uU(5,"search"),t.qZA(),t.TgZ(6,"input",4),t.NdJ("input",function(r){return n.applyGlobalFilterInput(r.target.value)}),t.qZA()(),t.YNc(7,tt,5,0,"button",5),t.YNc(8,et,4,0,"button",6),t.TgZ(9,"button",7),t.NdJ("click",function(){return n.resetSearch()}),t.TgZ(10,"mat-icon"),t._uU(11,"loop"),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){return n.addDockrules()}),t.TgZ(13,"mat-icon"),t._uU(14,"add"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Create Dock Rule"),t.qZA()()()(),t.TgZ(17,"mat-card-content",9),t.YNc(18,ot,18,1,"form",10),t.qZA(),t.TgZ(19,"table",11),t.ynx(20,12),t.YNc(21,nt,2,0,"th",13),t.YNc(22,st,2,1,"td",14),t.BQk(),t.ynx(23,15),t.YNc(24,it,2,0,"th",13),t.YNc(25,at,2,1,"td",14),t.BQk(),t.ynx(26,16),t.YNc(27,rt,2,0,"th",13),t.YNc(28,lt,2,1,"td",14),t.BQk(),t.ynx(29,17),t.YNc(30,ct,2,0,"th",13),t.YNc(31,ut,2,1,"td",14),t.BQk(),t.ynx(32,18),t.YNc(33,pt,2,0,"th",13),t.YNc(34,mt,2,1,"td",14),t.BQk(),t.ynx(35,19),t.YNc(36,dt,2,0,"th",13),t.YNc(37,ht,2,1,"td",14),t.BQk(),t.ynx(38,20),t.YNc(39,ft,2,0,"th",13),t.YNc(40,gt,2,1,"td",14),t.BQk(),t.ynx(41,21),t.YNc(42,_t,2,0,"th",22),t.YNc(43,Rt,16,6,"td",14),t.BQk(),t.YNc(44,xt,1,0,"tr",23),t.YNc(45,yt,1,0,"tr",24),t.qZA(),t.YNc(46,At,6,0,"div",25),t.TgZ(47,"mat-paginator",26,27),t.NdJ("page",function(r){return n.onPaginateChange(r)}),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",n.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!n.searchTextDisplay),t.xp6(10),t.Q6J("ngIf",n.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n.noData),t.xp6(1),t.Q6J("length",n.totalRecords)("pageSizeOptions",t.DdM(10,Nt))("pageSize",n.pageSize))},dependencies:[h.m,y.sg,y.O5,i._Y,i.Fj,i.JJ,i.JL,i.nD,i.On,i.sg,i.u,C.NW,A.Hw,N.lW,S.KE,S.hX,S.qo,I.Nt,b.a8,b.dk,b.dn,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,V.gM,X.e]}),o})()},15861:(R,T,l)=>{function f(C,u,_,g,c,h,p){try{var D=C[h](p),t=D.value}catch(k){return void _(k)}D.done?u(t):Promise.resolve(t).then(g,c)}function i(C){return function(){var u=this,_=arguments;return new Promise(function(g,c){var h=C.apply(u,_);function p(t){f(h,g,c,p,D,"next",t)}function D(t){f(h,g,c,p,D,"throw",t)}p(void 0)})}}l.d(T,{Z:()=>i})}}]);