"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[1442,1790,8754,5645,2313],{11790:(x,N,n)=>{n.d(N,{y:()=>w});var s=n(65412),a=n(94650),u=n(97392),D=n(4859);let U=(()=>{class T{constructor(v,t){this.dialogRef=v,this.data=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return T.\u0275fac=function(v){return new(v||T)(a.Y36(s.so),a.Y36(s.WI))},T.\u0275cmp=a.Xpm({type:T,selectors:[["app-alert-dialog"]],decls:10,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["id","close-icon",3,"click"],[1,"content-span","full-width"],["mat-flat-button","","id","no-button",3,"mat-dialog-close"],["mat-flat-button","","id","yes-button",3,"mat-dialog-close"]],template:function(v,t){1&v&&(a.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),a.NdJ("click",function(){return t.closeDialog()}),a._uU(3,"close "),a.qZA(),a.TgZ(4,"span",3),a._uU(5),a.qZA()(),a.TgZ(6,"button",4),a._uU(7,"Cancel"),a.qZA(),a.TgZ(8,"button",5),a._uU(9,"Delete"),a.qZA()()),2&v&&(a.xp6(5),a.Oqu(t.data.message),a.xp6(1),a.Q6J("mat-dialog-close",!1),a.xp6(2),a.Q6J("mat-dialog-close",!0))},dependencies:[u.Hw,D.lW,s.ZT]}),T})(),w=(()=>{class T{constructor(v){this.dialog=v}openCustomAlert(v){return this.dialog.open(U,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:v}})}}return T.\u0275fac=function(v){return new(v||T)(a.LFG(s.uw))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},69501:(x,N,n)=>{n.d(N,{J:()=>b});var s=n(94650),a=n(24006),u=n(47957),D=n(59549),U=n(44144),w=n(69751),T=n(68675),_=n(54004),v=n(70879),t=n(36895),l=n(3238);function p(h,g){if(1&h&&(s.TgZ(0,"mat-option",7),s._uU(1),s.qZA()),2&h){const r=g.$implicit;s.Q6J("value",r),s.xp6(1),s.hij(" ",r.description," ")}}function C(h,g){1&h&&(s.TgZ(0,"mat-option"),s._uU(1," No matching results "),s.qZA())}function E(h,g){1&h&&(s.TgZ(0,"mat-error"),s._uU(1," This field is required. Please select an option. "),s.qZA())}function k(h,g){1&h&&(s.TgZ(0,"mat-hint",8),s._uU(1," The option you entered is not valid. Please select one from the list. "),s.qZA())}let b=(()=>{class h{constructor(r){this.fb=r,this.options=[],this.value=null,this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.isRequired=!1,this.selectionChange=new s.vpe,this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.onChange=d=>{this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0},this.onTouched=()=>{},this.control=this.fb.control("",{validators:this.isRequired?[a.kI.required]:[]}),this.stateChanges=new w.y,this.filteredOptions=this.control.valueChanges.pipe((0,T.O)(""),(0,_.U)(d=>this._filter(d)))}onFocus(){(!this.control.value||"string"==typeof this.control.value&&""===this.control.value.trim())&&this.control.setValue("")}ngOnInit(){this.isRequired&&this.control.setValidators([a.kI.required]),this.control.updateValueAndValidity(),this.filteredOptions=this.control.valueChanges.pipe((0,T.O)(""),(0,_.U)(r=>this._filter(r)))}_filter(r){let d="";if("string"==typeof r)d=r.trim();else{if(!r||"object"!=typeof r)return this.options;d=r.value.toLowerCase()}if(""===d)return this.errorState=!1,this.options;const Z=this.options.filter(y=>y.value.toLowerCase().includes(d)||y.description.toLowerCase().includes(d));return this.errorState=0===Z.length&&d.length>0,Z}writeValue(r){this.control.setValue(r&&"object"==typeof r?`${r.value} - ${r.description}`:"string"==typeof r?r:""),this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0}onOptionSelected(r){this.control.setValue(r);const[d,Z]=r.description.split(" ");this.valueControlName.setValue(d),this.suffixControlName&&this.suffixControlName.setValue(Z||""),this.onChange(r.value),this.selectionChange.emit(r.value),this.autocompleteTrigger.closePanel()}displayOptionText(r){return r?r.value:""}registerOnChange(r){this.onChange=r}registerOnTouched(r){this.onTouched=r}setDisabledState(r){this.disabled=r}setDescribedByIds(r){}onContainerClick(r){this.autocompleteTrigger&&this.autocompleteTrigger.openPanel()}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}}return h.\u0275fac=function(r){return new(r||h)(s.Y36(a.qu))},h.\u0275cmp=s.Xpm({type:h,selectors:[["app-dropdown"]],viewQuery:function(r,d){if(1&r&&s.Gf(u.ZL,7),2&r){let Z;s.iGM(Z=s.CRH())&&(d.autocompleteTrigger=Z.first)}},hostVars:1,hostBindings:function(r,d){2&r&&s.uIk("aria-describedby",d.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance",valueControlName:"valueControlName",suffixControlName:"suffixControlName",displayControlName:"displayControlName",isRequired:"isRequired"},outputs:{selectionChange:"selectionChange"},standalone:!0,features:[s._Bn([{provide:a.JU,multi:!0,useExisting:h},{provide:D.Eo,useExisting:h}],[{provide:a.gN,useExisting:a.sg}]),s.jDz],decls:12,vars:15,consts:[["appearance","outline",1,"full-width2"],["matInput","",3,"formControl","placeholder","matAutocomplete","focus","blur"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","hint-error","style","color: red; font-size:12px",4,"ngIf"],[3,"value"],[1,"hint-error",2,"color","red","font-size","12px"]],template:function(r,d){if(1&r&&(s.TgZ(0,"mat-form-field",0)(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",1),s.NdJ("focus",function(){return d.onFocus(),d.autocompleteTrigger.openPanel()})("blur",function(){return d.onTouched()}),s.qZA(),s.TgZ(4,"mat-autocomplete",2,3),s.NdJ("optionSelected",function(y){return d.onOptionSelected(y.option.value)}),s.YNc(6,p,2,2,"mat-option",4),s.ALo(7,"async"),s.YNc(8,C,2,0,"mat-option",5),s.ALo(9,"async"),s.qZA(),s.YNc(10,E,2,0,"mat-error",5),s.YNc(11,k,2,0,"mat-hint",6),s.qZA()),2&r){const Z=s.MAs(5);let y;s.ekj("mat-form-field-invalid",d.control.invalid&&d.control.touched||d.errorState),s.xp6(2),s.Oqu(d.label),s.xp6(1),s.Q6J("formControl",d.control)("placeholder",d.placeholder)("matAutocomplete",Z),s.xp6(1),s.Q6J("displayWith",d.displayOptionText),s.xp6(2),s.Q6J("ngForOf",s.lcZ(7,11,d.filteredOptions)),s.xp6(2),s.Q6J("ngIf",0===(null==(y=s.lcZ(9,13,d.filteredOptions))?null:y.length)&&d.control.value),s.xp6(2),s.Q6J("ngIf",d.control.invalid&&d.control.touched),s.xp6(1),s.Q6J("ngIf",d.errorState)}},dependencies:[v.m,t.sg,t.O5,a.Fj,a.JJ,a.oH,D.TO,D.KE,D.bx,D.hX,U.Nt,l.ey,t.Ov,a.UX,u.Bb,u.XC,u.ZL,D.lN,U.c]}),h})()},83490:(x,N,n)=>{n.d(N,{y:()=>T});var s=n(80529),a=n(75625),u=n(70262),D=n(62843),U=n(92340),w=n(94650);let T=(()=>{class _{constructor(t){this.httpClient=t,this.url=U.N.API_BASE_URL,this.httpHeader={headers:new s.WM({"Content-Type":"application/json"})}}getAccountingAttribute(t,l,p,C){return this.httpClient.get(this.url+"/accountAttributes/read",{params:{user:t,attribute:l??"",recordsPerPage:p??"",pageNo:C??""}})}AccountingAttributeCreate(t,l,p){return this.httpClient.post(this.url+"/accountAttributes/create",{user:t,attribute:l,description:p}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}AccountingAttributeUpdate(t,l,p){return this.httpClient.put(this.url+"/accountAttributes/update",{user:t,attribute:l,description:p}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}AccountingAttributeDelete(t,l){return this.httpClient.delete(this.url+`/accountAttributes/delete?user=${t}&attribute=${l}`)}httpError(t){let l="";return l=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(l),(0,D._)(()=>new Error(l))}}return _.\u0275fac=function(t){return new(t||_)(w.LFG(s.eN))},_.\u0275prov=w.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},16799:(x,N,n)=>{n.d(N,{x:()=>T});var s=n(80529),a=n(75625),u=n(70262),D=n(62843),U=n(92340),w=n(94650);let T=(()=>{class _{constructor(t){this.httpClient=t,this.url=U.N.API_BASE_URL,this.httpHeader={headers:new s.WM({"Content-Type":"application/json"})}}getTaskCodes(t,l,p,C,E,k){return this.httpClient.get(this.url+`/TaskCodes/read?user=${t}&storer=${l}&suffix=${p}&status=${C}&recordsPerPage=${E}&pageNo=${k}`)}TaskCodesCreate(t,l,p,C,E,k,b,h,g,r,d,Z,y,O){return this.httpClient.post(this.url+"/TaskCodes/create",{TSTASK:t,TSSTOR:l,TSSSFX:p,TSDESC:C,TSMINM:E,TSBASE:k,TSRATE:b,TSLEGC:h,TSLEGS:g,TSMKUP:r,TSQUOT:d,TSAUTO:Z,TSVARC:y,user:O}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}TaskCodesUpdate(t,l,p,C,E,k,b,h,g,r,d,Z,y,O){return this.httpClient.put(this.url+"/TaskCodes/update",{TSTASK:t,TSSTOR:l,TSSSFX:p,TSDESC:C,TSMINM:E,TSBASE:k,TSRATE:b,TSLEGC:h,TSLEGS:g,TSMKUP:r,TSQUOT:d,TSAUTO:Z,TSVARC:y,user:O}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}taskCodesCopyTask(t,l,p,C,E,k,b,h,g,r,d,Z,y,O,R,I){return this.httpClient.put(this.url+"/TaskCodes/copyTask",{user:t,taskCode:l,storer1:p,storerSuffix1:C,storer2:E,storerSuffix2:k,description:b,minimum:h,base:g,rate:r,ledgerCode:d,ledgerCodeSuffix:Z,markup:y,taskOnQuote:O,autoCharge:R,recalculate:I}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}TaskCodesCopySet(t,l,p,C){return this.httpClient.put(this.url+"/TaskCodes/CopySet",{storer:t,suffix:l,storerNumber:p,storerSuffix:C}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}taskCodesConstraint(t,l,p,C,E,k,b,h){return this.httpClient.post(this.url+"/TaskCodes/constraint",{documentType:t,taskCode:l,storer:p,suffix:C,constraintF:E,relationship:k,constraintV:b,status:h}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}TaskCodesActivate(t,l,p){return this.httpClient.put(this.url+"/TaskCodes/activate",{taskCode:t,storer:l,suffix:p}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}TaskCodesDeactivate(t,l,p){return this.httpClient.put(this.url+"/TaskCodes/Deactivate",{taskCode:t,storer:l,suffix:p}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}taskCodesDelete(t,l,p){return this.httpClient.delete(this.url+`/TaskCodes/delete?taskId=${t}&storer=${l}&suffix=${p}`)}getAttributesNames(){return this.httpClient.get(this.url+"/TaskCodes/getNames")}getLedgerNames(){return this.httpClient.get(this.url+"/TaskCodes/getLedgerNames")}getTaskCodesAttributes(t,l,p,C){return this.httpClient.get(this.url+`/TaskCodes/Attributes?user=${t}&key=${l}&recordsPerPage=${p}&pageNo=${C}`)}TaskCodesAttributesCreate(t,l,p,C,E,k,b,h){return this.httpClient.post(this.url+"/TaskCodes/Attributes/create",{user:t,EAFLID:l,EAKEY:p,EAATRB:C,EAVALU:E,EASTAT:k,EATMST:b,EAUSER:h}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}TaskCodesAttributesUpdate(t,l,p,C,E,k,b,h){return this.httpClient.put(this.url+"/TaskCodes/Attributes/update",{EAFLID:t,EAKEY:l,EAATRB:p,EAVALU:C,EASTAT:E,EATMST:k,EAUSER:b,user:h}).pipe((0,a.X)(1),(0,u.K)(this.httpError))}taskCodesAttributesDelete(t,l){return this.httpClient.delete(this.url+`/TaskCodes/Attributes/delete?key=${t}&attribute=${l}`)}taskCodesConstraintDelete(t,l,p,C,E,k,b,h){return this.httpClient.delete(this.url+`/TaskCodes/constraint/delete?documentType=${t}&taskCode=${l}&storer=${p}&suffix=${C}&constraintF=${E}&relationship=${k}&constraintV=${b}&status=${h}`)}httpError(t){let l="";return l=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(l),(0,D._)(()=>new Error(l))}}return _.\u0275fac=function(t){return new(t||_)(w.LFG(s.eN))},_.\u0275prov=w.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},41442:(x,N,n)=>{n.r(N),n.d(N,{WwTaskcodesAttributesComponent:()=>st});var s=n(98739),a=n(7155),u=n(24006),D=n(65412),U=n(70879),w=n(35226),T=n.n(w),_=n(48529),v=n(69501),t=n(94650),l=n(19132),p=n(83490),C=n(16799),E=n(97392),k=n(4859),b=n(59549),h=n(44144),g=n(73546);let r=(()=>{class i{constructor(e,o,c,f,A,S){this.anyvariable=e,this.dialogRef=o,this.router=c,this.accountAttributesService=f,this.fb=A,this.taskCodesService=S,this.attributeOptions=[],this.user=localStorage.getItem("userName")||"",this.keyValue="",this.suffixControl=new u.NI("")}ngOnDestroy(){this.attributeSubscription&&this.attributeSubscription.unsubscribe()}ngOnInit(){console.log(this.anyvariable);const o=(c,f)=>String(c).padStart(f,"0");console.log(o(this.anyvariable.TSSTOR,4)),this.keyValue=o(this.anyvariable.TSSTOR,4),this.form=this.fb.group({EAFLID:{value:"TS",disabled:!0},EAKEY:{value:this.anyvariable.TSTASK+o(this.anyvariable.TSSTOR,4),disabled:!0},EAATRB:["",u.kI.required],EAVALU:["",u.kI.required],EASTAT:"AC",EATMST:"",EAUSER:""}),this.fetchAttributes()}get attributeControlName(){return this.form.controls.EAATRB}fetchAttributes(){this.taskCodesService.getAttributesNames().subscribe(e=>{this.attributeOptions=e.map(o=>({value:o.A2ATRB,description:`${o.A2ATRB} - ${o.A2DESC}`}))})}taskCodesAttributesCreate(){var e=this.form.value;const c=(e.EAATRB||"").toUpperCase();this.attributeSubscription&&this.attributeSubscription.unsubscribe(),this.attributeSubscription=this.taskCodesService.TaskCodesAttributesCreate(this.user,this.form.get("EAFLID")?.value,this.form.get("EAKEY")?.value,c,e.EAVALU.toUpperCase(),e.EASTAT,e.EATMST,this.user).subscribe(f=>{const A=f[0]?.data?.length,S=A?f[0]?.data[A-1]?.value:void 0,M=S?JSON.parse(S)?.returnedData?.message:void 0;M?.toUpperCase()===_.R.createMsg.toUpperCase()?(this.successMessage(M),this.closeDialog(),this.router.navigateByUrl("/main-nav/task-codes-attributes/read",{state:this.anyvariable})):this.failureMessage(M)})}successMessage(e){T().fire(e,"","success")}failureMessage(e){T().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.WI),t.Y36(D.so),t.Y36(l.F0),t.Y36(p.y),t.Y36(u.qu),t.Y36(C.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ww-taskcodes-attributes-create"]],standalone:!0,features:[t.jDz],decls:39,vars:5,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EAFLID",2,"text-transform","uppercase"],["matInput","","formControlName","EAKEY",2,"text-transform","uppercase"],["appearance","outline","label","Attribute","placeholder","Search or Enter Attribute",3,"options","valueControlName","isRequired"],["matInput","","formControlName","EAVALU",2,"text-transform","uppercase"],["matInput","","formControlName","EASTAT",2,"text-transform","uppercase"],["matInput","","formControlName","EATMST","readonly",""],["matInput","","formControlName","EAUSER","readonly","",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Entity Attributes"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"File ID"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"key"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t._UZ(20,"app-dropdown",11),t.TgZ(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Value"),t.qZA(),t._UZ(24,"input",12),t.qZA(),t.TgZ(25,"mat-form-field",8)(26,"mat-label"),t._uU(27,"Status"),t.qZA(),t._UZ(28,"input",13),t.qZA(),t.TgZ(29,"mat-form-field",8)(30,"mat-label"),t._uU(31,"Last Changed"),t.qZA(),t._UZ(32,"input",14),t.qZA(),t.TgZ(33,"mat-form-field",8)(34,"mat-label"),t._uU(35,"Change User"),t.qZA(),t._UZ(36,"input",15),t.qZA()()(),t.TgZ(37,"button",16),t.NdJ("click",function(){return o.taskCodesAttributesCreate()}),t._uU(38,"Create"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("options",o.attributeOptions)("valueControlName",o.attributeControlName)("isRequired",!0),t.xp6(17),t.Q6J("disabled",!o.form.valid))},dependencies:[U.m,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,E.Hw,k.lW,b.KE,b.hX,h.Nt,g.a8,g.dk,g.dn,g.n5,v.J]}),i})();var d=n(36895);function Z(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",8)(2,"mat-label"),t._uU(3,"Attribute"),t.qZA(),t.TgZ(4,"input",18),t.NdJ("focus",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.toggleDropdown())}),t.qZA()()()}}function y(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"div",19)(1,"app-dropdown",20),t.NdJ("selectionChange",function(c){t.CHM(e);const f=t.oxw();return t.KtG(f.onOptionSelected(c))}),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("options",e.attributeOptions)("valueControlName",e.attributeControlName)}}let O=(()=>{class i{constructor(e,o,c,f,A,S){this.anyvariable=e,this.dialogRef=o,this.router=c,this.fb=f,this.taskCodesService=A,this.accountAttributesService=S,this.attributeOptions=[],this.user=localStorage.getItem("userName")||"",this.keyValue="",this.selectedAttribute="",this.backupAttribute="",this.showDropdown=!1,this.isOptionSelected=!1,this.isDropdownClicked=!1,this.valueChanged=!1}ngOnInit(){this.selectedAttribute=this.anyvariable[1].EAATRB,this.backupAttribute=this.selectedAttribute,this.form=this.fb.group({EAFLID:{value:this.anyvariable[1].EAFLID,disabled:!0},EAKEY:{value:this.anyvariable[1].EAKEY,disabled:!0},EAATRB:this.selectedAttribute,EAVALU:this.anyvariable[1].EAVALU,EASTAT:this.anyvariable[1].EASTAT,EATMST:{value:this.anyvariable[1].EATMST,disabled:!0},EAUSER:{value:this.anyvariable[1].EAUSER,disabled:!0}}),this.fetchAttributes(),document.addEventListener("click",this.onDocumentClick.bind(this))}toggleDropdown(){this.showDropdown=!0}onOptionSelected(e){this.valueChanged=!0,this.attributeControlName.setValue(e),this.showDropdown=!1}onDocumentClick(e){const o=e.target instanceof HTMLElement&&(e.target.closest("mat-form-field")||e.target.closest("app-dropdown")),c=e.target instanceof HTMLElement&&e.target.closest(".buttons.addButton.new-tally-form-btn");!o&&!c&&!this.valueChanged&&(this.attributeControlName.setValue(this.backupAttribute),this.showDropdown=!1),this.isDropdownClicked=!1,this.valueChanged=!1}ngOnDestroy(){this.attributeSubscription&&this.attributeSubscription.unsubscribe(),document.removeEventListener("click",this.onDocumentClick.bind(this))}get attributeControlName(){return this.form.controls.EAATRB}fetchAttributes(){this.taskCodesService.getAttributesNames().subscribe(e=>{this.attributeOptions=e.map(o=>({value:o.A2ATRB,description:`${o.A2ATRB} - ${o.A2DESC}`}))})}TaskCodesAttributesUpdate(){var e=this.form.value;const c=(e.EAATRB||"").toUpperCase();this.attributeSubscription&&this.attributeSubscription.unsubscribe(),this.attributeSubscription=this.taskCodesService.TaskCodesAttributesUpdate(this.anyvariable[1].EAFLID,this.anyvariable[1].EAKEY,c,e.EAVALU.toUpperCase(),e.EASTAT,this.anyvariable[1].EATMST,this.user,this.user).subscribe(f=>{const A=f[0]?.data?.length,S=A?f[0]?.data[A-1]?.value:void 0,M=S?JSON.parse(S)?.returnedData?.message:void 0;M?.toUpperCase()===_.R.updateMsg.toUpperCase()?(this.successMessage(M),this.closeDialog(),this.router.navigateByUrl("/main-nav/task-codes-attributes/read",{state:this.anyvariable[0]})):this.failureMessage(M)})}successMessage(e){T().fire(e,"","success")}failureMessage(e){T().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.WI),t.Y36(D.so),t.Y36(l.F0),t.Y36(u.qu),t.Y36(C.x),t.Y36(p.y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ww-taskcodes-attributes-change"]],standalone:!0,features:[t.jDz],decls:40,vars:4,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EAFLID",2,"text-transform","uppercase"],["matInput","","formControlName","EAKEY",2,"text-transform","uppercase"],[4,"ngIf"],["tabindex","0",4,"ngIf"],["matInput","","formControlName","EAVALU",2,"text-transform","uppercase"],["matInput","","formControlName","EASTAT",2,"text-transform","uppercase"],["matInput","","formControlName","EATMST"],["matInput","","formControlName","EAUSER",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"],["required","","matInput","","formControlName","EAATRB","readonly","",3,"focus"],["tabindex","0"],["label","Attribute","placeholder","Search or Enter Attribute to Change",3,"options","valueControlName","selectionChange"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Entity Attributes"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"File ID"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"key"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.YNc(20,Z,5,0,"div",11),t.YNc(21,y,2,2,"div",12),t.TgZ(22,"mat-form-field",8)(23,"mat-label"),t._uU(24,"Value"),t.qZA(),t._UZ(25,"input",13),t.qZA(),t.TgZ(26,"mat-form-field",8)(27,"mat-label"),t._uU(28,"Status"),t.qZA(),t._UZ(29,"input",14),t.qZA(),t.TgZ(30,"mat-form-field",8)(31,"mat-label"),t._uU(32,"Last Changed"),t.qZA(),t._UZ(33,"input",15),t.qZA(),t.TgZ(34,"mat-form-field",8)(35,"mat-label"),t._uU(36,"Change User"),t.qZA(),t._UZ(37,"input",16),t.qZA()()(),t.TgZ(38,"button",17),t.NdJ("click",function(){return o.TaskCodesAttributesUpdate()}),t._uU(39,"Update"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("ngIf",!o.showDropdown),t.xp6(1),t.Q6J("ngIf",o.showDropdown),t.xp6(17),t.Q6J("disabled",!o.form.valid))},dependencies:[U.m,d.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,E.Hw,k.lW,b.KE,b.hX,h.Nt,g.a8,g.dk,g.dn,g.n5,v.J]}),i})();var R=n(11790),I=n(28255),W=n(10266),L=n(90455);function B(i,m){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12)(2,"div",32)(3,"span",33),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(4,"mat-slide-toggle",34),t.NdJ("ngModelChange",function(c){const A=t.CHM(e).$implicit;return t.KtG(A.isActive=c)})("change",function(){const f=t.CHM(e).$implicit,A=t.oxw();return t.KtG(A.toggleColumn(f))}),t._uU(5),t.qZA()()()(),t.BQk()}if(2&i){const e=m.$implicit;t.xp6(4),t.Q6J("ngModel",e.isActive),t.xp6(1),t.hij(" ",e.name," ")}}function P(i,m){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Attribute"),t.qZA())}function K(i,m){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAATRB)}}function F(i,m){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Value"),t.qZA())}function Y(i,m){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAVALU)}}function J(i,m){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Last Changed"),t.qZA())}function q(i,m){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=m.$implicit;t.xp6(1),t.Oqu(e.EATMST)}}function $(i,m){1&i&&(t.TgZ(0,"th",35),t._uU(1,"User"),t.qZA())}function Q(i,m){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAUSER)}}function V(i,m){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Status"),t.qZA())}function H(i,m){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=m.$implicit;t.xp6(1),t.Oqu(e.EASTAT)}}function G(i,m){1&i&&(t.TgZ(0,"th",35),t._uU(1,"Key"),t.qZA())}function j(i,m){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAKEY)}}function z(i,m){1&i&&t._UZ(0,"th",37)}function X(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"td",36)(1,"div",38)(2,"button",39)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",40)(6,"li")(7,"button",41),t.NdJ("click",function(){const f=t.CHM(e).$implicit,A=t.oxw();return t.KtG(A.taskCodesAttributesChangeForm(f))}),t.TgZ(8,"mat-icon",42),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Change"),t.qZA()()(),t.TgZ(12,"li")(13,"button",41),t.NdJ("click",function(){const f=t.CHM(e).$implicit,A=t.oxw();return t.KtG(A.taskCodesAttributesDelete(f))}),t.TgZ(14,"mat-icon",43),t._uU(15,"delete"),t.qZA(),t.TgZ(16,"mat-label"),t._uU(17,"Delete"),t.qZA()()()()()()}}function tt(i,m){1&i&&t._UZ(0,"tr",44)}function et(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"tr",45),t.NdJ("click",function(){const f=t.CHM(e).$implicit,A=t.oxw();return t.KtG(A.rowClick(f))}),t.qZA()}}const ot=function(){return[8,16,24]};let st=(()=>{class i{constructor(e,o,c,f,A){this.matDialog=e,this.taskCodesService=o,this.CustomAlertService=c,this.router=f,this.fb=A,this.INITIAL_PAGE=1,this.searchTextDisplay=!1,this.user=localStorage.getItem("userName"),this.editedRows=[],this.keyValue="",this.dataSource=new a.by,this.duplicateSource=[],this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.displayedColumns=["Attribute","Value","LastChanged","User","Status","Actions"],this.columnShowHideList=[]}ngOnInit(){this.element=history.state;const o=(c,f)=>String(c).padStart(f,"0");console.log(o(this.element.TSSTOR,4)),this.keyValue=o(this.element.TSSTOR,4),this.form=this.fb.group({FLID:"TS",KEY:this.element.TSTASK+o(this.element.TSSTOR,4)}),this.initializeColumnProperties(),this.editedRows=[],this.getTaskCodesAttributes(this.pageSize,this.INITIAL_PAGE)}onPaginateChange(e){this.pageSize=e.pageSize,this.getTaskCodesAttributes(e.pageSize,e.pageIndex+this.INITIAL_PAGE)}ngOnDestroy(){this.taskCodesSubscription&&this.taskCodesSubscription.unsubscribe()}toggleColumn(e){if(e.isActive)this.displayedColumns.splice(e.position>this.displayedColumns.length-1?this.displayedColumns.length-1:e.position,0,e.name);else{let o=this.displayedColumns.indexOf(e.name);o>-1&&this.displayedColumns.splice(o,1)}}initializeColumnProperties(){this.displayedColumns.forEach((e,o)=>{"Actions"!=e&&this.columnShowHideList.push({position:o,name:e,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Key",isActive:!1})}rowClick(e){this.selectedRow=e}getTaskCodesAttributes(e,o){var c=this.form.value;this.taskCodesSubscription&&this.taskCodesSubscription.unsubscribe(),this.taskCodesSubscription=this.taskCodesService.getTaskCodesAttributes(this.user,c.KEY,e,o).subscribe(f=>{const A=f?.[0]?.data?.[1]?.value;if(A)try{const S=JSON.parse(A);S?.returnedData?(this.duplicateSource=S.returnedData,this.dataSource=new a.by(this.duplicateSource),this.totalRecords=S.TotalRecords||0):console.error("Returned data is undefined or null.")}catch(S){console.error("Error parsing response data:",S)}else console.error("Error fetching attributes data")})}taskCodesAttributesDelete(e){var o=this.form.value;this.CustomAlertService.openCustomAlert("Are you sure want to delete this attribute: "+e.EAATRB+" ?").afterClosed().subscribe(f=>{f&&(this.deleteTaskCodesAttributesSubscription&&this.deleteTaskCodesAttributesSubscription.unsubscribe(),this.deleteTaskCodesAttributesSubscription=this.taskCodesService.taskCodesAttributesDelete(o.KEY,e.EAATRB).subscribe(A=>{const S=A?.[0]?.data?.[A[0].data.length-1]?.value;S?.toUpperCase()===_.R.deleteShortMsg.toUpperCase()?(this.successMessage(S),this.getTaskCodesAttributes()):this.failureMessage(S)}))})}onBack(){this.router.navigate(["/main-nav/task-codes/read"])}taskCodesAttributesCreateForm(e){this.matDialog.open(r,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}taskCodesAttributesChangeForm(e){this.matDialog.open(O,{width:"1000px",maxHeight:"80vh",data:[this.element,e],autoFocus:!1})}successMessage(e){T().fire(e,"","success")}failureMessage(e){T().fire(e,"","error")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D.uw),t.Y36(C.x),t.Y36(R.y),t.Y36(l.F0),t.Y36(u.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ww-taskcodes-attributes"]],viewQuery:function(e,o){if(1&e&&t.Gf(s.NW,5),2&e){let c;t.iGM(c=t.CRH())&&(o.paginator=c.first)}},standalone:!0,features:[t.jDz],decls:57,vars:10,consts:[[1,"over-Flow"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","matTooltip","Add New Attribute",1,"addButton",3,"click"],[1,"menu-container"],["mainMenuButton","matMenu"],[1,"grid-container"],[4,"ngFor","ngForOf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","FLID",2,"text-transform","uppercase"],["matInput","","formControlName","KEY",2,"text-transform","uppercase"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Attribute"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Value"],["matColumnDef","LastChanged"],["matColumnDef","User"],["matColumnDef","Status"],["matColumnDef","Key"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],[1,"grid-item"],[3,"click"],[2,"color","blue",3,"ngModel","ngModelChange","change"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title")(3,"button",1),t.NdJ("click",function(){return o.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Work With Entity Attributes"),t.qZA(),t.TgZ(7,"div",2)(8,"button",3),t.NdJ("click",function(){return o.taskCodesAttributesCreateForm(o.element)}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()(),t.TgZ(11,"mat-menu",4,5)(13,"div",6),t.YNc(14,B,6,2,"ng-container",7),t.qZA()(),t.TgZ(15,"button",8,9)(17,"mat-icon"),t._uU(18,"visibility_off"),t.qZA()()()(),t.TgZ(19,"mat-card-content",10)(20,"form",11)(21,"div",12)(22,"div",13)(23,"mat-form-field",14)(24,"mat-label"),t._uU(25,"File ID"),t.qZA(),t._UZ(26,"input",15),t.qZA(),t.TgZ(27,"mat-form-field",14)(28,"mat-label"),t._uU(29,"Key"),t.qZA(),t._UZ(30,"input",16),t.qZA()()()()(),t.TgZ(31,"table",17),t.ynx(32,18),t.YNc(33,P,2,0,"th",19),t.YNc(34,K,2,1,"td",20),t.BQk(),t.ynx(35,21),t.YNc(36,F,2,0,"th",19),t.YNc(37,Y,2,1,"td",20),t.BQk(),t.ynx(38,22),t.YNc(39,J,2,0,"th",19),t.YNc(40,q,2,1,"td",20),t.BQk(),t.ynx(41,23),t.YNc(42,$,2,0,"th",19),t.YNc(43,Q,2,1,"td",20),t.BQk(),t.ynx(44,24),t.YNc(45,V,2,0,"th",19),t.YNc(46,H,2,1,"td",20),t.BQk(),t.ynx(47,25),t.YNc(48,G,2,0,"th",19),t.YNc(49,j,2,1,"td",20),t.BQk(),t.ynx(50,26),t.YNc(51,z,1,0,"th",27),t.YNc(52,X,18,0,"td",20),t.BQk(),t.YNc(53,tt,1,0,"tr",28),t.YNc(54,et,1,0,"tr",29),t.qZA(),t.TgZ(55,"mat-paginator",30,31),t.NdJ("page",function(f){return o.onPaginateChange(f)}),t.qZA()()),2&e){const c=t.MAs(12);t.xp6(14),t.Q6J("ngForOf",o.columnShowHideList),t.xp6(1),t.Q6J("matMenuTriggerFor",c),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(9,ot))("pageSize",o.pageSize)}},dependencies:[U.m,d.sg,u._Y,u.Fj,u.JJ,u.JL,u.On,u.sg,u.u,s.NW,E.Hw,I.VK,I.p6,k.lW,b.KE,b.hX,h.Nt,g.a8,g.dk,g.dn,g.n5,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,W.gM,L.Rr]}),i})()}}]);