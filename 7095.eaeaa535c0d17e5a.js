"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[7095],{39505:(U,h,o)=>{o.d(h,{L:()=>I});var s=o(24006),d=o(59549),v=o(69751),A=o(68675),g=o(54004),n=o(94650),t=o(36895),C=o(47957),O=o(3238),P=o(44144);function T(l,f){if(1&l&&(n.TgZ(0,"mat-option",4),n._uU(1),n.qZA()),2&l){const e=f.$implicit;n.Q6J("value",e),n.xp6(1),n.Oqu(e)}}let I=(()=>{class l{constructor(e){this.fb=e,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=i=>{},this.onChange=i=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new v.y,this.filteredOptions=this.control.valueChanges.pipe((0,A.O)(this.value),(0,g.U)(i=>this._filter(i)))}setDescribedByIds(e){}onContainerClick(e){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(e){null!=e&&(this.control.setValue(e),this.value=e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}_filter(e){if(null==e||0==e.length)return this.options;const i=e.toLowerCase(),m=this.options.filter(M=>M.toLowerCase().includes(i));return!this.disabled&&1===m.length&&this.control.value!=m[0]&&e.length>=(this.previousValue?.length??0)&&this.control.setValue(m[0]),this.onChange(this.control.value),this.previousValue=this.control.value,m}}return l.\u0275fac=function(e){return new(e||l)(n.Y36(s.qu))},l.\u0275cmp=n.Xpm({type:l,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(e,i){2&e&&n.uIk("aria-describedby",i.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[n._Bn([{provide:s.JU,multi:!0,useExisting:l},{provide:d.Eo,useExisting:l}],[{provide:s.gN,useExisting:s.sg}])],decls:8,vars:8,consts:[[3,"appearance"],["matInput","",3,"id","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){if(1&e&&(n.TgZ(0,"mat-form-field",0)(1,"mat-label"),n._uU(2),n.qZA(),n._UZ(3,"input",1),n.TgZ(4,"mat-autocomplete",null,2),n.YNc(6,T,2,2,"mat-option",3),n.ALo(7,"async"),n.qZA()()),2&e){const m=n.MAs(5);n.Q6J("appearance",i.appearance),n.xp6(2),n.Oqu(i.label),n.xp6(1),n.Q6J("id",i.id)("formControl",i.control)("matAutocomplete",m),n.xp6(3),n.Q6J("ngForOf",n.lcZ(7,6,i.filteredOptions))}},dependencies:[t.sg,s.Fj,s.JJ,s.oH,C.XC,C.ZL,O.ey,d.KE,d.hX,P.Nt,t.Ov]}),l})()},37095:(U,h,o)=>{o.r(h),o.d(h,{GenAccessInvComponent:()=>L});var s=o(24006),d=o(70879),v=o(50692),A=o(35226),g=o.n(A),n=o(48529),t=o(94650),C=o(19132),O=o(11240),P=o(36895),T=o(97392),I=o(4859),l=o(59549),f=o(44144),e=o(73546),i=o(39505);function m(u,p){1&u&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use YYYY-MM-DD or select *LASTP option. "),t.qZA())}function M(u,p){1&u&&(t.TgZ(0,"mat-error"),t._uU(1," Cut Off Date is required. "),t.qZA())}function S(u,p){1&u&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use YYYY-MM-DD or select *LASTP option. "),t.qZA())}function Z(u,p){1&u&&(t.TgZ(0,"mat-error"),t._uU(1," Posting Date is required. "),t.qZA())}let L=(()=>{class u{constructor(a,r,_){this.router=a,this.fb=r,this.StorerService=_,this.user=localStorage.getItem("userName"),this.storerread="/main-nav/storer",this.CutoffDateOptions=["*LASTP"],this.PostingDateOptions=["*LASTP","*THISP"]}ngOnInit(){this.element=history.state,this.form=this.fb.group({FromStorer:this.element.STORE,FromStorerSuffix:this.element.STSFX,ToStorer:this.element.STORE,ToStorerSuffix:this.element.STSFX,CutoffDate:[this.CutoffDateOptions[0],[s.kI.required,this.dateValidator()]],PostingDate:[this.PostingDateOptions[0],[s.kI.required,this.dateValidator()]]})}dateValidator(){return a=>/^\d{4}-\d{2}-\d{2}$/.test(a.value)?null:{invalidDate:!0}}GenerateAccessInvoice(){const a=this.form.value;a.CutoffDate=a.CutoffDate||this.CutoffDateOptions[0],a.PostingDate=a.PostingDate||this.PostingDateOptions[0],this.GenAccessInvoiceSubscription&&this.GenAccessInvoiceSubscription.unsubscribe(),this.GenAccessInvoiceSubscription=this.StorerService.GenerateAccessInvoice(a.FromStorer,a.FromStorerSuffix,a.ToStorer,a.ToStorerSuffix,a.CutoffDate,a.PostingDate).subscribe(r=>{const c=r[0].data[r[0].data.length-1].value;c===n.R.submit?(this.successMessage(c),this.router.navigateByUrl(this.storerread)):this.failureMessage(c)})}successMessage(a){g().fire(a,"","success")}failureMessage(a){g().fire(a,"","error")}onBack(){this.router.navigate(["/main-nav/storer"])}}return u.\u0275fac=function(a){return new(a||u)(t.Y36(C.F0),t.Y36(s.qu),t.Y36(O.h))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-gen-access-inv"]],standalone:!0,features:[t.jDz],decls:35,vars:7,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","FromStorer"],["matInput","","formControlName","FromStorerSuffix"],["matInput","","formControlName","ToStorer"],["matInput","","formControlName","ToStorerSuffix"],["appearance","outline","formControlName","CutoffDate","label","Cutoff Date ",3,"options"],[4,"ngIf"],["appearance","outline","formControlName","PostingDate","label","Posting Date",3,"options"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(a,r){if(1&a&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return r.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Generate Accessorial Invoices (ACCINV)"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13," From Storer "),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17," Storer Suffix "),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",7)(20,"mat-label"),t._uU(21," To Storer "),t.qZA(),t._UZ(22,"input",10),t.qZA(),t.TgZ(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"To Storer Suffix "),t.qZA(),t._UZ(26,"input",11),t.qZA(),t._UZ(27,"custom-input-autocomplete",12),t.YNc(28,m,2,0,"mat-error",13),t.YNc(29,M,2,0,"mat-error",13),t._UZ(30,"custom-input-autocomplete",14),t.YNc(31,S,2,0,"mat-error",13),t.YNc(32,Z,2,0,"mat-error",13),t.qZA()(),t.TgZ(33,"button",15),t.NdJ("click",function(){return r.GenerateAccessInvoice()}),t._uU(34," Submit "),t.qZA()()()()),2&a){let _,c,D,E;t.xp6(8),t.Q6J("formGroup",r.form),t.xp6(19),t.Q6J("options",r.CutoffDateOptions),t.xp6(1),t.Q6J("ngIf",(null==(_=r.form.get("CutoffDate"))?null:_.touched)&&(null==(_=r.form.get("CutoffDate"))?null:_.hasError("invalidDate"))),t.xp6(1),t.Q6J("ngIf",(null==(c=r.form.get("CutoffDate"))?null:c.touched)&&(null==(c=r.form.get("CutoffDate"))?null:c.hasError("required"))),t.xp6(1),t.Q6J("options",r.PostingDateOptions),t.xp6(1),t.Q6J("ngIf",(null==(D=r.form.get("PostingDate"))?null:D.touched)&&(null==(D=r.form.get("PostingDate"))?null:D.hasError("invalidDate"))),t.xp6(1),t.Q6J("ngIf",(null==(E=r.form.get("PostingDate"))?null:E.touched)&&(null==(E=r.form.get("PostingDate"))?null:E.hasError("required")))}},dependencies:[d.m,P.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,T.Hw,I.lW,l.TO,l.KE,l.hX,f.Nt,e.a8,e.dk,e.dn,e.n5,v.j,i.L]}),u})()}}]);