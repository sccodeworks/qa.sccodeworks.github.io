"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[17860,34894,26628,70096,49741],{34894:(R,U,l)=>{l.d(U,{e:()=>u});var v=l(94650),p=l(24006);let u=(()=>{class E{constructor(m,x){this.el=m,this.control=x}onInputChange(m){const x=this.el.nativeElement,_=x.value.toUpperCase();x.value=_,this.control&&this.control.control&&this.control.control.setValue(_,{emitEvent:!1})}}return E.\u0275fac=function(m){return new(m||E)(v.Y36(v.SBq),v.Y36(p.a5))},E.\u0275dir=v.lG2({type:E,selectors:[["","appUppercase",""]],hostBindings:function(m,x){1&m&&v.NdJ("input",function(Z){return x.onInputChange(Z)})},standalone:!0}),E})()},20655:(R,U,l)=>{l.d(U,{S:()=>x});var v=l(80529),p=l(75625),u=l(70262),E=l(62843),N=l(92340),m=l(94650);let x=(()=>{class _{constructor(a){this.httpClient=a,this.url=N.N.API_BASE_URL,this.httpHeader={headers:new v.WM({"Content-Type":"application/json"})}}getOrderDetails(a,r){return this.httpClient.get(this.url+`/orderDetails/read?user=${a}&billNo=${r}`)}getOrderDtlsComment(a,r,t){return this.httpClient.get(this.url+`/orderDetails/orderDtlsCmtsRead?user=${a}&billNo=${r}&sequence=${t}`)}ItemStatusService(a,r,t,n){return this.httpClient.get(this.url+`/orderDetails/items/itemStatus?user=${a}&itemStorer=${r}&suffix=${t}&item=${n}`)}orderDtlItemStatusService(a,r,t){return this.httpClient.get(this.url+`/orderDetails/itemStatus?user=${a}&bill=${r}&sequence=${t}`)}orderDtlLotStatusService(a,r,t,n,c,d){return this.httpClient.get(this.url+`/orderDetails/lotStatus?user=${a}&storer=${r}&suffix=${t}&item=${n}&billNo=${c}&seq=${d}`)}readXDocRef(a,r,t,n){return this.httpClient.get(this.url+`/orderDetails/crossDocRefRead?user=${a}&billNo=${r}&seq=${t}&tally=${n}`)}createOrderDetailService(a,r,t,n,c,d,g,C,b,y,S){return this.httpClient.post(this.url+"/orderDetails/create",{bol:a,seq:r,qty:t,item:n,lot1:c,lot2:d,lot3:g,shipFrom:C,ovrWeight:b,changeReason:y,origLine:S}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}updateOrderDetailService(a,r,t,n,c,d,g,C,b,y,S){return this.httpClient.put(this.url+"/orderDetails/update",{bol:a,seq:r,qty:t,item:n,lot1:c,lot2:d,lot3:g,shipFrom:C,ovrWeight:b,changeReason:y,origLine:S}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}deleteOrderDetailService(a,r){return this.httpClient.delete(this.url+`/orderDetails/delete?bol=${a}&seq=${r}`)}createOrderDtlCommentService(a,r,t,n,c,d,g){return this.httpClient.post(this.url+"/orderDetails/createComment",{bol:a,seq:r,commentSequence:t,comment:n,print:c,ediID:d,ediType:g}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}updateOrderDtlCommentService(a,r,t,n,c,d,g){return this.httpClient.put(this.url+"/orderDetails/updateComment",{bol:a,seq:r,commentSequence:t,comment:n,print:c,ediID:d,ediType:g}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}orderDetailsCommitService(a,r){return this.httpClient.put(this.url+"/orderDetails/commit",{bol:a,seq:r}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}orderDetailsDeCommitService(a,r){return this.httpClient.put(this.url+"/orderDetails/deCommit",{bol:a,seq:r}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}orderDetailsNonStockReasService(a,r){return this.httpClient.put(this.url+"/orderDetails/nonStockReas",{bol:a,seq:r}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}updateOrderDetailLocService(a,r,t,n,c,d){return this.httpClient.put(this.url+"/orderDetails/chnageLocOrLot",{bol:a,seq:r,location:t,lot1:n,lot2:c,lot3:d}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}changeShipFormService(a,r,t){return this.httpClient.put(this.url+"/orderDetails/changeShipFrom",{bol:a,seq:r,shipInventoryBucket:t}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}createXDocRefService(a,r,t,n){return this.httpClient.post(this.url+"/orderDetails/crossDocRefCreate",{bol:a,seq:r,tally:t,user:n}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}updateXDocRefService(a,r,t,n){return this.httpClient.put(this.url+"/orderDetails/crossDocRefUpdate",{bol:a,seq:r,tally:t,user:n}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}deleteXDocRef(a,r,t,n){return this.httpClient.delete(this.url+`/orderDetails/crossDocRefDelete?user=${a}&billNo=${r}&seq=${t}&tally=${n}`)}orderDetailCutService(a,r,t,n,c,d,g){return this.httpClient.put(this.url+"/orderDetails/cut",{bol:a,seq:r,reasonCode:t,comment1:n,print1:c,comment2:d,print2:g}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}orderDetailForceService(a,r){return this.httpClient.post(this.url+"/orderDetails/force",{bol:a,seq:r}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}orderDetailDeleteNosService(a,r){return this.httpClient.delete(this.url+`/orderDetails/deleteNos?billNo=${a}&seq=${r}`)}hardAllocateService(a,r){return this.httpClient.put(this.url+"/orderDetails/hardAllocate",{bol:a,seq:r}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}removeHardAllocateService(a,r){return this.httpClient.put(this.url+"/orderDetails/removeHardAllocate",{bol:a,seq:r}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}splitLineService(a,r,t,n,c,d,g){return this.httpClient.put(this.url+"/orderDetails/splitLine",{bol:a,seq:r,location:t,lot1:n,lot2:c,lot3:d,splitQuantity:g}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}orderDtlMoveQueueService(a,r,t,n,c){return this.httpClient.put(this.url+"/orderDetails/movequeue",{bol:a,seq:r,qty:t,priority:n,location:c}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}changeEventService(a,r,t,n,c,d,g,C,b,y,S){return this.httpClient.put(this.url+"/orderDetails/changeevent",{bol:a,seq:r,qty:t,item:n,lot1:c,lot2:d,lot3:g,shipFrom:C,ovrWeight:b,changeReason:y,origLine:S}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}changeEventCommentsService(a,r,t,n,c,d){return this.httpClient.put(this.url+"/orderDetails/changeeventcomments",{bol:a,seq:r,comment1:t,print1:n,comment2:c,print2:d}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}orderDtlStockStatus(a,r,t,n,c,d,g,C){return this.httpClient.get(this.url+`/orderDetails/stockstatus?user=${a}&storer=${r}&suffix=${t}&item=${n}&lot1=${c}&lot2=${d}&lot3=${g}&location=${C}`)}orderDtlSerialInquiry(a,r,t,n,c){return this.httpClient.get(this.url+`/orderDetails/serialInquiry?user=${a}&item=${r}&Document=${t}&lot=${n}&sequence=${c}`)}exitSetup(a){return this.httpClient.put(this.url+"/orderDetails/exitSetup",{billNumber:a}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}ucc128Read(a,r,t,n,c){return this.httpClient.get(this.url+"/orders/ucc128Read",{params:{user:a,billNumber:r??"",sequence:t??"",recordsPerPage:n??"",pageNo:c??""}})}ucc128Update(a,r,t,n,c,d,g){return this.httpClient.put(this.url+"/orders/ucc128Update",{user:a,docNumber:r,sequence:t,item:n,serial:c,nextSerial:d,quantity:g}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}extraDataCheck(a,r,t,n,c,d,g,C,b,y,S){return this.httpClient.get(this.url+"/orders/extraDataCheck",{params:{user:a,billNumber:r??"",storer:t??"",suffix:n??"",seq1:c??"",desc:d??"",header:g??"",extraFile:C??"",seq2:b??"",recordsPerPage:y??"",pageNo:S??""}})}extraDataUpdate(a,r,t,n,c,d,g,C,b,y,S){return this.httpClient.put(this.url+"/NewOrders/extraDataUpdate",{orderNumber:a,exdSequence:r,storerNumber:t,storerSuffix:n,edLevel:c,edFile:d,edSequence:g,extraDescription:C,maxLength:b,fieldType:y,fieldValue:S}).pipe((0,p.X)(1),(0,u.K)(this.httpError))}httpError(a){let r="";return r=a.error instanceof ErrorEvent?a.error.message:`Error Code: ${a.status}\nMessage: ${a.message}`,console.log(r),(0,E._)(()=>new Error(r))}}return _.\u0275fac=function(a){return new(a||_)(m.LFG(v.eN))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},17860:(R,U,l)=>{l.r(U),l.d(U,{TallysExtraDataComponent:()=>st});var v=l(15861),p=l(98739),u=l(77579),E=l(78372),N=l(71884),m=l(7155),x=l(70879),_=l(65412),Z=l(48529),a=l(35226),r=l.n(a),t=l(94650),n=l(24006),c=l(19132),d=l(20655),g=l(15627),C=l(36895),b=l(97392),y=l(4859),S=l(59549),$=l(44144),A=l(73546),M=l(34894);function K(s,h){if(1&s){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.updateExtraData())}),t._uU(1," Update "),t.qZA()}}let q=(()=>{class s{constructor(e,i,o,f,D,T){this.data=e,this.dialogRef=i,this.fb=o,this.router=f,this.orderDetailsService=D,this.tallySvc=T,this.user=localStorage.getItem("userName")}ngOnInit(){const e=[this.data[1].WDATA1,this.data[1].WDATA2].filter(i=>i&&i.trim()).join(" ");this.form=this.fb.group({documentType:{value:this.data[1].EDDOCT,disabled:!0},documentNumber:{value:this.data[1].WKDOCN,disabled:!0},sequenceNumber:{value:this.data[1].WKDSEQ,disabled:!0},maxLength:{value:this.data[1].WMAX,disabled:!0},fieldType:{value:this.data[1].WTYPE,disabled:!0},fieldValue:{value:e,disabled:!this.data.updateRequired}})}get isEditable(){return!0===this.form?.get("fieldValue")?.enabled}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateExtraData(){const e=this.form.getRawValue();this.subscription&&this.subscription.unsubscribe(),this.subscription=this.tallySvc.extraDataUpdate(this.data[1].WKDOCN,this.data[1].WKDSEQ,this.data[1].EDSTOR,this.data[1].EDSSFX,this.data[1].EDLEVL,this.data[1].EDFILE,this.data[1].EDSEQ,this.data[1].EDDESC,this.data[1].WMAX,this.data[1].WTYPE,e.fieldValue).subscribe(i=>{const o=i[0].data[i[0].data.length-1].value;o.toUpperCase()===Z.R.updateMsg.toUpperCase()?(this.successMessage(o),this.router.navigate(["/main-nav/tallys/extra-data"],{state:this.data[0]}),this.closeDialog()):this.failureMessage(o)})}successMessage(e){r().fire(e,"","success")}failureMessage(e){r().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(_.WI),t.Y36(_.so),t.Y36(n.qu),t.Y36(c.F0),t.Y36(d.S),t.Y36(g.X))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-update-tally-extra-data"]],standalone:!0,features:[t.jDz],decls:38,vars:2,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","documentType"],["matInput","","formControlName","documentNumber"],["matInput","","formControlName","sequenceNumber"],["matInput","","formControlName","maxLength"],["matInput","","formControlName","fieldType"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","fieldValue","appUppercase",""],[1,"footer"],["mat-raised-button","","class","buttons addButton new-tally-form-btn",3,"click",4,"ngIf"],["mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Update Document Extra Data"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"Document Type"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field",7)(17,"mat-label"),t._uU(18,"Document Number"),t.qZA(),t._UZ(19,"input",9),t.qZA(),t.TgZ(20,"mat-form-field",7)(21,"mat-label"),t._uU(22,"Sequence Number"),t.qZA(),t._UZ(23,"input",10),t.qZA(),t.TgZ(24,"mat-form-field",7)(25,"mat-label"),t._uU(26,"Max Length"),t.qZA(),t._UZ(27,"input",11),t.qZA(),t.TgZ(28,"mat-form-field",7)(29,"mat-label"),t._uU(30,"Field Type"),t.qZA(),t._UZ(31,"input",12),t.qZA(),t.TgZ(32,"mat-form-field",13)(33,"mat-label"),t._uU(34,"Field Value"),t.qZA(),t._UZ(35,"input",14),t.qZA()()(),t.TgZ(36,"div",15),t.YNc(37,K,2,0,"button",16),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",i.form),t.xp6(28),t.Q6J("ngIf",i.isEditable))},dependencies:[x.m,C.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,b.Hw,y.lW,S.KE,S.hX,$.Nt,A.a8,A.dk,A.dn,A.n5,M.e]}),s})();var L=l(80529);function F(s,h){1&s&&(t.TgZ(0,"th",26),t._uU(1,"Extra Data"),t.qZA())}function J(s,h){if(1&s&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&s){const e=h.$implicit;t.xp6(1),t.Oqu(e.EDDESC)}}function Y(s,h){1&s&&(t.TgZ(0,"th",26),t._uU(1,"Information"),t.qZA())}function Q(s,h){if(1&s&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&s){const e=h.$implicit;t.xp6(1),t.Oqu(e.WKVALUE)}}function X(s,h){1&s&&(t.TgZ(0,"th",28),t._uU(1,"Actions"),t.qZA())}function k(s,h){if(1&s){const e=t.EpF();t.TgZ(0,"li",49)(1,"button",50),t.NdJ("click",function(){const f=t.CHM(e).$implicit,D=t.oxw(2).$implicit,T=t.oxw();return t.KtG(T.handleRecentClick(f,D))}),t._uU(2),t.qZA()()}if(2&s){const e=h.$implicit;t.xp6(2),t.hij(" ",e.label," ")}}function P(s,h){if(1&s){const e=t.EpF();t.TgZ(0,"li",42)(1,"div",43)(2,"span",44),t._uU(3,"Recent Searches"),t.qZA(),t.TgZ(4,"button",45),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.clearRecentSearches())}),t.TgZ(5,"span",46),t._uU(6,"Clear"),t.qZA()()(),t.TgZ(7,"ul",47),t.YNc(8,k,3,1,"li",48),t.qZA()()}if(2&s){const e=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",e.filteredRecentSearches)}}function W(s,h){1&s&&(t.TgZ(0,"li",51)(1,"div",52)(2,"mat-icon",53),t._uU(3,"search"),t.qZA(),t.TgZ(4,"span",54),t._uU(5,"No results found"),t.qZA(),t.TgZ(6,"span",55),t._uU(7,"We couldn\u2019t find any items matching your search. Try adjusting your keywords."),t.qZA()()())}function H(s,h){if(1&s&&(t.ynx(0),t._UZ(1,"img",58),t.BQk()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH)}}function z(s,h){if(1&s&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.BQk()),2&s){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.icon)}}function B(s,h){if(1&s){const e=t.EpF();t.TgZ(0,"li",56)(1,"button",50),t.NdJ("click",function(){const f=t.CHM(e).$implicit,D=t.oxw().$implicit,T=t.oxw();return t.KtG(T.handleItemClick(f,D))}),t.YNc(2,H,2,2,"ng-container",57),t.YNc(3,z,3,1,"ng-container",57),t._uU(4),t.qZA()()}if(2&s){const e=h.$implicit;t.xp6(2),t.Q6J("ngIf",null==e.icon?null:e.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=e.icon&&e.icon.includes("assets"))),t.xp6(1),t.hij(" ",e.label," ")}}function G(s,h){if(1&s&&(t.ynx(0),t._UZ(1,"img",62),t.BQk()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH)}}function j(s,h){if(1&s&&(t.ynx(0),t.TgZ(1,"mat-icon",63),t._uU(2),t.qZA(),t.BQk()),2&s){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.icon)}}function V(s,h){if(1&s){const e=t.EpF();t.TgZ(0,"li",59)(1,"button",50),t.NdJ("click",function(){const f=t.CHM(e).$implicit,D=t.oxw().$implicit,T=t.oxw();return t.KtG(T.handleItemClick(f,D))}),t.TgZ(2,"div",60),t.YNc(3,G,2,2,"ng-container",57),t.YNc(4,j,3,1,"ng-container",57),t.TgZ(5,"span",61),t._uU(6),t.qZA()()()()}if(2&s){const e=h.$implicit,i=t.oxw(2);t.Q6J("hidden",i.filteredItems.includes(e)),t.xp6(3),t.Q6J("ngIf",null==e.icon?null:e.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=e.icon&&e.icon.includes("assets"))),t.xp6(2),t.Oqu(e.label)}}function tt(s,h){if(1&s){const e=t.EpF();t.TgZ(0,"td",27)(1,"div",29)(2,"button",30),t._UZ(3,"img",31),t.qZA(),t.TgZ(4,"ul",32)(5,"li",33)(6,"mat-form-field",34)(7,"input",35),t.NdJ("ngModelChange",function(o){t.CHM(e);const f=t.oxw();return t.KtG(f.searchDropdownText=o)})("input",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onSearchChange())}),t.qZA()()(),t.YNc(8,P,9,1,"li",36),t.TgZ(9,"div",37),t._UZ(10,"hr",38),t.qZA(),t.YNc(11,W,8,0,"li",39),t.YNc(12,B,5,3,"li",40),t.YNc(13,V,7,4,"li",41),t.qZA()()()}if(2&s){const e=t.oxw();t.xp6(7),t.Q6J("ngModel",e.searchDropdownText),t.xp6(1),t.Q6J("ngIf",e.filteredRecentSearches.length>0),t.xp6(3),t.Q6J("ngIf",0===e.filteredItems.length),t.xp6(1),t.Q6J("ngForOf",e.filteredItems),t.xp6(1),t.Q6J("ngForOf",e.menuItems)}}function et(s,h){1&s&&t._UZ(0,"tr",64)}function at(s,h){1&s&&t._UZ(0,"tr",65)}function rt(s,h){1&s&&(t.TgZ(0,"div",66),t._UZ(1,"img",67),t.TgZ(2,"h3",68),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",69),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}const it=function(){return[8,16,24]};let st=(()=>{class s{constructor(e,i,o,f,D){this.router=e,this.fb=i,this.iHeaderSvc=o,this.matDialog=f,this.http=D,this.user=localStorage.getItem("userName")||"",this.displayedColumns=["ExtraData","Info","Actions"],this.pageSize=8,this.totalRecords=0,this.pageNumber=1,this.searchInput$=new u.x,this.isSearchMode=!1,this.allData=[],this.filteredData=[],this.pageData=[],this.isLoading=!0,this.noData=!1,this.headerActions=[],this.menuItems=[],this.filteredItems=[],this.remainingItems=[],this.searchDropdownText="",this.recentSearches=[],this.filteredRecentSearches=[],this.dataSource=new m.by,this.noUpdate="No Update Required",this.updateSuccess="Update Required",this.tallyUrl="/main-nav/tallys/read"}ngOnInit(){this.element=history.state,this.form=this.fb.group({documentType:"943",documentNumber:this.element.IHTALY}),this.searchInput$.pipe((0,E.b)(500),(0,N.x)()).subscribe(o=>{this.handleSearch(o)}),this.http.get("assets/jsondata/tallysExtraData.json").subscribe(o=>{this.headerActions=o.header,this.menuItems=o.items,this.filteredItems=[...this.menuItems],this.remainingItems=[...this.menuItems],this.searchConfig=o.search;const f=localStorage.getItem("recentSearches");if(f){const D=JSON.parse(f);this.recentSearches=this.menuItems.filter(T=>D.includes(T.label))}this.filteredRecentSearches=[...this.recentSearches]}),this.extraData(this.pageSize,this.pageNumber)}ngOnDestroy(){this.extraDataSubscription&&this.extraDataSubscription.unsubscribe(),this.searchInput$.complete()}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.extraData(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(e,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}applyManualFilter(e){this.filteredData=this.allData.filter(i=>Object.values(i).some(o=>String(o).toLowerCase().includes(e))),this.noData=0===this.filteredData.length,this.totalRecords=this.filteredData.length,this.noData?this.dataSource.data=[]:this.loadPage(1)}loadPage(e){const i=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(i,i+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode?this.loadPage(e.pageIndex+1):this.extraData(e.pageSize,e.pageIndex+1)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}loadSearchChunks(e,i){var o=this;return(0,v.Z)(function*(){const{chunkSize:f,maxCalls:D}=o.getSearchStrategy(o.totalRecords||0);let T=1,O=0,I=[];for(;O<D;){const nt=yield o.iHeaderSvc.extraData(o.user,"943",o.element.IHTALY,0,f,T).toPromise(),w=JSON.parse(nt[0].data[1]?.value||"{}")?.returnedData||[],ot=w.filter(lt=>Object.values(lt).some(ct=>String(ct).toLowerCase().includes(e)));if(I.push(...ot),I.length>0||w.length<f)break;T++,O++}o.allData=I,o.filteredData=I,o.totalRecords=I.length,i?.()})()}extraData(e,i){this.extraDataSubscription&&this.extraDataSubscription.unsubscribe(),this.isLoading=!0,this.noData=!1,this.dataSource=new m.by([]),this.pageSize=e||this.pageSize,this.pageNumber=i||this.pageNumber,this.extraDataSubscription=this.iHeaderSvc.extraData(this.user,"943",this.element.IHTALY,0,e,i).subscribe({next:o=>{this.isLoading=!1;var f=JSON.parse(o[0].data[1]?.value),D=f?.returnedData||[];this.allData=D,this.filteredData=[...D],this.totalRecords=f?.TotalRecords||D.length,this.dataSource.data=D,this.noData=0===D.length,this.paginator&&(this.dataSource.paginator=this.paginator,this.paginator.length=this.totalRecords,this.paginator.pageIndex=(this.pageNumber||1)-1,this.paginator.pageSize=this.pageSize),this.noData?this.dataSource.data=[]:this.loadPage(this.pageNumber||1)},error:()=>this.handleExtraDataNoData()})}handleExtraDataNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new m.by([])}updateData(e){this.extraDataSubscription&&this.extraDataSubscription.unsubscribe(),this.extraDataSubscription=this.iHeaderSvc.extraDataCheck(this.user,e.WKDOCN,e.EDSTOR,e.EDSSFX,e.EDSEQ,e.EDDESC,e.EDLEVL,e.EDFILE,e.WKDSEQ,8,1).subscribe(i=>{const o=JSON.parse(i[0].data[1]?.value);this.matDialog.open(q,{panelClass:"right-dialog",autoFocus:!1,data:{...[this.element,o.returnedData[0]],updateRequired:o.ReturnMessage===this.updateSuccess}})})}onBack(){this.router.navigate([this.tallyUrl])}handleItemClick(e,i){this.executeAction(e,i),this.addToRecentSearches(e)}executeAction(e,i){"function"==typeof this[e.action]?this[e.action](i):console.warn("Action not implemented:",e.action)}handleRecentClick(e,i){this.searchDropdownText=e.label,this.onSearchChange(),"function"==typeof this[e.action]&&this[e.action](i),this.addToRecentSearches(e)}addToRecentSearches(e){this.recentSearches=this.recentSearches.filter(i=>i.label!==e.label),this.recentSearches.unshift(e),this.recentSearches.length>5&&this.recentSearches.pop(),localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches.map(i=>i.label))),this.filteredRecentSearches=[...this.recentSearches]}clearRecentSearches(){this.recentSearches=[],this.filteredRecentSearches=[],localStorage.removeItem("recentSearches")}onSearchChange(){const e=(this.searchDropdownText||"").toLowerCase();this.filteredItems=this.menuItems.filter(i=>i.label.toLowerCase().includes(e)),this.filteredRecentSearches=e?[]:[...this.recentSearches]}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.F0),t.Y36(n.qu),t.Y36(g.X),t.Y36(_.uw),t.Y36(L.eN))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-tallys-extra-data"]],viewQuery:function(e,i){if(1&e&&t.Gf(p.NW,5),2&e){let o;t.iGM(o=t.CRH())&&(i.paginator=o.first)}},standalone:!0,features:[t.jDz],decls:39,vars:9,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","readonly","","formControlName","documentType"],["matInput","","readonly","","formControlName","documentNumber"],["id","myTable","mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","ExtraData"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Info"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn","dropup"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false","data-bs-auto-close","outside","data-bs-boundary","viewport","data-bs-popper","auto","data-popper-placement","auto",1,"btn"],["src","assets/svg/dropdownicons/Action.svg","alt","Actions",1,"Actions"],[1,"dropdown-menu","p-3"],[1,"search-section"],["appearance","outline",1,"search-input"],["matInput","","placeholder","Type to search",1,"full-width-search",3,"ngModel","ngModelChange","input"],["class","recent-searches",4,"ngIf"],[1,"filtered-divider-container"],[1,"filtered-divider"],["class","no-results",4,"ngIf"],["class","mb-menu-label",4,"ngFor","ngForOf"],["class","menu-items mb-1",3,"hidden",4,"ngFor","ngForOf"],[1,"recent-searches"],[1,"d-flex","justify-content-between","align-items-center"],[1,"Recent-search-label"],["mat-icon-button","",3,"click"],[1,"clear"],[1,"list-unstyled"],["class","mb-recent-label",4,"ngFor","ngForOf"],[1,"mb-recent-label"],[1,"w-100","text-start",3,"click"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"no-results-header"],[1,"no-results-text"],[1,"mb-menu-label"],[4,"ngIf"],[3,"src","alt"],[1,"menu-items","mb-1",3,"hidden"],[1,"menu-content"],[1,"menu-label"],[1,"menu-icon",3,"src","alt"],[1,"drop-menu-icon"],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return i.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Work With Document Extra Data "),t.qZA(),t.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.TgZ(11,"input",6),t.NdJ("input",function(f){return i.applyGlobalFilterInput(f.target.value)}),t.qZA()()()(),t.TgZ(12,"mat-card-content",7)(13,"form",8)(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Document Type"),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.TgZ(20,"mat-form-field",11)(21,"mat-label"),t._uU(22,"Document Number"),t.qZA(),t._UZ(23,"input",13),t.qZA()()()()(),t.TgZ(24,"table",14),t.ynx(25,15),t.YNc(26,F,2,0,"th",16),t.YNc(27,J,2,1,"td",17),t.BQk(),t.ynx(28,18),t.YNc(29,Y,2,0,"th",16),t.YNc(30,Q,2,1,"td",17),t.BQk(),t.ynx(31,19),t.YNc(32,X,2,0,"th",20),t.YNc(33,tt,14,5,"td",17),t.BQk(),t.YNc(34,et,1,0,"tr",21),t.YNc(35,at,1,0,"tr",22),t.qZA(),t.YNc(36,rt,6,0,"div",23),t.TgZ(37,"mat-paginator",24,25),t.NdJ("page",function(f){return i.onPaginateChange(f)}),t.qZA()()),2&e&&(t.xp6(13),t.Q6J("formGroup",i.form),t.xp6(11),t.Q6J("dataSource",i.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&i.noData),t.xp6(1),t.Q6J("length",i.totalRecords)("pageSizeOptions",t.DdM(8,it))("pageSize",i.pageSize))},dependencies:[x.m,C.sg,C.O5,n._Y,n.Fj,n.JJ,n.JL,n.On,n.sg,n.u,p.NW,b.Hw,y.lW,S.KE,S.hX,S.qo,$.Nt,A.a8,A.dk,A.dn,A.n5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk]}),s})()},15861:(R,U,l)=>{function v(u,E,N,m,x,_,Z){try{var a=u[_](Z),r=a.value}catch(t){return void N(t)}a.done?E(r):Promise.resolve(r).then(m,x)}function p(u){return function(){var E=this,N=arguments;return new Promise(function(m,x){var _=u.apply(E,N);function Z(r){v(_,m,x,Z,a,"next",r)}function a(r){v(_,m,x,Z,a,"throw",r)}Z(void 0)})}}l.d(U,{Z:()=>p})}}]);