"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[60675,51860,10599,11790,38754,85645],{11790:(N,A,m)=>{m.d(A,{y:()=>v});var P=m(65412),l=m(94650),Z=m(97392),M=m(4859);let C=(()=>{class g{constructor(d,i){this.dialogRef=d,this.data=i}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return g.\u0275fac=function(d){return new(d||g)(l.Y36(P.so),l.Y36(P.WI))},g.\u0275cmp=l.Xpm({type:g,selectors:[["app-alert-dialog"]],decls:16,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["aria-label","Close dialog",1,"close-btn",3,"click"],[1,"icon-wrapper"],["src","assets/svg/icons/Delete.svg","alt","Delete",1,"delete-svg-icon"],[1,"confirm-dialog-title"],[1,"confirmation-message"],[1,"footer","confirm-dialog"],["mat-raised-button","","id","no-button",1,"buttons","cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","id","yes-button",1,"buttons","removeButton","new-tally-form-btn",3,"mat-dialog-close"]],template:function(d,i){1&d&&(l.TgZ(0,"div",0)(1,"div",1)(2,"button",2),l.NdJ("click",function(){return i.closeDialog()}),l.TgZ(3,"mat-icon"),l._uU(4,"close"),l.qZA()(),l.TgZ(5,"div",3),l._UZ(6,"img",4),l.qZA(),l.TgZ(7,"h2",5),l._uU(8,"Confirmation"),l.qZA(),l.TgZ(9,"span",6),l._uU(10),l.qZA()(),l.TgZ(11,"div",7)(12,"button",8),l._uU(13,"Cancel"),l.qZA(),l.TgZ(14,"button",9),l._uU(15,"Delete"),l.qZA()()()),2&d&&(l.xp6(10),l.Oqu(i.data.message),l.xp6(2),l.Q6J("mat-dialog-close",!1),l.xp6(2),l.Q6J("mat-dialog-close",!0))},dependencies:[Z.Hw,M.lW,P.ZT]}),g})(),v=(()=>{class g{constructor(d){this.dialog=d}openCustomAlert(d){return this.dialog.open(C,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:d}})}}return g.\u0275fac=function(d){return new(d||g)(l.LFG(P.uw))},g.\u0275prov=l.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},51860:(N,A,m)=>{m.d(A,{c:()=>g});var P=m(80529),l=m(75625),Z=m(70262),M=m(62843),C=m(92340),v=m(94650);let g=(()=>{class o{constructor(i){this.httpClient=i,this.url=C.N.API_BASE_URL,this.apply="/Payments/read/Apply?",this.httpHeader={headers:new P.WM({"Content-Type":"application/json"})}}getPayments(i,r,t,h,_,S,T,y,D,f,U,x){return this.httpClient.get(this.url+"/Payments/read?",{params:{user:i,customer:r??"",customersuffixone:t??"",customersuffixtwo:h??"",checknumber:_??"",startdate:S??"",enddate:T??"",paymentno:y??"",refno:D??"",status:f??"",recordsPerPage:U??"",pageNo:x??""}})}getPaymentInquiry(i,r,t,h){return this.httpClient.get(this.url+`/Payments/read/Inquiry?user=${i}&paymentno=${r}&recordsPerPage=${t??""}&pageNo=${h??""}`)}getPaymentDetailInquiry(i,r,t,h){return this.httpClient.get(this.url+`/Payments/read/Detail/Inquiry?user=${i}&paymentno=${r}&recordsPerPage=${t??""}&pageNo=${h??""}`)}getPaymentApply(i,r,t,h,_,S,T){return this.httpClient.get(this.url+this.apply+`?user=${i}&PaymentNumber=${r}&PHCUST=${t}&PHCSFX=${h}&PHCSF2=${_}&recordsPerPage=${S??""}&pageNo=${T??""}`)}getPaymentApplyDetail(i,r,t,h){return this.httpClient.get(this.url+`/Payments/read/Apply/Details?user=${i}&PaymentNumber=${r}&recordsPerPage=${t??""}&pageNo=${h??""}`)}createpayments(i,r,t,h,_,S,T,y,D,f,U){return this.httpClient.post(this.url+"/Payments/create",{PHTDAT:i,PHCUST:r,PHCSFX:t,PHCSF2:h,PHCHK:_,PHREF:S,PHDESC:T,PHAMT:y,PHDATE:D,PHDDAT:f,user:U}).pipe((0,l.X)(1),(0,Z.K)(this.httpError))}updatepayments(i,r,t,h,_,S,T,y,D,f,U,x,E,R){return this.httpClient.put(this.url+"/Payments/update",{PHPAY:i,PHTDAT:r,PHCUST:t,PHCSFX:h,PHCSF2:_,PHCHK:S,PHREF:T,PHDESC:y,PHAMT:D,PHDATE:f,PHDDAT:U,PHSTAT:x,PHTRNC:E,user:R}).pipe((0,l.X)(1),(0,Z.K)(this.httpError))}getPaymentComment(i,r,t,h){return this.httpClient.get(this.url+`/Payments/comments/read?user=${i}&key=${r}&recordsPerPage=${t??""}&pageNo=${h??""}`)}updateComment(i,r,t,h,_,S){return this.httpClient.put(this.url+"/Payments/comments/update",{user:i,fileID:r,key:t,sub:h,comment:_,seq:S}).pipe((0,l.X)(1),(0,Z.K)(this.httpError))}createComment(i,r,t,h,_){return this.httpClient.post(this.url+"/Payments/comments/create",{user:i,fileID:r,key:t,sub:h,comment:_}).pipe((0,l.X)(1),(0,Z.K)(this.httpError))}deleteComment(i,r,t,h,_){return this.httpClient.delete(this.url+`/Payments/comments/delete?user=${i}&fileID=${r}&key=${t}&sub=${h}&seq=${_}`)}PaymentsPrint(i,r){return this.httpClient.put(this.url+"/Payments/Print",{PaymentNumber:i,user:r}).pipe((0,l.X)(1),(0,Z.K)(this.httpError))}PaymentsRecal(i,r){return this.httpClient.put(this.url+"/Payments/Recalculate",{PaymentNumber:i,user:r}).pipe((0,l.X)(1),(0,Z.K)(this.httpError))}PaymentDelete(i,r){return this.httpClient.delete(this.url+`/Payments/delete?user=${i}&PaymentNum=${r}`)}httpError(i){let r="";return r=i.error instanceof ErrorEvent?i.error.message:`Error Code: ${i.status}\nMessage: ${i.message}`,console.log(r),(0,M._)(()=>new Error(r))}}return o.\u0275fac=function(i){return new(i||o)(v.LFG(P.eN))},o.\u0275prov=v.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},60675:(N,A,m)=>{m.r(A),m.d(A,{WwPaymentsCommentsComponent:()=>st});var P=m(15861),l=m(77579),Z=m(78372),M=m(71884),C=m(7155),v=m(98739),g=m(70879),o=m(24006),d=m(65412),i=m(35226),r=m.n(i),t=m(94650),h=m(19132),_=m(51860),S=m(97392),T=m(4859),y=m(59549),D=m(44144),f=m(73546);let U=(()=>{class a{constructor(e,n,s,c,p){this.data=e,this.dialogRef=n,this.router=s,this.fb=c,this.PaymentSvc=p,this.user=localStorage.getItem("userName")}ngOnDestroy(){this.CommentSubscription&&this.CommentSubscription.unsubscribe()}ngOnInit(){this.form=this.fb.group({CMRECD:"PH",CMKEY:this.data[1],CMSUBD:"PM",CMCOMM:["",o.kI.maxLength(60)]})}CommentCreate(){var e=this.form.value;this.CommentSubscription&&this.CommentSubscription.unsubscribe(),this.CommentSubscription=this.PaymentSvc.createComment(this.user,e.CMRECD,e.CMKEY,e.CMSUBD,e.CMCOMM).subscribe(n=>{const c=JSON.parse(n[0].data[n[0].data.length-1].value).returnedData.message;"Record Created Successfully"===c?(this.successMessage(c),this.closeDialog(),this.router.navigateByUrl("/main-nav/Payments/comments/read",{state:this.data[0]})):this.failureMessage(c)})}successMessage(e){r().fire(e,"","success")}failureMessage(e){r().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.WI),t.Y36(d.so),t.Y36(h.F0),t.Y36(o.qu),t.Y36(_.c))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-payments-create"]],standalone:!0,features:[t.jDz],decls:37,vars:2,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","CMRECD"],["readonly","","matInput","","formControlName","CMKEY"],["readonly","","matInput","","formControlName","CMSUBD"],["appearance","outline",1,"full-width","w-100"],["matInput","","required","","maxlength","60","formControlName","CMCOMM"],[1,"footer"],["mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4," Maintain System Comments"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t._uU(14," File ID "),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field",7)(17,"mat-label"),t._uU(18," Key"),t.qZA(),t._UZ(19,"input",9),t.qZA(),t.TgZ(20,"mat-form-field",7)(21,"mat-label"),t._uU(22," Sub Type"),t.qZA(),t._UZ(23,"input",10),t.qZA(),t.TgZ(24,"mat-form-field",11)(25,"mat-label"),t._uU(26,"Comment :"),t.qZA(),t.TgZ(27,"textarea",12),t._uU(28," "),t.qZA(),t.TgZ(29,"mat-hint"),t._uU(30," Only "),t.TgZ(31,"strong"),t._uU(32,"60 characters "),t.qZA(),t._uU(33," are allowed"),t.qZA()()()(),t.TgZ(34,"div",13)(35,"button",14),t.NdJ("click",function(){return n.CommentCreate()}),t._uU(36," Create "),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",n.form),t.xp6(26),t.Q6J("disabled",!(n.form.valid&&n.form.dirty)))},dependencies:[g.m,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.nD,o.sg,o.u,S.Hw,T.lW,y.KE,y.bx,y.hX,D.Nt,f.a8,f.dk,f.dn,f.n5]}),a})(),x=(()=>{class a{constructor(e,n,s,c,p){this.data=e,this.dialogRef=n,this.router=s,this.fb=c,this.PaymentSvc=p,this.user=localStorage.getItem("userName")}ngOnDestroy(){this.CommentSubscription&&this.CommentSubscription.unsubscribe()}ngOnInit(){this.form=this.fb.group({CMRECD:"PH",CMKEY:this.data[0][0].CMKEY,CMSUBD:"PM",CMCOMM:[this.data[0][0].CMCOMM,o.kI.maxLength(60)],CMSEQ:this.data[0][0].CMSEQ})}CommentUpdate(){var e=this.form.value;this.CommentSubscription&&this.CommentSubscription.unsubscribe(),this.CommentSubscription=this.PaymentSvc.updateComment(this.user,e.CMRECD,e.CMKEY,e.CMSUBD,e.CMCOMM,e.CMSEQ).subscribe(n=>{const c=JSON.parse(n[0].data[n[0].data.length-1].value).returnedData.message;"Record Updated Successfully"===c?(this.successMessage(c),this.closeDialog(),this.router.navigateByUrl("/main-nav/Payments/comments/read",{state:this.data[0][1]})):this.failureMessage(c)})}successMessage(e){r().fire(e,"","success")}failureMessage(e){r().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.WI),t.Y36(d.so),t.Y36(h.F0),t.Y36(o.qu),t.Y36(_.c))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-payments-update"]],decls:37,vars:2,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","CMRECD"],["readonly","","matInput","","formControlName","CMKEY"],["readonly","","matInput","","formControlName","CMSUBD"],["appearance","outline",1,"full-width","w-100"],["matInput","","required","","maxlength","60","formControlName","CMCOMM"],[1,"footer"],["mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4," Maintain System Comments"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t._uU(14," File ID "),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field",7)(17,"mat-label"),t._uU(18," Key"),t.qZA(),t._UZ(19,"input",9),t.qZA(),t.TgZ(20,"mat-form-field",7)(21,"mat-label"),t._uU(22," Sub Type"),t.qZA(),t._UZ(23,"input",10),t.qZA(),t.TgZ(24,"mat-form-field",11)(25,"mat-label"),t._uU(26,"Comment :"),t.qZA(),t.TgZ(27,"textarea",12),t._uU(28," "),t.qZA(),t.TgZ(29,"mat-hint"),t._uU(30," Only "),t.TgZ(31,"strong"),t._uU(32,"60 characters "),t.qZA(),t._uU(33," are allowed"),t.qZA()()()(),t.TgZ(34,"div",13)(35,"button",14),t.NdJ("click",function(){return n.CommentUpdate()}),t._uU(36," Update "),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",n.form),t.xp6(26),t.Q6J("disabled",!(n.form.valid&&n.form.dirty)))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.nD,o.sg,o.u,S.Hw,T.lW,y.KE,y.bx,y.hX,D.Nt,f.a8,f.dk,f.dn,f.n5]}),a})();var E=m(11790);let R=(()=>{class a{constructor(e,n,s,c,p,b){this.data=e,this.dialogRef=n,this.router=s,this.fb=c,this.CustomAlertService=p,this.PaymentSvc=b,this.user=localStorage.getItem("userName")}ngOnDestroy(){this.CommentSubscription&&this.CommentSubscription.unsubscribe()}ngOnInit(){this.form=this.fb.group({CMRECD:"PH",CMKEY:this.data[0][0].CMKEY,CMSUBD:"PM",CMCOMM:[this.data[0][0].CMCOMM,o.kI.maxLength(60)]}),this.form.disable()}CommentDelete(){this.CustomAlertService.openCustomAlert("Are you sure you want to delete this comment:"+this.data[0][0].CMCOMM+"?").afterClosed().subscribe(s=>{s&&(this.CommentSubscription&&this.CommentSubscription.unsubscribe(),this.CommentSubscription=this.PaymentSvc.deleteComment(this.user,this.data[0][0].CMRECD,this.data[0][0].CMKEY,this.data[0][0].CMSUBD,this.data[0][0].CMSEQ).subscribe(c=>{const b=JSON.parse(c[0].data[c[0].data.length-1].value).returnedData.message;"Record Deleted Successfully"===b?(this.successMessage(b),this.closeDialog(),this.router.navigateByUrl("/main-nav/Payments/comments/read",{state:this.data[0][1]})):this.failureMessage(b)}))})}successMessage(e){r().fire(e,"","success")}failureMessage(e){r().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.WI),t.Y36(d.so),t.Y36(h.F0),t.Y36(o.qu),t.Y36(E.y),t.Y36(_.c))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-payments-delete"]],decls:37,vars:1,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","CMRECD"],["readonly","","matInput","","formControlName","CMKEY"],["readonly","","matInput","","formControlName","CMSUBD"],["appearance","outline",1,"full-width","w-100"],["matInput","","required","","maxlength","60","formControlName","CMCOMM"],[1,"footer"],["mat-raised-button","",1,"buttons","removeButton","new-tally-form-btn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4," Maintain System Comments"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t._uU(14," File ID "),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field",7)(17,"mat-label"),t._uU(18," Key"),t.qZA(),t._UZ(19,"input",9),t.qZA(),t.TgZ(20,"mat-form-field",7)(21,"mat-label"),t._uU(22," Sub Type"),t.qZA(),t._UZ(23,"input",10),t.qZA(),t.TgZ(24,"mat-form-field",11)(25,"mat-label"),t._uU(26,"Comment :"),t.qZA(),t.TgZ(27,"textarea",12),t._uU(28," "),t.qZA(),t.TgZ(29,"mat-hint"),t._uU(30," Only "),t.TgZ(31,"strong"),t._uU(32,"60 characters "),t.qZA(),t._uU(33," are allowed"),t.qZA()()()(),t.TgZ(34,"div",13)(35,"button",14),t.NdJ("click",function(){return n.CommentDelete()}),t._uU(36," Delete "),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",n.form))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.nD,o.sg,o.u,S.Hw,T.lW,y.KE,y.bx,y.hX,D.Nt,f.a8,f.dk,f.dn,f.n5]}),a})();var k=m(80529),q=m(36895),O=m(10266);function W(a,u){1&a&&(t.TgZ(0,"th",27),t._uU(1,"Comments"),t.qZA())}function F(a,u){if(1&a&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&a){const e=u.$implicit;t.xp6(1),t.Oqu(e.CMCOMM)}}function $(a,u){1&a&&(t.TgZ(0,"th",29),t._uU(1,"Actions"),t.qZA())}function K(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"li",50)(1,"button",51),t.NdJ("click",function(){const c=t.CHM(e).$implicit,p=t.oxw(2).$implicit,b=t.oxw();return t.KtG(b.handleRecentClick(c,p))}),t._uU(2),t.qZA()()}if(2&a){const e=u.$implicit;t.xp6(2),t.hij(" ",e.label," ")}}function Q(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"li",43)(1,"div",44)(2,"span",45),t._uU(3,"Recent Searches"),t.qZA(),t.TgZ(4,"button",46),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.clearRecentSearches())}),t.TgZ(5,"span",47),t._uU(6,"Clear"),t.qZA()()(),t.TgZ(7,"ul",48),t.YNc(8,K,3,1,"li",49),t.qZA()()}if(2&a){const e=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",e.filteredRecentSearches)}}function B(a,u){1&a&&(t.TgZ(0,"li",52)(1,"div",53)(2,"mat-icon",54),t._uU(3,"search"),t.qZA(),t.TgZ(4,"span",55),t._uU(5,"No results found"),t.qZA(),t.TgZ(6,"span",56),t._uU(7,"We couldn\u2019t find any items matching your search. Try adjusting your keywords."),t.qZA()()())}function L(a,u){if(1&a&&(t.ynx(0),t._UZ(1,"img",59),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH)}}function H(a,u){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.icon)}}function z(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"li",57)(1,"button",51),t.NdJ("click",function(){const c=t.CHM(e).$implicit,p=t.oxw().$implicit,b=t.oxw();return t.KtG(b.handleItemClick(c,p))}),t.YNc(2,L,2,2,"ng-container",58),t.YNc(3,H,3,1,"ng-container",58),t._uU(4),t.qZA()()}if(2&a){const e=u.$implicit;t.xp6(2),t.Q6J("ngIf",null==e.icon?null:e.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=e.icon&&e.icon.includes("assets"))),t.xp6(1),t.hij(" ",e.label," ")}}function G(a,u){if(1&a&&(t.ynx(0),t._UZ(1,"img",63),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH)}}function j(a,u){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-icon",64),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.icon)}}function X(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"li",60)(1,"button",51),t.NdJ("click",function(){const c=t.CHM(e).$implicit,p=t.oxw().$implicit,b=t.oxw();return t.KtG(b.handleItemClick(c,p))}),t.TgZ(2,"div",61),t.YNc(3,G,2,2,"ng-container",58),t.YNc(4,j,3,1,"ng-container",58),t.TgZ(5,"span",62),t._uU(6),t.qZA()()()()}if(2&a){const e=u.$implicit,n=t.oxw(2);t.Q6J("hidden",n.filteredItems.includes(e)),t.xp6(3),t.Q6J("ngIf",null==e.icon?null:e.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=e.icon&&e.icon.includes("assets"))),t.xp6(2),t.Oqu(e.label)}}function V(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"td",28)(1,"div",30)(2,"button",31),t._UZ(3,"img",32),t.qZA(),t.TgZ(4,"ul",33)(5,"li",34)(6,"mat-form-field",35)(7,"input",36),t.NdJ("ngModelChange",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.searchDropdownText=s)})("input",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onSearchChange())}),t.qZA()()(),t.YNc(8,Q,9,1,"li",37),t.TgZ(9,"div",38),t._UZ(10,"hr",39),t.qZA(),t.YNc(11,B,8,0,"li",40),t.YNc(12,z,5,3,"li",41),t.YNc(13,X,7,4,"li",42),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(7),t.Q6J("ngModel",e.searchDropdownText)("placeholder",(null==e.searchConfig?null:e.searchConfig.placeholder)||"Type to search"),t.xp6(1),t.Q6J("ngIf",e.filteredRecentSearches.length>0),t.xp6(3),t.Q6J("ngIf",0===e.filteredItems.length),t.xp6(1),t.Q6J("ngForOf",e.filteredItems),t.xp6(1),t.Q6J("ngForOf",e.menuItems)}}function tt(a,u){1&a&&t._UZ(0,"tr",65)}function et(a,u){if(1&a){const e=t.EpF();t.TgZ(0,"tr",66),t.NdJ("click",function(){const c=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.rowClick(c))}),t.qZA()}}function nt(a,u){1&a&&(t.TgZ(0,"div",67),t._UZ(1,"img",68),t.TgZ(2,"h3",69),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",70),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}const at=function(){return[8,16,24]};let st=(()=>{class a{constructor(e,n,s,c,p){this.router=e,this.fb=n,this.PaymentSvc=s,this.matDialog=c,this.http=p,this.user=localStorage.getItem("userName"),this.dataSource=new C.by,this.duplicateSource=[],this.searchInput$=new l.x,this.isSearchMode=!1,this.allData=[],this.filteredData=[],this.pageData=[],this.pageSize=8,this.totalRecords=0,this.pageNumber=1,this.isLoading=!0,this.noData=!1,this.headerActions=[],this.menuItems=[],this.filteredItems=[],this.remainingItems=[],this.searchDropdownText="",this.recentSearches=[],this.filteredRecentSearches=[],this.keyValue="",this.displayedColumns=["Comments","Actions"]}ngOnDestroy(){this.getPaymentsSubscription&&this.getPaymentsSubscription.unsubscribe()}ngOnInit(){this.element=history.state;const e=(n,s)=>String(n).padStart(s,"0");this.keyValue=e(this.element.WKPAY,7),this.form=this.fb.group({CMRECD:"PH",CMKEY:e(this.element.WKPAY,7),CMSUBD:"PM",commData:""}),this.Comments(),this.searchInput$.pipe((0,Z.b)(500),(0,M.x)()).subscribe(n=>{this.handleSearch(n)}),this.http.get("assets/jsondata/wwPaymentsComments.json").subscribe(n=>{this.headerActions=n.header||[],this.menuItems=n.items||[],this.filteredItems=[...this.menuItems],this.remainingItems=[...this.menuItems],this.searchConfig=n.search;const s=localStorage.getItem("recentSearches");if(s){const c=JSON.parse(s);this.recentSearches=this.menuItems.filter(p=>c.includes(p.label))}this.filteredRecentSearches=[...this.recentSearches]})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}rowClick(e){this.selectedRow=e}Comments(){this.getPaymentComments(this.pageSize,this.pageNumber)}getPaymentComments(e,n){const s=this.form.value;this.isLoading=!0,this.noData=!1,this.dataSource=new C.by([]),this.getPaymentsSubscription&&this.getPaymentsSubscription.unsubscribe(),this.getPaymentsSubscription=this.PaymentSvc.getPaymentComment(this.user,s.CMKEY,e,n).subscribe({next:c=>{this.isLoading=!1;const p=c?.[0]?.data?.[1]?.value||"{}";let b={};try{b=JSON.parse(p)}catch{b={}}const w=b?.returnedData||[];this.duplicateSource=w,this.allData=w,this.filteredData=w,this.totalRecords=b?.Totalrecords||w.length,this.noData=0===w.length,this.dataSource.data=w,this.paginator&&(this.paginator.length=this.totalRecords)},error:()=>this.handleNoData()})}handleNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new C.by([])}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.getPaymentComments(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(e,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}applyManualFilter(e){this.filteredData=this.allData.filter(n=>Object.values(n).some(s=>String(s).toLowerCase().includes(e))),this.noData=0===this.filteredData.length,this.totalRecords=this.filteredData.length,this.noData?this.dataSource.data=[]:this.loadPage(1)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}loadSearchChunks(e,n){var s=this;return(0,P.Z)(function*(){const c=s.form.value,{chunkSize:p,maxCalls:b}=s.getSearchStrategy(s.totalRecords||0);let w=1,J=0,I=[];for(;J<b;){const ot=(yield s.PaymentSvc.getPaymentComment(s.user,c.CMKEY,p,w).toPromise())?.[0]?.data?.[1]?.value||"{}",Y=JSON.parse(ot)?.returnedData||[],it=Y.filter(rt=>Object.values(rt).some(lt=>String(lt).toLowerCase().includes(e)));if(I.push(...it),I.length>0||Y.length<p)break;w++,J++}s.allData=I,s.filteredData=I,s.totalRecords=I.length,n?.()})()}loadPage(e){const n=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(n,n+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode?this.loadPage(e.pageIndex+1):this.getPaymentComments(e.pageSize,e.pageIndex+1)}handleItemClick(e,n){this.executeAction(e,n),this.addToRecentSearches(e)}executeAction(e,n){"function"==typeof this[e.action]?this[e.action](n):console.warn("Action not implemented:",e.action)}handleRecentClick(e,n){this.searchDropdownText=e.label,this.onSearchChange(),"function"==typeof this[e.action]&&this[e.action](n),this.addToRecentSearches(e)}addToRecentSearches(e){this.recentSearches=this.recentSearches.filter(n=>n.label!==e.label),this.recentSearches.unshift(e),this.recentSearches.length>5&&this.recentSearches.pop(),localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches.map(n=>n.label))),this.filteredRecentSearches=[...this.recentSearches]}clearRecentSearches(){this.recentSearches=[],this.filteredRecentSearches=[],localStorage.removeItem("recentSearches")}onSearchChange(){const e=(this.searchDropdownText||"").toLowerCase();this.filteredItems=this.menuItems.filter(n=>n.label.toLowerCase().includes(e)),this.filteredRecentSearches=e?[]:[...this.recentSearches]}createComment(){this.matDialog.open(U,{panelClass:"right-dialog",data:[this.element,this.keyValue],autoFocus:!1})}updateComment(e){this.matDialog.open(x,{panelClass:"right-dialog",data:[[e??this.selectedRow,history.state]],autoFocus:!1})}deleteComment(e){this.matDialog.open(R,{panelClass:"right-dialog",data:[[this.selectedRow,history.state]],autoFocus:!1})}onBack(){this.router.navigate(["/main-nav/Payments/read"])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.F0),t.Y36(o.qu),t.Y36(_.c),t.Y36(d.uw),t.Y36(k.eN))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ww-payments-comments"]],viewQuery:function(e,n){if(1&e&&t.Gf(v.NW,5),2&e){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},standalone:!0,features:[t.jDz],decls:45,vars:9,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],["mat-button","","matTooltip","Add New Comments",1,"addButton",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","CMRECD"],["readonly","","matInput","","formControlName","CMKEY"],["readonly","","matInput","","formControlName","CMSUBD"],["id","myTable","mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Comments"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn","dropup"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false","data-bs-auto-close","outside","data-bs-boundary","viewport","data-bs-popper","auto","data-popper-placement","auto",1,"btn"],["src","assets/svg/dropdownicons/Action.svg","alt","Actions",1,"Actions"],[1,"dropdown-menu","p-3"],[1,"search-section"],["appearance","outline",1,"search-input"],["matInput","",1,"full-width-search",3,"ngModel","placeholder","ngModelChange","input"],["class","recent-searches",4,"ngIf"],[1,"filtered-divider-container"],[1,"filtered-divider"],["class","no-results",4,"ngIf"],["class","mb-menu-label",4,"ngFor","ngForOf"],["class","menu-items mb-1",3,"hidden",4,"ngFor","ngForOf"],[1,"recent-searches"],[1,"d-flex","justify-content-between","align-items-center"],[1,"Recent-search-label"],["mat-icon-button","",3,"click"],[1,"clear"],[1,"list-unstyled"],["class","mb-recent-label",4,"ngFor","ngForOf"],[1,"mb-recent-label"],[1,"w-100","text-start",3,"click"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"no-results-header"],[1,"no-results-text"],[1,"mb-menu-label"],[4,"ngIf"],[3,"src","alt"],[1,"menu-items","mb-1",3,"hidden"],[1,"menu-content"],[1,"menu-label"],[1,"menu-icon",3,"src","alt"],[1,"drop-menu-icon"],["mat-header-row",""],["mat-row","",3,"click"],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return n.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Maintain System Comments"),t.qZA(),t.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.TgZ(11,"input",6),t.NdJ("input",function(c){return n.applyGlobalFilterInput(c.target.value)}),t.qZA()(),t.TgZ(12,"button",7),t.NdJ("click",function(){return n.createComment()}),t.TgZ(13,"mat-icon"),t._uU(14,"add"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Create Comments"),t.qZA()()()(),t.TgZ(17,"mat-card-content",8)(18,"form",9)(19,"div",10)(20,"div",11)(21,"mat-form-field",12)(22,"mat-label"),t._uU(23,"File ID"),t.qZA(),t._UZ(24,"input",13),t.qZA(),t.TgZ(25,"mat-form-field",12)(26,"mat-label"),t._uU(27,"Key"),t.qZA(),t._UZ(28,"input",14),t.qZA(),t.TgZ(29,"mat-form-field",12)(30,"mat-label"),t._uU(31,"Sub"),t.qZA(),t._UZ(32,"input",15),t.qZA()()()()(),t.TgZ(33,"table",16),t.ynx(34,17),t.YNc(35,W,2,0,"th",18),t.YNc(36,F,2,1,"td",19),t.BQk(),t.ynx(37,20),t.YNc(38,$,2,0,"th",21),t.YNc(39,V,14,6,"td",19),t.BQk(),t.YNc(40,tt,1,0,"tr",22),t.YNc(41,et,1,0,"tr",23),t.qZA(),t.YNc(42,nt,6,0,"div",24),t.TgZ(43,"mat-paginator",25,26),t.NdJ("page",function(c){return n.onPaginateChange(c)}),t.qZA()()),2&e&&(t.xp6(18),t.Q6J("formGroup",n.form),t.xp6(15),t.Q6J("dataSource",n.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n.noData),t.xp6(1),t.Q6J("length",n.totalRecords)("pageSizeOptions",t.DdM(8,at))("pageSize",n.pageSize))},dependencies:[g.m,q.sg,q.O5,o._Y,o.Fj,o.JJ,o.JL,o.On,o.sg,o.u,v.NW,S.Hw,T.lW,y.KE,y.hX,y.qo,D.Nt,f.a8,f.dk,f.dn,f.n5,C.BZ,C.fO,C.as,C.w1,C.Dz,C.nj,C.ge,C.ev,C.XQ,C.Gk,O.gM]}),a})()},15861:(N,A,m)=>{function P(Z,M,C,v,g,o,d){try{var i=Z[o](d),r=i.value}catch(t){return void C(t)}i.done?M(r):Promise.resolve(r).then(v,g)}function l(Z){return function(){var M=this,C=arguments;return new Promise(function(v,g){var o=Z.apply(M,C);function d(r){P(o,v,g,d,i,"next",r)}function i(r){P(o,v,g,d,i,"throw",r)}d(void 0)})}}m.d(A,{Z:()=>l})}}]);