"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[72874,11790,38754,85645],{11790:(J,U,l)=>{l.d(U,{y:()=>n});var T=l(65412),o=l(94650),E=l(97392),v=l(4859);let i=(()=>{class t{constructor(u,_){this.dialogRef=u,this.data=_}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return t.\u0275fac=function(u){return new(u||t)(o.Y36(T.so),o.Y36(T.WI))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-alert-dialog"]],decls:16,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["aria-label","Close dialog",1,"close-btn",3,"click"],[1,"icon-wrapper"],["src","assets/svg/icons/Delete.svg","alt","Delete",1,"delete-svg-icon"],[1,"confirm-dialog-title"],[1,"confirmation-message"],[1,"footer","confirm-dialog"],["mat-raised-button","","id","no-button",1,"buttons","cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","id","yes-button",1,"buttons","removeButton","new-tally-form-btn",3,"mat-dialog-close"]],template:function(u,_){1&u&&(o.TgZ(0,"div",0)(1,"div",1)(2,"button",2),o.NdJ("click",function(){return _.closeDialog()}),o.TgZ(3,"mat-icon"),o._uU(4,"close"),o.qZA()(),o.TgZ(5,"div",3),o._UZ(6,"img",4),o.qZA(),o.TgZ(7,"h2",5),o._uU(8,"Confirmation"),o.qZA(),o.TgZ(9,"span",6),o._uU(10),o.qZA()(),o.TgZ(11,"div",7)(12,"button",8),o._uU(13,"Cancel"),o.qZA(),o.TgZ(14,"button",9),o._uU(15,"Delete"),o.qZA()()()),2&u&&(o.xp6(10),o.Oqu(_.data.message),o.xp6(2),o.Q6J("mat-dialog-close",!1),o.xp6(2),o.Q6J("mat-dialog-close",!0))},dependencies:[E.Hw,v.lW,T.ZT]}),t})(),n=(()=>{class t{constructor(u){this.dialog=u}openCustomAlert(u){return this.dialog.open(i,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:u}})}}return t.\u0275fac=function(u){return new(u||t)(o.LFG(T.uw))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},72729:(J,U,l)=>{l.d(U,{n:()=>H});var T=l(65412),o=l(7155),E=l(35226),v=l.n(E),i=l(94619),n=l(70879),t=l(94650),e=l(19132),u=l(15627),_=l(24006),p=l(80529),S=l(36895),O=l(98739),x=l(97392),b=l(4859),P=l(59549),d=l(44144),C=l(73546);const g=["paginator"];function D(s,h){1&s&&(t.TgZ(0,"th",24),t._uU(1,"Comments"),t.qZA())}function A(s,h){if(1&s&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&s){const a=h.$implicit;t.xp6(1),t.Oqu(a.CISMNT)}}function M(s,h){1&s&&(t.TgZ(0,"th",26),t._uU(1,"Actions"),t.qZA())}function I(s,h){if(1&s){const a=t.EpF();t.TgZ(0,"li",47)(1,"button",48),t.NdJ("click",function(){const f=t.CHM(a).$implicit,W=t.oxw(2).$implicit,B=t.oxw();return t.KtG(B.handleRecentClick(f,W))}),t._uU(2),t.qZA()()}if(2&s){const a=h.$implicit;t.xp6(2),t.hij(" ",a.label," ")}}function L(s,h){if(1&s){const a=t.EpF();t.TgZ(0,"li",40)(1,"div",41)(2,"span",42),t._uU(3,"Recent Searches"),t.qZA(),t.TgZ(4,"button",43),t.NdJ("click",function(){t.CHM(a);const m=t.oxw(2);return t.KtG(m.clearRecentSearches())}),t.TgZ(5,"span",44),t._uU(6,"Clear"),t.qZA()()(),t.TgZ(7,"ul",45),t.YNc(8,I,3,1,"li",46),t.qZA()()}if(2&s){const a=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",a.filteredRecentSearches)}}function c(s,h){1&s&&(t.TgZ(0,"li",49)(1,"div",50)(2,"mat-icon",51),t._uU(3,"search"),t.qZA(),t.TgZ(4,"span",52),t._uU(5,"No results found"),t.qZA(),t.TgZ(6,"span",53),t._uU(7,"We couldn\u2019t find any items matching your search. Try adjusting your keywords."),t.qZA()()())}function y(s,h){if(1&s&&(t.ynx(0),t._UZ(1,"img",56),t.BQk()),2&s){const a=t.oxw().$implicit;t.xp6(1),t.s9C("alt",a.label),t.Q6J("src",a.icon,t.LSH)}}function Z(s,h){if(1&s&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.BQk()),2&s){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.icon)}}function R(s,h){if(1&s){const a=t.EpF();t.TgZ(0,"li",54)(1,"button",48),t.NdJ("click",function(){const f=t.CHM(a).$implicit,W=t.oxw().$implicit,B=t.oxw();return t.KtG(B.handleItemClick(f,W))}),t.YNc(2,y,2,2,"ng-container",55),t.YNc(3,Z,3,1,"ng-container",55),t._uU(4),t.qZA()()}if(2&s){const a=h.$implicit;t.xp6(2),t.Q6J("ngIf",null==a.icon?null:a.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=a.icon&&a.icon.includes("assets"))),t.xp6(1),t.hij(" ",a.label," ")}}function N(s,h){if(1&s&&(t.ynx(0),t._UZ(1,"img",60),t.BQk()),2&s){const a=t.oxw().$implicit;t.xp6(1),t.s9C("alt",a.label),t.Q6J("src",a.icon,t.LSH)}}function K(s,h){if(1&s&&(t.ynx(0),t.TgZ(1,"mat-icon",61),t._uU(2),t.qZA(),t.BQk()),2&s){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.icon)}}function q(s,h){if(1&s){const a=t.EpF();t.TgZ(0,"li",57)(1,"button",48),t.NdJ("click",function(){const f=t.CHM(a).$implicit,W=t.oxw().$implicit,B=t.oxw();return t.KtG(B.handleItemClick(f,W))}),t.TgZ(2,"div",58),t.YNc(3,N,2,2,"ng-container",55),t.YNc(4,K,3,1,"ng-container",55),t.TgZ(5,"span",59),t._uU(6),t.qZA()()()()}if(2&s){const a=h.$implicit,r=t.oxw(2);t.Q6J("hidden",r.filteredItems.includes(a)),t.xp6(3),t.Q6J("ngIf",null==a.icon?null:a.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=a.icon&&a.icon.includes("assets"))),t.xp6(2),t.Oqu(a.label)}}function Y(s,h){if(1&s){const a=t.EpF();t.TgZ(0,"td",25)(1,"div",27)(2,"button",28),t._UZ(3,"img",29),t.qZA(),t.TgZ(4,"ul",30)(5,"li",31)(6,"mat-form-field",32)(7,"input",33),t.NdJ("ngModelChange",function(m){t.CHM(a);const f=t.oxw();return t.KtG(f.searchDropdownText=m)})("input",function(){t.CHM(a);const m=t.oxw();return t.KtG(m.onSearchChange())}),t.qZA()()(),t.YNc(8,L,9,1,"li",34),t.TgZ(9,"div",35),t._UZ(10,"hr",36),t.qZA(),t.YNc(11,c,8,0,"li",37),t.YNc(12,R,5,3,"li",38),t.YNc(13,q,7,4,"li",39),t.qZA()()()}if(2&s){const a=t.oxw();t.xp6(7),t.Q6J("ngModel",a.searchDropdownText),t.xp6(1),t.Q6J("ngIf",a.filteredRecentSearches.length>0),t.xp6(3),t.Q6J("ngIf",0===a.filteredItems.length),t.xp6(1),t.Q6J("ngForOf",a.filteredItems),t.xp6(1),t.Q6J("ngForOf",a.menuItems)}}function F(s,h){1&s&&t._UZ(0,"tr",62)}function w(s,h){1&s&&t._UZ(0,"tr",63)}const Q=function(){return[8,16,24]};let H=(()=>{class s{constructor(a,r,m,f,W,B,G,$){this.activeRouter=a,this.iHeaderSvc=r,this.fb=m,this.matDialog=f,this.router=W,this.anyvariable=B,this.dialogRef=G,this.http=$,this.user=localStorage.getItem("userName"),this.totalRecords=0,this.headerActions=[],this.menuItems=[],this.filteredItems=[],this.remainingItems=[],this.searchDropdownText="",this.recentSearches=[],this.filteredRecentSearches=[],this.displayedColumns=["Comments","Actions"],this.form=this.fb.group({tally:this.anyvariable.IDTALY,seq:this.anyvariable.IDSEQ,comments:"",status:"",sub:"WR",sId:"WEB"})}ngOnInit(){this.getComment(),this.http.get("assets/jsondata/tallyDetailComments.json").subscribe(a=>{this.headerActions=a.header,this.menuItems=a.items,this.filteredItems=[...this.menuItems],this.remainingItems=[...this.menuItems],this.searchConfig=a.search;const r=localStorage.getItem("recentSearches");if(r){const m=JSON.parse(r);this.recentSearches=this.menuItems.filter(f=>m.includes(f.label))}this.filteredRecentSearches=[...this.recentSearches]})}ngOnDestroy(){this.getTallyCommentSubscription&&this.getTallyCommentSubscription.unsubscribe(),this.createTallyCommentServiceSubscription&&this.createTallyCommentServiceSubscription.unsubscribe(),this.deleteTallyCommentServiceSubscription&&this.deleteTallyCommentServiceSubscription.unsubscribe()}getComment(){var a=this.form.value;console.log(a),this.getTallyCommentSubscription=this.iHeaderSvc.getTallyComment(this.user,a.status,a.tally,a.seq,a.sub).subscribe(r=>{var m=JSON.parse(r.data[1]?.value);const f=m?.returnedData||[];this.totalRecords=m?.TotalRecords||m?.Totalrecords||m?.totalRecords||m?.totalrecords||f.length,this.dataSource=new o.by(f),this.dataSource.paginator=this.paginator,this.paginator&&(this.paginator.length=this.totalRecords)})}createTallyDetailComment(){var a=this.form.value;this.createTallyCommentServiceSubscription&&this.createTallyCommentServiceSubscription.unsubscribe(),this.createTallyCommentServiceSubscription=this.iHeaderSvc.createTallyCommentService(this.user,a.status,a.tally,a.seq,a.sub,a.comments,a.sId).subscribe(r=>{var m=JSON.parse(r[0].data[1].value);m.success?(this.successMessage(m.returnedData.message),this.closeDialog()):this.failureMessage(m.returnedData.message)})}updateTallyComment(a){this.matDialog.open(i._,{panelClass:"right-dialog",data:a,autoFocus:!1})}deleteTallyComment(){var a=this.form.value;this.deleteTallyCommentServiceSubscription&&this.deleteTallyCommentServiceSubscription.unsubscribe(),this.deleteTallyCommentServiceSubscription=this.iHeaderSvc.deleteTallyCommentService(this.user,a.status,a.tally,a.seq,a.sub).subscribe(r=>{var m=JSON.parse(r[0].data[1].value);m.Success?(this.successMessage(m.returnedData.message),this.closeDialog()):this.failureMessage(m.returnedData.message)})}successMessage(a){v().fire(a,"","success")}failureMessage(a){v().fire(a,"","error")}closeDialog(){this.dialogRef.close()}handleItemClick(a,r){this.executeAction(a,r),this.addToRecentSearches(a)}executeAction(a,r){"function"==typeof this[a.action]?this[a.action](r):console.warn("Action not implemented:",a.action)}handleRecentClick(a,r){this.searchDropdownText=a.label,this.onSearchChange(),"function"==typeof this[a.action]&&this[a.action](r),this.addToRecentSearches(a)}addToRecentSearches(a){this.recentSearches=this.recentSearches.filter(r=>r.label!==a.label),this.recentSearches.unshift(a),this.recentSearches.length>5&&this.recentSearches.pop(),localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches.map(r=>r.label))),this.filteredRecentSearches=[...this.recentSearches]}clearRecentSearches(){this.recentSearches=[],this.filteredRecentSearches=[],localStorage.removeItem("recentSearches")}onSearchChange(){const a=(this.searchDropdownText||"").toLowerCase();this.filteredItems=this.menuItems.filter(r=>r.label.toLowerCase().includes(a)),this.filteredRecentSearches=a?[]:[...this.recentSearches]}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(e.gz),t.Y36(u.X),t.Y36(_.qu),t.Y36(T.uw),t.Y36(e.F0),t.Y36(T.WI),t.Y36(T.so),t.Y36(p.eN))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-tally-detail-comments"]],viewQuery:function(a,r){if(1&a&&t.Gf(g,5),2&a){let m;t.iGM(m=t.CRH())&&(r.paginator=m.first)}},standalone:!0,features:[t.jDz],decls:38,vars:7,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","tally","required",""],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","comments"],[1,"footer"],["mat-raised-button","",1,"buttons","removeButton","new-tally-form-btn",3,"click"],["mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"],["id","myTable","mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Comments"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn","dropup"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false","data-bs-toggle","dropdown","aria-expanded","false","data-bs-auto-close","outside","data-bs-boundary","viewport","data-bs-popper","auto","data-popper-placement","auto",1,"btn"],["src","assets/svg/dropdownicons/Action.svg","alt","Actions",1,"Actions"],[1,"dropdown-menu","p-3"],[1,"search-section"],["appearance","outline",1,"search-input"],["matInput","","placeholder","Type to search",1,"full-width-search",3,"ngModel","ngModelChange","input"],["class","recent-searches",4,"ngIf"],[1,"filtered-divider-container"],[1,"filtered-divider"],["class","no-results",4,"ngIf"],["class","mb-menu-label",4,"ngFor","ngForOf"],["class","menu-items mb-1",3,"hidden",4,"ngFor","ngForOf"],[1,"recent-searches"],[1,"d-flex","justify-content-between","align-items-center"],[1,"Recent-search-label"],["mat-icon-button","",3,"click"],[1,"clear"],[1,"list-unstyled"],["class","mb-recent-label",4,"ngFor","ngForOf"],[1,"mb-recent-label"],[1,"w-100","text-start",3,"click"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"no-results-header"],[1,"no-results-text"],[1,"mb-menu-label"],[4,"ngIf"],[3,"src","alt"],[1,"menu-items","mb-1",3,"hidden"],[1,"menu-content"],[1,"menu-label"],[1,"menu-icon",3,"src","alt"],[1,"drop-menu-icon"],["mat-header-row",""],["mat-row",""]],template:function(a,r){1&a&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Inbound Detail Comments"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return r.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"Tally"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field",9)(17,"mat-label"),t._uU(18,"Comments"),t.qZA(),t.TgZ(19,"textarea",10),t._uU(20," Comments"),t.qZA(),t._UZ(21,"input",10),t.qZA(),t.TgZ(22,"div",11)(23,"button",12),t.NdJ("click",function(){return r.deleteTallyComment()}),t._uU(24," Delete All Comments "),t.qZA(),t.TgZ(25,"button",13),t.NdJ("click",function(){return r.createTallyDetailComment()}),t._uU(26," Create "),t.qZA()()()()()(),t.TgZ(27,"table",14),t.ynx(28,15),t.YNc(29,D,2,0,"th",16),t.YNc(30,A,2,1,"td",17),t.BQk(),t.ynx(31,18),t.YNc(32,M,2,0,"th",19),t.YNc(33,Y,14,5,"td",17),t.BQk(),t.YNc(34,F,1,0,"tr",20),t.YNc(35,w,1,0,"tr",21),t.qZA(),t._UZ(36,"mat-paginator",22,23),t.qZA()),2&a&&(t.xp6(9),t.Q6J("formGroup",r.form),t.xp6(18),t.Q6J("dataSource",r.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("length",r.totalRecords)("pageSizeOptions",t.DdM(6,Q)))},dependencies:[n.m,S.sg,S.O5,_._Y,_.Fj,_.JJ,_.JL,_.Q7,_.On,_.sg,_.u,O.NW,x.Hw,b.lW,P.KE,P.hX,d.Nt,C.a8,C.dk,C.dn,C.n5,o.BZ,o.fO,o.as,o.w1,o.Dz,o.nj,o.ge,o.ev,o.XQ,o.Gk]}),s})()},94619:(J,U,l)=>{l.d(U,{_:()=>x});var T=l(65412),o=l(35226),E=l.n(o),v=l(70879),i=l(94650),n=l(19132),t=l(15627),e=l(24006),u=l(97392),_=l(4859),p=l(59549),S=l(44144),O=l(73546);let x=(()=>{class b{constructor(d,C,g,D,A,M){this.activeRouter=d,this.iHeaderSvc=C,this.fb=g,this.router=D,this.anyvariable=A,this.dialogRef=M,this.user=localStorage.getItem("userName"),this.displayedColumns=["Comments","Actions"],this.form=this.fb.group({tally:this.anyvariable.CITALY,seq:this.anyvariable.CISEQ,comments:this.anyvariable.CISMNT,status:"",sub:"WR"})}ngOnInit(){}ngOnDestroy(){this.updateTallyCommentServiceSubscription&&this.updateTallyCommentServiceSubscription.unsubscribe()}updateTallyComment(){var d=this.form.value;this.updateTallyCommentServiceSubscription&&this.updateTallyCommentServiceSubscription.unsubscribe(),this.updateTallyCommentServiceSubscription=this.iHeaderSvc.updateTallyCommentService(this.user,d.status,d.tally,d.seq,d.sub,d.comments).subscribe(C=>{var g=JSON.parse(C[0].data[1].value);g.Success?(this.successMessage(g.returnedData.message),this.closeDialog()):this.failureMessage(g.returnedData.message)})}successMessage(d){E().fire(d,"","success")}failureMessage(d){E().fire(d,"","error")}closeDialog(){this.dialogRef.close()}}return b.\u0275fac=function(d){return new(d||b)(i.Y36(n.gz),i.Y36(t.X),i.Y36(e.qu),i.Y36(n.F0),i.Y36(T.WI),i.Y36(T.so))},b.\u0275cmp=i.Xpm({type:b,selectors:[["app-update-tally-dtl-comments"]],standalone:!0,features:[i.jDz],decls:24,vars:1,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","tally","required",""],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","comments","maxlength","60"],[1,"footer"],["mat-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(d,C){1&d&&(i.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),i._uU(4,"Inbound Detail Comments"),i.qZA()(),i.TgZ(5,"button",2),i.NdJ("click",function(){return C.closeDialog()}),i.TgZ(6,"mat-icon"),i._uU(7,"close"),i.qZA()()(),i.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),i._uU(14,"Tally"),i.qZA(),i._UZ(15,"input",8),i.qZA(),i.TgZ(16,"mat-form-field",9)(17,"mat-label"),i._uU(18,"Comments"),i.qZA(),i.TgZ(19,"textarea",10),i._uU(20," Comments"),i.qZA()()()(),i.TgZ(21,"div",11)(22,"button",12),i.NdJ("click",function(){return C.updateTallyComment()}),i._uU(23,"Update"),i.qZA()()()()()),2&d&&(i.xp6(9),i.Q6J("formGroup",C.form))},dependencies:[v.m,e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.nD,e.sg,e.u,u.Hw,_.lW,p.KE,p.hX,S.Nt,O.a8,O.dk,O.dn,O.n5]}),b})()},30804:(J,U,l)=>{l.d(U,{u:()=>P});var T=l(65412),o=l(48529),E=l(35226),v=l.n(E),i=l(70879),n=l(94650),t=l(15627),e=l(24006),u=l(19132),_=l(11790),p=l(97392),S=l(4859),O=l(59549),x=l(44144),b=l(73546);let P=(()=>{class d{constructor(g,D,A,M,I,L){this.iHeaderSvc=g,this.anyvariable=D,this.fb=A,this.router=M,this.dialogRef=I,this.CustomAlertService=L,this.sequence=100}ngOnInit(){localStorage.getItem("LoggedIn")?(this.user=localStorage.getItem("userName"),this.building=localStorage.getItem("building")):(this.user=o.R.user,this.building=o.R.building),this.form=this.fb.group({tally:this.anyvariable.IDTALY,linenumber:this.anyvariable.IDSEQ,storer:this.anyvariable.IDSTOR,item:this.anyvariable.IDITEM,lots:this.anyvariable.IDLOT,received:this.anyvariable.IDQREC,intransit:this.anyvariable.IDQINT})}ngOnDestroy(){this.deleteTallyDetailSubscription&&this.deleteTallyDetailSubscription.unsubscribe()}deletetallyDetail(){this.CustomAlertService.openCustomAlert("Are you sure do you want to delete Tally details for Tally No:  "+this.anyvariable.IDTALY+" ?").afterClosed().subscribe(D=>{D&&(this.deleteTallyDetailSubscription&&this.deleteTallyDetailSubscription.unsubscribe(),this.deleteTallyDetailSubscription=this.iHeaderSvc.deleteTallyDetail(this.anyvariable.IDTALY,this.user,this.anyvariable.IDSEQ).subscribe(A=>{if(JSON.parse(A[0].data[1].value).success){const M=JSON.parse(A[0].data[1].value).returnedData.message;this.successMessage(M),this.closeDialog()}else{const M=JSON.parse(A[0].data[1].value).returnedData.message;this.failureMessage(M)}}))})}successMessage(g){v().fire(g,"","success"),this.closeDialog(),this.router.navigate(["/main-nav/tallys/read"])}failureMessage(g){v().fire(g,"","error")}closeDialog(){this.dialogRef.close()}}return d.\u0275fac=function(g){return new(g||d)(n.Y36(t.X),n.Y36(T.WI),n.Y36(e.qu),n.Y36(u.F0),n.Y36(T.so),n.Y36(_.y))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-tally-detail-delete"]],standalone:!0,features:[n.jDz],decls:43,vars:1,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","required","","formControlName","tally","readonly",""],["matInput","","formControlName","linenumber","readonly",""],["matInput","","formControlName","storer","readonly",""],["matInput","","formControlName","item","readonly",""],["matInput","","formControlName","lots","readonly",""],["matInput","","formControlName","received","readonly",""],["matInput","","formControlName","intransit","readonly",""],[1,"footer"],["mat-raised-button","",1,"buttons","removeButton","new-tally-form-btn",3,"click"]],template:function(g,D){1&g&&(n.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),n._uU(4,"Delete Tally Detail"),n.qZA()(),n.TgZ(5,"button",2),n.NdJ("click",function(){return D.closeDialog()}),n.TgZ(6,"mat-icon"),n._uU(7,"close"),n.qZA()()(),n.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),n._uU(14,"Tally"),n.qZA(),n._UZ(15,"input",8),n.qZA(),n.TgZ(16,"mat-form-field",7)(17,"mat-label"),n._uU(18,"Line Number "),n.qZA(),n._UZ(19,"input",9),n.qZA(),n.TgZ(20,"mat-form-field",7)(21,"mat-label"),n._uU(22,"Storer "),n.qZA(),n._UZ(23,"input",10),n.qZA(),n.TgZ(24,"mat-form-field",7)(25,"mat-label"),n._uU(26,"Item "),n.qZA(),n._UZ(27,"input",11),n.qZA(),n.TgZ(28,"mat-form-field",7)(29,"mat-label"),n._uU(30,"Lots"),n.qZA(),n._UZ(31,"input",12),n.qZA(),n.TgZ(32,"mat-form-field",7)(33,"mat-label"),n._uU(34,"Received"),n.qZA(),n._UZ(35,"input",13),n.qZA(),n.TgZ(36,"mat-form-field",7)(37,"mat-label"),n._uU(38,"Intransit"),n.qZA(),n._UZ(39,"input",14),n.qZA()()(),n.TgZ(40,"div",15)(41,"button",16),n.NdJ("click",function(){return D.deletetallyDetail()}),n._uU(42,"Delete"),n.qZA()()()()()),2&g&&(n.xp6(9),n.Q6J("formGroup",D.form))},dependencies:[i.m,e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.sg,e.u,p.Hw,S.lW,O.KE,O.hX,x.Nt,b.a8,b.dk,b.dn,b.n5]}),d})()},59186:(J,U,l)=>{l.d(U,{J:()=>M});var T=l(65412),o=l(48529),E=l(35226),v=l.n(E),i=l(77579),n=l(82722),t=l(70879),e=l(94650),u=l(15627),_=l(10573),p=l(24006),S=l(19132),O=l(36895),x=l(97392),b=l(4859),P=l(59549),d=l(44144),C=l(84385),g=l(3238),D=l(73546);function A(I,L){if(1&I&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&I){const c=L.$implicit;e.Q6J("value",c),e.xp6(1),e.Oqu(c)}}let M=(()=>{class I{constructor(c,y,Z,R,N,K){this.iHeaderSvc=c,this.itemService=y,this.fb=Z,this.router=R,this.anyvariable=N,this.dialogRef=K,this.itemOptions=[],this.itemHashSet=new Set,this.unsubscribe$=new i.x}ngOnInit(){this.storer=this.anyvariable[1].IDSTOR,localStorage.getItem("LoggedIn")?(this.user=localStorage.getItem("userName"),this.building=localStorage.getItem("building"),this.storer=localStorage.getItem("storer"),this.storer||(this.storer=this.anyvariable[1].IDSTOR)):(this.user=o.R.user,this.building=o.R.building),this.tally=this.anyvariable[1].IDTALY,this.form=this.fb.group({quantity:this.anyvariable[1].IDQINT,items:this.anyvariable[1].IDITEM,sequence:this.anyvariable[1].IDSEQ,lotCode1:this.anyvariable[1].IDLOT,lotCode2:this.anyvariable[1].IDLTC1,lotCode3:this.anyvariable[1].IDLTC2,rateType:this.anyvariable[1].IDRTTY,dmgReas:this.anyvariable[1].IDDAMR,overrideWeight:this.anyvariable[1].IDOGRW}),this.getTallyItems()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}tryAddItemIdToHashset(c){let y=!1;return c.forEach(Z=>{this.itemHashSet.has(Z.ITEM)?y=!0:this.itemHashSet.add(Z.ITEM)}),!y}getTallyItems(c=1,y=20){this.getItemForTallySubscription=this.itemService.getItemForTally(this.user,this.anyvariable[1].IDSTOR,"","","",c,y).pipe((0,n.R)(this.unsubscribe$)).subscribe(Z=>{let N=JSON.parse(Z[0].data[1]?.value).returnedData,K=!this.tryAddItemIdToHashset(N);!K&&N.length>0?this.getTallyItems(c+1,y):K&&this.failureMessage("Error getting item data")})}closeDialog(){this.dialogRef.close()}updateTallyDetail(){var c=this.form.value;this.updateTallyDetailSubscription=this.iHeaderSvc.updateTallyDetail(this.user,this.tally,c.sequence,this.storer,this.building,c.quantity,c.items,c.lotCode1,c.lotCode2,c.lotCode3,c.rateType,c.dmgReas,c.overrideWeight).subscribe(y=>{let Z=JSON.parse(y[0].data[1].value);Z.success?(this.successMessage(Z.returnedData.message),this.closeDialog(),this.router.navigateByUrl("/main-nav/tallys/details",{state:this.anyvariable[0]})):this.failureMessage(Z.returnedData.message)})}successMessage(c){v().fire(c,"","success"),this.router.navigate(["/main-nav/tallys/details"])}failureMessage(c){v().fire(c,"","error")}}return I.\u0275fac=function(c){return new(c||I)(e.Y36(u.X),e.Y36(_.a),e.Y36(p.qu),e.Y36(S.F0),e.Y36(T.WI),e.Y36(T.so))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-tally-detail-update"]],standalone:!0,features:[e.jDz],decls:104,vars:2,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline"],["matInput","","formControlName","quantity"],["appearance","outline",1,"full-width"],["formControlName","items","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","sequence","readonly",""],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","lotCode1"],["matInput","","formControlName","lotCode2"],["matInput","","formControlName","lotCode3"],["formControlName","rateType"],["value","R"],["value","D"],["value","A"],["appearance","outline",1,"full-width2"],["formControlName","dmgReas"],["value","BD"],["value","CC"],["value","CD"],["value","DL"],["value","DP"],["value","FL"],["value","HD"],["value","ID"],["value","IL"],["value","IU"],["value","LD"],["value","LS"],["value","NO"],["value","NR"],["value","PP"],["value","PS"],["value","SF"],["value","TE"],["value","UE"],["value","VI"],["value","WC"],["matInput","","formControlName","overrideWeight"],[1,"footer"],["mat-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"click"],[3,"value"]],template:function(c,y){1&c&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),e._uU(4,"Maintain Inbound Details"),e.qZA()(),e.TgZ(5,"button",2),e.NdJ("click",function(){return y.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()(),e.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Quantity "),e.qZA(),e._UZ(15,"input",8),e.qZA(),e.TgZ(16,"mat-form-field",9)(17,"mat-label"),e._uU(18,"Item"),e.qZA(),e.TgZ(19,"mat-select",10),e.YNc(20,A,2,2,"mat-option",11),e.qZA()(),e.TgZ(21,"mat-form-field",9)(22,"mat-label"),e._uU(23," Line "),e.qZA(),e._UZ(24,"input",12),e.qZA(),e.TgZ(25,"div",13)(26,"label",14),e._uU(27,"Lot codes"),e.qZA(),e.TgZ(28,"div",15)(29,"mat-form-field",9)(30,"mat-label"),e._uU(31,"Lot 1"),e.qZA(),e._UZ(32,"input",16),e.qZA(),e.TgZ(33,"mat-form-field",9)(34,"mat-label"),e._uU(35,"Lot 2"),e.qZA(),e._UZ(36,"input",17),e.qZA(),e.TgZ(37,"mat-form-field",9)(38,"mat-label"),e._uU(39,"Lot 3"),e.qZA(),e._UZ(40,"input",18),e.qZA()()(),e.TgZ(41,"mat-form-field",9)(42,"mat-label"),e._uU(43," Rate Type "),e.qZA(),e.TgZ(44,"mat-select",19)(45,"mat-option",20),e._uU(46,"Regular"),e.qZA(),e.TgZ(47,"mat-option",21),e._uU(48," Distribution"),e.qZA(),e.TgZ(49,"mat-option",22),e._uU(50,"Alternate "),e.qZA()()(),e.TgZ(51,"mat-form-field",23)(52,"mat-label"),e._uU(53," Damage Reason "),e.qZA(),e.TgZ(54,"mat-select",24)(55,"mat-option",25),e._uU(56," BD-Bulkhead Doors Not Secured "),e.qZA(),e.TgZ(57,"mat-option",26),e._uU(58," CC-Case Crushing (Exterior/Secondary Packaging) "),e.qZA(),e.TgZ(59,"mat-option",27),e._uU(60," CD-Case Design "),e.qZA(),e.TgZ(61,"mat-option",28),e._uU(62," DL-Damage Loading "),e.qZA(),e.TgZ(63,"mat-option",29),e._uU(64," DP-Defective Pallets or Slip Sheets "),e.qZA(),e.TgZ(65,"mat-option",30),e._uU(66," FL-Flaps Loose "),e.qZA(),e.TgZ(67,"mat-option",31),e._uU(68," HD-Hidden Damage (Suspected or Actual) "),e.qZA(),e.TgZ(69,"mat-option",32),e._uU(70," ID-Improper Doorway Protection "),e.qZA(),e.TgZ(71,"mat-option",33),e._uU(72," IL-Improper Loading "),e.qZA(),e.TgZ(73,"mat-option",34),e._uU(74," IU-Improper Unloading "),e.qZA(),e.TgZ(75,"mat-option",35),e._uU(76," LD-Lack of Cardboard Dividers/Dunnage "),e.qZA(),e.TgZ(77,"mat-option",36),e._uU(78," LS-Load Shift "),e.qZA(),e.TgZ(79,"mat-option",37),e._uU(80," NO-Nails or Other Hardware "),e.qZA(),e.TgZ(81,"mat-option",38),e._uU(82," NR-Not Reported "),e.qZA(),e.TgZ(83,"mat-option",39),e._uU(84," PP-Pallet Pattern "),e.qZA(),e.TgZ(85,"mat-option",40),e._uU(86," PS-Punctured Bailers/Cases "),e.qZA(),e.TgZ(87,"mat-option",41),e._uU(88," SF-Side Fillers Not Extended "),e.qZA(),e.TgZ(89,"mat-option",42),e._uU(90," TE-Temperature Exposure "),e.qZA(),e.TgZ(91,"mat-option",43),e._uU(92," UE-Unsuitable Equipment "),e.qZA(),e.TgZ(93,"mat-option",44),e._uU(94," VI-Vehicle Impact "),e.qZA(),e.TgZ(95,"mat-option",45),e._uU(96," WC-Wet of Stained (Containers/Secondary Pkg) "),e.qZA()()(),e.TgZ(97,"mat-form-field",9)(98,"mat-label"),e._uU(99," Override Weight"),e.qZA(),e._UZ(100,"input",46),e.qZA()()(),e.TgZ(101,"div",47)(102,"button",48),e.NdJ("click",function(){return y.updateTallyDetail()}),e._uU(103," Update "),e.qZA()()()()()),2&c&&(e.xp6(9),e.Q6J("formGroup",y.form),e.xp6(11),e.Q6J("ngForOf",y.itemHashSet))},dependencies:[t.m,O.sg,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.sg,p.u,x.Hw,b.lW,P.KE,P.hX,d.Nt,C.gD,g.ey,D.a8,D.dk,D.dn,D.n5]}),I})()},15861:(J,U,l)=>{function T(E,v,i,n,t,e,u){try{var _=E[e](u),p=_.value}catch(S){return void i(S)}_.done?v(p):Promise.resolve(p).then(n,t)}function o(E){return function(){var v=this,i=arguments;return new Promise(function(n,t){var e=E.apply(v,i);function u(p){T(e,n,t,u,_,"next",p)}function _(p){T(e,n,t,u,_,"throw",p)}u(void 0)})}}l.d(U,{Z:()=>o})}}]);