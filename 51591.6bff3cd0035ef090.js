"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[51591],{51591:(S,s,r)=>{r.r(s),r.d(s,{DriverInWorkWithDockSchedulerComponent:()=>C});var h=r(35226),u=r.n(h),p=r(48529),f=r(70879),e=r(94650),b=r(65412),D=r(19132),n=r(24006),g=r(72122),T=r(97392),Z=r(4859),d=r(59549),v=r(44144),A=r(84385),U=r(3238),I=r(99602),m=r(73546);let C=(()=>{class l{constructor(t,o,a,i,_){this.matDialog=t,this.cd=o,this.router=a,this.fb=i,this.WorkWithDockSchedulerService=_,this.user=localStorage.getItem("userName")||"",this.enableData=!1,this.outputMsg="Update/change allowed",this.errorMsg="No update/change allowed",this.DOCK_URL="/main-nav/WorkWithDockScheduler/read"}ngOnInit(){this.element=history.state,this.form=this.fb.group({appointmentNumber:{value:this.element.DSAPPT,disabled:!0},building:{value:this.element.DSBLDG,disabled:!0},inOut:{value:this.element.DSINOU,disabled:!0},appointmentType:{value:"",disabled:!0},loadType:{value:this.element.DSLTYP,disabled:!0},scacCode:{value:this.element.DSSCAC,disabled:!0},scheduledDateTime:{value:"",disabled:!0},driver:"",licenseNumber:"",trailerNumber:"",sealNumberOne:"",sealNumberTwo:"",brokenSealOne:"",brokenSealTwo:"",checkInDate:"",checkInTime:"",actualDoor:""}),this.loaddrivein()}ngOnDestroy(){this.driverInSubscription&&this.driverInSubscription.unsubscribe()}loaddrivein(){this.driverInSubscription&&this.driverInSubscription.unsubscribe(),this.driverInSubscription=this.WorkWithDockSchedulerService.drivercheckinRead(this.user,this.element.DSAPPT,10,1).subscribe(t=>{const a=JSON.parse(t[0].data[1].value).returnedData[0];this.form.patchValue({scheduledDateTime:[(a.WSAPDT??"")+" "+(a.WSAPTM??"")],appointmentType:a.WATYPD??"",driver:a.WDRIVR??"",licenseNumber:a.WDRVRL??"",actualDoor:a.WKLOCN??"",trailerNumber:a.DSTRAL??"",sealNumberOne:a.DSSEA1??"",brokenSealOne:a.DSBRK1??"",sealNumberTwo:a.DSSEA2??"",brokenSealTwo:a.DSBRK2??"",checkInDate:this.formatDate(a.WCDATE),checkInTime:this.formatTime(a.WCTIME)}),this.enableData=(a.DisplayMsg||"").trim().toUpperCase()===this.outputMsg.trim().toUpperCase(),this.enableData?(this.form.get("driver")?.enable(),this.form.get("licenseNumber")?.enable(),this.form.get("actualDoor")?.enable(),this.form.get("trailerNumber")?.enable(),this.form.get("sealNumberOne")?.enable(),this.form.get("brokenSealOne")?.enable(),this.form.get("sealNumberTwo")?.enable(),this.form.get("brokenSealTwo")?.enable(),this.form.get("checkInDate")?.enable(),this.form.get("checkInTime")?.enable()):(this.form.get("driver")?.disable(),this.form.get("licenseNumber")?.disable(),this.form.get("actualDoor")?.disable(),this.form.get("trailerNumber")?.disable(),this.form.get("sealNumberOne")?.disable(),this.form.get("brokenSealOne")?.disable(),this.form.get("sealNumberTwo")?.disable(),this.form.get("brokenSealTwo")?.disable(),this.form.get("checkInDate")?.disable(),this.form.get("checkInTime")?.disable()),this.cd.detectChanges()})}driveinUpdate(){if(this.form.invalid)return;const t=this.form.value;this.driverInSubscription&&this.driverInSubscription.unsubscribe(),this.driverInSubscription=this.WorkWithDockSchedulerService.driveinUpdate(this.user,this.element.DSAPPT,t.checkInDate,t.checkInTime,t.actualDoor,t.driver,t.licenseNumber,t.trailerNumber,t.sealNumberOne,t.brokenSealOne,t.sealNumberTwo,t.brokenSealTwo).subscribe(o=>{const a=o[0].data.length,i=JSON.parse(o[0].data[a-1].value).returnedData.message;console.log(JSON.parse(o[0].data[a-1].value).returnedData),i.trim().toUpperCase()===p.R.updateMsg.trim().toUpperCase()?(this.successMessage(i),this.router.navigate([this.DOCK_URL])):this.failureMessage(i),this.cd.detectChanges()})}formatDate(t){if(!t)return"";const[o,a,i]=t.split("/");return`${Number(i)<50?"20"+i:"19"+i}-${o.padStart(2,"0")}-${a.padStart(2,"0")}`}formatTime(t){if(!t)return"";const a=t.trim().match(/^(\d{1,2}):(\d{2})/);return a?`${a[1].padStart(2,"0")}:${a[2]}`:""}successMessage(t){u().fire(t,"","success")}failureMessage(t){u().fire(t,"","error")}onBack(){this.router.navigateByUrl(this.DOCK_URL)}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(b.uw),e.Y36(e.sBO),e.Y36(D.F0),e.Y36(n.qu),e.Y36(g.A))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-driver-in-work-with-dock-scheduler"]],standalone:!0,features:[e.jDz],decls:110,vars:2,consts:[[1,"over-Flow"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","appointmentNumber"],["matInput","","formControlName","building"],["matInput","","formControlName","inOut",2,"text-transform","uppercase"],["matInput","","formControlName","appointmentType"],["matInput","","formControlName","loadType",2,"text-transform","uppercase"],["matInput","","formControlName","scacCode",2,"text-transform","uppercase"],["matInput","","formControlName","scheduledDateTime"],["matInput","","formControlName","driver",2,"text-transform","uppercase"],["matInput","","formControlName","licenseNumber",2,"text-transform","uppercase"],["matInput","","formControlName","trailerNumber",2,"text-transform","uppercase"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","sealNumberOne",2,"text-transform","uppercase"],["matInput","","formControlName","sealNumberTwo",2,"text-transform","uppercase"],["formControlName","brokenSealOne"],["value",""],["value","Y"],["value","N"],["formControlName","brokenSealTwo"],["matInput","","type","date","formControlName","checkInDate"],["checkOutDatePicker",""],["matInput","","type","time","formControlName","checkInTime"],["matInput","","formControlName","actualDoor",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title")(3,"button",1),e.NdJ("click",function(){return o.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before "),e.qZA()(),e._uU(6,"Driver Check-In"),e.qZA()(),e.TgZ(7,"mat-card-content",2)(8,"form",3)(9,"div",4)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),e._uU(13," Appointment Number"),e.qZA(),e._UZ(14,"input",7),e.qZA(),e.TgZ(15,"mat-form-field",6)(16,"mat-label"),e._uU(17,"Building"),e.qZA(),e._UZ(18,"input",8),e.qZA(),e.TgZ(19,"mat-form-field",6)(20,"mat-label"),e._uU(21," In/Out "),e.qZA(),e._UZ(22,"input",9),e.qZA(),e.TgZ(23,"mat-form-field",6)(24,"mat-label"),e._uU(25," Appointment Type"),e.qZA(),e._UZ(26,"input",10),e.qZA(),e.TgZ(27,"mat-form-field",6)(28,"mat-label"),e._uU(29," Load Type"),e.qZA(),e._UZ(30,"input",11),e.qZA(),e.TgZ(31,"mat-form-field",6)(32,"mat-label"),e._uU(33,"SCAC Code"),e.qZA(),e._UZ(34,"input",12),e.qZA(),e.TgZ(35,"mat-form-field",6)(36,"mat-label"),e._uU(37,"Scheduled"),e.qZA(),e._UZ(38,"input",13),e.qZA(),e.TgZ(39,"mat-form-field",6)(40,"mat-label"),e._uU(41,"Driver"),e.qZA(),e._UZ(42,"input",14),e.qZA(),e.TgZ(43,"mat-form-field",6)(44,"mat-label"),e._uU(45,"License"),e.qZA(),e._UZ(46,"input",15),e.qZA(),e.TgZ(47,"mat-form-field",6)(48,"mat-label"),e._uU(49,"Trailer Number"),e.qZA(),e._UZ(50,"input",16),e.qZA(),e.TgZ(51,"div",17)(52,"label",18),e._uU(53,"Seals"),e.qZA(),e.TgZ(54,"div",19)(55,"mat-form-field",6)(56,"mat-label"),e._uU(57,"Seal one"),e.qZA(),e._UZ(58,"input",20),e.qZA(),e.TgZ(59,"mat-form-field",6)(60,"mat-label"),e._uU(61,"Seal two"),e.qZA(),e._UZ(62,"input",21),e.qZA()()(),e._UZ(63,"br"),e.TgZ(64,"div",17)(65,"label",18),e._uU(66,"Broken"),e.qZA(),e.TgZ(67,"div",19)(68,"mat-form-field",6)(69,"mat-label"),e._uU(70,"Broken one"),e.qZA(),e.TgZ(71,"mat-select",22)(72,"mat-option",23),e._uU(73,"-- Select --"),e.qZA(),e.TgZ(74,"mat-option",24),e._uU(75,"Y"),e.qZA(),e.TgZ(76,"mat-option",25),e._uU(77,"N"),e.qZA()()(),e.TgZ(78,"mat-form-field",6)(79,"mat-label"),e._uU(80,"Broken two"),e.qZA(),e.TgZ(81,"mat-select",26)(82,"mat-option",23),e._uU(83,"-- Select --"),e.qZA(),e.TgZ(84,"mat-option",24),e._uU(85,"Y"),e.qZA(),e.TgZ(86,"mat-option",25),e._uU(87,"N"),e.qZA()()()()(),e._UZ(88,"br"),e.TgZ(89,"div",17)(90,"label",18),e._uU(91,"Check-In"),e.qZA(),e.TgZ(92,"div",19)(93,"mat-form-field",6)(94,"mat-label"),e._uU(95,"Check-In Date"),e.qZA(),e._UZ(96,"input",27)(97,"mat-datepicker",null,28),e.qZA(),e.TgZ(99,"mat-form-field",6)(100,"mat-label"),e._uU(101,"Check-In Time"),e.qZA(),e._UZ(102,"input",29),e.qZA()()(),e._UZ(103,"br"),e.TgZ(104,"mat-form-field",6)(105,"mat-label"),e._uU(106,"Actual Door"),e.qZA(),e._UZ(107,"input",30),e.qZA()()(),e.TgZ(108,"button",31),e.NdJ("click",function(){return o.driveinUpdate()}),e._uU(109,"Submit"),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(100),e.Q6J("disabled",o.form.invalid||!o.enableData))},dependencies:[f.m,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,T.Hw,Z.lW,d.KE,d.hX,v.Nt,A.gD,U.ey,I.Mq,m.a8,m.dk,m.dn,m.n5]}),l})()}}]);