"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[7131],{67131:(Q,T,r)=>{r.r(T),r.d(T,{InvInquirySiType2Component:()=>G});var f=r(98739),l=r(7155),I=r(70879),d=r(36895),t=r(94650),u=r(24006),y=r(65412),v=r(19132),D=r(81543),S=r(97392),Z=r(4859),g=r(59549),A=r(44144),h=r(99602),p=r(73546);function C(a,i){1&a&&(t.TgZ(0,"th",39),t._uU(1," Item "),t.qZA())}function E(a,i){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.hij(" ",e.WKITDSC," ")}}function U(a,i){1&a&&(t.TgZ(0,"th",39),t._uU(1," On Hand Balance "),t.qZA())}function N(a,i){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.AsE(" ",0!==e.WK1BALN?e.WK1BALN:""," ",0!==e.WK1BUNT?e.WK1BUNT:""," ")}}function M(a,i){1&a&&(t.TgZ(0,"th",39),t._uU(1," On Hand Weight "),t.qZA())}function O(a,i){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.AsE(" ",0!==e.WK1WGHT?e.WK1WGHT:""," ",e.WK1WUNT," ")}}function b(a,i){1&a&&(t.TgZ(0,"th",39),t._uU(1," Rate "),t.qZA())}function q(a,i){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.AsE(" ",0!==e.WKRATE?t.xi3(2,2,e.WKRATE,"1.2-2"):""," ",e.WK1QUNT," ")}}function W(a,i){1&a&&(t.TgZ(0,"th",39),t._uU(1," Charge Amount "),t.qZA())}function P(a,i){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.hij(" ",0!==e.WKAMT?e.WKAMT:"","")}}function K(a,i){1&a&&(t.TgZ(0,"th",39),t._uU(1," Minimum charge "),t.qZA())}function R(a,i){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.Oqu(e.WK1MIN)}}function B(a,i){1&a&&t._UZ(0,"tr",41)}function x(a,i){1&a&&t._UZ(0,"tr",42)}const L=function(){return[8,16,24]};let G=(()=>{class a{constructor(e,n,o,m){this.fb=e,this.matDialog=n,this.router=o,this.RecvSvc=m,this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.duplicateSource=[],this.dataSource=new l.by,this.user=localStorage.getItem("userName")||"",this.displayedColumns=["Item","OnHandBalance","OnHandWeight","Rate","ChargeAmount","Minimumcharge"],this.period="",this.totalAmountDue=0,this.total=0,this.item="",this.receivablesUrl="/main-nav/receivables/read"}ngOnInit(){this.element=history.state,console.log(this.element);const e=new Date,n=(0,d.p6)(e,"yyyy-MM-dd","en-US"),o=(0,d.p6)(e,"HH:mm","en-US");this.form=this.fb.group({Date:[new Date],Time:[this.formatCurrentTime()],S1STOR:{value:this.element.Name,disabled:!0},INVNO:{value:this.element.invoice,disabled:!0},GENDT:{value:n,disabled:!0},GENTM:{value:o,disabled:!0},WKITEM:this.item}),this.getStorageInvoice(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}ngOnDestroy(){this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe()}createFilter(){return(e,n)=>{const o=JSON.parse(n);return Object.keys(o).every(m=>e[m]?.toString().toLowerCase().includes(o[m].toLowerCase())||!1)}}resetSearch(){this.form.reset(),this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,1)}onPaginateChange(e){this.pageSize=e.pageSize,this.getStorageInvoice(e.pageSize,e.pageIndex+1)}getStorageInvoice(e,n){const o=this.currentFilters||{},{WKINVN:m=`${this.element.invoice}`}=o;this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe(),this.StorageInvoicesSubscription=this.RecvSvc.FreightInv(this.user,m,e,n).subscribe(c=>{console.log(c);var s=JSON.parse(c[0].data[1]?.value);const _=s.returnedData;this.dataSource.data=_,this.totalRecords=s.TotalRecords,this.loadGeneratedDateTime(_[0].WKGEND),this.totalAmountDue=s["Total Amount Due"],this.period=s.Period,this.item=s?.WKITEM||"",console.log("Assigned item:",this.item),this.form.patchValue({WKITEM:this.item})})}loadGeneratedDateTime(e){const n=e.replace('WKGEND":"',"").replace(/"/g,""),o="20"+n.substring(1,3),m=n.substring(3,5),c=n.substring(5,7),s=n.substring(7,9),_=n.substring(9,11);this.form.patchValue({GENDT:new Date(`${o}-${m}-${c}`),GENTM:`${s}:${_}`})}onBack(){this.router.navigate([this.receivablesUrl])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(u.qu),t.Y36(y.uw),t.Y36(v.F0),t.Y36(D.Z))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-inv-inquiry-si-type2"]],viewQuery:function(e,n){if(1&e&&t.Gf(f.NW,5),2&e){let o;t.iGM(o=t.CRH())&&(n.paginator=o.first)}},standalone:!0,features:[t.jDz],decls:84,vars:17,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","INVNO",2,"text-transform","uppercase"],["readonly","","matInput","","formControlName","Date","readonly","",3,"matDatepicker"],["matSuffix","",3,"for"],["DatePicker",""],["readonly","","matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],["appearance","outline",1,"full-width2"],["readonly","","matInput","",3,"value"],["matInput","","formControlName","WKITEM"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["readonly","","matInput","","formControlName","GENDT",3,"matDatepicker"],["GeneratedDatePicker",""],["readonly","","matInput","","type","time","formControlName","GENTM","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","readonly","","formControlName","S1STOR",2,"text-transform","uppercase"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","OnHandBalance"],["matColumnDef","OnHandWeight"],["matColumnDef","Rate"],["matColumnDef","ChargeAmount"],["matColumnDef","Minimumcharge"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],[1,"buttons","button3"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return n.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Storage Invoice Inquiry"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13," Invoice "),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Date "),t.qZA(),t._UZ(18,"input",9)(19,"mat-datepicker-toggle",10)(20,"mat-datepicker",null,11),t.qZA(),t.TgZ(22,"mat-form-field",7)(23,"mat-label"),t._uU(24,"Time"),t.qZA(),t._UZ(25,"input",12),t.qZA(),t.TgZ(26,"mat-form-field",13)(27,"mat-label"),t._uU(28," Period "),t.qZA(),t._UZ(29,"input",14),t.qZA(),t.TgZ(30,"mat-form-field",7)(31,"mat-label"),t._uU(32,"Position to Item"),t.qZA(),t._UZ(33,"input",15),t.qZA(),t.TgZ(34,"div",16)(35,"label",17),t._uU(36,"Generated"),t.qZA(),t.TgZ(37,"div",18)(38,"mat-form-field",7)(39,"mat-label"),t._uU(40,"Generated Date "),t.qZA(),t._UZ(41,"input",19)(42,"mat-datepicker-toggle",10)(43,"mat-datepicker",null,20),t.qZA(),t.TgZ(45,"mat-form-field",7)(46,"mat-label"),t._uU(47,"Generated Time"),t.qZA(),t._UZ(48,"input",21),t.qZA()()(),t.TgZ(49,"mat-form-field",13)(50,"mat-label"),t._uU(51," Storer "),t.qZA(),t._UZ(52,"input",22),t.qZA()()()()(),t.TgZ(53,"table",23),t.ynx(54,24),t.YNc(55,C,2,0,"th",25),t.YNc(56,E,2,1,"td",26),t.BQk(),t.ynx(57,27),t.YNc(58,U,2,0,"th",25),t.YNc(59,N,2,2,"td",26),t.BQk(),t.ynx(60,28),t.YNc(61,M,2,0,"th",25),t.YNc(62,O,2,2,"td",26),t.BQk(),t.ynx(63,29),t.YNc(64,b,2,0,"th",25),t.YNc(65,q,3,5,"td",26),t.BQk(),t.ynx(66,30),t.YNc(67,W,2,0,"th",25),t.YNc(68,P,2,1,"td",26),t.BQk(),t.ynx(69,31),t.YNc(70,K,2,0,"th",25),t.YNc(71,R,2,1,"td",26),t.BQk(),t.YNc(72,B,1,0,"tr",32),t.YNc(73,x,1,0,"tr",33),t.qZA(),t._UZ(74,"br"),t.TgZ(75,"div",34),t._UZ(76,"br")(77,"br"),t.TgZ(78,"div",35)(79,"button",36),t._uU(80),t.ALo(81,"number"),t.qZA()()(),t.TgZ(82,"mat-paginator",37,38),t.NdJ("page",function(m){return n.onPaginateChange(m)}),t.qZA()()),2&e){const o=t.MAs(21),m=t.MAs(44);t.xp6(8),t.Q6J("formGroup",n.form),t.xp6(10),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o),t.xp6(10),t.Q6J("value",n.period),t.xp6(12),t.Q6J("matDatepicker",m),t.xp6(1),t.Q6J("for",m),t.xp6(11),t.Q6J("dataSource",n.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(7),t.hij(" Total Amount : $",t.xi3(81,13,n.totalAmountDue,"1.2-2")," "),t.xp6(2),t.Q6J("length",n.totalRecords)("pageSizeOptions",t.DdM(16,L))("pageSize",n.pageSize)}},dependencies:[I.m,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,f.NW,S.Hw,Z.lW,g.KE,g.hX,g.R9,A.Nt,h.Mq,h.hl,h.nW,p.a8,p.dk,p.dn,p.n5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,d.JJ]}),a})()}}]);