"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[60501],{60501:(ct,h,r)=>{r.r(h),r.d(h,{TallyInquiryComponent:()=>ut});var T=r(65412),s=r(7155),g=r(77579),y=r(78372),I=r(71884),Z=r(70879),t=r(94650),d=r(19132),C=r(15627),_=r(24006),f=r(36895),D=r(98739),A=r(97392),q=r(4859),c=r(59549),U=r(44144),m=r(73546);const x=["paginator"];function v(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"Quantity"),t.qZA())}function S(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.ICQTY," ")}}function O(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"Item"),t.qZA())}function E(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.IITEM," ")}}function N(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"Description"),t.qZA())}function b(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.IDESC," ")}}function M(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"Lot Codes"),t.qZA())}function R(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",e.ILOT1,"",e.ILOT2?" | ":"","")}}function L(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",e.ILOT2,"",e.ILOT3?" | ":"","")}}function Y(a,n){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.ILOT3)}}function P(a,n){if(1&a&&(t.TgZ(0,"td",41),t.YNc(1,R,2,2,"ng-container",42),t.YNc(2,L,2,2,"ng-container",42),t.YNc(3,Y,2,1,"ng-container",42),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",e.ILOT1),t.xp6(1),t.Q6J("ngIf",e.ILOT2),t.xp6(1),t.Q6J("ngIf",e.ILOT3)}}function B(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"Weight"),t.qZA())}function Q(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.IGRSW," ")}}function H(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"Rate"),t.qZA())}function W(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.IRATE," ")}}function w(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"Base"),t.qZA())}function j(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.IBASE," ")}}function k(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"Amount"),t.qZA())}function K(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.IAMT," ")}}function J(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"HSM"),t.qZA())}function $(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.IHSM," ")}}function z(a,n){1&a&&(t.TgZ(0,"th",40),t._uU(1,"O/S/D"),t.qZA())}function F(a,n){if(1&a&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.IOSD," ")}}function G(a,n){1&a&&t._UZ(0,"tr",43)}function X(a,n){1&a&&t._UZ(0,"tr",44)}function V(a,n){1&a&&(t.TgZ(0,"div",45),t._UZ(1,"img",46),t.TgZ(2,"h3",47),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",48),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}function tt(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij("Total Handling : ",t.xi3(2,1,e.totalHandling,"1.2-2"),"")}}function at(a,n){1&a&&t._uU(0),2&a&&t.hij("Total Handling : ","","")}function et(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij("Storage : ",t.xi3(2,1,e.storage,"1.2-2"),"")}}function nt(a,n){1&a&&t._uU(0),2&a&&t.hij("Storage : ","","")}function it(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij("Special : ",t.xi3(2,1,e.special,"1.2-2"),"")}}function lt(a,n){1&a&&t._uU(0),2&a&&t.hij("Special : ","","")}function ot(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij("W/R Total : ",t.xi3(2,1,e.wrTotal,"1.2-2"),"")}}function rt(a,n){1&a&&t._uU(0),2&a&&t.hij("W/R Total : ","","")}const st=function(){return[8,16,24]};let ut=(()=>{class a{constructor(e,i,l,o,u,p){this.router=e,this.iHeaderSvc=i,this.fb=l,this.route=o,this.anyvariable=u,this.dialogRef=p,this.isLoading=!1,this.noData=!1,this.searchInput$=new g.x,this.allData=[],this.filteredData=[],this.pageData=[],this.isSearchMode=!1,this.totalRecords=0,this.pageSize=8,this.pageNumber=1,this.displayedColumns=["Qty","Item","Description","LotCodes","Weight","Rate","Base","Amount","HSM","OSD"],this.columnShowHideList=[],this.user=localStorage.getItem("userName"),this.dataSource=new s.by}ngOnInit(){this.tally=this.anyvariable.IHTALY,this.form=this.fb.group({tally:""}),this.searchInput$.pipe((0,y.b)(300),(0,I.x)()).subscribe(e=>{this.handleSearch(e)}),this.isLoading=!0,this.readTallyInquiryServiceSubscription=this.iHeaderSvc.readTallyInquiryService(this.user,this.anyvariable.IHTALY).subscribe({next:e=>{this.isLoading=!1;var l=JSON.parse(e.data[1]?.value).returnedData;this.accountOf=l[0].IHSTOR,this.billTo=l[0].IHCUST,this.carrier=l[0].CRNAME,this.proNumber=l[0].IHPRO,this.referenceNo=l[0].IHSTRF,this.carTrailer=l[0].IHCAR,this.invoiceNo=l[0].IHINVO,this.invoiceDate=l[0].IHINDT,this.receivedDate=l[0].IHACTA,this.scheduledDate=l[0].IHSCHA,this.buildingNo=l[0].IHBLDG,this.loadType=l[0].ILDTYP,this.receiptType=l[0].IRCTYP,this.seal1Or2Broken=`${l[0].IHBRK1} ${l[0].IHBRK2}`,this.totalHandling=l[0].ITOTHD,this.storage=l[0].ITOTST,this.special=l[0].ITOTSP,this.wrTotal=l[0].IGRTOT;var o=this.parseResponseForTable(l);this.allData=o,this.filteredData=o,this.totalRecords=o.length,this.noData=0===o.length,this.noData?this.dataSource.data=[]:this.loadPage(1)},error:()=>this.handleNoData()})}ngOnDestroy(){this.readTallyInquiryServiceSubscription&&this.readTallyInquiryServiceSubscription.unsubscribe()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}onPaginateChange(e){this.pageSize=e.pageSize,this.pageNumber=e.pageIndex+1,this.loadPage(this.pageNumber)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}loadSearchChunks(e,i){const{chunkSize:l}=this.getSearchStrategy(this.allData.length);let o=[];for(let u=0;u<this.allData.length;u+=l){const _t=this.allData.slice(u,u+l).filter(mt=>Object.values(mt).some(pt=>String(pt).toLowerCase().includes(e)));o.push(..._t)}this.filteredData=o,this.totalRecords=o.length,this.noData=0===o.length,this.noData?this.dataSource.data=[]:this.loadPage(1),i?.()}parseResponseForTable(e){var i=["90","50","60"],l=[];for(var o of e)i.includes(o.ILINE)||(0==o.ICQTY&&(o.ICQTY=null),"30"==o.ILINE?/\S/.test(o.ICMNT)&&l.push({IDESC:o.ICMNT}):l.push(o));return l}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.filteredData=this.allData,this.totalRecords=this.allData.length,this.noData=0===this.allData.length,void(this.noData?this.dataSource.data=[]:this.loadPage(1));this.isSearchMode=!0,this.loadSearchChunks(e)}loadPage(e){const i=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(i,i+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}handleNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource.data=[]}onBack(){this.router.navigate(["tallys"])}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.F0),t.Y36(C.X),t.Y36(_.qu),t.Y36(d.gz),t.Y36(T.WI),t.Y36(T.so))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tally-inquiry"]],viewQuery:function(e,i){if(1&e&&t.Gf(x,5),2&e){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first)}},standalone:!0,features:[t.jDz],decls:131,vars:31,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","",3,"value"],["appearance","outline",1,"full-width2"],["id","myTable","mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Qty"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Item"],["matColumnDef","Description"],["matColumnDef","LotCodes"],["matColumnDef","Weight"],["matColumnDef","Rate"],["matColumnDef","Base"],["matColumnDef","Amount"],["matColumnDef","HSM"],["matColumnDef","OSD"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],[1,"summary-container","info"],[1,"summary-row","align-between"],[1,"summary-pill"],[4,"ngIf","ngIfElse"],["defaulttotalHandling",""],["defaultstorage",""],["defaultspecial",""],["defaultwrTotal",""],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Tally Inquiry"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"mat-icon",5),t._uU(11,"search"),t.qZA(),t.TgZ(12,"input",6),t.NdJ("input",function(o){return i.applyGlobalFilterInput(o.target.value)}),t.qZA()()(),t.TgZ(13,"mat-card-content",7)(14,"form",8)(15,"div",9)(16,"div",10)(17,"mat-form-field",11)(18,"mat-label"),t._uU(19,"Tally Number"),t.qZA(),t._UZ(20,"input",12),t.qZA(),t.TgZ(21,"mat-form-field",13)(22,"mat-label"),t._uU(23,"Account Of"),t.qZA(),t._UZ(24,"input",12),t.qZA(),t.TgZ(25,"mat-form-field",11)(26,"mat-label"),t._uU(27,"Bill To"),t.qZA(),t._UZ(28,"input",12),t.qZA(),t.TgZ(29,"mat-form-field",13)(30,"mat-label"),t._uU(31,"Carrier"),t.qZA(),t._UZ(32,"input",12),t.qZA(),t.TgZ(33,"mat-form-field",11)(34,"mat-label"),t._uU(35,"PRO Number"),t.qZA(),t._UZ(36,"input",12),t.qZA(),t.TgZ(37,"mat-form-field",13)(38,"mat-label"),t._uU(39,"Reference Number"),t.qZA(),t._UZ(40,"input",12),t.qZA(),t.TgZ(41,"mat-form-field",11)(42,"mat-label"),t._uU(43,"Car/Trailer"),t.qZA(),t._UZ(44,"input",12),t.qZA(),t.TgZ(45,"mat-form-field",13)(46,"mat-label"),t._uU(47,"Invoice Number"),t.qZA(),t._UZ(48,"input",12),t.qZA(),t.TgZ(49,"mat-form-field",11)(50,"mat-label"),t._uU(51,"Invoice Date"),t.qZA(),t._UZ(52,"input",12),t.qZA(),t.TgZ(53,"mat-form-field",13)(54,"mat-label"),t._uU(55,"Received Date"),t.qZA(),t._UZ(56,"input",12),t.qZA(),t.TgZ(57,"mat-form-field",11)(58,"mat-label"),t._uU(59,"Scheduled Date"),t.qZA(),t._UZ(60,"input",12),t.qZA(),t.TgZ(61,"mat-form-field",13)(62,"mat-label"),t._uU(63,"Building Number"),t.qZA(),t._UZ(64,"input",12),t.qZA(),t.TgZ(65,"mat-form-field",11)(66,"mat-label"),t._uU(67,"Load Type"),t.qZA(),t._UZ(68,"input",12),t.qZA(),t.TgZ(69,"mat-form-field",11)(70,"mat-label"),t._uU(71,"Receipt Type"),t.qZA(),t._UZ(72,"input",12),t.qZA(),t.TgZ(73,"mat-form-field",11)(74,"mat-label"),t._uU(75,"Seal 1/2 Broken"),t.qZA(),t._UZ(76,"input",12),t.qZA()()()()(),t.TgZ(77,"table",14),t.ynx(78,15),t.YNc(79,v,2,0,"th",16),t.YNc(80,S,2,1,"td",17),t.BQk(),t.ynx(81,18),t.YNc(82,O,2,0,"th",16),t.YNc(83,E,2,1,"td",17),t.BQk(),t.ynx(84,19),t.YNc(85,N,2,0,"th",16),t.YNc(86,b,2,1,"td",17),t.BQk(),t.ynx(87,20),t.YNc(88,M,2,0,"th",16),t.YNc(89,P,4,3,"td",17),t.BQk(),t.ynx(90,21),t.YNc(91,B,2,0,"th",16),t.YNc(92,Q,2,1,"td",17),t.BQk(),t.ynx(93,22),t.YNc(94,H,2,0,"th",16),t.YNc(95,W,2,1,"td",17),t.BQk(),t.ynx(96,23),t.YNc(97,w,2,0,"th",16),t.YNc(98,j,2,1,"td",17),t.BQk(),t.ynx(99,24),t.YNc(100,k,2,0,"th",16),t.YNc(101,K,2,1,"td",17),t.BQk(),t.ynx(102,25),t.YNc(103,J,2,0,"th",16),t.YNc(104,$,2,1,"td",17),t.BQk(),t.ynx(105,26),t.YNc(106,z,2,0,"th",16),t.YNc(107,F,2,1,"td",17),t.BQk(),t.YNc(108,G,1,0,"tr",27),t.YNc(109,X,1,0,"tr",28),t.qZA(),t.YNc(110,V,6,0,"div",29),t.TgZ(111,"div",30)(112,"div",31)(113,"div",32),t.YNc(114,tt,3,4,"span",33),t.YNc(115,at,1,1,"ng-template",null,34,t.W1O),t.qZA(),t.TgZ(117,"div",32),t.YNc(118,et,3,4,"span",33),t.YNc(119,nt,1,1,"ng-template",null,35,t.W1O),t.qZA(),t.TgZ(121,"div",32),t.YNc(122,it,3,4,"span",33),t.YNc(123,lt,1,1,"ng-template",null,36,t.W1O),t.qZA(),t.TgZ(125,"div",32),t.YNc(126,ot,3,4,"span",33),t.YNc(127,rt,1,1,"ng-template",null,37,t.W1O),t.qZA()()(),t._UZ(129,"mat-paginator",38,39),t.qZA()),2&e){const l=t.MAs(116),o=t.MAs(120),u=t.MAs(124),p=t.MAs(128);t.xp6(14),t.Q6J("formGroup",i.form),t.xp6(6),t.s9C("value",i.tally),t.xp6(4),t.s9C("value",i.accountOf),t.xp6(4),t.s9C("value",i.billTo),t.xp6(4),t.s9C("value",i.carrier),t.xp6(4),t.s9C("value",i.proNumber),t.xp6(4),t.s9C("value",i.referenceNo),t.xp6(4),t.s9C("value",i.carTrailer),t.xp6(4),t.s9C("value",i.invoiceNo),t.xp6(4),t.s9C("value",i.invoiceDate),t.xp6(4),t.s9C("value",i.receivedDate),t.xp6(4),t.s9C("value",i.scheduledDate),t.xp6(4),t.s9C("value",i.buildingNo),t.xp6(4),t.s9C("value",i.loadType),t.xp6(4),t.s9C("value",i.receiptType),t.xp6(4),t.s9C("value",i.seal1Or2Broken),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&i.noData),t.xp6(4),t.Q6J("ngIf",void 0!==i.totalHandling)("ngIfElse",l),t.xp6(4),t.Q6J("ngIf",void 0!==i.storage)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",void 0!==i.special)("ngIfElse",u),t.xp6(4),t.Q6J("ngIf",void 0!==i.wrTotal)("ngIfElse",p),t.xp6(3),t.Q6J("length",i.totalRecords)("pageSizeOptions",t.DdM(30,st))}},dependencies:[Z.m,f.O5,_._Y,_.JL,_.sg,D.NW,A.Hw,q.lW,c.KE,c.hX,c.qo,U.Nt,m.a8,m.dk,m.dn,m.n5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,f.JJ]}),a})()}}]);