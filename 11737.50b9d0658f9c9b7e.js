"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[11737],{11737:(nt,y,l)=>{l.r(y),l.d(y,{WwPaymentsInquiryComponent:()=>G});var A=l(15861),f=l(65412),P=l(98739),s=l(7155),D=l(77579),Z=l(78372),C=l(71884),I=l(70879),c=l(36895),t=l(94650),d=l(24006),q=l(19132),U=l(51860),S=l(97392),E=l(4859),g=l(59549),v=l(44144),h=l(73546);function b(a,n){1&a&&(t.TgZ(0,"th",43),t._uU(1,"Status"),t.qZA())}function W(a,n){if(1&a&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.AHSTAT)}}function O(a,n){1&a&&(t.TgZ(0,"th",43),t._uU(1,"Invoice Number"),t.qZA())}function M(a,n){if(1&a&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.WKINV)}}function N(a,n){1&a&&(t.TgZ(0,"th",43),t._uU(1,"Invoice Date"),t.qZA())}function w(a,n){if(1&a&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.AHDATE)}}function x(a,n){1&a&&(t.TgZ(0,"th",43),t._uU(1,"Type"),t.qZA())}function H(a,n){if(1&a&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.WKTDSC)}}function R(a,n){1&a&&(t.TgZ(0,"th",43),t._uU(1,"Account Of"),t.qZA())}function B(a,n){if(1&a&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.AHCUST)}}function L(a,n){1&a&&(t.TgZ(0,"th",43),t._uU(1,"Remaining Balance"),t.qZA())}function K(a,n){if(1&a&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij("$",t.xi3(2,1,e.AHBALN,"1.2-2"),"")}}function Y(a,n){1&a&&(t.TgZ(0,"th",43),t._uU(1,"Paid Amount"),t.qZA())}function z(a,n){if(1&a&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.hij("$",t.xi3(2,1,e.WKPAMT,"1.2-2"),"")}}function J(a,n){1&a&&t._UZ(0,"tr",45)}function Q(a,n){1&a&&t._UZ(0,"tr",46)}function $(a,n){1&a&&(t.TgZ(0,"div",47),t._UZ(1,"img",48),t.TgZ(2,"h3",49),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",50),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}function j(a,n){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij(" Applied Total: $",void 0!==e.paid?e.paid:t.xi3(2,1,0,"1.2-2"),"")}}function k(a,n){if(1&a&&(t._uU(0),t.ALo(1,"number")),2&a){const e=t.oxw();t.hij("Applied Total : $",void 0!==e.paid?e.paid:t.xi3(1,1,0,"1.2-2"),"")}}const F=function(){return[8,16,24]};let G=(()=>{class a{constructor(e,i,o,m,_,r,p){this.data=e,this.fb=i,this.dialogRef=o,this.matDialog=m,this.router=_,this.PaymentsSvc=r,this.decimalPipe=p,this.searchInput$=new D.x,this.isSearchMode=!1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.allData=[],this.filteredData=[],this.pageData=[],this.isLoading=!0,this.noData=!1,this.displayedColumns=["Status","InvoiceNumber","InvoiceDate","Type","Accountof","RemainingBalance","PaidAmount"],this.user=localStorage.getItem("userName"),this.searchTextDisplay=!1,this.duplicateSource=[]}ngOnInit(){this.paymentno=this.data.WKPAY,this.form=this.fb.group({PHPAY:{value:this.data.WKPAY,disabled:!0},PHDATE:{value:this.data.PHDATE,disabled:!0},PHCHK:{value:this.data.WKCHK,disabled:!0},PHTDAT:{value:this.data.PHDATE,disabled:!0},PHREF:{value:this.data.PHREF,disabled:!0},PHDDAT:{value:this.data.PHDDAT,disabled:!0},PHDESC:{value:this.data.PHDESC,disabled:!0},PHSTAT:{value:this.data.PHSTAT,disabled:!0},TTDESC:{value:"",disabled:!0},PHAMT:[{value:"$"+this.decimalPipe.transform(this.data.PHAMT,"1.2-2"),disabled:!0}],OCNAM:{value:this.data.PHCUST,disabled:!0},PHUBAL:[{value:"$"+this.decimalPipe.transform(this.data.PHUBAL,"1.2-2"),disabled:!0}]}),this.getPaymentinquiry(this.pageSize,this.pageNumber),this.searchInput$.pipe((0,Z.b)(500),(0,C.x)()).subscribe(e=>{this.handleSearch(e)})}ngOnDestroy(){this.getAll2Subscription&&this.getAll2Subscription.unsubscribe()}getPaymentinquiry(e,i){this.getAll2Subscription&&this.getAll2Subscription.unsubscribe(),this.isLoading=!0,this.noData=!1,this.dataSource=new s.by([]),this.getAll2Subscription=this.PaymentsSvc.getPaymentInquiry(this.user,this.paymentno).subscribe(o=>{var _=JSON.parse(o[0].data[1].value);this.duplicateSource=_.returnedData||[];var r=this.duplicateSource;this.TransType=r?.[0]?.TTDESC,this.TransDate=r?.[0]?.PHTDAT,this.payingcust=r?.[0]?.WKOCNAM,this.paid=r?.[0]?.WKTPAID;let p=0;for(let u=0;u<r.length;u++)p+=r[u].WKPAMT;this.AppliedTotal=p,this.allData=this.duplicateSource||[],this.filteredData=this.allData,this.totalRecords=this.filteredData.length,this.isLoading=!1,this.noData=0===this.filteredData.length,this.loadPage(1)})}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.getPaymentinquiry(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(e,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}loadPage(e){const i=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(i,i+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode?this.loadPage(e.pageIndex+1):this.getPaymentinquiry(e.pageSize,e.pageIndex+1)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}loadSearchChunks(e,i){var o=this;return(0,A.Z)(function*(){const{chunkSize:m,maxCalls:_}=o.getSearchStrategy(o.totalRecords||0);let r=1,p=0,u=[];for(;p<_;){const V=(yield o.PaymentsSvc.getPaymentInquiry(o.user,o.paymentno,m,r).toPromise())?.[0]?.data?.[1]?.value||"{}",T=JSON.parse(V)?.returnedData||[],tt=T.filter(at=>Object.values(at).some(et=>String(et).toLowerCase().includes(e)));if(u.push(...tt),u.length>0||T.length<m)break;r++,p++}o.allData=u,o.filteredData=u,o.totalRecords=u.length,i?.()})()}handlePaymentInquiryNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new s.by([])}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.WI),t.Y36(d.qu),t.Y36(f.so),t.Y36(f.uw),t.Y36(q.F0),t.Y36(U.c),t.Y36(c.JJ))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ww-payments-inquiry"]],viewQuery:function(e,i){if(1&e&&t.Gf(P.NW,5),2&e){let o;t.iGM(o=t.CRH())&&(i.paginator=o.first)}},standalone:!0,features:[t._Bn([c.JJ]),t.jDz],decls:101,vars:14,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","PHPAY"],["matInput","","formControlName","PHDATE"],["readonly","","matInput","","formControlName","PHCHK"],["disabled","","matInput","",3,"value"],["readonly","","matInput","","formControlName","PHREF"],["readonly","","matInput","","formControlName","PHDDAT"],["readonly","","matInput","","formControlName","PHDESC"],["readonly","","matInput","","formControlName","PHSTAT"],["readonly","","matInput","","formControlName","PHAMT"],["readonly","","matInput","","formControlName","PHUBAL"],[2,"white-space","nowrap"],["mat-table","","id","myTable",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","InvoiceNumber"],["matColumnDef","InvoiceDate"],["matColumnDef","Type"],["matColumnDef","Accountof"],["matColumnDef","RemainingBalance"],["matColumnDef","PaidAmount"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],[1,"table-summary"],[1,"form-info-message"],[1,"align-right"],[4,"ngIf","ngIfElse"],["defaultPaid",""],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Payment Inquiry - Invoice Applications"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"mat-icon",5),t._uU(11,"search"),t.qZA(),t.TgZ(12,"input",6),t.NdJ("input",function(m){return i.applyGlobalFilterInput(m.target.value)}),t.qZA()()(),t.TgZ(13,"mat-card-content",7)(14,"form",8)(15,"div",9)(16,"div",10)(17,"mat-form-field",11)(18,"mat-label"),t._uU(19,"Payment Number"),t.qZA(),t._UZ(20,"input",12),t.qZA(),t.TgZ(21,"mat-form-field",11)(22,"mat-label"),t._uU(23,"Payment Date"),t.qZA(),t._UZ(24,"input",13),t.qZA(),t.TgZ(25,"mat-form-field",11)(26,"mat-label"),t._uU(27,"Check Number"),t.qZA(),t._UZ(28,"input",14),t.qZA(),t.TgZ(29,"mat-form-field",11)(30,"mat-label"),t._uU(31,"Transaction Date"),t.qZA(),t._UZ(32,"input",15),t.qZA(),t.TgZ(33,"mat-form-field",11)(34,"mat-label"),t._uU(35,"Reference Number"),t.qZA(),t._UZ(36,"input",16),t.qZA(),t.TgZ(37,"mat-form-field",11)(38,"mat-label"),t._uU(39,"Deposit Date"),t.qZA(),t._UZ(40,"input",17),t.qZA(),t.TgZ(41,"mat-form-field",11)(42,"mat-label"),t._uU(43,"Description"),t.qZA(),t._UZ(44,"input",18),t.qZA(),t.TgZ(45,"mat-form-field",11)(46,"mat-label"),t._uU(47,"Status"),t.qZA(),t._UZ(48,"input",19),t.qZA(),t.TgZ(49,"mat-form-field",11)(50,"mat-label"),t._uU(51,"Transaction Type"),t.qZA(),t._UZ(52,"input",15),t.qZA(),t.TgZ(53,"mat-form-field",11)(54,"mat-label"),t._uU(55,"Payment Amount"),t.qZA(),t._UZ(56,"input",20),t.qZA(),t.TgZ(57,"mat-form-field",11)(58,"mat-label"),t._uU(59,"Paying Customer"),t.qZA(),t._UZ(60,"input",15),t.qZA(),t.TgZ(61,"mat-form-field",11)(62,"mat-label"),t._uU(63,"Unapplied Balance"),t.qZA(),t._UZ(64,"input",21),t.qZA()()()()(),t._UZ(65,"br"),t.TgZ(66,"label",22),t._uU(67,"Payment Application Register"),t.qZA(),t.TgZ(68,"table",23),t.ynx(69,24),t.YNc(70,b,2,0,"th",25),t.YNc(71,W,2,1,"td",26),t.BQk(),t.ynx(72,27),t.YNc(73,O,2,0,"th",25),t.YNc(74,M,2,1,"td",26),t.BQk(),t.ynx(75,28),t.YNc(76,N,2,0,"th",25),t.YNc(77,w,2,1,"td",26),t.BQk(),t.ynx(78,29),t.YNc(79,x,2,0,"th",25),t.YNc(80,H,2,1,"td",26),t.BQk(),t.ynx(81,30),t.YNc(82,R,2,0,"th",25),t.YNc(83,B,2,1,"td",26),t.BQk(),t.ynx(84,31),t.YNc(85,L,2,0,"th",25),t.YNc(86,K,3,4,"td",26),t.BQk(),t.ynx(87,32),t.YNc(88,Y,2,0,"th",25),t.YNc(89,z,3,4,"td",26),t.BQk(),t.YNc(90,J,1,0,"tr",33),t.YNc(91,Q,1,0,"tr",34),t.qZA(),t.YNc(92,$,6,0,"div",35),t.TgZ(93,"div",36)(94,"div",37)(95,"div",38),t.YNc(96,j,3,4,"span",39),t.YNc(97,k,2,4,"ng-template",null,40,t.W1O),t.qZA()()(),t.TgZ(99,"mat-paginator",41,42),t.NdJ("page",function(m){return i.onPaginateChange(m)}),t.qZA()()),2&e){const o=t.MAs(98);t.xp6(14),t.Q6J("formGroup",i.form),t.xp6(18),t.s9C("value",i.TransDate),t.xp6(20),t.s9C("value",i.TransType),t.xp6(8),t.s9C("value",i.payingcust),t.xp6(8),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&i.noData),t.xp6(4),t.Q6J("ngIf",void 0!==i.paid)("ngIfElse",o),t.xp6(3),t.Q6J("length",i.totalRecords)("pageSizeOptions",t.DdM(13,F))("pageSize",i.pageSize)}},dependencies:[I.m,c.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,P.NW,S.Hw,E.lW,g.KE,g.hX,g.qo,v.Nt,h.a8,h.dk,h.dn,h.n5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,c.JJ]}),a})()}}]);