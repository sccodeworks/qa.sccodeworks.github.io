"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[9921],{39505:(b,L,a)=>{a.d(L,{L:()=>s});var g=a(24006),c=a(59549),C=a(69751),T=a(68675),A=a(54004),e=a(94650),v=a(36895),h=a(47957),I=a(3238),o=a(44144);function i(l,d){if(1&l&&(e.TgZ(0,"mat-option",4),e._uU(1),e.qZA()),2&l){const n=d.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}let s=(()=>{class l{constructor(n){this.fb=n,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=m=>{},this.onChange=m=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new C.y,this.filteredOptions=this.control.valueChanges.pipe((0,T.O)(this.value),(0,A.U)(m=>this._filter(m)))}setDescribedByIds(n){}onContainerClick(n){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(n){null!=n&&(this.control.setValue(n),this.value=n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.disabled=n}_filter(n){if(null==n||0==n.length)return this.options;const m=n.toLowerCase(),f=this.options.filter(R=>R.toLowerCase().includes(m));return!this.disabled&&1===f.length&&this.control.value!=f[0]&&n.length>=(this.previousValue?.length??0)&&this.control.setValue(f[0]),this.onChange(this.control.value),this.previousValue=this.control.value,f}}return l.\u0275fac=function(n){return new(n||l)(e.Y36(g.qu))},l.\u0275cmp=e.Xpm({type:l,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(n,m){2&n&&e.uIk("aria-describedby",m.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[e._Bn([{provide:g.JU,multi:!0,useExisting:l},{provide:c.Eo,useExisting:l}],[{provide:g.gN,useExisting:g.sg}])],decls:8,vars:8,consts:[[3,"appearance"],["matInput","",3,"id","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,m){if(1&n&&(e.TgZ(0,"mat-form-field",0)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",1),e.TgZ(4,"mat-autocomplete",null,2),e.YNc(6,i,2,2,"mat-option",3),e.ALo(7,"async"),e.qZA()()),2&n){const f=e.MAs(5);e.Q6J("appearance",m.appearance),e.xp6(2),e.Oqu(m.label),e.xp6(1),e.Q6J("id",m.id)("formControl",m.control)("matAutocomplete",f),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,6,m.filteredOptions))}},dependencies:[v.sg,g.Fj,g.JJ,g.oH,h.XC,h.ZL,I.ey,c.KE,c.hX,o.Nt,v.Ov]}),l})()},46546:(b,L,a)=>{a.d(L,{f:()=>v});var g=a(80529),c=a(75625),C=a(70262),T=a(62843),A=a(92340),e=a(94650);let v=(()=>{class h{constructor(o){this.httpClient=o,this.url=A.N.API_BASE_URL,this.httpHeader={headers:new g.WM({"Content-Type":"application/json"})}}getLedgerCodes(o,i,s,l){return this.httpClient.get(this.url+`/LedgerCodes/read?user=${o}&LedgerCode=${i}&recordsPerPage=${s}&pageNo=${l}`)}getAll(o){return this.httpClient.get(this.url+`/LedgerCodes/readAll?user=${o}`)}createLedgerCodes(o,i,s,l,d,n){return this.httpClient.post(this.url+"/LedgerCodes/create",{LELEGC:o,LELEGS:i,LEDESC:s,LECC:l,LECSFX:d,user:n}).pipe((0,c.X)(1),(0,C.K)(this.httpError))}updateLedgerCodes(o,i,s,l,d,n){return this.httpClient.put(this.url+"/LedgerCodes/update",{LELEGC:o,LELEGS:i,LEDESC:s,LECC:l,LECSFX:d,user:n}).pipe((0,c.X)(1),(0,C.K)(this.httpError))}deleteLedgerCodes(o,i,s){return this.httpClient.delete(this.url+`/LedgerCodes/delete?user=${o}&LedgerCode=${i}&LedgerSubCode=${s}`)}LedgerCodesConsolidate(o,i,s,l){return this.httpClient.put(this.url+"/LedgerCodes/consolidate",{LedgerCode1:o,LedgerSubCode1:i,LedgerCode2:s,LedgerSubCode2:l}).pipe((0,c.X)(1),(0,C.K)(this.httpError))}getLCTransactions(o,i,s,l,d){return this.httpClient.get(this.url+`/LedgerCodes/transactions/read?user=${o}&LedgerCode=${i}&LedgerSubCode=${s}&recordsPerPage=${l}&pageNo=${d}`)}updateLcTransactions(o,i,s,l,d,n,m,f){return this.httpClient.put(this.url+"/LedgerCodes/transactions/update",{user:o,InvoiceNum:i,SequenceNum:s,InvoiceDate:l,LineAmount:d,LedgerCode:n,LedgerSubCode:m,Building:f}).pipe((0,c.X)(1),(0,C.K)(this.httpError))}getLctInvInquiry(o,i){return this.httpClient.get(this.url+`/LedgerCodes/transactions/InvInquiry/read?user=${o}&InvoiceNum=${i}`)}getLctAdjInquiry(o,i){return this.httpClient.get(this.url+`/LedgerCodes/transactions/AdjInquiry/read?user=${o}&InvoiceNum=${i}`)}getLCAttributes(o,i,s,l){return this.httpClient.get(this.url+`/LedgerCodes/attributes/read?user=${o}&key=${i}&recordsPerPage=${s}&pageNo=${l}`)}LCAttributesCreate(o,i,s,l,d,n,m,f){return this.httpClient.post(this.url+"/LedgerCodes/attributes/create",{user:o,EAFLID:i,EAKEY:s,EAATRB:l,EAVALU:d,EASTAT:n,EATMST:m,EAUSER:f}).pipe((0,c.X)(1),(0,C.K)(this.httpError))}LCAttributesUpdate(o,i,s,l,d,n,m,f){return this.httpClient.put(this.url+"/LedgerCodes/attributes/update",{EAFLID:o,EAKEY:i,EAATRB:s,EAVALU:l,EASTAT:d,EATMST:n,EAUSER:m,user:f}).pipe((0,c.X)(1),(0,C.K)(this.httpError))}LCAttributesDelete(o,i){return this.httpClient.delete(this.url+`/LedgerCodes/attributes/delete?key=${o}&attribute=${i}`)}RevenueDistReport(o,i,s,l,d,n,m,f,R,S,D,O,Z,P){return this.httpClient.put(this.url+"/LedgerCodes/LedgerCodesRevReport/update",{LedgerCode:o,LedgerCodeSuffix:i,StartDate:s,EndDate:l,StartingCustomer:d,StartingCustomerSuffix:n,StartingCustomerSuffix2:m,EndingCustomer:f,EndingCustomerSuffix:R,EndingCustomerSuffix2:S,StartingBuildingNumber:D,EndingBuildingNumber:O,OutPut:Z,Email:P}).pipe((0,c.X)(1),(0,C.K)(this.httpError))}LCRevInquiry(o,i,s){return this.httpClient.get(this.url+`/LedgerCodes/LCRevInquiry/read?user=${o}&LedgerCode=${i}&LedgerSubCode=${s}`)}httpError(o){let i="";return i=o.error instanceof ErrorEvent?o.error.message:`Error Code: ${o.status}\nMessage: ${o.message}`,console.log(i),(0,T._)(()=>new Error(i))}}return h.\u0275fac=function(o){return new(o||h)(e.LFG(g.eN))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},89921:(b,L,a)=>{a.r(L),a.d(L,{LedgercodeRevReportComponent:()=>X});var g=a(24006),c=a(35226),C=a.n(c),T=a(70879),A=a(50692),e=a(94650),v=a(19132),h=a(46546),I=a(36895),o=a(97392),i=a(4859),s=a(59549),l=a(44144),d=a(73546),n=a(39505);function m(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Ledger Code is required. "),e.qZA())}function f(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Ledger Code must be up to 4 digits. "),e.qZA())}function R(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Ledger Code Suffix is required. "),e.qZA())}function S(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Ledger Code Suffix must be up to 4 digits. "),e.qZA())}function D(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Start Date is required. "),e.qZA())}function O(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Invalid date format. Use DD-MM-YYYY. "),e.qZA())}function Z(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," End Date is required. "),e.qZA())}function P(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Invalid date format. Use DD-MM-YYYY. "),e.qZA())}function J(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1," Starting Customer must be a number with up to 4 digits or *FIRST. "),e.qZA())}function W(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1,' Ending Customer must be a number with up to 4 digits or *LAST". '),e.qZA())}function q(u,_){1&u&&(e.TgZ(0,"mat-error"),e._uU(1,' Ending Building Number must be a number with up to 3 digits or *"LAST. '),e.qZA())}function Y(u,_){1&u&&(e.TgZ(0,"div"),e._uU(1,"Email is required."),e.qZA())}function Q(u,_){1&u&&(e.TgZ(0,"div"),e._uU(1,"Please enter a valid email address."),e.qZA())}function F(u,_){if(1&u&&(e.TgZ(0,"mat-error"),e.YNc(1,Y,2,0,"div",9),e.YNc(2,Q,2,0,"div",9),e.qZA()),2&u){const t=e.oxw(2);let r,p;e.xp6(1),e.Q6J("ngIf",null==(r=t.form.get("Email"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(p=t.form.get("Email"))||null==p.errors?null:p.errors.email)}}function j(u,_){if(1&u&&(e.TgZ(0,"mat-form-field",14)(1,"mat-label"),e._uU(2,"Email:"),e.qZA(),e._UZ(3,"input",25),e.YNc(4,F,3,2,"mat-error",9),e.qZA()),2&u){const t=e.oxw();let r;e.xp6(4),e.Q6J("ngIf",(null==(r=t.form.get("Email"))?null:r.invalid)&&((null==(r=t.form.get("Email"))?null:r.dirty)||(null==(r=t.form.get("Email"))?null:r.touched)))}}let X=(()=>{class u{constructor(t,r,p,E){this.fb=t,this.router=r,this.route=p,this.LedgerCodesService=E,this.StartingCustomerOptions=["*FIRST"],this.EndingCustomerOptions=["*LAST"],this.StartingBuildingNumberOptions=["*FIRST"],this.EndingBuildingNumberOptions=["*LAST"],this.OutputOptions=["*PRINTER","*DISPLAY","*EMAIL"],this.user=localStorage.getItem("userName")}ngOnInit(){this.element=history.state,console.log(this.element),this.form=this.fb.group({LedgerCode:[this.element.LELEGC,[g.kI.required,this.specificPatternValidator()]],LedgerCodeSuffix:[this.element.LELEGS,[g.kI.required,this.specificPatternValidator()]],StartDate:["",[g.kI.required,this.dateValidator()]],EndDate:["",[g.kI.required,this.dateValidator()]],StartingCustomer:["",[this.startingCustomerValidator()]],StartingCustomerSuffix:"",StartingCustomerSuffix2:"",EndingCustomer:["",[this.endingCustomerValidator()]],EndingCustomerSuffix:"",EndingCustomerSuffix2:"",StartingBuildingNumber:"",EndingBuildingNumber:["",[this.endingBuildingNumber()]],OutPut:"*PRINTER",Email:["",[this.emailValidator()]]}),this.form.get("OutPut")?.valueChanges.subscribe(t=>{this.shouldDisplayEmailField()||this.form.get("Email")?.setValue("")}),this.form.get("StartingCustomer")?.valueChanges.subscribe(t=>{"*FIRST"===t&&this.form.get("StartingCustomer")?.setValue("0",{emitEvent:!1})}),this.form.get("EndingCustomer")?.valueChanges.subscribe(t=>{"*LAST"===t&&this.form.get("EndingCustomer")?.setValue("9999",{emitEvent:!1})}),this.form.get("EndingBuildingNumber")?.valueChanges.subscribe(t=>{"*LAST"===t&&this.form.get("EndingBuildingNumber")?.setValue("999",{emitEvent:!1})})}shouldDisplayEmailField(){const t=this.form.get("OutPut")?.value;return"*BOTH"===t||"*EMAIL"===t}maxLengthValidator(t){return r=>{const p=r.value;return p&&p.length<=t?null:{maxLengthExceeded:!0}}}alphanumericValidator(){return t=>/^[a-zA-Z0-9 *]*$/.test(t.value)?null:{invalidCharacter:!0}}specificPatternValidator(){return t=>/^\d{0,4}$/.test(t.value)?null:{invalidPattern:!0}}emailValidator(){return t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)?null:{invalidEmail:!0}}dateValidator(){return t=>/^\d{4}-\d{2}-\d{2}$/.test(t.value)?null:{invalidDate:!0}}startingCustomerValidator(){return t=>{const r=t.value;return/^\d{0,4}$/.test(r)&&r.length<=4||"*FIRST"===r?null:{invalidStartingCustomer:!0}}}endingCustomerValidator(){return t=>{const r=t.value;return/^\d{0,4}$/.test(r)&&r.length<=4||"*LAST"===r?null:{invalidEndingCustomer:!0}}}endingBuildingNumber(){return t=>{const r=t.value;return/^\d{0,3}$/.test(r)&&r.length<=4||"*LAST"===r?null:{invalidEndingBuildingNumber:!0}}}RevenueDistReport(){const t=this.form.value;"*FIRST"===t.StartingCustomer&&(t.StartingCustomer="0"),"*LAST"===t.EndingCustomer&&(t.EndingCustomer="9999"),"*LAST"===t.EndingBuildingNumber&&(t.EndingBuildingNumber="999"),this.LedgerCodesServiceSubscription&&this.LedgerCodesServiceSubscription.unsubscribe(),this.LedgerCodesServiceSubscription=this.LedgerCodesService.RevenueDistReport(t.LedgerCode,t.LedgerCodeSuffix,t.StartDate,t.EndDate,t.StartingCustomer,t.StartingCustomerSuffix,t.StartingCustomerSuffix2,t.EndingCustomer,t.EndingCustomerSuffix,t.EndingCustomerSuffix2,t.StartingBuildingNumber,t.EndingBuildingNumber,t.OutPut,t.Email).subscribe(r=>{const E=r[0].data[r[0].data.length-1].value;"Successfully Submitted"===E?(this.successMessage(E),this.router.navigate(["/main-nav/ledgerCode/revenue-report"])):this.failureMessage(E)})}successMessage(t){C().fire(t,"","success")}failureMessage(t){C().fire(t,"","error")}onBack(){this.router.navigate(["/main-nav/ledgerCode/read"])}}return u.\u0275fac=function(t){return new(t||u)(e.Y36(g.qu),e.Y36(v.F0),e.Y36(v.gz),e.Y36(h.f))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-ledgercode-rev-report"]],standalone:!0,features:[e.jDz],decls:62,vars:18,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","LedgerCode"],[4,"ngIf"],["matInput","","formControlName","LedgerCodeSuffix"],["type","date","matInput","","formControlName","StartDate"],["type","date","matInput","","formControlName","EndDate"],["appearance","outline","formControlName","StartingCustomer","label","Starting Customer ",3,"options"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","StartingCustomerSuffix"],["matInput","","formControlName","StartingCustomerSuffix2"],["appearance","outline","formControlName","EndingCustomer","label","Ending Customer ",3,"options"],["matInput","","formControlName","EndingCustomerSuffix"],["matInput","","formControlName","EndingCustomerSuffix2"],["appearance","outline","formControlName","StartingBuildingNumber","label","Starting Building Number  ",3,"options"],["appearance","outline","formControlName","EndingBuildingNumber","label","Ending Building Number  ",3,"options"],["appearance","outline","formControlName","OutPut","label","Output Type",1,"full-width",3,"options"],["appearance","outline","class","full-width2",4,"ngIf"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"],["matInput","","formControlName","Email","placeholder","Enter your email"]],template:function(t,r){if(1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),e.NdJ("click",function(){return r.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before "),e.qZA()(),e._uU(6," 12 Ledger Codes Revenue Report "),e.qZA()(),e.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Ledger Code "),e.qZA(),e._UZ(14,"input",8),e.YNc(15,m,2,0,"mat-error",9),e.YNc(16,f,2,0,"mat-error",9),e.qZA(),e.TgZ(17,"mat-form-field",7)(18,"mat-label"),e._uU(19,"Ledger Code Suffix "),e.qZA(),e._UZ(20,"input",10),e.YNc(21,R,2,0,"mat-error",9),e.YNc(22,S,2,0,"mat-error",9),e.qZA(),e.TgZ(23,"mat-form-field",7)(24,"mat-label"),e._uU(25,"Start Date:"),e.qZA(),e._UZ(26,"input",11),e.YNc(27,D,2,0,"mat-error",9),e.YNc(28,O,2,0,"mat-error",9),e.qZA(),e.TgZ(29,"mat-form-field",7)(30,"mat-label"),e._uU(31,"End Date"),e.qZA(),e._UZ(32,"input",12),e.YNc(33,Z,2,0,"mat-error",9),e.YNc(34,P,2,0,"mat-error",9),e.qZA(),e._UZ(35,"custom-input-autocomplete",13),e.YNc(36,J,2,0,"mat-error",9),e.TgZ(37,"mat-form-field",14)(38,"mat-label"),e._uU(39," Starting Customer Suffix "),e.qZA(),e._UZ(40,"input",15),e.qZA(),e.TgZ(41,"mat-form-field",14)(42,"mat-label"),e._uU(43," Starting Customer Suffix II "),e.qZA(),e._UZ(44,"input",16),e.qZA(),e._UZ(45,"custom-input-autocomplete",17),e.YNc(46,W,2,0,"mat-error",9),e.TgZ(47,"mat-form-field",14)(48,"mat-label"),e._uU(49,"Ending Customer Suffix"),e.qZA(),e._UZ(50,"input",18),e.qZA(),e.TgZ(51,"mat-form-field",14)(52,"mat-label"),e._uU(53,"Ending Customer Suffix II"),e.qZA(),e._UZ(54,"input",19),e.qZA(),e._UZ(55,"custom-input-autocomplete",20)(56,"custom-input-autocomplete",21),e.YNc(57,q,2,0,"mat-error",9),e._UZ(58,"custom-input-autocomplete",22),e.YNc(59,j,5,1,"mat-form-field",23),e.qZA()(),e.TgZ(60,"button",24),e.NdJ("click",function(){return r.RevenueDistReport()}),e._uU(61,"Submit"),e.qZA()()()()),2&t){let p,E,U,M,N,B,x,V,K,y,$;e.xp6(8),e.Q6J("formGroup",r.form),e.xp6(7),e.Q6J("ngIf",null==(p=r.form.get("LedgerCode"))?null:p.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(E=r.form.get("LedgerCode"))?null:E.hasError("invalidPattern")),e.xp6(5),e.Q6J("ngIf",null==(U=r.form.get("LedgerCodeSuffix"))?null:U.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(M=r.form.get("LedgerCodeSuffix"))?null:M.hasError("invalidPattern")),e.xp6(5),e.Q6J("ngIf",null==(N=r.form.get("StartDate"))?null:N.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(B=r.form.get("StartDate"))?null:B.hasError("invalidDate")),e.xp6(5),e.Q6J("ngIf",null==(x=r.form.get("EndDate"))?null:x.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(V=r.form.get("EndDate"))?null:V.hasError("invalidDate")),e.xp6(1),e.Q6J("options",r.StartingCustomerOptions),e.xp6(1),e.Q6J("ngIf",null==(K=r.form.get("StartingCustomer"))?null:K.hasError("invalidStartingCustomer")),e.xp6(9),e.Q6J("options",r.EndingCustomerOptions),e.xp6(1),e.Q6J("ngIf",null==(y=r.form.get("EndingCustomer"))?null:y.hasError("invalidEndingCustomer")),e.xp6(9),e.Q6J("options",r.StartingBuildingNumberOptions),e.xp6(1),e.Q6J("options",r.EndingBuildingNumberOptions),e.xp6(1),e.Q6J("ngIf",null==($=r.form.get("EndingBuildingNumber"))?null:$.hasError("invalidEndingBuildingNumber")),e.xp6(1),e.Q6J("options",r.OutputOptions),e.xp6(1),e.Q6J("ngIf",r.shouldDisplayEmailField())}},dependencies:[T.m,I.O5,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u,o.Hw,i.lW,s.TO,s.KE,s.hX,l.Nt,d.a8,d.dk,d.dn,d.n5,A.j,n.L]}),u})()}}]);