"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[9110],{9110:(W,g,o)=>{o.r(g),o.d(g,{AddSerialLocationAuditComponent:()=>M});var v=o(70879),d=o(7155),A=o(98739),L=o(35226),f=o.n(L),n=o(24006),h=o(65412),Q=o(48529),t=o(94650),C=o(81316),S=o(19132),b=o(97392),y=o(4859),p=o(59549),T=o(44144),c=o(73546);let D=(()=>{class a{constructor(e,i,r,u,m){this.data=e,this.dialogRef=i,this.serialLocationAuditService=r,this.fb=u,this.router=m}ngOnInit(){this.form=this.fb.group({serial:this.data[1]?.SDSRL||"",quantity:[this.data[1]?.SDQTY||"",[n.kI.required]]})}ngOnDestroy(){this.overrideQuantitySubscription&&this.overrideQuantitySubscription.unsubscribe()}overrideQuantity(){const e=this.form.value;this.overrideQuantitySubscription&&this.overrideQuantitySubscription.unsubscribe(),this.overrideQuantitySubscription=this.serialLocationAuditService.overrideQuantity(this.data[0].LCSTOR??0,this.data[0].LCSTRX??"",this.data[0].LCITEM??"",this.data[0].LCLTC1??"",this.data[0].LCLTC2??"",this.data[0].LCLTC3??"",this.data[1]?.WBLDG??"",this.data[1]?.WFLOR??0,this.data[1]?.WAISL??"",this.data[1]?.WSLOT??"",this.data[0].WLQTY??0,this.data[1]?.SDSRL??"",e.serial??"",this.data[1]?.SDQTY??0,e.quantity??0).subscribe(r=>{const u=r[0]?.data?.length,m=u?r[0]?.data[u-1]?.value:void 0;m?.toUpperCase()===Q.R.updateMsg.toUpperCase()?(this.successMessage(m),this.closeDialog(),this.router.navigateByUrl("/main-nav/serial-location-audit/add/read",{state:this.data[0]})):this.failureMessage(m)})}successMessage(e){f().fire(e,"","success")}failureMessage(e){f().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(h.WI),t.Y36(h.so),t.Y36(C.B),t.Y36(n.qu),t.Y36(S.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-override-quantity"]],standalone:!0,features:[t.jDz],decls:22,vars:2,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","serial"],["matInput","","required","","formControlName","quantity"],["mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Override Quantity"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Serial"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Quantity"),t.qZA(),t._UZ(19,"input",10),t.qZA()()(),t.TgZ(20,"button",11),t.NdJ("click",function(){return i.overrideQuantity()}),t._uU(21," Override Quantity "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",i.form),t.xp6(11),t.Q6J("disabled",!(i.form.valid&&i.form.dirty)))},dependencies:[v.m,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,b.Hw,y.lW,p.KE,p.hX,T.Nt,c.a8,c.dk,c.dn,c.n5]}),a})();function U(a,l){1&a&&(t.TgZ(0,"th",24),t._uU(1,"Serial Number"),t.qZA())}function _(a,l){if(1&a&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.xp6(1),t.Oqu(e.SDSRL)}}function N(a,l){1&a&&(t.TgZ(0,"th",24),t._uU(1,"Quantity"),t.qZA())}function I(a,l){if(1&a&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&a){const e=l.$implicit;t.xp6(1),t.Oqu(e.SDQTY)}}function q(a,l){1&a&&t._UZ(0,"th",26)}function O(a,l){if(1&a){const e=t.EpF();t.TgZ(0,"td",25)(1,"div",27)(2,"button",28)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",29)(6,"li")(7,"button",30),t.NdJ("click",function(){const u=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.overrideQuantity(u))}),t.TgZ(8,"mat-icon",31),t._uU(9,"edit_note"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Override Quantity"),t.qZA()()()()()()}}function Y(a,l){1&a&&t._UZ(0,"tr",32)}function w(a,l){1&a&&t._UZ(0,"tr",33)}const R=function(){return[8,16,24]};let M=(()=>{class a{constructor(e,i,r,u){this.fb=e,this.matDialog=i,this.router=r,this.serialLocationAuditService=u,this.user=localStorage.getItem("userName"),this.searchTextDisplay=!1,this.INITIAL_PAGE=1,this.DEFAULT_PAGE_SIZE=8,this.pageSize=8,this.totalRecords=0,this.displayedColumns=["SerialNumber","Quantity","Actions"],this.duplicateSource=[]}ngOnInit(){this.element=history.state;const e=[this.element.LCLTC1,this.element.LCLTC2,this.element.LCLTC3].filter(i=>i&&i.trim()).join(" || ");this.form=this.fb.group({storer:{value:this.element.LCSTOR,disabled:!0},suffix:{value:this.element.WSSFX,disabled:!0},item:{value:this.element.LCITEM,disabled:!0},itemDescription:{value:this.element.WITDSC,disabled:!0},lot1:{value:this.element.LCLTC1,disabled:!0},lot2:{value:this.element.LCLTC2,disabled:!0},lot3:{value:this.element.LCLTC3,disabled:!0},lots:{value:e,disabled:!0},quantity:{value:this.element.WLQTY,disabled:!0},location:{value:this.element.location||"",disabled:!0},quantityPallet:{value:"",disabled:!0}}),this.getAddSerialData(this.pageSize,this.INITIAL_PAGE)}ngOnDestroy(){this.serialSubscription&&this.serialSubscription.unsubscribe()}getAddSerialData(e,i){this.serialSubscription&&this.serialSubscription.unsubscribe();const{storer:r,item:u,lot1:m,lot2:x,lot3:E,quantity:J,suffix:B,location:F}=this.form.getRawValue();this.serialSubscription=this.serialLocationAuditService.getaddSerial(this.user||"",r,B,u,m,x,E,J,F,e,i).subscribe(G=>{const Z=G?.[0]?.data?.[1]?.value;if(Z)try{const s=JSON.parse(Z);0===s.TotalRecords&&s.ErrorMessage&&s.ErrorMessage.trim()?this.failureMessage(s.ErrorMessage.trim()):s?.returnedData?(this.duplicateSource=s.returnedData,this.dataSource=new d.by(this.duplicateSource),this.dataSource.paginator=this.paginator,this.totalRecords=s.TotalRecords||0,void 0!==s.QtyperPallet&&this.form.get("quantityPallet")?.setValue(s.QtyperPallet)):s.ErrorMessage&&s.ErrorMessage.trim()&&this.failureMessage(s.ErrorMessage.trim())}catch(s){console.error("Error parsing response data:",s)}else console.error("Error fetching serial location audit data")})}onPaginateChange(e){this.pageSize=e.pageSize,this.getAddSerialData(e.pageSize,e.pageIndex+this.INITIAL_PAGE)}overrideQuantity(e){this.matDialog.open(D,{width:"1000px",maxHeight:"80vh",data:[this.element,e],autoFocus:!1})}onBack(){this.router.navigateByUrl("/main-nav/serial-location-audit/read",{state:this.element})}get lots(){return[this.form?.get("lot1")?.value,this.form?.get("lot2")?.value,this.form?.get("lot3")?.value].filter(e=>e&&e.trim()).join(" || ")}failureMessage(e){f().fire(e,"","error")}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(n.qu),t.Y36(h.uw),t.Y36(S.F0),t.Y36(C.B))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-add-serial-location-audit"]],viewQuery:function(e,i){if(1&e&&t.Gf(A.NW,5),2&e){let r;t.iGM(r=t.CRH())&&(i.paginator=r.first)}},standalone:!0,features:[t.jDz],decls:45,vars:6,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","storer"],["matInput","","formControlName","itemDescription"],["matInput","","formControlName","lots"],["matInput","","formControlName","quantity"],["matInput","","formControlName","quantityPallet"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","SerialNumber"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Quantity"],["matColumnDef","Actions"],["mat-header-cell","","class","tally_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"pageSizeOptions"],["paginator",""],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"tally_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return i.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Initial Serial Number Login"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Storer"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Item"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",7)(20,"mat-label"),t._uU(21,"Lots"),t.qZA(),t._UZ(22,"input",10),t.qZA(),t.TgZ(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"Quantity"),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.TgZ(27,"mat-form-field",7)(28,"mat-label"),t._uU(29,"Quantity per Pallet"),t.qZA(),t._UZ(30,"input",12),t.qZA()()()()(),t.TgZ(31,"table",13),t.ynx(32,14),t.YNc(33,U,2,0,"th",15),t.YNc(34,_,2,1,"td",16),t.BQk(),t.ynx(35,17),t.YNc(36,N,2,0,"th",15),t.YNc(37,I,2,1,"td",16),t.BQk(),t.ynx(38,18),t.YNc(39,q,1,0,"th",19),t.YNc(40,O,12,0,"td",16),t.BQk(),t.YNc(41,Y,1,0,"tr",20),t.YNc(42,w,1,0,"tr",21),t.qZA(),t._UZ(43,"mat-paginator",22,23),t.qZA()),2&e&&(t.xp6(8),t.Q6J("formGroup",i.form),t.xp6(23),t.Q6J("dataSource",i.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,R)))},dependencies:[v.m,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,A.NW,b.Hw,y.lW,p.KE,p.hX,T.Nt,c.a8,c.dk,c.dn,c.n5,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk]}),a})()}}]);