"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[31555],{31555:(W,p,r)=>{r.r(p),r.d(p,{CreateComponent:()=>S});var o=r(24006),_=r(48529),d=r(35226),c=r.n(d),g=r(70879),t=r(94650),Z=r(19132),T=r(15627),A=r(79979),f=r(36895),U=r(97392),C=r(4859),u=r(59549),q=r(44144),h=r(84385),b=r(3238),m=r(73546);function v(a,i){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Only "),t.TgZ(2,"strong"),t._uU(3,"numbers "),t.qZA(),t._uU(4," are allowed "),t.qZA())}function I(a,i){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Storer is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function E(a,i){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Received From is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function N(a,i){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Quantity is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}function D(a,i){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Only "),t.TgZ(2,"strong"),t._uU(3,"numbers"),t.qZA(),t._uU(4,"are allowed "),t.qZA())}function y(a,i){if(1&a&&(t.TgZ(0,"mat-option",64),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function O(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addTally())}),t._uU(1," Create "),t.qZA()}}let S=(()=>{class a{constructor(e,l,n,s,P){this.router=e,this.iHeaderSvc=l,this.fb=n,this.carrierSvc=s,this.route=P,this.result=[],this.carrierOptions=[],this.update=!0,this.minDate=(new Date).toLocaleDateString("fr-CA"),this.hasError=(R,M)=>this.form.controls[R].hasError(M)}ngOnInit(){localStorage.getItem("LoggedIn")?(this.user=localStorage.getItem("userName"),this.building=localStorage.getItem("building")):(this.user=_.R.user,this.building=_.R.building),this.form=this.fb.group({storer:["",[o.kI.required,o.kI.min(0),o.kI.pattern("[0-9]{1,10}")]],storerRef:[""],billTo:[""],billToSfx:[""],billToSfx2:[""],invoice:[""],building:[""],status:[""],loadType:["",[o.kI.required]],recptType:["",[o.kI.required]],recvdFrom:["",[o.kI.required]],qty:["",[o.kI.required,o.kI.min(0),o.kI.pattern("[0-9]{1,10}")]],schdldArrival:[""],carrier:[""],actualArrival:["",[o.kI.required]],schdldtime:[""],actualtime:[""],wgt:[""],pro:[""],car:[""],authorization:[""],seal1:[""],seal2:[""],invoiceDate:["",[o.kI.required]],broken1:[""],broken2:[""],returnValue:[""],notification:[""],specialCharge:[""],chargeType:[""]}),this.carrierSvc.getAllCarriers(this.user,1,50).subscribe(e=>{this.result=e;var l=this.result[0].data[1]?.value,n=JSON.parse(l);this.carrierSource=n.returnedData,console.log("ALL CARRIERS DATA FOR ORDER UPDATE 2 DROPDOWN :"),console.log(this.carrierSource);for(const s of this.carrierSource)this.carrierOptions.push(s.CRNUMB)}),this.route.params.subscribe(e=>{this.tallyId=e.id}),this.tallyId?(this.update=!0,this.getAllSubscription=this.iHeaderSvc.getAll(this.user,this.building).subscribe(e=>{})):this.update=!1}ngOnDestroy(){this.getAllSubscription&&this.getAllSubscription.unsubscribe(),this.getTallyHeadersSubscription&&this.getTallyHeadersSubscription.unsubscribe()}addTally(){var e=this.form.value;e.returnValue=e.returnValue||"N",e.broken1=e.broken1||"N",e.broken2=e.broken2||"N",e.specialCharge=e.specialCharge||"N",e.loadType=null!=e.loadType?e.loadType.toUpperCase():null,e.recptType=null!=e.recptType?e.recptType.toUpperCase():null,e.recvdFrom=null!=e.recvdFrom?e.recvdFrom.toUpperCase():null,this.result=this.iHeaderSvc.createTally(e.storer,e.storerRef,e.status,e.loadType,e.recptType,e.recvdFrom,e.qty,e.schdldArrival,e.carrier?e.carrier.toUpperCase():"",e.actualArrival,e.building,e.pro?e.pro.toUpperCase():"",e.wgt,this.user,e.schdldtime,e.actualtime,e.authorization?e.authorization.toUpperCase():"",e.car?e.car.toUpperCase():"",e.seal1?e.seal1.toUpperCase():"",e.seal2?e.seal2.toUpperCase():"",e.invoiceDate,e.returnValue,e.broken1,e.broken2,e.specialCharge,e.notification,e.chargeType,e.billTo,e.billToSfx,e.billToSfx2).subscribe(l=>{if(this.result=l,console.log(this.result),JSON.parse(this.result[0].data[1].value).success){const n=JSON.parse(this.result[0].data[1].value).returnedData.message;this.successMessage(n),this.router.navigate(["/main-nav/tallys/read"])}else{const n=JSON.parse(this.result[0].data[1].value).returnedData.message;this.failureMessage(n)}})}successMessage(e){c().fire(e,"","success"),this.router.navigate(["/main-nav/tallys/read"])}failureMessage(e){c().fire(e,"","error")}onBack(){this.router.navigate(["/main-nav/tallys/read"])}fetchHeaders(){return this.getTallyHeadersSubscription&&this.getTallyHeadersSubscription.unsubscribe(),this.iHeaderSvc.getTallyHeaders().subscribe(e=>{})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Z.F0),t.Y36(T.X),t.Y36(o.qu),t.Y36(A.C),t.Y36(Z.gz))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-create"]],standalone:!0,features:[t.jDz],decls:229,vars:9,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form","main-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","required","","formControlName","storer"],[4,"ngIf"],["matInput","","formControlName","storerRef",2,"text-transform","uppercase"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","billTo"],["matInput","","formControlName","billToSfx",2,"text-transform","uppercase"],["matInput","","formControlName","billToSfx2",2,"text-transform","uppercase"],["matInput","","formControlName","invoice"],["matInput","","formControlName","building","readonly",""],["formControlName","status",3,"disabled"],["value",""],["value","I"],["value","A"],["value","P"],["value","S"],["value","W"],["value","D"],["value","C"],["value","N"],["formControlName","loadType"],["value","F"],["formControlName","recptType"],["value","L"],["value","O"],["value","T"],["matInput","","required","","formControlName","recvdFrom",2,"text-transform","uppercase"],["matInput","","formControlName","qty"],["appearance","outline","formControlName","returnValue"],["value","Y"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","authorization",2,"text-transform","uppercase"],["matInput","","type","date","formControlName","schdldArrival"],["matInput","","type","time","formControlName","schdldtime"],["matInput","","type","date","formControlName","actualArrival","required",""],["matInput","","type","time","formControlName","actualtime","required",""],["matInput","","formControlName","pro",2,"text-transform","uppercase"],["formControlName","carrier","required",""],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"full-width","w-50"],["matInput","","formControlName","car",2,"text-transform","uppercase"],["matInput","","formControlName","seal1",2,"text-transform","uppercase"],["formControlName","broken1"],["matInput","","formControlName","seal2",2,"text-transform","uppercase"],["formControlName","broken2"],["formControlName","notification"],["value","E"],["matInput","","type","date","formControlName","invoiceDate"],["formControlName","specialCharge"],["matInput","","formControlName","wgt"],["formControlName","chargeType"],["value","H"],[1,"footer"],["type","reset","mat-raised-button","",1,"buttons","cancel-btn"],["class","buttons addButton new-tally-form-btn","type","submit","mat-raised-button","",3,"click",4,"ngIf"],[3,"value"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(e,l){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return l.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Tally Create"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Storer "),t.qZA(),t._UZ(14,"input",8),t.YNc(15,v,5,0,"mat-error",9),t.YNc(16,I,4,0,"mat-error",9),t.qZA(),t.TgZ(17,"mat-form-field",7)(18,"mat-label"),t._uU(19," Storer Reference "),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",11)(22,"label",12),t._uU(23,"Bill To"),t.qZA(),t.TgZ(24,"div",13)(25,"mat-form-field",7)(26,"mat-label"),t._uU(27,"Bill To"),t.qZA(),t._UZ(28,"input",14),t.qZA(),t.TgZ(29,"mat-form-field",7)(30,"mat-label"),t._uU(31,"Suffix"),t.qZA(),t._UZ(32,"input",15),t.qZA(),t.TgZ(33,"mat-form-field",7)(34,"mat-label"),t._uU(35," Suffix 2"),t.qZA(),t._UZ(36,"input",16),t.qZA()()(),t.TgZ(37,"mat-form-field",7)(38,"mat-label"),t._uU(39," Invoice "),t.qZA(),t._UZ(40,"input",17),t.qZA(),t.TgZ(41,"mat-form-field",7)(42,"mat-label"),t._uU(43," Building "),t.qZA(),t._UZ(44,"input",18),t.qZA(),t.TgZ(45,"mat-form-field",7)(46,"mat-label"),t._uU(47," Status "),t.qZA(),t.TgZ(48,"mat-select",19)(49,"mat-option",20),t._uU(50,"--select--"),t.qZA(),t.TgZ(51,"mat-option",21),t._uU(52," I - Intransit "),t.qZA(),t.TgZ(53,"mat-option",22),t._uU(54," A - Arrived (at dock) "),t.qZA(),t.TgZ(55,"mat-option",23),t._uU(56," P - Put Away "),t.qZA(),t.TgZ(57,"mat-option",24),t._uU(58," S - Submitted for W/R print "),t.qZA(),t.TgZ(59,"mat-option",25),t._uU(60," W - W/R printed "),t.qZA(),t.TgZ(61,"mat-option",26),t._uU(62," D - Deleted "),t.qZA(),t.TgZ(63,"mat-option",27),t._uU(64," C - Cancelled "),t.qZA(),t.TgZ(65,"mat-option",28),t._uU(66," N - Notified of Warehouse Receipt "),t.qZA()()(),t.TgZ(67,"mat-form-field",7)(68,"mat-label"),t._uU(69,"Load Type "),t.qZA(),t.TgZ(70,"mat-select",29)(71,"mat-option",20),t._uU(72,"--select--"),t.qZA(),t.TgZ(73,"mat-option",24),t._uU(74,"S = Slip Sheet "),t.qZA(),t.TgZ(75,"mat-option",30),t._uU(76,"F = Floor unloaded "),t.qZA(),t.TgZ(77,"mat-option",27),t._uU(78,"C = Clamp "),t.qZA(),t.TgZ(79,"mat-option",23),t._uU(80,"P = Pallet "),t.qZA()()(),t.TgZ(81,"mat-form-field",7)(82,"mat-label"),t._uU(83,"Receipt Type "),t.qZA(),t.TgZ(84,"mat-select",31)(85,"mat-option",20),t._uU(86,"--select--"),t.qZA(),t.TgZ(87,"mat-option",32),t._uU(88," L = Less than truckload "),t.qZA(),t.TgZ(89,"mat-option",27),t._uU(90," C = Car load "),t.qZA(),t.TgZ(91,"mat-option",24),t._uU(92," S = 20 Ft. Container "),t.qZA(),t.TgZ(93,"mat-option",33),t._uU(94," O = Container "),t.qZA(),t.TgZ(95,"mat-option",23),t._uU(96," P = Pallet"),t.qZA(),t.TgZ(97,"mat-option",34),t._uU(98," T = Truckload"),t.qZA()()(),t.TgZ(99,"mat-form-field",7)(100,"mat-label"),t._uU(101,"Received From "),t.qZA(),t._UZ(102,"input",35),t.YNc(103,E,4,0,"mat-error",9),t.qZA(),t.TgZ(104,"mat-form-field",7)(105,"mat-label"),t._uU(106,"Total Quantity "),t.qZA(),t._UZ(107,"input",36),t.YNc(108,N,4,0,"mat-error",9),t.YNc(109,D,5,0,"mat-error",9),t.qZA(),t.TgZ(110,"mat-form-field",7)(111,"mat-label"),t._uU(112,"Returned"),t.qZA(),t.TgZ(113,"mat-select",37)(114,"mat-option",20),t._uU(115,"--select--"),t.qZA(),t.TgZ(116,"mat-option",38),t._uU(117,"Yes"),t.qZA(),t.TgZ(118,"mat-option",28),t._uU(119,"No"),t.qZA()()(),t.TgZ(120,"mat-form-field",39)(121,"mat-label"),t._uU(122,"Authorization "),t.qZA(),t._UZ(123,"input",40),t.qZA(),t.TgZ(124,"mat-form-field",7)(125,"mat-label"),t._uU(126,"Schedule Arrival date"),t.qZA(),t._UZ(127,"input",41),t.qZA(),t.TgZ(128,"mat-form-field",7)(129,"mat-label"),t._uU(130,"Schedule Arrival time"),t.qZA(),t._UZ(131,"input",42),t.qZA(),t.TgZ(132,"mat-form-field",7)(133,"mat-label"),t._uU(134,"Actual Arrival date"),t.qZA(),t._UZ(135,"input",43),t.qZA(),t.TgZ(136,"mat-form-field",7)(137,"mat-label"),t._uU(138,"Actual Arrival time"),t.qZA(),t._UZ(139,"input",44),t.qZA(),t.TgZ(140,"mat-form-field",7)(141,"mat-label"),t._uU(142,"Pro Number"),t.qZA(),t._UZ(143,"input",45),t.qZA(),t.TgZ(144,"mat-form-field",7)(145,"mat-label"),t._uU(146,"Carrier"),t.qZA(),t.TgZ(147,"mat-select",46),t.YNc(148,y,2,2,"mat-option",47),t.qZA()(),t.TgZ(149,"mat-form-field",48)(150,"mat-label"),t._uU(151,"Car/Trailer No"),t.qZA(),t._UZ(152,"input",49),t.qZA(),t.TgZ(153,"mat-form-field",7)(154,"mat-label"),t._uU(155,"Seal 1"),t.qZA(),t._UZ(156,"input",50),t.qZA(),t.TgZ(157,"mat-form-field",7)(158,"mat-label"),t._uU(159,"Broken"),t.qZA(),t.TgZ(160,"mat-select",51)(161,"mat-option",20),t._uU(162,"--select--"),t.qZA(),t.TgZ(163,"mat-option",38),t._uU(164,"Yes"),t.qZA(),t.TgZ(165,"mat-option",28),t._uU(166,"No"),t.qZA()()(),t.TgZ(167,"mat-form-field",7)(168,"mat-label"),t._uU(169,"Seal 2"),t.qZA(),t._UZ(170,"input",52),t.qZA(),t.TgZ(171,"mat-form-field",7)(172,"mat-label"),t._uU(173,"Broken"),t.qZA(),t.TgZ(174,"mat-select",53)(175,"mat-option",20),t._uU(176,"--select--"),t.qZA(),t.TgZ(177,"mat-option",38),t._uU(178,"Yes"),t.qZA(),t.TgZ(179,"mat-option",28),t._uU(180,"No"),t.qZA()()(),t.TgZ(181,"mat-form-field",7)(182,"mat-label"),t._uU(183,"Notification"),t.qZA(),t.TgZ(184,"mat-select",54)(185,"mat-option",20),t._uU(186,"--select--"),t.qZA(),t.TgZ(187,"mat-option",26),t._uU(188," D - Receiving Documents exist"),t.qZA(),t.TgZ(189,"mat-option",55),t._uU(190," E - Electronic/EDI "),t.qZA(),t.TgZ(191,"mat-option",28),t._uU(192,"N - No notification was received"),t.qZA()()(),t.TgZ(193,"mat-form-field",7)(194,"mat-label"),t._uU(195,"Invoice Date"),t.qZA(),t._UZ(196,"input",56),t.qZA(),t.TgZ(197,"mat-form-field",7)(198,"mat-label"),t._uU(199,"Special Charge"),t.qZA(),t.TgZ(200,"mat-select",57)(201,"mat-option",20),t._uU(202,"--select--"),t.qZA(),t.TgZ(203,"mat-option",38),t._uU(204,"Yes"),t.qZA(),t.TgZ(205,"mat-option",28),t._uU(206,"No"),t.qZA()()(),t.TgZ(207,"mat-form-field",7)(208,"mat-label"),t._uU(209,"Override Weight"),t.qZA(),t._UZ(210,"input",58),t.qZA(),t.TgZ(211,"mat-form-field",7)(212,"mat-label"),t._uU(213," Charge Type "),t.qZA(),t.TgZ(214,"mat-select",59)(215,"mat-option",20),t._uU(216,"--select--"),t.qZA(),t.TgZ(217,"mat-option",28),t._uU(218,"N = No Charge W/R "),t.qZA(),t.TgZ(219,"mat-option",26),t._uU(220," D = Distribution Only W/R "),t.qZA(),t.TgZ(221,"mat-option",24),t._uU(222,"S = Storage Only W/R "),t.qZA(),t.TgZ(223,"mat-option",60),t._uU(224," H = Handling Only W/R "),t.qZA()()()()(),t.TgZ(225,"div",61)(226,"button",62),t._uU(227,"Cancel"),t.qZA(),t.YNc(228,O,2,0,"button",63),t.qZA()()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",l.form),t.xp6(7),t.Q6J("ngIf",l.form.controls.storer.hasError("pattern")),t.xp6(1),t.Q6J("ngIf",l.form.controls.storer.hasError("required")),t.xp6(32),t.Q6J("disabled",!0),t.xp6(55),t.Q6J("ngIf",l.form.controls.recvdFrom.hasError("required")),t.xp6(5),t.Q6J("ngIf",l.form.controls.storer.hasError("required")),t.xp6(1),t.Q6J("ngIf",l.form.controls.qty.hasError("pattern")),t.xp6(39),t.Q6J("ngForOf",l.carrierOptions),t.xp6(80),t.Q6J("ngIf",!l.update))},dependencies:[g.m,f.sg,f.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,U.Hw,C.lW,u.TO,u.KE,u.hX,q.Nt,h.gD,b.ey,m.a8,m.dk,m.dn,m.n5]}),a})()}}]);