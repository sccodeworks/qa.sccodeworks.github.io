"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[61749,51860,10599],{51860:(x,O,r)=>{r.d(O,{c:()=>A});var Z=r(80529),h=r(75625),_=r(70262),m=r(62843),E=r(92340),T=r(94650);let A=(()=>{class d{constructor(t){this.httpClient=t,this.url=E.N.API_BASE_URL,this.apply="/Payments/read/Apply?",this.httpHeader={headers:new Z.WM({"Content-Type":"application/json"})}}getPayments(t,n,o,l,p,g,y,q,f,U,S,I){return this.httpClient.get(this.url+"/Payments/read?",{params:{user:t,customer:n??"",customersuffixone:o??"",customersuffixtwo:l??"",checknumber:p??"",startdate:g??"",enddate:y??"",paymentno:q??"",refno:f??"",status:U??"",recordsPerPage:S??"",pageNo:I??""}})}getPaymentInquiry(t,n,o,l){return this.httpClient.get(this.url+`/Payments/read/Inquiry?user=${t}&paymentno=${n}&recordsPerPage=${o??""}&pageNo=${l??""}`)}getPaymentDetailInquiry(t,n,o,l){return this.httpClient.get(this.url+`/Payments/read/Detail/Inquiry?user=${t}&paymentno=${n}&recordsPerPage=${o??""}&pageNo=${l??""}`)}getPaymentApply(t,n,o,l,p,g,y){return this.httpClient.get(this.url+this.apply+`?user=${t}&PaymentNumber=${n}&PHCUST=${o}&PHCSFX=${l}&PHCSF2=${p}&recordsPerPage=${g??""}&pageNo=${y??""}`)}getPaymentApplyDetail(t,n,o,l){return this.httpClient.get(this.url+`/Payments/read/Apply/Details?user=${t}&PaymentNumber=${n}&recordsPerPage=${o??""}&pageNo=${l??""}`)}createpayments(t,n,o,l,p,g,y,q,f,U,S){return this.httpClient.post(this.url+"/Payments/create",{PHTDAT:t,PHCUST:n,PHCSFX:o,PHCSF2:l,PHCHK:p,PHREF:g,PHDESC:y,PHAMT:q,PHDATE:f,PHDDAT:U,user:S}).pipe((0,h.X)(1),(0,_.K)(this.httpError))}updatepayments(t,n,o,l,p,g,y,q,f,U,S,I,b,M){return this.httpClient.put(this.url+"/Payments/update",{PHPAY:t,PHTDAT:n,PHCUST:o,PHCSFX:l,PHCSF2:p,PHCHK:g,PHREF:y,PHDESC:q,PHAMT:f,PHDATE:U,PHDDAT:S,PHSTAT:I,PHTRNC:b,user:M}).pipe((0,h.X)(1),(0,_.K)(this.httpError))}getPaymentComment(t,n,o,l){return this.httpClient.get(this.url+`/Payments/comments/read?user=${t}&key=${n}&recordsPerPage=${o??""}&pageNo=${l??""}`)}updateComment(t,n,o,l,p,g){return this.httpClient.put(this.url+"/Payments/comments/update",{user:t,fileID:n,key:o,sub:l,comment:p,seq:g}).pipe((0,h.X)(1),(0,_.K)(this.httpError))}createComment(t,n,o,l,p){return this.httpClient.post(this.url+"/Payments/comments/create",{user:t,fileID:n,key:o,sub:l,comment:p}).pipe((0,h.X)(1),(0,_.K)(this.httpError))}deleteComment(t,n,o,l,p){return this.httpClient.delete(this.url+`/Payments/comments/delete?user=${t}&fileID=${n}&key=${o}&sub=${l}&seq=${p}`)}PaymentsPrint(t,n){return this.httpClient.put(this.url+"/Payments/Print",{PaymentNumber:t,user:n}).pipe((0,h.X)(1),(0,_.K)(this.httpError))}PaymentsRecal(t,n){return this.httpClient.put(this.url+"/Payments/Recalculate",{PaymentNumber:t,user:n}).pipe((0,h.X)(1),(0,_.K)(this.httpError))}PaymentDelete(t,n){return this.httpClient.delete(this.url+`/Payments/delete?user=${t}&PaymentNum=${n}`)}httpError(t){let n="";return n=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(n),(0,m._)(()=>new Error(n))}}return d.\u0275fac=function(t){return new(t||d)(T.LFG(Z.eN))},d.\u0275prov=T.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},61749:(x,O,r)=>{r.r(O),r.d(O,{WwPaymentsDetailinquiryComponent:()=>lt});var Z=r(15861),h=r(65412),_=r(98739),m=r(7155),E=r(77579),T=r(78372),A=r(71884),d=r(70879),c=r(36895),t=r(94650),n=r(24006),o=r(19132),l=r(51860),p=r(97392),g=r(4859),y=r(59549),q=r(44144),f=r(73546);function U(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1," Status "),t.qZA())}function S(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.PDSTAT)}}function I(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"Invoice Number"),t.qZA())}function b(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.Wkinv)}}function M(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"Sequence Number"),t.qZA())}function R(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.PDISEQ)}}function L(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"Invoice Date"),t.qZA())}function B(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.AHDATE)}}function H(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"TT"),t.qZA())}function Y(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.AHTRNC)}}function K(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"TC"),t.qZA())}function z(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.AHTYPE)}}function Q(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"Customer"),t.qZA())}function J(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.AHCUST)}}function k(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"Ledger Code"),t.qZA())}function F(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.ADLEGC)}}function j(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"Building Number"),t.qZA())}function G(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.ADBLDG)}}function X(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"Original Line Amount"),t.qZA())}function V(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu("$"+a.ADAMT)}}function tt(e,i){1&e&&(t.TgZ(0,"th",47),t._uU(1,"Paid Amount"),t.qZA())}function et(e,i){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu("$"+a.PDAMT)}}function at(e,i){1&e&&t._UZ(0,"tr",49)}function nt(e,i){1&e&&t._UZ(0,"tr",50)}function it(e,i){1&e&&(t.TgZ(0,"div",51),t._UZ(1,"img",52),t.TgZ(2,"h3",53),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",54),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}function rt(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" Applied Total: $",void 0!==a.AppliedTotal?a.AppliedTotal:t.xi3(2,1,0,"1.2-2"),"")}}function st(e,i){if(1&e&&(t._uU(0),t.ALo(1,"number")),2&e){const a=t.oxw();t.hij("Applied Total : $",void 0!==a.AppliedTotal?a.AppliedTotal:t.xi3(1,1,0,"1.2-2"),"")}}const ot=function(){return[8,16,24]};let lt=(()=>{class e{constructor(a,s,u,P,v,D,N){this.data=a,this.fb=s,this.dialogRef=u,this.matDialog=P,this.router=v,this.PaymentsSvc=D,this.decimalPipe=N,this.displayedColumns=["Status","InvoiceNumber","SequenceNumber","InvoiceDate","TT","TC","Customer","LedgerCode","BuildingNumber","OriginalLineAmount","PaidAmount"],this.user=localStorage.getItem("userName"),this.searchTextDisplay=!1,this.duplicateSource=[],this.searchInput$=new E.x,this.isSearchMode=!1,this.pageSize=8,this.totalRecords=0,this.pageNumber=1,this.allData=[],this.filteredData=[],this.pageData=[],this.isLoading=!0,this.noData=!1}ngOnInit(){this.paymentno=this.data.WKPAY,this.form=this.fb.group({PHPAY:{value:this.data.WKPAY,disabled:!0},PHDATE:{value:this.data.PHDATE,disabled:!0},PHCHK:{value:this.data.WKCHK,disabled:!0},PHTDAT:{value:this.data.PHTDAT,disabled:!0},PHREF:{value:this.data.PHREF,disabled:!0},PHDDAT:{value:this.data.PHDDAT,disabled:!0},PHDESC:{value:this.data.PHDESC,disabled:!0},PHSTAT:{value:this.data.PHSTAT,disabled:!0},TTDESC:{value:this.data.TTDESC,disabled:!0},PHAMT:[{value:"$"+this.decimalPipe.transform(this.data.PHAMT,"1.2-2"),disabled:!0}],OCNAM:{value:this.data.PHCUST,disabled:!0},PHUBAL:[{value:"$"+this.decimalPipe.transform(this.data.PHUBAL,"1.2-2"),disabled:!0}]}),this.getDetailPaymentinquiry(this.pageSize,this.pageNumber),this.searchInput$.pipe((0,T.b)(500),(0,A.x)()).subscribe(a=>{this.handleSearch(a)})}ngOnDestroy(){this.getAll2Subscription&&this.getAll2Subscription.unsubscribe()}getDetailPaymentinquiry(a,s){this.getAll2Subscription&&this.getAll2Subscription.unsubscribe(),this.isLoading=!0,this.noData=!1,this.dataSource=new m.by([]),this.getAll2Subscription=this.PaymentsSvc.getPaymentDetailInquiry(this.user,this.paymentno,a,s).subscribe({next:u=>{var v=JSON.parse(u[0].data[1].value);this.duplicateSource=v.returnedData||[];var D=this.duplicateSource;this.TransType=D?.[0]?.TTDESC,this.TransDate=D?.[0]?.PHTDAT,this.payingcust=D?.[0]?.WKOCNAM;let N=0;for(let W=0;W<D.length;W++)N+=Number(D[W].PDAMT)||0;this.AppliedTotal=N;const C=this.duplicateSource||[];this.totalRecords=v?.Totalrecords??v?.TotalRecords??C.length,this.dataSource.data=C,this.isLoading=!1,this.noData=0===C.length,this.paginator&&(this.paginator.length=this.totalRecords,this.paginator.pageSize=a??this.pageSize)},error:()=>this.handlePaymentDetailInquiryNoData()})}applyGlobalFilterInput(a){this.searchInput$.next(a)}handleSearch(a){if(!(a=a.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.getDetailPaymentinquiry(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(a,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}loadPage(a){const s=(a-1)*this.pageSize;this.pageData=this.filteredData.slice(s,s+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=a-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(a){this.pageSize=a.pageSize,this.isSearchMode?this.loadPage(a.pageIndex+1):this.getDetailPaymentinquiry(a.pageSize,a.pageIndex+1)}getSearchStrategy(a){return a<=1500?{chunkSize:300,maxCalls:4}:a<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}loadSearchChunks(a,s){var u=this;return(0,Z.Z)(function*(){const{chunkSize:P,maxCalls:v}=u.getSearchStrategy(u.totalRecords||0);let D=1,N=0,C=[];for(;N<v;){const w=(yield u.PaymentsSvc.getPaymentDetailInquiry(u.user,u.paymentno,P,D).toPromise())?.[0]?.data?.[1]?.value||"{}",$=JSON.parse(w)?.returnedData||[],ut=$.filter(mt=>Object.values(mt).some(pt=>String(pt).toLowerCase().includes(a)));if(C.push(...ut),C.length>0||$.length<P)break;D++,N++}u.allData=C,u.filteredData=C,u.totalRecords=C.length,s?.()})()}handlePaymentDetailInquiryNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new m.by([])}closeDialog(){this.dialogRef.close()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(h.WI),t.Y36(n.qu),t.Y36(h.so),t.Y36(h.uw),t.Y36(o.F0),t.Y36(l.c),t.Y36(c.JJ))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-ww-payments-detailinquiry"]],viewQuery:function(a,s){if(1&a&&t.Gf(_.NW,5),2&a){let u;t.iGM(u=t.CRH())&&(s.paginator=u.first)}},standalone:!0,features:[t._Bn([c.JJ]),t.jDz],decls:113,vars:14,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","PHPAY"],["readonly","","matInput","","formControlName","PHDATE"],["readonly","","matInput","","formControlName","PHCHK"],["disabled","","matInput","",3,"value"],["readonly","","matInput","","formControlName","PHREF"],["readonly","","matInput","","formControlName","PHDDAT"],["readonly","","matInput","","formControlName","PHDESC"],["readonly","","matInput","","formControlName","PHSTAT"],["readonly","","matInput","","formControlName","PHAMT"],["readonly","","matInput","","formControlName","PHUBAL"],[2,"white-space","nowrap"],["mat-table","","id","myTable",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","InvoiceNumber"],["matColumnDef","SequenceNumber"],["matColumnDef","InvoiceDate"],["matColumnDef","TT"],["matColumnDef","TC"],["matColumnDef","Customer"],["matColumnDef","LedgerCode"],["matColumnDef","BuildingNumber"],["matColumnDef","OriginalLineAmount"],["matColumnDef","PaidAmount"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],[1,"table-summary"],[1,"form-info-message"],[1,"align-right"],[4,"ngIf","ngIfElse"],["defaultPaid",""],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(a,s){if(1&a&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Payment Detail Inquiry"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return s.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"mat-icon",5),t._uU(11,"search"),t.qZA(),t.TgZ(12,"input",6),t.NdJ("input",function(P){return s.applyGlobalFilterInput(P.target.value)}),t.qZA()()(),t.TgZ(13,"mat-card-content",7)(14,"form",8)(15,"div",9)(16,"div",10)(17,"mat-form-field",11)(18,"mat-label"),t._uU(19,"Payment Number"),t.qZA(),t._UZ(20,"input",12),t.qZA(),t.TgZ(21,"mat-form-field",11)(22,"mat-label"),t._uU(23,"Payment Date"),t.qZA(),t._UZ(24,"input",13),t.qZA(),t.TgZ(25,"mat-form-field",11)(26,"mat-label"),t._uU(27,"Check Number"),t.qZA(),t._UZ(28,"input",14),t.qZA(),t.TgZ(29,"mat-form-field",11)(30,"mat-label"),t._uU(31,"Transaction Date"),t.qZA(),t._UZ(32,"input",15),t.qZA(),t.TgZ(33,"mat-form-field",11)(34,"mat-label"),t._uU(35,"Reference Number"),t.qZA(),t._UZ(36,"input",16),t.qZA(),t.TgZ(37,"mat-form-field",11)(38,"mat-label"),t._uU(39,"Deposit Date"),t.qZA(),t._UZ(40,"input",17),t.qZA(),t.TgZ(41,"mat-form-field",11)(42,"mat-label"),t._uU(43,"Description"),t.qZA(),t._UZ(44,"input",18),t.qZA(),t.TgZ(45,"mat-form-field",11)(46,"mat-label"),t._uU(47,"Status"),t.qZA(),t._UZ(48,"input",19),t.qZA(),t.TgZ(49,"mat-form-field",11)(50,"mat-label"),t._uU(51,"Trans Type"),t.qZA(),t._UZ(52,"input",15),t.qZA(),t.TgZ(53,"mat-form-field",11)(54,"mat-label"),t._uU(55,"Payment Amount"),t.qZA(),t._UZ(56,"input",20),t.qZA(),t.TgZ(57,"mat-form-field",11)(58,"mat-label"),t._uU(59,"Paying Customer"),t.qZA(),t._UZ(60,"input",15),t.qZA(),t.TgZ(61,"mat-form-field",11)(62,"mat-label"),t._uU(63,"Unapplied Balance"),t.qZA(),t._UZ(64,"input",21),t.qZA()()()()(),t.TgZ(65,"label",22),t._uU(66,"Payment Application Register"),t.qZA(),t._UZ(67,"br"),t.TgZ(68,"table",23),t.ynx(69,24),t.YNc(70,U,2,0,"th",25),t.YNc(71,S,2,1,"td",26),t.BQk(),t.ynx(72,27),t.YNc(73,I,2,0,"th",25),t.YNc(74,b,2,1,"td",26),t.BQk(),t.ynx(75,28),t.YNc(76,M,2,0,"th",25),t.YNc(77,R,2,1,"td",26),t.BQk(),t.ynx(78,29),t.YNc(79,L,2,0,"th",25),t.YNc(80,B,2,1,"td",26),t.BQk(),t.ynx(81,30),t.YNc(82,H,2,0,"th",25),t.YNc(83,Y,2,1,"td",26),t.BQk(),t.ynx(84,31),t.YNc(85,K,2,0,"th",25),t.YNc(86,z,2,1,"td",26),t.BQk(),t.ynx(87,32),t.YNc(88,Q,2,0,"th",25),t.YNc(89,J,2,1,"td",26),t.BQk(),t.ynx(90,33),t.YNc(91,k,2,0,"th",25),t.YNc(92,F,2,1,"td",26),t.BQk(),t.ynx(93,34),t.YNc(94,j,2,0,"th",25),t.YNc(95,G,2,1,"td",26),t.BQk(),t.ynx(96,35),t.YNc(97,X,2,0,"th",25),t.YNc(98,V,2,1,"td",26),t.BQk(),t.ynx(99,36),t.YNc(100,tt,2,0,"th",25),t.YNc(101,et,2,1,"td",26),t.BQk(),t.YNc(102,at,1,0,"tr",37),t.YNc(103,nt,1,0,"tr",38),t.qZA(),t.YNc(104,it,6,0,"div",39),t.TgZ(105,"div",40)(106,"div",41)(107,"div",42),t.YNc(108,rt,3,4,"span",43),t.YNc(109,st,2,4,"ng-template",null,44,t.W1O),t.qZA()()(),t.TgZ(111,"mat-paginator",45,46),t.NdJ("page",function(P){return s.onPaginateChange(P)}),t.qZA()()),2&a){const u=t.MAs(110);t.xp6(14),t.Q6J("formGroup",s.form),t.xp6(18),t.s9C("value",s.TransDate),t.xp6(20),t.s9C("value",s.TransType),t.xp6(8),t.s9C("value",s.payingcust),t.xp6(8),t.Q6J("dataSource",s.dataSource),t.xp6(34),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(1),t.Q6J("ngIf",!s.isLoading&&s.noData),t.xp6(4),t.Q6J("ngIf",void 0!==s.AppliedTotal)("ngIfElse",u),t.xp6(3),t.Q6J("length",s.totalRecords)("pageSizeOptions",t.DdM(13,ot))("pageSize",s.pageSize)}},dependencies:[d.m,c.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,_.NW,p.Hw,g.lW,y.KE,y.hX,y.qo,q.Nt,f.a8,f.dk,f.dn,f.n5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,c.JJ]}),e})()},15861:(x,O,r)=>{function Z(_,m,E,T,A,d,c){try{var t=_[d](c),n=t.value}catch(o){return void E(o)}t.done?m(n):Promise.resolve(n).then(T,A)}function h(_){return function(){var m=this,E=arguments;return new Promise(function(T,A){var d=_.apply(m,E);function c(n){Z(d,T,A,c,t,"next",n)}function t(n){Z(d,T,A,c,t,"throw",n)}c(void 0)})}}r.d(O,{Z:()=>h})}}]);