"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[41802],{39505:(B,M,e)=>{e.d(M,{L:()=>m});var i=e(24006),g=e(59549),D=e(69751),v=e(68675),I=e(54004),a=e(94650),R=e(36895),t=e(47957),T=e(3238),r=e(44144);function u(n,d){if(1&n&&(a.TgZ(0,"mat-option",4),a._uU(1),a.qZA()),2&n){const o=d.$implicit;a.Q6J("value",o),a.xp6(1),a.Oqu(o)}}let m=(()=>{class n{constructor(o){this.fb=o,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=c=>{},this.onChange=c=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new D.y,this.filteredOptions=this.control.valueChanges.pipe((0,v.O)(this.value),(0,I.U)(c=>this._filter(c)))}setDescribedByIds(o){}onContainerClick(o){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(o){null!=o&&(this.control.setValue(o),this.value=o)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o}_filter(o){if(null==o||0==o.length)return this.options;const c=o.toLowerCase(),C=this.options.filter(O=>O.toLowerCase().includes(c));return!this.disabled&&1===C.length&&this.control.value!=C[0]&&o.length>=(this.previousValue?.length??0)&&this.control.setValue(C[0]),this.onChange(this.control.value),this.previousValue=this.control.value,C}}return n.\u0275fac=function(o){return new(o||n)(a.Y36(i.qu))},n.\u0275cmp=a.Xpm({type:n,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(o,c){2&o&&a.uIk("aria-describedby",c.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[a._Bn([{provide:i.JU,multi:!0,useExisting:n},{provide:g.Eo,useExisting:n}],[{provide:i.gN,useExisting:i.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,c){if(1&o&&(a.TgZ(0,"mat-form-field",0)(1,"mat-label"),a._uU(2),a.qZA(),a._UZ(3,"input",1),a.TgZ(4,"mat-autocomplete",null,2),a.YNc(6,u,2,2,"mat-option",3),a.ALo(7,"async"),a.qZA()()),2&o){const C=a.MAs(5);a.Q6J("appearance",c.appearance),a.xp6(2),a.Oqu(c.label),a.xp6(1),a.Q6J("id",c.id)("placeholder",c.placeholder)("formControl",c.control)("matAutocomplete",C),a.xp6(3),a.Q6J("ngForOf",a.lcZ(7,7,c.filteredOptions))}},dependencies:[R.sg,i.Fj,i.JJ,i.oH,t.XC,t.ZL,T.ey,g.KE,g.hX,r.Nt,R.Ov]}),n})()},12652:(B,M,e)=>{e.d(M,{u:()=>R});var i=e(80529),g=e(75625),D=e(70262),v=e(62843),I=e(92340),a=e(94650);let R=(()=>{class t{constructor(r){this.httpClient=r,this.url=I.N.API_BASE_URL,this.httpHeader={headers:new i.WM({"Content-Type":"application/json"})}}getDockrules(r,u,m,n,d,o){return this.httpClient.get(this.url+"/dockRules/read",{params:{user:r,rule:u??"",description:m??"",type:n??"",recordsPerPage:d??"",pageNo:o??""}})}createDockrules(r,u,m,n,d){return this.httpClient.post(this.url+"/dockRules/create",{type:r,description:u,message:m,apptStatus:n,email:d}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}updateDockrules(r,u,m,n,d,o,c){return this.httpClient.put(this.url+"/dockRules/update",{user:r,rule:u,type:m,description:n,message:d,apptStatus:o,email:c}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}deleteDockrules(r,u,m,n,d,o,c,C,O,L){return this.httpClient.delete(this.url+`/dockRules/deleteRule?user=${r}&rule=${u}&description=${m}&type=${n}&apptStatus=${d}&exitPoint=${o}&msgID=${c}&severity=${C}&exitLogic=${O}&status=${L}`)}getMessage(){return this.httpClient.get(this.url+"/dockRules/messages")}getRules(){return this.httpClient.get(this.url+"/dockRules/rules")}getapptStatus(){return this.httpClient.get(this.url+"/dockRules/apptStatus")}emailPoint(){return this.httpClient.get(this.url+"/dockRules/epoint")}hold(r){return this.httpClient.put(this.url+"/dockRules/hold",{rule:r}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}release(r){return this.httpClient.put(this.url+"/dockRules/release",{rule:r}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}constraintRead(r,u,m,n){return this.httpClient.get(this.url+"/dockRules/constraint/read",{params:{user:r,rule:u??"",recordsPerPage:m??"",pageNo:n??""}})}constraintCreate(r,u,m,n,d,o,c,C){return this.httpClient.post(this.url+"/dockRules/constraint/create",{user:r,ruleNumber:u,constraintNumber:m,andOr:n,constraint:d,relationshipOperator:o,constraintValue:c,valueIncrement:C}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}constraintUpdate(r,u,m,n,d,o,c,C){return this.httpClient.put(this.url+"/dockRules/constraint/update",{user:r,ruleNumber:u,constraintNumber:m,andOr:n,constraint:d,relationshipOperator:o,constraintValue:c,valueIncrement:C}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}constraintDelete(r,u,m){return this.httpClient.delete(this.url+`/dockRules/constraint/delete?user=${r}&rule=${u}&seq=${m}`)}constraints(){return this.httpClient.get(this.url+"/dockRules/constraints")}operators(){return this.httpClient.get(this.url+"/dockRules/operators")}values(){return this.httpClient.get(this.url+"/dockRules/values")}httpError(r){let u="";return u=r.error instanceof ErrorEvent?r.error.message:`Error Code: ${r.status}\nMessage: ${r.message}`,console.log(u),(0,v._)(()=>new Error(u))}}return t.\u0275fac=function(r){return new(r||t)(a.LFG(i.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},28366:(B,M,e)=>{e.d(M,{i:()=>C});var i=e(24006),g=e(65412),D=e(35226),v=e.n(D),I=e(70879),a=e(86385),R=e(48529),t=e(94650),T=e(19132),r=e(12652),u=e(97392),m=e(4859),n=e(59549),d=e(44144),o=e(73546),c=e(39505);let C=(()=>{class O{constructor(p,h,A,U,f){this.anyvariable=p,this.dialogRef=h,this.router=A,this.fb=U,this.dockRulesService=f,this.constraintsUrl="/main-nav/dockrules/constraints",this.user=localStorage.getItem("userName")||"",this.andOptions=["AND","OR"],this.constraintOptions=[],this.operatorOptions=[],this.valueOptions=[],this.rule=p}ngOnDestroy(){this.dockSubscription&&this.dockSubscription.unsubscribe()}ngOnInit(){this.form=this.fb.group({AndOr:["",i.kI.required],Constraint:["",i.kI.required],Operator:["",i.kI.required],Value:["",i.kI.required],ValueIncrement:["",[i.kI.pattern(/^\d{0,3}$/)]]}),this.fetchOperators(),this.fetchConstraints(),this.fetchValues()}fetchOperators(){this.dockRulesService.operators().subscribe(p=>{for(const h of p)this.operatorOptions.push(h.VLVALU)})}fetchConstraints(){this.dockRulesService.constraints().subscribe(p=>{for(const h of p)this.constraintOptions.push(h.VLVALU)})}fetchValues(){this.dockRulesService.values().subscribe(p=>{for(const h of p)this.valueOptions.push(h.VLVALU)})}ConstraintCreate(){var p=this.form.value;this.dockSubscription&&this.dockSubscription.unsubscribe(),this.dockSubscription=this.dockRulesService.constraintCreate(this.user,this.anyvariable.RUNMBR,0,p.AndOr,p.Constraint,p.Operator,p.Value,p.ValueIncrement).subscribe(h=>{const U=JSON.parse(h[0].data[h[0].data.length-1].value).returnedData.message;U.toUpperCase()===R.R.createMsg.toUpperCase()?(this.successMessage(U),this.dialogRef.close({success:!0,rule:this.rule})):this.failureMessage(U)})}successMessage(p){v().fire(p,"","success")}failureMessage(p){v().fire(p,"","error")}closeDialog(){this.dialogRef.close()}}return O.\u0275fac=function(p){return new(p||O)(t.Y36(g.WI),t.Y36(g.so),t.Y36(T.F0),t.Y36(i.qu),t.Y36(r.u))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-dock-constraint-create"]],standalone:!0,features:[t.jDz],decls:25,vars:6,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["formControlName","AndOr","label","And/Or*","required","",3,"options"],["formControlName","Constraint","label","Constraint*","required","",3,"options"],["formControlName","Operator","label","Operator*","required","",3,"options"],["formControlName","Value","label","Value*","required","",3,"options"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","ValueIncrement"],["mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(p,h){1&p&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Dock Rule Constraint"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return h.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7),t._UZ(12,"custom-input-autocomplete",8)(13,"custom-input-autocomplete",9)(14,"custom-input-autocomplete",10)(15,"custom-input-autocomplete",11)(16,"br"),t.TgZ(17,"mat-form-field",12)(18,"mat-label"),t._uU(19,"Value Increment"),t.qZA(),t._UZ(20,"input",13),t.TgZ(21,"mat-hint"),t._uU(22,"(+/-) Minutes (if *CURRENT)"),t.qZA()()()(),t.TgZ(23,"button",14),t.NdJ("click",function(){return h.ConstraintCreate()}),t._uU(24," Add "),t.qZA()()()()),2&p&&(t.xp6(9),t.Q6J("formGroup",h.form),t.xp6(3),t.Q6J("options",h.andOptions),t.xp6(1),t.Q6J("options",h.constraintOptions),t.xp6(1),t.Q6J("options",h.operatorOptions),t.xp6(1),t.Q6J("options",h.valueOptions),t.xp6(8),t.Q6J("disabled",!h.form.valid))},dependencies:[I.m,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,u.Hw,m.lW,n.KE,n.bx,n.hX,d.Nt,o.a8,o.dk,o.dn,o.n5,a.j,c.L]}),O})()},41802:(B,M,e)=>{e.r(M),e.d(M,{WwDockrulesCreateComponent:()=>U});var i=e(65412),g=e(35226),D=e.n(g),v=e(70879),I=e(48529),a=e(86385),R=e(28366),t=e(94650),T=e(12652),r=e(24006),u=e(19132),m=e(36895),n=e(97392),d=e(4859),o=e(59549),c=e(44144),C=e(73546),O=e(39505);const L=["itemInput"];function p(f,W){if(1&f&&t._UZ(0,"custom-input-autocomplete",17),2&f){const s=t.oxw();t.Q6J("options",s.msgIdOptions)}}function h(f,W){if(1&f&&t._UZ(0,"custom-input-autocomplete",18),2&f){const s=t.oxw();t.Q6J("options",s.apptOptions)}}function A(f,W){if(1&f&&t._UZ(0,"custom-input-autocomplete",19),2&f){const s=t.oxw();t.Q6J("options",s.emailOptions)}}let U=(()=>{class f{constructor(s,l,_,E,P,k,S){this.DockrulesService=s,this.anyvariable=l,this.dialogRef=_,this.fb=E,this.router=P,this.cdr=k,this.matDialog=S,this.ruleOptions=[],this.ruleTypeMap=new Map,this.msgIdOptions=[],this.apptOptions=[],this.apptTypeMap=new Map,this.emailOptions=[],this.dockUrl="/main-nav/dock-rules/read"}ngOnInit(){this.form=this.fb.group({TYPE:[""],MSGID:[""],RUDESC:[""],apptStatus:[""],email:[""]}),this.fetchRules(),this.fetchMessage(),this.fetchAppt(),this.fetchEmail()}onItemFocus(){if(this.ruleOptions.length>0&&this.itemInputComponent?.control){const s=this.itemInputComponent.control.value||"";this.itemInputComponent.control.setValue(s+" "),setTimeout(()=>{this.itemInputComponent.control.setValue(s)},0)}}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}get normalizedType(){const s=this.form.get("TYPE")?.value;return(this.ruleTypeMap.get(s)||s||"").trim().toUpperCase()}get normalizedApptStatus(){const s=this.form.get("apptStatus")?.value;return(this.apptTypeMap.get(s)||s||"").trim()}fetchRules(){this.ruleOptions=[],this.ruleTypeMap.clear(),this.DockrulesService.getRules().subscribe(s=>{s.forEach(l=>{const _=l.VLVALU?.trim(),P=`${_} - ${l.VLSDSC?.trim()||""}`;this.ruleOptions.push(P),this.ruleTypeMap.set(P,_)}),this.cdr.detectChanges()})}fetchMessage(){this.msgIdOptions=[],this.DockrulesService.getMessage().subscribe(s=>{const l=new Set;s.forEach(_=>{const E=_.RUMSGD?.trim();E&&l.add(E)}),this.msgIdOptions=[...l],this.cdr.detectChanges()})}fetchAppt(){this.DockrulesService.getapptStatus().subscribe(s=>{const l=s.filter((_,E,P)=>E===P.findIndex(k=>k.VLVALU?.trim()===_.VLVALU?.trim()));this.apptOptions=l.map(_=>{const E=`${_.VLVALU.trim()} - ${_.VLSDSC?.trim()||""}`;return this.apptTypeMap.set(E,_.VLVALU.trim()),E}),this.cdr.detectChanges()})}fetchEmail(){this.emailOptions=[],this.DockrulesService.emailPoint().subscribe(s=>{const l=new Set(s.map(_=>_.EPPOIN?.trim()).filter(_=>!!_));this.emailOptions=[...l],this.cdr.detectChanges()})}isAddDisabled(){const s=this.normalizedType;return"DY"===s?!(this.form.get("RUDESC")?.value?.trim()&&this.normalizedApptStatus&&this.form.get("email")?.value?.trim()):"EN"!==s&&"CL"!==s||!(this.form.get("RUDESC")?.value?.trim()&&this.form.get("MSGID")?.value?.trim())}addDockrules(){const s=this.form.value,l=this.normalizedType,_=this.normalizedApptStatus;this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.createDockrules(l,s.RUDESC,s.MSGID,_,s.email).subscribe(E=>{const k=E[0].data[E[0].data.length-1].value;k.toUpperCase()===I.R.create.toUpperCase()?(this.createdRule={RUNMBR:E[0].data[1].value,RUDESC:E[0].data[4].value},this.matDialog.open(R.i,{width:"1000px",maxHeight:"80vh",data:this.createdRule,disableClose:!0}).afterClosed().subscribe(K=>{K?.success&&(this.dialogRef.close(),this.router.navigateByUrl("/main-nav/dockrules/constraints",{state:K.rule}))})):this.failureMessage(k)})}successMessage(s){D().fire(s,"","success")}failureMessage(s){D().fire(s,"","error")}closeDialog(){this.dialogRef.close()}}return f.\u0275fac=function(s){return new(s||f)(t.Y36(T.u),t.Y36(i.WI),t.Y36(i.so),t.Y36(r.qu),t.Y36(u.F0),t.Y36(t.sBO),t.Y36(i.uw))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-ww-dockrules-create"]],viewQuery:function(s,l){if(1&s&&t.Gf(L,5),2&s){let _;t.iGM(_=t.CRH())&&(l.itemInputComponent=_.first)}},standalone:!0,features:[t.jDz],decls:23,vars:6,consts:[[1,"over-Flow"],[1,"main-header-title"],[1,"title"],["mat-icon-button","",1,"closeIcon",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["formControlName","TYPE","label","Rule Type*","appearance","outline","required","",1,"large-input",3,"options","focus","click"],["itemInput",""],["appearance","outline",1,"full-width2"],["matInput","","required","","formControlName","RUDESC"],["formControlName","MSGID","label","Message ID*","appearance","outline","required","",3,"options",4,"ngIf"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","","class","large-input",3,"options",4,"ngIf"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options",4,"ngIf"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"],["formControlName","MSGID","label","Message ID*","appearance","outline","required","",3,"options"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","",1,"large-input",3,"options"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options"]],template:function(s,l){1&s&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title",2),t._uU(4,"Maintain Dock Rules"),t.qZA()(),t.TgZ(5,"button",3),t.NdJ("click",function(){return l.closeDialog()}),t.TgZ(6,"mat-icon",4),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"custom-input-autocomplete",9,10),t.NdJ("focus",function(){return l.onItemFocus()})("click",function(){return l.onItemFocus()}),t.qZA(),t.TgZ(14,"mat-form-field",11)(15,"mat-label"),t._uU(16,"Description"),t.qZA(),t._UZ(17,"input",12),t.qZA(),t.YNc(18,p,1,1,"custom-input-autocomplete",13),t.YNc(19,h,1,1,"custom-input-autocomplete",14),t.YNc(20,A,1,1,"custom-input-autocomplete",15),t.qZA()(),t.TgZ(21,"button",16),t.NdJ("click",function(){return l.addDockrules()}),t._uU(22," Add "),t.qZA()()()()),2&s&&(t.xp6(9),t.Q6J("formGroup",l.form),t.xp6(3),t.Q6J("options",l.ruleOptions),t.xp6(6),t.Q6J("ngIf","EN"===l.normalizedType||"CL"===l.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===l.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===l.normalizedType),t.xp6(1),t.Q6J("disabled",l.isAddDisabled()))},dependencies:[v.m,m.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,n.Hw,d.lW,o.KE,o.hX,c.Nt,C.a8,C.dk,C.dn,C.n5,a.j,O.L],styles:["custom-input-autocomplete.large-input mat-form-field{width:50%}"]}),f})()}}]);