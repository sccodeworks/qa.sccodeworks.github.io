"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[82858],{82858:(J,p,l)=>{l.r(p),l.d(p,{TallyPostingComponent:()=>w});var h=l(65412),u=l(48529),s=l(7155),g=l(70879),d=l(77579),T=l(78372),f=l(71884),t=l(94650),D=l(19132),y=l(15627),C=l(36895),c=l(24006),P=l(98739),E=l(97392),Z=l(4859),m=l(59549),A=l(44144),_=l(73546);const v=["paginator"];function U(a,i){1&a&&(t.TgZ(0,"th",30),t._uU(1," Tally "),t.qZA())}function S(a,i){if(1&a&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.hij(" ",e.WKTALY," ")}}function M(a,i){1&a&&(t.TgZ(0,"th",30),t._uU(1," Sequence "),t.qZA())}function O(a,i){if(1&a&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.hij(" ",e.WKSEQ," ")}}function I(a,i){1&a&&(t.TgZ(0,"th",30),t._uU(1," Severity "),t.qZA())}function R(a,i){if(1&a&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.hij(" ",e.WKSEVR," ")}}function x(a,i){1&a&&(t.TgZ(0,"th",30),t._uU(1," Message "),t.qZA())}function b(a,i){if(1&a&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.hij(" ",e.WKMSGD," ")}}function L(a,i){1&a&&(t.TgZ(0,"th",30),t._uU(1," Item Code "),t.qZA())}function W(a,i){if(1&a&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.hij(" ",e.WKITEM," ")}}function B(a,i){1&a&&(t.TgZ(0,"th",30),t._uU(1," Intransit "),t.qZA())}function N(a,i){if(1&a&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.hij(" ",e.WKQINT," ")}}function Y(a,i){1&a&&(t.TgZ(0,"th",32),t._uU(1," Recieved "),t.qZA())}function K(a,i){if(1&a&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.Oqu(e.WKQREC)}}function Q(a,i){1&a&&(t.TgZ(0,"th",32),t._uU(1," Description "),t.qZA())}function q(a,i){if(1&a&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.xp6(1),t.Oqu(e.WKMSG)}}function z(a,i){1&a&&t._UZ(0,"tr",33)}function j(a,i){1&a&&t._UZ(0,"tr",34)}function H(a,i){1&a&&(t.TgZ(0,"div",35),t._UZ(1,"img",36),t.TgZ(2,"h3",37),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",38),t._uU(5," There\u2019s no data to display right now. Try adjusting your search or check back later. "),t.qZA()())}const $=function(){return[8,16,24]};let w=(()=>{class a{constructor(e,n,o,r){this.activeRouter=e,this.iHeaderSvc=n,this.anyvariable=o,this.dialogRef=r,this.displayedColumns=["tally","sequence","severity","message","item","intransit","receive","Description"],this.dataSource=new s.by,this.duplicateSource=[],this.searchInput$=new d.x,this.isSearchMode=!1,this.allData=[],this.filteredData=[],this.pageData=[],this.isLoading=!0,this.noData=!1,this.pageSize=8,this.totalRecords=0,this.user=localStorage.getItem("userName"),this.actualArrival=""}ngOnInit(){this.posting(),this.dataSource=new s.by(this.duplicateSource),this.dataSource.paginator=this.paginator,this.searchInput$.pipe((0,T.b)(500),(0,f.x)()).subscribe(e=>{this.handleSearch(e)})}ngOnDestroy(){this.getTallyPostErrorsSubscription&&this.getTallyPostErrorsSubscription.unsubscribe(),this.searchInput$&&this.searchInput$.complete()}posting(){this.actualArrival=this.anyvariable.IHACTA+"\xa0"+u.R.formatTime(this.anyvariable.IHACTT),this.isLoading=!0,this.noData=!1,this.getTallyPostErrorsSubscription&&this.getTallyPostErrorsSubscription.unsubscribe(),this.getTallyPostErrorsSubscription=this.iHeaderSvc.getTallyPostErrors(this.user,this.anyvariable.IHTALY).subscribe(e=>{this.isLoading=!1;const o=JSON.parse(e.data[1]?.value).returnedData||[];this.dataSource=new s.by(o),this.dataSource.paginator=this.paginator,this.allData=o,this.filteredData=o,this.totalRecords=o.length,this.noData=0===o.length})}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.posting();this.isSearchMode=!0,this.filteredData=this.allData.filter(n=>Object.values(n).some(o=>String(o).toLowerCase().includes(e))),this.noData=0===this.filteredData.length,this.totalRecords=this.filteredData.length,this.noData?this.dataSource.data=[]:this.loadPage(1)}loadPage(e){const n=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(n,n+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode&&this.loadPage(e.pageIndex+1)}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(D.gz),t.Y36(y.X),t.Y36(h.WI),t.Y36(h.so))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tally-posting"]],viewQuery:function(e,n){if(1&e&&t.Gf(v,5),2&e){let o;t.iGM(o=t.CRH())&&(n.paginator=o.first)}},standalone:!0,features:[t.jDz],decls:59,vars:11,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search posting errors...",3,"input"],[1,"tally-serach-form"],[1,"over-Flow"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","readonly","",3,"value"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","tally"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sequence"],["matColumnDef","severity"],["matColumnDef","message"],["matColumnDef","item"],["matColumnDef","intransit"],["matColumnDef","receive"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","Description"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"pageSizeOptions","length","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-header-cell",""],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Tally Posting Errors"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"mat-icon",5),t._uU(11,"search"),t.qZA(),t.TgZ(12,"input",6),t.NdJ("input",function(r){return n.applyGlobalFilterInput(r.target.value)}),t.qZA()()(),t.TgZ(13,"mat-card-content",7)(14,"form",8)(15,"div",9)(16,"div",10)(17,"mat-form-field",11)(18,"mat-label"),t._uU(19,"Tally Number"),t.qZA(),t._UZ(20,"input",12),t.qZA(),t.TgZ(21,"mat-form-field",11)(22,"mat-label"),t._uU(23,"Total Quantity "),t.qZA(),t._UZ(24,"input",12),t.qZA(),t.TgZ(25,"mat-form-field",11)(26,"mat-label"),t._uU(27,"Actual Arrival "),t.qZA(),t._UZ(28,"input",12),t.qZA()()()()(),t.TgZ(29,"table",13),t.ynx(30,14),t.YNc(31,U,2,0,"th",15),t.YNc(32,S,2,1,"td",16),t.BQk(),t.ynx(33,17),t.YNc(34,M,2,0,"th",15),t.YNc(35,O,2,1,"td",16),t.BQk(),t.ynx(36,18),t.YNc(37,I,2,0,"th",15),t.YNc(38,R,2,1,"td",16),t.BQk(),t.ynx(39,19),t.YNc(40,x,2,0,"th",15),t.YNc(41,b,2,1,"td",16),t.BQk(),t.ynx(42,20),t.YNc(43,L,2,0,"th",15),t.YNc(44,W,2,1,"td",16),t.BQk(),t.ynx(45,21),t.YNc(46,B,2,0,"th",15),t.YNc(47,N,2,1,"td",16),t.BQk(),t.ynx(48,22),t.YNc(49,Y,2,0,"th",23),t.YNc(50,K,2,1,"td",16),t.BQk(),t.ynx(51,24),t.YNc(52,Q,2,0,"th",23),t.YNc(53,q,2,1,"td",16),t.BQk(),t.YNc(54,z,1,0,"tr",25),t.YNc(55,j,1,0,"tr",26),t.qZA(),t.YNc(56,H,6,0,"div",27),t.TgZ(57,"mat-paginator",28,29),t.NdJ("page",function(r){return n.onPaginateChange(r)}),t.qZA()()),2&e&&(t.xp6(20),t.s9C("value",n.anyvariable.IHTALY),t.xp6(4),t.s9C("value",n.anyvariable.IHTQTY),t.xp6(4),t.s9C("value",n.actualArrival),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&n.noData),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(10,$))("length",n.totalRecords)("pageSize",n.pageSize))},dependencies:[g.m,C.O5,c._Y,c.JL,c.F,P.NW,E.Hw,Z.lW,m.KE,m.hX,m.qo,A.Nt,_.a8,_.dk,_.dn,_.n5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk]}),a})()}}]);