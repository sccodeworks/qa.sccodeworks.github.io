"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[7095],{39505:(U,h,o)=>{o.d(h,{L:()=>T});var r=o(24006),d=o(59549),v=o(69751),O=o(68675),g=o(54004),n=o(94650),t=o(36895),D=o(47957),A=o(3238),P=o(44144);function I(u,c){if(1&u&&(n.TgZ(0,"mat-option",4),n._uU(1),n.qZA()),2&u){const e=c.$implicit;n.Q6J("value",e),n.xp6(1),n.Oqu(e)}}let T=(()=>{class u{constructor(e){this.fb=e,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=i=>{},this.onChange=i=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new v.y,this.filteredOptions=this.control.valueChanges.pipe((0,O.O)(this.value),(0,g.U)(i=>this._filter(i)))}setDescribedByIds(e){}onContainerClick(e){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(e){null!=e&&(this.control.setValue(e),this.value=e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}_filter(e){if(null==e||0==e.length)return this.options;const i=e.toLowerCase(),m=this.options.filter(M=>M.toLowerCase().includes(i));return!this.disabled&&1===m.length&&this.control.value!=m[0]&&e.length>=(this.previousValue?.length??0)&&this.control.setValue(m[0]),this.onChange(this.control.value),this.previousValue=this.control.value,m}}return u.\u0275fac=function(e){return new(e||u)(n.Y36(r.qu))},u.\u0275cmp=n.Xpm({type:u,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(e,i){2&e&&n.uIk("aria-describedby",i.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[n._Bn([{provide:r.JU,multi:!0,useExisting:u},{provide:d.Eo,useExisting:u}],[{provide:r.gN,useExisting:r.sg}])],decls:8,vars:8,consts:[[3,"appearance"],["matInput","",3,"id","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){if(1&e&&(n.TgZ(0,"mat-form-field",0)(1,"mat-label"),n._uU(2),n.qZA(),n._UZ(3,"input",1),n.TgZ(4,"mat-autocomplete",null,2),n.YNc(6,I,2,2,"mat-option",3),n.ALo(7,"async"),n.qZA()()),2&e){const m=n.MAs(5);n.Q6J("appearance",i.appearance),n.xp6(2),n.Oqu(i.label),n.xp6(1),n.Q6J("id",i.id)("formControl",i.control)("matAutocomplete",m),n.xp6(3),n.Q6J("ngForOf",n.lcZ(7,6,i.filteredOptions))}},dependencies:[t.sg,r.Fj,r.JJ,r.oH,D.XC,D.ZL,A.ey,d.KE,d.hX,P.Nt,t.Ov]}),u})()},37095:(U,h,o)=>{o.r(h),o.d(h,{GenAccessInvComponent:()=>B});var r=o(24006),d=o(70879),v=o(50692),O=o(35226),g=o.n(O),n=o(48529),t=o(94650),D=o(19132),A=o(11240),P=o(36895),I=o(97392),T=o(4859),u=o(59549),c=o(73546),e=o(39505);function i(l,f){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use YYYY-MM-DD or select *LASTP option. "),t.qZA())}function m(l,f){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Cut Off Date is required. "),t.qZA())}function M(l,f){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use YYYY-MM-DD or select *LASTP option. "),t.qZA())}function L(l,f){1&l&&(t.TgZ(0,"mat-error"),t._uU(1," Posting Date is required. "),t.qZA())}let B=(()=>{class l{constructor(a,s,_){this.router=a,this.fb=s,this.StorerService=_,this.user=localStorage.getItem("userName"),this.storerread="/main-nav/storer",this.CutoffDateOptions=["*LASTP"],this.PostingDateOptions=["*LASTP","*THISP"]}ngOnInit(){this.element=history.state,this.form=this.fb.group({CutoffDate:[this.CutoffDateOptions[0],[r.kI.required,this.dateValidator()]],PostingDate:[this.PostingDateOptions[0],[r.kI.required,this.dateValidator()]]})}dateValidator(){return a=>/^\d{4}-\d{2}-\d{2}$/.test(a.value)?null:{invalidDate:!0}}GenerateAccessInvoice(){const a=this.form.value;a.CutoffDate=a.CutoffDate||this.CutoffDateOptions[0],a.PostingDate=a.PostingDate||this.PostingDateOptions[0],this.GenAccessInvoiceSubscription&&this.GenAccessInvoiceSubscription.unsubscribe(),this.GenAccessInvoiceSubscription=this.StorerService.GenerateAccessInvoice(this.element.STORE,this.element.STSFX,this.element.STORE,this.element.STSFX,a.CutoffDate,a.PostingDate).subscribe(s=>{const p=s[0].data[s[0].data.length-1].value;p===n.R.submit?(this.successMessage(p),this.router.navigateByUrl(this.storerread)):this.failureMessage(p)})}successMessage(a){g().fire(a,"","success")}failureMessage(a){g().fire(a,"","error")}onBack(){this.router.navigate(["/main-nav/storer"])}}return l.\u0275fac=function(a){return new(a||l)(t.Y36(D.F0),t.Y36(r.qu),t.Y36(A.h))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-gen-access-inv"]],standalone:!0,features:[t.jDz],decls:19,vars:7,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline","formControlName","CutoffDate","label","Cutoff Date ",3,"options"],[4,"ngIf"],["appearance","outline","formControlName","PostingDate","label","Posting Date",3,"options"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(a,s){if(1&a&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return s.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Generate Accessorial Invoices (ACCINV)"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6),t._UZ(11,"custom-input-autocomplete",7),t.YNc(12,i,2,0,"mat-error",8),t.YNc(13,m,2,0,"mat-error",8),t._UZ(14,"custom-input-autocomplete",9),t.YNc(15,M,2,0,"mat-error",8),t.YNc(16,L,2,0,"mat-error",8),t.qZA()(),t.TgZ(17,"button",10),t.NdJ("click",function(){return s.GenerateAccessInvoice()}),t._uU(18," Submit "),t.qZA()()()()),2&a){let _,p,C,E;t.xp6(8),t.Q6J("formGroup",s.form),t.xp6(3),t.Q6J("options",s.CutoffDateOptions),t.xp6(1),t.Q6J("ngIf",(null==(_=s.form.get("CutoffDate"))?null:_.touched)&&(null==(_=s.form.get("CutoffDate"))?null:_.hasError("invalidDate"))),t.xp6(1),t.Q6J("ngIf",(null==(p=s.form.get("CutoffDate"))?null:p.touched)&&(null==(p=s.form.get("CutoffDate"))?null:p.hasError("required"))),t.xp6(1),t.Q6J("options",s.PostingDateOptions),t.xp6(1),t.Q6J("ngIf",(null==(C=s.form.get("PostingDate"))?null:C.touched)&&(null==(C=s.form.get("PostingDate"))?null:C.hasError("invalidDate"))),t.xp6(1),t.Q6J("ngIf",(null==(E=s.form.get("PostingDate"))?null:E.touched)&&(null==(E=s.form.get("PostingDate"))?null:E.hasError("required")))}},dependencies:[d.m,P.O5,r._Y,r.JJ,r.JL,r.sg,r.u,I.Hw,T.lW,u.TO,c.a8,c.dk,c.dn,c.n5,v.j,e.L]}),l})()}}]);