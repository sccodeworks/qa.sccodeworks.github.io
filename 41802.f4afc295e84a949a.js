"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[41802],{39505:(U,v,s)=>{s.d(v,{L:()=>m});var C=s(24006),f=s(59549),E=s(69751),P=s(68675),T=s(54004),i=s(94650),t=s(36895),D=s(47957),g=s(3238),r=s(44144);function p(l,c){if(1&l&&(i.TgZ(0,"mat-option",4),i._uU(1),i.qZA()),2&l){const o=c.$implicit;i.Q6J("value",o),i.xp6(1),i.Oqu(o)}}let m=(()=>{class l{constructor(o){this.fb=o,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=n=>{},this.onChange=n=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new E.y,this.filteredOptions=this.control.valueChanges.pipe((0,P.O)(this.value),(0,T.U)(n=>this._filter(n)))}setDescribedByIds(o){}onContainerClick(o){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(o){null!=o&&(this.control.setValue(o),this.value=o)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o}_filter(o){if(null==o||0==o.length)return this.options;const n=o.toLowerCase(),h=this.options.filter(R=>R.toLowerCase().includes(n));return!this.disabled&&1===h.length&&this.control.value!=h[0]&&o.length>=(this.previousValue?.length??0)&&this.control.setValue(h[0]),this.onChange(this.control.value),this.previousValue=this.control.value,h}}return l.\u0275fac=function(o){return new(o||l)(i.Y36(C.qu))},l.\u0275cmp=i.Xpm({type:l,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(o,n){2&o&&i.uIk("aria-describedby",n.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[i._Bn([{provide:C.JU,multi:!0,useExisting:l},{provide:f.Eo,useExisting:l}],[{provide:C.gN,useExisting:C.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,n){if(1&o&&(i.TgZ(0,"mat-form-field",0)(1,"mat-label"),i._uU(2),i.qZA(),i._UZ(3,"input",1),i.TgZ(4,"mat-autocomplete",null,2),i.YNc(6,p,2,2,"mat-option",3),i.ALo(7,"async"),i.qZA()()),2&o){const h=i.MAs(5);i.Q6J("appearance",n.appearance),i.xp6(2),i.Oqu(n.label),i.xp6(1),i.Q6J("id",n.id)("placeholder",n.placeholder)("formControl",n.control)("matAutocomplete",h),i.xp6(3),i.Q6J("ngForOf",i.lcZ(7,7,n.filteredOptions))}},dependencies:[t.sg,C.Fj,C.JJ,C.oH,D.XC,D.ZL,g.ey,f.KE,f.hX,r.Nt,t.Ov]}),l})()},12652:(U,v,s)=>{s.d(v,{u:()=>t});var C=s(80529),f=s(75625),E=s(70262),P=s(62843),T=s(92340),i=s(94650);let t=(()=>{class D{constructor(r){this.httpClient=r,this.url=T.N.API_BASE_URL,this.httpHeader={headers:new C.WM({"Content-Type":"application/json"})}}getDockrules(r,p,m,l,c,o){return this.httpClient.get(this.url+"/dockRules/read",{params:{user:r,rule:p??"",description:m??"",type:l??"",recordsPerPage:c??"",pageNo:o??""}})}createDockrules(r,p,m,l,c){return this.httpClient.post(this.url+"/dockRules/create",{type:r,description:p,message:m,apptStatus:l,email:c}).pipe((0,f.X)(1),(0,E.K)(this.httpError))}updateDockrules(r,p,m,l,c,o,n){return this.httpClient.put(this.url+"/dockRules/update",{user:r,rule:p,type:m,description:l,message:c,apptStatus:o,email:n}).pipe((0,f.X)(1),(0,E.K)(this.httpError))}deleteDockrules(r,p,m,l,c,o,n,h,R,A){return this.httpClient.delete(this.url+`/dockRules/deleteRule?user=${r}&rule=${p}&description=${m}&type=${l}&apptStatus=${c}&exitPoint=${o}&msgID=${n}&severity=${h}&exitLogic=${R}&status=${A}`)}getMessage(){return this.httpClient.get(this.url+"/dockRules/messages")}getRules(){return this.httpClient.get(this.url+"/dockRules/rules")}getapptStatus(){return this.httpClient.get(this.url+"/dockRules/apptStatus")}emailPoint(){return this.httpClient.get(this.url+"/dockRules/epoint")}hold(r){return this.httpClient.put(this.url+"/dockRules/hold",{rule:r}).pipe((0,f.X)(1),(0,E.K)(this.httpError))}release(r){return this.httpClient.put(this.url+"/dockRules/release",{rule:r}).pipe((0,f.X)(1),(0,E.K)(this.httpError))}constraintRead(r,p,m,l){return this.httpClient.get(this.url+"/dockRules/constraint/read",{params:{user:r,rule:p??"",recordsPerPage:m??"",pageNo:l??""}})}constraintCreate(r,p,m,l,c,o,n,h){return this.httpClient.post(this.url+"/dockRules/constraint/create",{user:r,ruleNumber:p,constraintNumber:m,andOr:l,constraint:c,relationshipOperator:o,constraintValue:n,valueIncrement:h}).pipe((0,f.X)(1),(0,E.K)(this.httpError))}constraintUpdate(r,p,m,l,c,o,n,h){return this.httpClient.put(this.url+"/dockRules/constraint/update",{user:r,ruleNumber:p,constraintNumber:m,andOr:l,constraint:c,relationshipOperator:o,constraintValue:n,valueIncrement:h}).pipe((0,f.X)(1),(0,E.K)(this.httpError))}constraintDelete(r,p,m){return this.httpClient.delete(this.url+`/dockRules/constraint/delete?user=${r}&rule=${p}&seq=${m}`)}constraints(){return this.httpClient.get(this.url+"/dockRules/constraints")}operators(){return this.httpClient.get(this.url+"/dockRules/operators")}values(){return this.httpClient.get(this.url+"/dockRules/values")}httpError(r){let p="";return p=r.error instanceof ErrorEvent?r.error.message:`Error Code: ${r.status}\nMessage: ${r.message}`,console.log(p),(0,P._)(()=>new Error(p))}}return D.\u0275fac=function(r){return new(r||D)(i.LFG(C.eN))},D.\u0275prov=i.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})()},41802:(U,v,s)=>{s.r(v),s.d(v,{WwDockrulesCreateComponent:()=>S});var C=s(65412),f=s(35226),E=s.n(f),P=s(70879),T=s(48529),i=s(86385),t=s(94650),D=s(12652),g=s(24006),r=s(19132),p=s(36895),m=s(97392),l=s(4859),c=s(59549),o=s(44144),n=s(73546),h=s(39505);const R=["itemInput"];function A(_,I){if(1&_&&t._UZ(0,"custom-input-autocomplete",17),2&_){const e=t.oxw();t.Q6J("options",e.msgIdOptions)}}function L(_,I){if(1&_&&t._UZ(0,"custom-input-autocomplete",18),2&_){const e=t.oxw();t.Q6J("options",e.apptOptions)}}function W(_,I){if(1&_&&t._UZ(0,"custom-input-autocomplete",19),2&_){const e=t.oxw();t.Q6J("options",e.emailOptions)}}let S=(()=>{class _{constructor(e,a,u,d,O,M){this.DockrulesService=e,this.anyvariable=a,this.dialogRef=u,this.fb=d,this.router=O,this.cdr=M,this.ruleOptions=[],this.ruleTypeMap=new Map,this.msgIdOptions=[],this.apptOptions=[],this.apptTypeMap=new Map,this.emailOptions=[],this.dockUrl="/main-nav/dock-rules/read"}ngOnInit(){this.form=this.fb.group({TYPE:[""],MSGID:[""],RUDESC:[""],apptStatus:[""],email:[""]}),this.fetchRules(),this.fetchMessage(),this.fetchAppt(),this.fetchEmail()}onItemFocus(){if(this.ruleOptions.length>0&&this.itemInputComponent?.control){const e=this.itemInputComponent.control.value||"";this.itemInputComponent.control.setValue(e+" "),setTimeout(()=>{this.itemInputComponent.control.setValue(e)},0)}}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}get normalizedType(){const e=this.form.get("TYPE")?.value;return(this.ruleTypeMap.get(e)||e||"").trim().toUpperCase()}get normalizedApptStatus(){const e=this.form.get("apptStatus")?.value;return(this.apptTypeMap.get(e)||e||"").trim()}fetchRules(){this.ruleOptions=[],this.ruleTypeMap.clear(),this.DockrulesService.getRules().subscribe(e=>{e.forEach(a=>{const u=a.VLVALU?.trim(),O=`${u} - ${a.VLSDSC?.trim()||""}`;this.ruleOptions.push(O),this.ruleTypeMap.set(O,u)}),this.cdr.detectChanges()})}fetchMessage(){this.msgIdOptions=[],this.DockrulesService.getMessage().subscribe(e=>{const a=new Set;e.forEach(u=>{const d=u.RUMSGD?.trim();d&&a.add(d)}),this.msgIdOptions=[...a],this.cdr.detectChanges()})}fetchAppt(){this.DockrulesService.getapptStatus().subscribe(e=>{const a=e.filter((u,d,O)=>d===O.findIndex(M=>M.VLVALU?.trim()===u.VLVALU?.trim()));this.apptOptions=a.map(u=>{const d=`${u.VLVALU.trim()} - ${u.VLSDSC?.trim()||""}`;return this.apptTypeMap.set(d,u.VLVALU.trim()),d}),this.cdr.detectChanges()})}fetchEmail(){this.emailOptions=[],this.DockrulesService.emailPoint().subscribe(e=>{const a=new Set(e.map(u=>u.EPPOIN?.trim()).filter(u=>!!u));this.emailOptions=[...a],this.cdr.detectChanges()})}isAddDisabled(){const e=this.normalizedType;return"DY"===e?!(this.form.get("RUDESC")?.value?.trim()&&this.normalizedApptStatus&&this.form.get("email")?.value?.trim()):"EN"!==e&&"CL"!==e||!(this.form.get("RUDESC")?.value?.trim()&&this.form.get("MSGID")?.value?.trim())}addDockrules(){const e=this.form.value,a=this.normalizedType,u=this.normalizedApptStatus;this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.createDockrules(a,e.RUDESC,e.MSGID,u,e.email).subscribe(d=>{const M=d[0].data[d[0].data.length-1].value;M.toUpperCase()===T.R.create.toUpperCase()?(this.successMessage(M),this.closeDialog(),this.router.navigate([this.dockUrl])):this.failureMessage(M)})}successMessage(e){E().fire(e,"","success")}failureMessage(e){E().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return _.\u0275fac=function(e){return new(e||_)(t.Y36(D.u),t.Y36(C.WI),t.Y36(C.so),t.Y36(g.qu),t.Y36(r.F0),t.Y36(t.sBO))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-ww-dockrules-create"]],viewQuery:function(e,a){if(1&e&&t.Gf(R,5),2&e){let u;t.iGM(u=t.CRH())&&(a.itemInputComponent=u.first)}},standalone:!0,features:[t.jDz],decls:23,vars:6,consts:[[1,"over-Flow"],[1,"main-header-title"],[1,"title"],["mat-icon-button","",1,"closeIcon",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["formControlName","TYPE","label","Rule Type*","appearance","outline","required","",1,"large-input",3,"options","focus","click"],["itemInput",""],["appearance","outline",1,"full-width2"],["matInput","","required","","formControlName","RUDESC"],["formControlName","MSGID","label","Message ID*","appearance","outline","required","",3,"options",4,"ngIf"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","","class","large-input",3,"options",4,"ngIf"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options",4,"ngIf"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"],["formControlName","MSGID","label","Message ID*","appearance","outline","required","",3,"options"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","",1,"large-input",3,"options"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title",2),t._uU(4,"Maintain Dock Rules"),t.qZA()(),t.TgZ(5,"button",3),t.NdJ("click",function(){return a.closeDialog()}),t.TgZ(6,"mat-icon",4),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"custom-input-autocomplete",9,10),t.NdJ("focus",function(){return a.onItemFocus()})("click",function(){return a.onItemFocus()}),t.qZA(),t.TgZ(14,"mat-form-field",11)(15,"mat-label"),t._uU(16,"Description"),t.qZA(),t._UZ(17,"input",12),t.qZA(),t.YNc(18,A,1,1,"custom-input-autocomplete",13),t.YNc(19,L,1,1,"custom-input-autocomplete",14),t.YNc(20,W,1,1,"custom-input-autocomplete",15),t.qZA()(),t.TgZ(21,"button",16),t.NdJ("click",function(){return a.addDockrules()}),t._uU(22," Add "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",a.form),t.xp6(3),t.Q6J("options",a.ruleOptions),t.xp6(6),t.Q6J("ngIf","EN"===a.normalizedType||"CL"===a.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===a.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===a.normalizedType),t.xp6(1),t.Q6J("disabled",a.isAddDisabled()))},dependencies:[P.m,p.O5,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.sg,g.u,m.Hw,l.lW,c.KE,c.hX,o.Nt,n.a8,n.dk,n.dn,n.n5,i.j,h.L],styles:["custom-input-autocomplete.large-input mat-form-field{width:50%}"]}),_})()}}]);