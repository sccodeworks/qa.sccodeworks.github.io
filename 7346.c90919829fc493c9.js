"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[7346,34894,26628],{34894:(L,p,i)=>{i.d(p,{e:()=>g});var u=i(94650),c=i(24006);let g=(()=>{class m{constructor(l,_){this.el=l,this.control=_}onInputChange(l){const _=this.el.nativeElement,d=_.value.toUpperCase();_.value=d,this.control&&this.control.control&&this.control.control.setValue(d,{emitEvent:!1})}}return m.\u0275fac=function(l){return new(l||m)(u.Y36(u.SBq),u.Y36(c.a5))},m.\u0275dir=u.lG2({type:m,selectors:[["","appUppercase",""]],hostBindings:function(l,_){1&l&&u.NdJ("input",function(S){return _.onInputChange(S)})},standalone:!0}),m})()},7346:(L,p,i)=>{i.r(p),i.d(p,{SerialLocationAuditComponent:()=>H});var u=i(98739),c=i(7155),g=i(70879),m=i(48529),t=i(94650),l=i(24006),_=i(65412),d=i(19132),S=i(81316),D=i(36895),E=i(97392),b=i(4859),T=i(59549),v=i(44144),f=i(73546),O=i(10266),Z=i(34894);function U(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.searchSerialLocationAudit())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function y(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.searchSerialLocationAudit())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function M(a,n){1&a&&(t.TgZ(0,"button",28),t._uU(1," Search "),t.qZA())}function x(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"form",22),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.getBySearch(r.form.value))}),t.TgZ(1,"div",23)(2,"div",24)(3,"mat-form-field",25)(4,"mat-label"),t._uU(5,"Location"),t.qZA(),t._UZ(6,"input",26),t.qZA()()(),t.YNc(7,M,2,0,"button",27),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(7),t.Q6J("ngIf",e.searchTextDisplay)}}function P(a,n){1&a&&(t.TgZ(0,"th",29),t._uU(1,"Part"),t.qZA())}function B(a,n){if(1&a&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.WITDSC)}}function I(a,n){1&a&&(t.TgZ(0,"th",29),t._uU(1,"Location Quantity"),t.qZA())}function N(a,n){if(1&a&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.WLQTY)}}function R(a,n){1&a&&(t.TgZ(0,"th",29),t._uU(1,"Serial Quantity"),t.qZA())}function W(a,n){if(1&a&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.WSQTY)}}function Q(a,n){1&a&&(t.TgZ(0,"th",29),t._uU(1,"Serials"),t.qZA())}function Y(a,n){if(1&a&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.WSCNT)}}function K(a,n){1&a&&t._UZ(0,"th",31)}function J(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"td",30)(1,"div",32)(2,"button",33)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",34)(6,"li")(7,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit,A=t.oxw();return t.KtG(A.addSerial(s))}),t.TgZ(8,"mat-icon",36),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Add Serial"),t.qZA()()()()()()}}function w(a,n){1&a&&t._UZ(0,"tr",37)}function F(a,n){1&a&&t._UZ(0,"tr",38)}const z=function(){return[8,16,24]};let H=(()=>{class a{constructor(e,o,r,s){this.fb=e,this.matDialog=o,this.router=r,this.serialLocAuditSvc=s,this.dataSource=new c.by,this.user=localStorage.getItem("userName")||"",this.building=localStorage.getItem("building"),this.storer=localStorage.getItem("storer"),this.storerSuffix=localStorage.getItem("storerSuffix"),this.status=localStorage.getItem("status"),this.searchTextDisplay=!1,this.currentLocation="",this.displayedColumns=["Part","LocQuantity","SerialQuantity","Serials","Actions"],this.duplicateSource=[],this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1}ngOnInit(){this.form=this.fb.group({location:""}),this.serialLocation(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}serialLocation(e,o){const r=this.currentFilters||{},{location:s}=r;this.serialLocAuditSubscription&&this.serialLocAuditSubscription.unsubscribe(),this.serialLocAuditSubscription=this.serialLocAuditSvc.getSerialLocation(this.user,this.storer,this.storerSuffix,m.R.fullBuilding(this.building),this.status,s||"",e,o).subscribe(A=>{const C=A[0]?.data?.[1]?.value;if(C)try{var h=JSON.parse(C);h.TotalRecords>0&&(this.dataSource.data=h.returnedData,this.totalRecords=h.TotalRecords,this.currentLocation=h.Location?.trim()||"")}catch(q){console.error("Error parsing response data:",q)}})}createFilter(){return(e,o)=>{const r=JSON.parse(o);return Object.keys(r).every(s=>e[s].toString().toLowerCase().includes(r[s].toLowerCase()))}}getBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.serialLocation(this.pageSize,this.pageNumber)}onPaginateChange(e){this.pageSize=e.pageSize,this.serialLocation(e.pageSize,e.pageIndex+1)}ngOnDestroy(){this.serialLocAuditSubscription&&this.serialLocAuditSubscription.unsubscribe()}searchSerialLocationAudit(){this.searchTextDisplay=1!=this.searchTextDisplay}addSerial(e){this.router.navigateByUrl("/main-nav/serial-location-audit/add/read",{state:{...e,location:this.currentLocation}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l.qu),t.Y36(_.uw),t.Y36(d.F0),t.Y36(S.B))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-serial-location-audit"]],viewQuery:function(e,o){if(1&e&&t.Gf(u.NW,5),2&e){let r;t.iGM(r=t.CRH())&&(o.paginator=r.first)}},standalone:!0,features:[t.jDz],decls:29,vars:10,consts:[[1,"over-Flow"],[1,"title"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search location",3,"click",4,"ngIf"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup","ngSubmit",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Part"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","LocQuantity"],["matColumnDef","SerialQuantity"],["matColumnDef","Serials"],["matColumnDef","Actions"],["mat-header-cell","","class","tally_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search location",1,"addButton",3,"click"],[1,"form","over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","location","appUppercase",""],["class","buttons addButton tally-search-btn","mat-raised-button","","type","submit","placeholder","Search",4,"ngIf"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"tally_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t._uU(3,"Location / Serial Audit"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,U,3,0,"button",3),t.YNc(6,y,3,0,"button",4),t.qZA()(),t.TgZ(7,"mat-card-content",5),t.YNc(8,x,8,2,"form",6),t.qZA(),t.TgZ(9,"table",7),t.ynx(10,8),t.YNc(11,P,2,0,"th",9),t.YNc(12,B,2,1,"td",10),t.BQk(),t.ynx(13,11),t.YNc(14,I,2,0,"th",9),t.YNc(15,N,2,1,"td",10),t.BQk(),t.ynx(16,12),t.YNc(17,R,2,0,"th",9),t.YNc(18,W,2,1,"td",10),t.BQk(),t.ynx(19,13),t.YNc(20,Q,2,0,"th",9),t.YNc(21,Y,2,1,"td",10),t.BQk(),t.ynx(22,14),t.YNc(23,K,1,0,"th",15),t.YNc(24,J,12,0,"td",10),t.BQk(),t.YNc(25,w,1,0,"tr",16),t.YNc(26,F,1,0,"tr",17),t.qZA(),t.TgZ(27,"mat-paginator",18,19),t.NdJ("page",function(s){return o.onPaginateChange(s)}),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!o.searchTextDisplay),t.xp6(2),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(9,z))("pageSize",o.pageSize))},dependencies:[g.m,D.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,u.NW,E.Hw,b.lW,T.KE,T.hX,v.Nt,f.a8,f.dk,f.dn,f.n5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,O.gM,Z.e]}),a})()}}]);