"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[40190,34894,11790,26628,38754,85645,70096,49741],{34894:(U,b,s)=>{s.d(b,{e:()=>p});var g=s(94650),l=s(24006);let p=(()=>{class S{constructor(_,u){this.el=_,this.control=u}onInputChange(_){const u=this.el.nativeElement,f=u.value.toUpperCase();u.value=f,this.control&&this.control.control&&this.control.control.setValue(f,{emitEvent:!1})}}return S.\u0275fac=function(_){return new(_||S)(g.Y36(g.SBq),g.Y36(l.a5))},S.\u0275dir=g.lG2({type:S,selectors:[["","appUppercase",""]],hostBindings:function(_,u){1&_&&g.NdJ("input",function(r){return u.onInputChange(r)})},standalone:!0}),S})()},11790:(U,b,s)=>{s.d(b,{y:()=>_});var g=s(65412),l=s(94650),p=s(97392),S=s(4859);let T=(()=>{class u{constructor(r,e){this.dialogRef=r,this.data=e}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return u.\u0275fac=function(r){return new(r||u)(l.Y36(g.so),l.Y36(g.WI))},u.\u0275cmp=l.Xpm({type:u,selectors:[["app-alert-dialog"]],decls:16,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["aria-label","Close dialog",1,"close-btn",3,"click"],[1,"icon-wrapper"],["src","assets/svg/icons/Delete.svg","alt","Delete",1,"delete-svg-icon"],[1,"confirm-dialog-title"],[1,"confirmation-message"],[1,"footer","confirm-dialog"],["mat-raised-button","","id","no-button",1,"buttons","cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","id","yes-button",1,"buttons","removeButton","new-tally-form-btn",3,"mat-dialog-close"]],template:function(r,e){1&r&&(l.TgZ(0,"div",0)(1,"div",1)(2,"button",2),l.NdJ("click",function(){return e.closeDialog()}),l.TgZ(3,"mat-icon"),l._uU(4,"close"),l.qZA()(),l.TgZ(5,"div",3),l._UZ(6,"img",4),l.qZA(),l.TgZ(7,"h2",5),l._uU(8,"Confirmation"),l.qZA(),l.TgZ(9,"span",6),l._uU(10),l.qZA()(),l.TgZ(11,"div",7)(12,"button",8),l._uU(13,"Cancel"),l.qZA(),l.TgZ(14,"button",9),l._uU(15,"Delete"),l.qZA()()()),2&r&&(l.xp6(10),l.Oqu(e.data.message),l.xp6(2),l.Q6J("mat-dialog-close",!1),l.xp6(2),l.Q6J("mat-dialog-close",!0))},dependencies:[p.Hw,S.lW,g.ZT]}),u})(),_=(()=>{class u{constructor(r){this.dialog=r}openCustomAlert(r){return this.dialog.open(T,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:r}})}}return u.\u0275fac=function(r){return new(r||u)(l.LFG(g.uw))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},40190:(U,b,s)=>{s.r(b),s.d(b,{WwScheduleExceptionsComponent:()=>Ye});var g=s(15861),l=s(98739),p=s(7155),S=s(18588),T=s(65412),_=s(35226),u=s.n(_),f=s(70879),r=s(48529),e=s(94650),x=s(15627),m=s(24006),N=s(5702),y=s(19132),H=s(97392),I=s(4859),v=s(59549),q=s(44144),B=s(84385),J=s(3238),C=s(73546);let F=(()=>{class n{constructor(t,i,o,c,d,h){this.iHeaderSvc=t,this.fb=i,this.anyvariable=o,this.ScheduleExceptionsSvc=c,this.router=d,this.dialogRef=h,this.user=localStorage.getItem("userName")||"",this.scheduleUrl="/main-nav/scheduleException/read"}ngOnInit(){this.form=this.fb.group({HETYPE:{value:this.anyvariable.HETYPE,disabled:!0},HEBLDG:{value:this.anyvariable.HEBLDG,disabled:!0},HEACCT:{value:this.anyvariable.HEACCT,disabled:!0},HEDATE:{value:this.anyvariable.HEDATE,disabled:!0},INOU:{value:this.anyvariable.HESBTP,disabled:!0},HEINOM:this.anyvariable.HEINOM,HESTRT:r.R.formatFullTime(this.anyvariable.HESTRT),HEENDT:r.R.formatFullTime(this.anyvariable.HEENDT),HEDESC:this.anyvariable.HEDESC})}updateScheduleExceptions(){var t=this.form.value;const o=new Date(this.anyvariable.HEDATE),E=`${String(o.getMonth()+1).padStart(2,"0")}/${String(o.getDate()).padStart(2,"0")}/${String(o.getFullYear()).slice(-2)}`;this.scheduleSubscription&&this.scheduleSubscription.unsubscribe(),this.scheduleSubscription=this.ScheduleExceptionsSvc.updateScheduleExceptions(this.anyvariable.HETYPE,r.R.fullBuilding(this.anyvariable.HEBLDG),this.anyvariable.HEACCT,E,this.anyvariable.HESBTP,this.anyvariable.HEINOM,r.R.timeStringToNumber(t.HESTRT),r.R.timeStringToNumber(t.HEENDT),t.HEDESC).subscribe(A=>{const Z=A[0].data[A[0].data.length-1].value;Z.toUpperCase()===r.R.updated.toUpperCase()?(this.successMessage(Z),this.closeDialog(),this.router.navigate([this.scheduleUrl])):this.failureMessage(Z)})}ngOnDestroy(){this.scheduleSubscription&&this.scheduleSubscription.unsubscribe()}successMessage(t){u().fire(t,"","success")}failureMessage(t){u().fire(t,"","error")}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.X),e.Y36(m.qu),e.Y36(T.WI),e.Y36(N.a),e.Y36(y.F0),e.Y36(T.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-schedule-exception-change"]],standalone:!0,features:[e.jDz],decls:57,vars:2,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","HETYPE"],["matInput","","formControlName","HEBLDG"],["matInput","","formControlName","HEACCT"],["matInput","","formControlName","HEDATE"],["matInput","","formControlName","INOU"],["formControlName","HEINOM","required",""],["value",""],["value","I"],["value","O"],["matInput","","type","time","matInput","","formControlName","HESTRT","placeholder","HH:mm","id","starttime","required",""],["matInput","","type","time","matInput","","formControlName","HEENDT","placeholder","HH:mm","id","endtime","required",""],["appearance","outline",1,"full-width2"],["matInput","","formControlName","HEDESC"],[1,"footer"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),e._uU(4,"Maintain Schedule Exceptions "),e.qZA()(),e.TgZ(5,"button",2),e.NdJ("click",function(){return i.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()(),e.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Type of Hours"),e.qZA(),e._UZ(15,"input",8),e.qZA(),e.TgZ(16,"mat-form-field",7)(17,"mat-label"),e._uU(18,"Building Number"),e.qZA(),e._UZ(19,"input",9),e.qZA(),e.TgZ(20,"mat-form-field",7)(21,"mat-label"),e._uU(22,"Account Code"),e.qZA(),e._UZ(23,"input",10),e.qZA(),e.TgZ(24,"mat-form-field",7)(25,"mat-label"),e._uU(26,"Exception Date"),e.qZA(),e._UZ(27,"input",11),e.qZA(),e.TgZ(28,"mat-form-field",7)(29,"mat-label"),e._uU(30,"In/Out"),e.qZA(),e._UZ(31,"input",12),e.qZA(),e.TgZ(32,"mat-form-field",7)(33,"mat-label"),e._uU(34,"Include Omit"),e.qZA(),e.TgZ(35,"mat-select",13)(36,"mat-option",14),e._uU(37,"-- Select --"),e.qZA(),e.TgZ(38,"mat-option",15),e._uU(39,"I - Include"),e.qZA(),e.TgZ(40,"mat-option",16),e._uU(41,"O - Omit"),e.qZA()()(),e.TgZ(42,"mat-form-field",7)(43,"mat-label"),e._uU(44,"Start Time"),e.qZA(),e._UZ(45,"input",17),e.qZA(),e.TgZ(46,"mat-form-field",7)(47,"mat-label"),e._uU(48,"End Time"),e.qZA(),e._UZ(49,"input",18),e.qZA(),e.TgZ(50,"mat-form-field",19)(51,"mat-label"),e._uU(52,"Description"),e.qZA(),e._UZ(53,"input",20),e.qZA()()(),e.TgZ(54,"div",21)(55,"button",22),e.NdJ("click",function(){return i.updateScheduleExceptions()}),e._uU(56," Update "),e.qZA()()()()()),2&t&&(e.xp6(9),e.Q6J("formGroup",i.form),e.xp6(46),e.Q6J("disabled",!(i.form.valid&&i.form.dirty)))},dependencies:[f.m,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,H.Hw,I.lW,v.KE,v.hX,q.Nt,B.gD,J.ey,C.a8,C.dk,C.dn,C.n5]}),n})();var M=s(11790);let k=(()=>{class n{constructor(t,i,o,c,d,h,E){this.iHeaderSvc=t,this.fb=i,this.anyvariable=o,this.ScheduleExceptionsSvc=c,this.router=d,this.CustomAlertService=h,this.dialogRef=E,this.user=localStorage.getItem("userName")||"",this.readUrl="/main-nav/scheduleException/read"}ngOnInit(){this.form=this.fb.group({HETYPE:this.anyvariable.HETYPE,HEBLDG:this.anyvariable.HEBLDG,HEACCT:this.anyvariable.HEACCT,HEDATE:this.anyvariable.HEDATE,subTypeHours:this.anyvariable.HESBTP,HEINOM:this.anyvariable.HEINOM,HESTRT:r.R.formatFullTime(this.anyvariable.HESTRT),HEENDT:r.R.formatFullTime(this.anyvariable.HEENDT),HEDESC:this.anyvariable.HEDESC}),this.form.disable()}deleteScheduleExceptions(){this.CustomAlertService.openCustomAlert("Are you sure you want to delete this Scheduled Exception ?").afterClosed().subscribe(i=>{this.ScheduledSubscription&&this.ScheduledSubscription.unsubscribe(),this.ScheduledSubscription=this.ScheduleExceptionsSvc.deleteScheduleExceptions(this.user,this.anyvariable.HETYPE,r.R.fullBuilding(this.anyvariable.HEBLDG),this.anyvariable.HEACCT,this.anyvariable.HEDATE,this.anyvariable.HESBTP).subscribe(o=>{const d=JSON.parse(o[0].data[o[0].data.length-1].value).returnedData.message;d.toUpperCase()===r.R.deleteMsg.toUpperCase()?(this.successMessage(d),this.closeDialog(),this.router.navigate([this.readUrl])):this.failureMessage(d)})})}ngOnDestroy(){this.ScheduledSubscription&&this.ScheduledSubscription.unsubscribe()}successMessage(t){u().fire(t,"","success")}failureMessage(t){u().fire(t,"","error")}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.X),e.Y36(m.qu),e.Y36(T.WI),e.Y36(N.a),e.Y36(y.F0),e.Y36(M.y),e.Y36(T.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-schedule-exception-delete"]],standalone:!0,features:[e.jDz],decls:51,vars:1,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","HETYPE"],["matInput","","formControlName","HEBLDG"],["matInput","","formControlName","HEACCT"],["matInput","","formControlName","HEDATE"],["matInput","","formControlName","subTypeHours"],["matInput","","formControlName","HEINOM"],["matInput","","matInput","","formControlName","HESTRT"],["matInput","","matInput","","formControlName","HEENDT"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","HEDESC"],[1,"footer"],["mat-raised-button","",1,"buttons","removeButton","new-tally-form-btn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),e._uU(4,"Delete Schedule Exceptions "),e.qZA()(),e.TgZ(5,"button",2),e.NdJ("click",function(){return i.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()(),e.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Type of Hours"),e.qZA(),e._UZ(15,"input",8),e.qZA(),e.TgZ(16,"mat-form-field",7)(17,"mat-label"),e._uU(18,"Building Number"),e.qZA(),e._UZ(19,"input",9),e.qZA(),e.TgZ(20,"mat-form-field",7)(21,"mat-label"),e._uU(22,"Account Code"),e.qZA(),e._UZ(23,"input",10),e.qZA(),e.TgZ(24,"mat-form-field",7)(25,"mat-label"),e._uU(26,"Exception Date"),e.qZA(),e._UZ(27,"input",11),e.qZA(),e.TgZ(28,"mat-form-field",7)(29,"mat-label"),e._uU(30,"Sub Type of Hours"),e.qZA(),e._UZ(31,"input",12),e.qZA(),e.TgZ(32,"mat-form-field",7)(33,"mat-label"),e._uU(34,"Include Omit"),e.qZA(),e._UZ(35,"input",13),e.qZA(),e.TgZ(36,"mat-form-field",7)(37,"mat-label"),e._uU(38,"Start Time"),e.qZA(),e._UZ(39,"input",14),e.qZA(),e.TgZ(40,"mat-form-field",7)(41,"mat-label"),e._uU(42,"End Time"),e.qZA(),e._UZ(43,"input",15),e.qZA(),e.TgZ(44,"mat-form-field",16)(45,"mat-label"),e._uU(46,"Description"),e.qZA(),e._UZ(47,"input",17),e.qZA()()(),e.TgZ(48,"div",18)(49,"button",19),e.NdJ("click",function(){return i.deleteScheduleExceptions()}),e._uU(50," Delete "),e.qZA()()()()()),2&t&&(e.xp6(9),e.Q6J("formGroup",i.form))},dependencies:[f.m,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,H.Hw,I.lW,v.KE,v.hX,q.Nt,C.a8,C.dk,C.dn,C.n5]}),n})();var Q=s(77579),G=s(78372),P=s(71884),L=s(86385),$=s(80529),Y=s(36895),W=s(28255),z=s(10266),j=s(90455),K=s(34894);function X(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",38)(2,"div",39)(3,"span",40),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(4,"mat-slide-toggle",41),e.NdJ("ngModelChange",function(o){const d=e.CHM(t).$implicit;return e.KtG(d.isActive=o)})("change",function(){const c=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.toggleColumn(c))}),e._uU(5),e.qZA()()()(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(4),e.Q6J("ngModel",t.isActive),e.xp6(1),e.hij(" ",t.name," ")}}function V(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.searchScheduleExceptions())}),e.TgZ(1,"mat-icon"),e._uU(2,"clear"),e.qZA(),e.TgZ(3,"span"),e._uU(4," Filter"),e.qZA()()}}function ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.searchScheduleExceptions())}),e._UZ(1,"img",44),e.TgZ(2,"span"),e._uU(3," Filter"),e.qZA()()}}function te(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"form",45),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getBySearch(o.form.value))}),e.TgZ(1,"div",38)(2,"div",46)(3,"mat-form-field",47)(4,"mat-label"),e._uU(5,"Type"),e.qZA(),e._UZ(6,"input",48),e.qZA(),e.TgZ(7,"mat-form-field",47)(8,"mat-label"),e._uU(9,"Building"),e.qZA(),e._UZ(10,"input",49),e.qZA(),e.TgZ(11,"mat-form-field",47)(12,"mat-label"),e._uU(13,"Account Code"),e.qZA(),e._UZ(14,"input",50),e.qZA()()(),e.TgZ(15,"div",51)(16,"button",52),e._uU(17," Search "),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form)}}function ne(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," Type "),e.qZA())}function ie(n,a){if(1&n&&(e.TgZ(0,"td",54),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.HETYPE)}}function oe(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," Building "),e.qZA())}function ae(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.HEBLDG)}}function se(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," Account "),e.qZA())}function le(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.HEACCT)}}function ce(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," Exception Date "),e.qZA())}function re(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.HEDATE)}}function ue(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," In/Out "),e.qZA())}function de(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.HESBTP)}}function me(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," Include Omit "),e.qZA())}function pe(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.HEINOM)}}function he(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," Start Time "),e.qZA())}function fe(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Oqu(i.formatTime(t.HESTRT))}}function ge(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," End Time "),e.qZA())}function _e(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit,i=e.oxw();e.xp6(1),e.Oqu(i.formatTime(t.HEENDT))}}function Te(n,a){1&n&&(e.TgZ(0,"th",53),e._uU(1," Description "),e.qZA())}function Se(n,a){if(1&n&&(e.TgZ(0,"td",55),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.Oqu(t.HEDESC)}}function xe(n,a){1&n&&(e.TgZ(0,"th",56),e._uU(1,"Actions"),e.qZA())}function Ce(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",77)(1,"button",78),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw(2).$implicit,h=e.oxw();return e.KtG(h.handleRecentClick(c,d))}),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.hij(" ",t.label," ")}}function Ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",70)(1,"div",71)(2,"span",72),e._uU(3,"Recent Searches"),e.qZA(),e.TgZ(4,"button",73),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.clearRecentSearches())}),e.TgZ(5,"span",74),e._uU(6,"Clear"),e.qZA()()(),e.TgZ(7,"ul",75),e.YNc(8,Ce,3,1,"li",76),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("ngForOf",t.filteredRecentSearches)}}function Ze(n,a){1&n&&(e.TgZ(0,"li",79)(1,"div",80)(2,"mat-icon",81),e._uU(3,"search"),e.qZA(),e.TgZ(4,"span",82),e._uU(5,"No results found"),e.qZA(),e.TgZ(6,"span",83),e._uU(7,"We couldn\u2019t find any items matching your search. Try adjusting your keywords."),e.qZA()()())}function be(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"img",86),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.s9C("alt",t.label),e.Q6J("src",t.icon,e.LSH)}}function ve(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-icon"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.icon)}}function Ae(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",84)(1,"button",78),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw().$implicit,h=e.oxw();return e.KtG(h.handleItemClick(c,d))}),e.YNc(2,be,2,2,"ng-container",85),e.YNc(3,ve,3,1,"ng-container",85),e._uU(4),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Q6J("ngIf",null==t.icon?null:t.icon.includes("assets")),e.xp6(1),e.Q6J("ngIf",!(null!=t.icon&&t.icon.includes("assets"))),e.xp6(1),e.hij(" ",t.label," ")}}function De(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"img",90),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.s9C("alt",t.label),e.Q6J("src",t.icon,e.LSH)}}function we(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-icon",91),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.icon)}}function ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",87)(1,"button",78),e.NdJ("click",function(){const c=e.CHM(t).$implicit,d=e.oxw().$implicit,h=e.oxw();return e.KtG(h.handleItemClick(c,d))}),e.TgZ(2,"div",88),e.YNc(3,De,2,2,"ng-container",85),e.YNc(4,we,3,1,"ng-container",85),e.TgZ(5,"span",89),e._uU(6),e.qZA()()()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("hidden",i.filteredItems.includes(t)),e.xp6(3),e.Q6J("ngIf",null==t.icon?null:t.icon.includes("assets")),e.xp6(1),e.Q6J("ngIf",!(null!=t.icon&&t.icon.includes("assets"))),e.xp6(2),e.Oqu(t.label)}}function Ue(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",55)(1,"div",57)(2,"button",58),e._UZ(3,"img",59),e.qZA(),e.TgZ(4,"ul",60)(5,"li",61)(6,"mat-form-field",62)(7,"input",63),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.searchDropdownText=o)})("input",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSearchChange())}),e.qZA()()(),e.YNc(8,Ee,9,1,"li",64),e.TgZ(9,"div",65),e._UZ(10,"hr",66),e.qZA(),e.YNc(11,Ze,8,0,"li",67),e.YNc(12,Ae,5,3,"li",68),e.YNc(13,ye,7,4,"li",69),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.searchDropdownText),e.xp6(1),e.Q6J("ngIf",t.filteredRecentSearches.length>0),e.xp6(3),e.Q6J("ngIf",0===t.filteredItems.length),e.xp6(1),e.Q6J("ngForOf",t.filteredItems),e.xp6(1),e.Q6J("ngForOf",t.menuItems)}}function Ne(n,a){1&n&&e._UZ(0,"tr",92)}function He(n,a){1&n&&e._UZ(0,"tr",93)}function Ie(n,a){1&n&&(e.TgZ(0,"div",94),e._UZ(1,"img",95),e.TgZ(2,"h3",96),e._uU(3,"No Data Available"),e.qZA(),e.TgZ(4,"p",97),e._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),e.qZA()())}const qe=function(){return[8,16,24]};let Ye=(()=>{class n{constructor(t,i,o,c,d,h,E){this.router=t,this.iHeaderSvc=i,this.fb=o,this.route=c,this.matDialog=d,this.ScheduleExceptionsSvc=h,this.http=E,this.displayedColumns=["Type","Build","Account","ExceptionDate","In/Out","IncludeOmit","StartTime","EndTime","Actions"],this.searchTextDisplay=!1,this.dataSource=new p.by,this.user=localStorage.getItem("userName")||"",this.searchInput$=new Q.x,this.isSearchMode=!1,this.allData=[],this.filteredData=[],this.pageData=[],this.duplicateSource=[],this.headerActions=[],this.menuItems=[],this.filteredItems=[],this.remainingItems=[],this.searchDropdownText="",this.recentSearches=[],this.filteredRecentSearches=[],this.isLoading=!0,this.noData=!1,this.columnShowHideList=[],this.pageSize=8,this.totalRecords=0,this.pageNumber=1,this.currentFilters=null}toggleColumn(t){if(t.isActive)t.position>this.displayedColumns.length-1?this.displayedColumns.push(t.name):this.displayedColumns.splice(t.position,0,t.name);else{let i=this.displayedColumns.indexOf(t.name);i>-1&&this.displayedColumns.splice(i,1)}}initializeColumnProperties(){this.displayedColumns.forEach((t,i)=>{"Actions"!=t&&this.columnShowHideList.push({position:i,name:t,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Description",isActive:!1})}ngOnInit(){this.form=this.fb.group({TYPE:"",BLDG:"",ACCT:""}),this.initializeColumnProperties(),this.editedRows=[],this.getScheduleExceptions(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter(),this.searchInput$.pipe((0,G.b)(500),(0,P.x)()).subscribe(o=>{this.handleSearch(o)}),this.http.get("assets/jsondata/scheduleExceptions.json").subscribe(o=>{this.headerActions=o.header,this.menuItems=o.items,this.filteredItems=[...this.menuItems],this.remainingItems=[...this.menuItems],this.searchConfig=o.search;const c=localStorage.getItem("recentSearches");if(c){const d=JSON.parse(c);this.recentSearches=this.menuItems.filter(h=>d.includes(h.label))}this.filteredRecentSearches=[...this.recentSearches]})}applyGlobalFilterInput(t){this.searchInput$.next(t)}loadSearchChunks(t,i){var o=this;return(0,g.Z)(function*(){const c=o.currentFilters||{},{TYPE:d="",BLDG:h="",ACCT:E=""}=c,{chunkSize:A,maxCalls:D}=o.getSearchStrategy(o.totalRecords||0);let Z=1,O=0,w=[];for(;O<D;){const We=(yield o.ScheduleExceptionsSvc.getScheduleExceptions(o.user,d,r.R.fullBuilding(h),E,A,Z).toPromise())?.[0]?.data?.[1]?.value,R=JSON.parse(We)?.returnedData||[],Oe=R.filter(Re=>Object.values(Re).some(Be=>String(Be).toLowerCase().includes(t)));if(w.push(...Oe),w.length>0||R.length<A)break;Z++,O++}o.allData=w,o.filteredData=w,o.totalRecords=w.length,i?.()})()}handleSearch(t){if(!(t=t.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.getScheduleExceptions(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(t,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}applyManualFilter(t){this.filteredData=this.allData.filter(i=>Object.values(i).some(o=>String(o).toLowerCase().includes(t))),this.noData=0===this.filteredData.length,this.totalRecords=this.filteredData.length,this.noData?this.dataSource.data=[]:this.loadPage(1)}loadPage(t){const i=(t-1)*this.pageSize;this.pageData=this.filteredData.slice(i,i+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=t-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(t){this.pageSize=t.pageSize,this.isSearchMode?this.loadPage(t.pageIndex+1):this.getScheduleExceptions(t.pageSize,t.pageIndex+1)}getSearchStrategy(t){return t<=1500?{chunkSize:300,maxCalls:4}:t<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}getScheduleExceptions(t,i){this.isLoading=!0,this.noData=!1,this.dataSource=new p.by([]);const o=this.currentFilters||{},{TYPE:c="",BLDG:d="",ACCT:h=""}=o;this.exceptionSubscription&&this.exceptionSubscription.unsubscribe(),this.exceptionSubscription=this.ScheduleExceptionsSvc.getScheduleExceptions(this.user,c,r.R.fullBuilding(d),h,t,i).subscribe({next:E=>{this.isLoading=!1;const D=JSON.parse(E?.[0]?.data?.[1]?.value||"{}"),Z=D?.returnedData||[];this.totalRecords=D?.TotalRecords||0,this.dataSource.data=Z,this.noData=0===Z.length,this.paginator&&(this.paginator.length=this.totalRecords)},error:()=>this.handleReceivableNoData()})}handleReceivableNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new p.by([])}createFilter(){return(t,i)=>{const o=JSON.parse(i);return Object.keys(o).every(c=>t[c].toString().toLowerCase().includes(o[c].toLowerCase()))}}searchScheduleExceptions(){this.searchTextDisplay=1!=this.searchTextDisplay}handleItemClick(t,i){this.executeAction(t,i),this.addToRecentSearches(t)}executeAction(t,i){"function"==typeof this[t.action]?this[t.action](i):console.warn("Action not implemented:",t.action)}handleRecentClick(t,i){this.searchDropdownText=t.label,this.onSearchChange(),"function"==typeof this[t.action]&&this[t.action](i),this.addToRecentSearches(t)}addToRecentSearches(t){this.recentSearches=this.recentSearches.filter(i=>i.label!==t.label),this.recentSearches.unshift(t),this.recentSearches.length>5&&this.recentSearches.pop(),localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches.map(i=>i.label))),this.filteredRecentSearches=[...this.recentSearches]}clearRecentSearches(){this.recentSearches=[],this.filteredRecentSearches=[],localStorage.removeItem("recentSearches")}onSearchChange(){const t=(this.searchDropdownText||"").toLowerCase();this.filteredItems=this.menuItems.filter(i=>i.label.toLowerCase().includes(t)),this.filteredRecentSearches=t?[]:[...this.recentSearches]}resetSearch(){this.form.reset(),this.currentFilters=null,this.isSearchMode=!1,this.allData=[],this.filteredData=[],this.paginator.firstPage(),this.getScheduleExceptions(this.pageSize,1)}add(){this.matDialog.open(S.ScheduleExceptionAddComponent,{panelClass:"right-dialog",autoFocus:!1})}change(t){this.matDialog.open(F,{panelClass:"right-dialog",data:t,autoFocus:!1})}delete(t){this.matDialog.open(k,{panelClass:"right-dialog",data:t,autoFocus:!1})}getBySearch(t){this.currentFilters=t,this.paginator.firstPage(),this.getScheduleExceptions(this.pageSize,this.pageNumber)}formatTime(t){if(!t&&0!==t)return"";const i=t.toString().padStart(4,"0");return`${parseInt(i.substring(0,i.length-2),10)}:${i.substring(i.length-2)}`}ngOnDestroy(){this.exceptionSubscription&&this.exceptionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.F0),e.Y36(x.X),e.Y36(m.qu),e.Y36(y.gz),e.Y36(T.uw),e.Y36(N.a),e.Y36($.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ww-schedule-exceptions"]],viewQuery:function(t,i){if(1&t&&e.Gf(l.NW,5),2&t){let o;e.iGM(o=e.CRH())&&(i.paginator=o.first)}},standalone:!0,features:[e.jDz],decls:62,vars:13,consts:[[1,"over-Flow"],[1,"header-buttons"],[1,"menu-container"],["mainMenuButton","matMenu"],[1,"grid-container"],[4,"ngFor","ngForOf"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Exceptions",3,"click",4,"ngIf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["src","assets/svg/header/showandhide.svg"],["mat-button","","type","reset","value","Reset","matTooltip","Reset Exceptions",1,"addButton","buttons",3,"click"],["mat-button","","matTooltip","Add New Exception",1,"addButton",3,"click"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup","ngSubmit",4,"ngIf"],["mat-table","","id","myTable",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Type"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","Perimary-row",4,"matCellDef"],["matColumnDef","Build"],["mat-cell","",4,"matCellDef"],["matColumnDef","Account"],["matColumnDef","ExceptionDate"],["matColumnDef","In/Out"],["matColumnDef","IncludeOmit"],["matColumnDef","StartTime"],["matColumnDef","EndTime"],["matColumnDef","Description"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],[1,"row"],[1,"grid-item"],[3,"click"],[3,"ngModel","ngModelChange","change"],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Exceptions",1,"addButton",3,"click"],["src","assets/svg/header/filter.svg"],[1,"form","over-Flow",3,"formGroup","ngSubmit"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","TYPE","maxlength","4","appUppercase",""],["matInput","","formControlName","BLDG","maxlength","3"],["matInput","","formControlName","ACCT","maxlength","10","appUppercase",""],[1,"footer"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell","","mat-header-cell",""],["mat-cell","",1,"Perimary-row"],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn","dropup"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false","data-bs-toggle","dropdown","aria-expanded","false","data-bs-auto-close","outside","data-bs-boundary","viewport","data-bs-popper","auto","data-popper-placement","auto",1,"btn"],["src","assets/svg/dropdownicons/Action.svg","alt","Actions",1,"Actions"],[1,"dropdown-menu","p-3"],[1,"search-section"],["appearance","outline",1,"search-input"],["matInput","","placeholder","Type to search",1,"full-width-search",3,"ngModel","ngModelChange","input"],["class","recent-searches",4,"ngIf"],[1,"filtered-divider-container"],[1,"filtered-divider"],["class","no-results",4,"ngIf"],["class","mb-menu-label",4,"ngFor","ngForOf"],["class","menu-items mb-1",3,"hidden",4,"ngFor","ngForOf"],[1,"recent-searches"],[1,"d-flex","justify-content-between","align-items-center"],[1,"Recent-search-label"],["mat-icon-button","",3,"click"],[1,"clear"],[1,"list-unstyled"],["class","mb-recent-label",4,"ngFor","ngForOf"],[1,"mb-recent-label"],[1,"w-100","text-start",3,"click"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"no-results-header"],[1,"no-results-text"],[1,"mb-menu-label"],[4,"ngIf"],[3,"src","alt"],[1,"menu-items","mb-1",3,"hidden"],[1,"menu-content"],[1,"menu-label"],[1,"menu-icon",3,"src","alt"],[1,"drop-menu-icon"],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"div",1)(3,"mat-menu",2,3)(5,"div",4),e.YNc(6,X,6,2,"ng-container",5),e.qZA()(),e.TgZ(7,"mat-form-field",6)(8,"mat-icon",7),e._uU(9,"search"),e.qZA(),e.TgZ(10,"input",8),e.NdJ("input",function(c){return i.applyGlobalFilterInput(c.target.value)}),e.qZA()(),e.YNc(11,V,5,0,"button",9),e.YNc(12,ee,4,0,"button",10),e.TgZ(13,"button",11,12),e._UZ(15,"img",13),e.qZA(),e.TgZ(16,"button",14),e.NdJ("click",function(){return i.resetSearch()}),e.TgZ(17,"mat-icon"),e._uU(18,"loop"),e.qZA()(),e.TgZ(19,"button",15),e.NdJ("click",function(){return i.add()}),e.TgZ(20,"mat-icon"),e._uU(21,"add"),e.qZA(),e.TgZ(22,"span"),e._uU(23,"Create Exception"),e.qZA()()()(),e.TgZ(24,"mat-card-content",16),e.YNc(25,te,18,1,"form",17),e.qZA(),e.TgZ(26,"table",18),e.ynx(27,19),e.YNc(28,ne,2,0,"th",20),e.YNc(29,ie,2,1,"td",21),e.BQk(),e.ynx(30,22),e.YNc(31,oe,2,0,"th",20),e.YNc(32,ae,2,1,"td",23),e.BQk(),e.ynx(33,24),e.YNc(34,se,2,0,"th",20),e.YNc(35,le,2,1,"td",23),e.BQk(),e.ynx(36,25),e.YNc(37,ce,2,0,"th",20),e.YNc(38,re,2,1,"td",23),e.BQk(),e.ynx(39,26),e.YNc(40,ue,2,0,"th",20),e.YNc(41,de,2,1,"td",23),e.BQk(),e.ynx(42,27),e.YNc(43,me,2,0,"th",20),e.YNc(44,pe,2,1,"td",23),e.BQk(),e.ynx(45,28),e.YNc(46,he,2,0,"th",20),e.YNc(47,fe,2,1,"td",23),e.BQk(),e.ynx(48,29),e.YNc(49,ge,2,0,"th",20),e.YNc(50,_e,2,1,"td",23),e.BQk(),e.ynx(51,30),e.YNc(52,Te,2,0,"th",20),e.YNc(53,Se,2,1,"td",23),e.BQk(),e.ynx(54,31),e.YNc(55,xe,2,0,"th",32),e.YNc(56,Ue,14,5,"td",23),e.BQk(),e.YNc(57,Ne,1,0,"tr",33),e.YNc(58,He,1,0,"tr",34),e.qZA(),e.YNc(59,Ie,6,0,"div",35),e.TgZ(60,"mat-paginator",36,37),e.NdJ("page",function(c){return i.onPaginateChange(c)}),e.qZA()()),2&t){const o=e.MAs(4);e.xp6(6),e.Q6J("ngForOf",i.columnShowHideList),e.xp6(5),e.Q6J("ngIf",i.searchTextDisplay),e.xp6(1),e.Q6J("ngIf",!i.searchTextDisplay),e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(12),e.Q6J("ngIf",i.searchTextDisplay),e.xp6(1),e.Q6J("dataSource",i.dataSource),e.xp6(31),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(1),e.Q6J("ngIf",!i.isLoading&&i.noData),e.xp6(1),e.Q6J("length",i.totalRecords)("pageSizeOptions",e.DdM(12,qe))("pageSize",i.pageSize)}},dependencies:[f.m,Y.sg,Y.O5,m._Y,m.Fj,m.JJ,m.JL,m.nD,m.On,m.sg,m.u,l.NW,H.Hw,W.VK,W.p6,I.lW,v.KE,v.hX,v.qo,q.Nt,C.a8,C.dk,C.dn,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,z.gM,j.Rr,K.e,L.j]}),n})()},15861:(U,b,s)=>{function g(p,S,T,_,u,f,r){try{var e=p[f](r),x=e.value}catch(m){return void T(m)}e.done?S(x):Promise.resolve(x).then(_,u)}function l(p){return function(){var S=this,T=arguments;return new Promise(function(_,u){var f=p.apply(S,T);function r(x){g(f,_,u,r,e,"next",x)}function e(x){g(f,_,u,r,e,"throw",x)}r(void 0)})}}s.d(b,{Z:()=>l})}}]);