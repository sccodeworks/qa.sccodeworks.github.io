"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[5673],{35673:(k,h,r)=>{r.r(h),r.d(h,{StorageinvoiceInquiryTypeXComponent:()=>w});var y=r(70879),I=r(35226),S=r.n(I),g=r(36895),T=r(98739),u=r(7155),t=r(94650),d=r(19132),A=r(11240),m=r(24006),D=r(65412),Z=r(97392),E=r(4859),f=r(59549),C=r(44144),p=r(73546),b=r(10266);function M(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchStorer())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function O(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchStorer())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function U(n,o){1&n&&(t.TgZ(0,"th",42),t._uU(1," Item "),t.qZA())}function N(n,o){if(1&n&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.HOy(" ",e.WKITDSC," ",e.WKS1LOT1," ",e.WKS1LOT2," ",e.WKS1LOT3," ")}}function P(n,o){1&n&&(t.TgZ(0,"th",42),t._uU(1," Date "),t.qZA())}function q(n,o){if(1&n&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij("",e.WKS1DATE," ")}}function R(n,o){1&n&&(t.TgZ(0,"th",42),t._uU(1," Quantity On Hand "),t.qZA())}function X(n,o){if(1&n&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.AsE(" ",0!==e.WK1BALN?e.WK1BALN:""," ",0!==e.WK1BUNT?e.WK1BUNT:""," ")}}function B(n,o){1&n&&(t.TgZ(0,"th",42),t._uU(1," Rate "),t.qZA())}function K(n,o){if(1&n&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij("",0!==e.WKRATE?e.WKRATE:""," ")}}function W(n,o){1&n&&(t.TgZ(0,"th",42),t._uU(1," Charge Amount "),t.qZA())}function x(n,o){if(1&n&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",0!==e.WKAMT?e.WKAMT:"","")}}function L(n,o){1&n&&(t.TgZ(0,"th",42),t._uU(1," Minimum charge "),t.qZA())}function F(n,o){if(1&n&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.WK1MIN)}}function G(n,o){1&n&&t._UZ(0,"tr",44)}function J(n,o){1&n&&t._UZ(0,"tr",45)}function Y(n,o){1&n&&(t.TgZ(0,"div",46),t._uU(1," Invoice exceeds reasonable amount for the storer, reasonable storer amount set at $500.00 "),t.qZA())}const Q=function(){return[8,16,24]};let w=(()=>{class n{constructor(e,i,a,c,s,l){this.router=e,this.StorerServiceService=i,this.fb=a,this.route=c,this.matDialog=s,this.cdr=l,this.StorerRead="/main-nav/storer",this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.duplicateSource=[],this.displayedColumns=["Item","Date","QuantityOnHand","Rate","ChargeAmount","Minimumcharge"],this.dataSource=new u.by,this.user=localStorage.getItem("userName")||"",this.INITIAL_PAGE=1,this.DEFAULT_PAGE_SIZE=8,this.searchTextDisplay=!0,this.period="",this.totalAmountDue=0,this.total=0,this.item=""}ngOnInit(){this.element=history.state;const e=new Date,i=(0,g.p6)(e,"yyyy-MM-dd","en-US"),a=(0,g.p6)(e,"HH:mm","en-US");this.S1STOR=this.element.STORE,this.S1SSFX=this.element.STSFX,this.STNAME=this.element.STNAME,this.form=this.fb.group({Date:[new Date],Time:[this.formatCurrentTime()],S1STOR:[this.element.STORE]+"\xa0"+[this.element.STNAME],S1SSFX:this.S1SSFX,INVNO:"",GENDT:i,GENTM:a,WKITEM:this.item,SNAME:""}),this.getStorageInvoice(this.pageSize,this.INITIAL_PAGE),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}ngOnDestroy(){this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe()}searchStorer(){this.searchTextDisplay=1!=this.searchTextDisplay}getInquireBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,this.INITIAL_PAGE)}createFilter(){return(e,i)=>{const a=JSON.parse(i);return Object.keys(a).every(c=>e[c]?.toString().toLowerCase().includes(a[c].toLowerCase())||!1)}}resetSearch(){this.form.reset(),this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,1)}onPaginateChange(e){this.pageSize=e.pageSize,this.getStorageInvoice(e.pageSize,e.pageIndex+1)}getStorageInvoice(e,i){const{S1STOR:c=`${this.element.STORE}`,S1SSFX:s="",GEND:l="",WKITEM:H=""}=this.currentFilters||{};this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe(),this.StorageInvoicesSubscription=this.StorerServiceService.StorageInvoiceInquiryXtype(this.user,this.element.STORE,this.S1SSFX,"","0",this.item,e,i).subscribe(v=>{console.log(v);var _=JSON.parse(v[0].data[1]?.value);this.dataSource.data=_.returnedData,this.totalRecords=_.TotalRecords,this.GeneratedDate=_["Generated Date"],this.GeneratedTime=_["Generated Time"],this.totalAmountDue=_["Total Amount Due"],this.item=_?.WKITEM||"",console.log("Assigned item:",this.item),this.form.patchValue({WKITEM:this.item})})}onPrintAccessInvoice(){const i=this.element.STORE,a=this.form.get("S1SSFX")?.value;this.StorerServiceService.PrintStorageInvoice("P",i,a,"").subscribe({next:s=>{console.log("Print Access Invoice response:",s);const l=s.msg||"Submitted Successfully";"Submitted Successfully"===l?this.successMessage(l):this.failureMessage(l)},error:s=>{console.error("Print Access Invoice error:",s),this.failureMessage("Submission Failed")}})}onPostAccessInvoice(){const i=this.element.STORE,a=this.form.get("S1SSFX")?.value;this.StorerServiceService.PostStorageInvoice("U",i,a,"").subscribe({next:s=>{console.log("Post Access Invoice response:",s);const l=s.msg||"Submitted Successfully";"Submitted Successfully"===l?this.successMessage(l):this.failureMessage(l)},error:s=>{console.error("Post Access Invoice error:",s),this.failureMessage("Submission Failed")}})}successMessage(e){S().fire(e,"","success")}failureMessage(e){S().fire(e,"","error")}onBack(){this.router.navigate([this.StorerRead])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.F0),t.Y36(A.h),t.Y36(m.qu),t.Y36(d.gz),t.Y36(D.uw),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-storageinvoice-inquiry-type-x"]],viewQuery:function(e,i){if(1&e&&t.Gf(T.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},standalone:!0,features:[t.jDz],decls:82,vars:17,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Storage invoice details",3,"click",4,"ngIf"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Date"],["matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","formControlName","WKITEM",2,"text-transform","uppercase"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","GENDT",3,"value"],["matInput","","formControlName","GENTM",3,"value"],["matInput","","formControlName","S1STOR",2,"text-transform","uppercase"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Date"],["matColumnDef","QuantityOnHand"],["matColumnDef","Rate"],["matColumnDef","ChargeAmount"],["matColumnDef","Minimumcharge"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],["class","warn",4,"ngIf"],[1,"Content-page-both-right"],[1,"right-side-content"],[1,"buttons","button3"],["mat-raised-button","","type","submit",1,"buttons","addButton","tally-search-btn",3,"click"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Storage invoice details",1,"addButton",3,"click"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"warn"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return i.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Storage Invoice Inquiry "),t.qZA(),t.TgZ(7,"div",3),t.YNc(8,M,3,0,"button",4),t.YNc(9,O,3,0,"button",5),t.qZA()(),t.TgZ(10,"mat-card-content",6)(11,"form",7),t.NdJ("ngSubmit",function(){return i.getInquireBySearch(i.form.value)}),t.TgZ(12,"div",8)(13,"div",9)(14,"mat-form-field",10)(15,"mat-label"),t._uU(16,"Date "),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.TgZ(18,"mat-form-field",10)(19,"mat-label"),t._uU(20,"Time"),t.qZA(),t._UZ(21,"input",12),t.qZA(),t.TgZ(22,"mat-form-field",10)(23,"mat-label"),t._uU(24,"Position to Item"),t.qZA(),t._UZ(25,"input",13),t.qZA(),t.TgZ(26,"div",14)(27,"label",15),t._uU(28,"Generated"),t.qZA(),t.TgZ(29,"div",16)(30,"mat-form-field",10)(31,"mat-label"),t._uU(32,"Generated Date "),t.qZA(),t._UZ(33,"input",17),t.qZA(),t.TgZ(34,"mat-form-field",10)(35,"mat-label"),t._uU(36,"Generated Time"),t.qZA(),t._UZ(37,"input",18),t.qZA()()(),t.TgZ(38,"mat-form-field",10)(39,"mat-label"),t._uU(40," Storer "),t.qZA(),t._UZ(41,"input",19),t.qZA()()()()(),t.TgZ(42,"table",20),t.ynx(43,21),t.YNc(44,U,2,0,"th",22),t.YNc(45,N,2,4,"td",23),t.BQk(),t.ynx(46,24),t.YNc(47,P,2,0,"th",22),t.YNc(48,q,2,1,"td",23),t.BQk(),t.ynx(49,25),t.YNc(50,R,2,0,"th",22),t.YNc(51,X,2,2,"td",23),t.BQk(),t.ynx(52,26),t.YNc(53,B,2,0,"th",22),t.YNc(54,K,2,1,"td",23),t.BQk(),t.ynx(55,27),t.YNc(56,W,2,0,"th",22),t.YNc(57,x,2,1,"td",23),t.BQk(),t.ynx(58,28),t.YNc(59,L,2,0,"th",22),t.YNc(60,F,2,1,"td",23),t.BQk(),t.YNc(61,G,1,0,"tr",29),t.YNc(62,J,1,0,"tr",30),t.qZA(),t._UZ(63,"br"),t.TgZ(64,"div",31)(65,"div",32),t.YNc(66,Y,2,0,"div",33),t.qZA()(),t.TgZ(67,"div",34),t._UZ(68,"br"),t.TgZ(69,"div",35)(70,"button",36),t._uU(71),t.ALo(72,"number"),t.qZA()()(),t._UZ(73,"br"),t.TgZ(74,"div",31)(75,"div",32)(76,"button",37),t.NdJ("click",function(){return i.onPostAccessInvoice()}),t._uU(77,"Post & Print"),t.qZA(),t.TgZ(78,"button",37),t.NdJ("click",function(){return i.onPrintAccessInvoice()}),t._uU(79," Print "),t.qZA()()(),t.TgZ(80,"mat-paginator",38,39),t.NdJ("page",function(c){return i.onPaginateChange(c)}),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("ngIf",i.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!i.searchTextDisplay),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(22),t.Q6J("value",i.GeneratedDate),t.xp6(4),t.Q6J("value",i.GeneratedTime),t.xp6(5),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(4),t.Q6J("ngIf",i.totalAmountDue>500),t.xp6(5),t.hij(" Total Amount : $",t.xi3(72,13,i.totalAmountDue,"1.2-2")," "),t.xp6(9),t.Q6J("length",i.totalRecords)("pageSizeOptions",t.DdM(16,Q))("pageSize",i.pageSize))},dependencies:[y.m,g.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,T.NW,Z.Hw,E.lW,f.KE,f.hX,C.Nt,p.a8,p.dk,p.dn,p.n5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,b.gM,g.JJ]}),n})()}}]);