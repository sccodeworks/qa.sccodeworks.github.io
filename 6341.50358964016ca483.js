"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[6341],{6341:(ot,g,a)=>{a.r(g),a.d(g,{StorerAccessInvoiceEnquiryComponent:()=>et});var T=a(98739),l=a(7155),I=a(70879),Z=a(35226),A=a.n(Z),t=a(94650),S=a(19132),C=a(11240),m=a(24006),y=a(65412),E=a(36895),D=a(97392),q=a(4859),f=a(59549),N=a(44144),h=a(99602),d=a(73546),P=a(10266);function O(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.searchAccessInvInq())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function b(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.searchAccessInvInq())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function U(e,r){if(1&e&&(t.TgZ(0,"form",30)(1,"div",31)(2,"div",32)(3,"mat-form-field",33)(4,"mat-label"),t._uU(5,"Period"),t.qZA(),t._UZ(6,"input",34),t.qZA(),t.TgZ(7,"mat-form-field",33)(8,"mat-label"),t._uU(9,"Date "),t.qZA(),t._UZ(10,"input",35),t.qZA(),t.TgZ(11,"mat-form-field",33)(12,"mat-label"),t._uU(13,"Time"),t.qZA(),t._UZ(14,"input",36),t.qZA(),t.TgZ(15,"div",37)(16,"label",38),t._uU(17,"Generated"),t.qZA(),t.TgZ(18,"div",39)(19,"mat-form-field",33)(20,"mat-label"),t._uU(21,"Generated Date "),t.qZA(),t._UZ(22,"input",40)(23,"mat-datepicker-toggle",41)(24,"mat-datepicker",null,42),t.qZA(),t.TgZ(26,"mat-form-field",33)(27,"mat-label"),t._uU(28,"Generated Time"),t.qZA(),t._UZ(29,"input",43),t.qZA()()(),t.TgZ(30,"mat-form-field",33)(31,"mat-label"),t._uU(32," Page Of "),t.qZA(),t._UZ(33,"input",44),t.qZA(),t.TgZ(34,"mat-form-field",33)(35,"mat-label"),t._uU(36,"Document"),t.qZA(),t._UZ(37,"input",45),t.qZA(),t.TgZ(38,"mat-form-field",46)(39,"mat-label"),t._uU(40," Storer "),t.qZA(),t._UZ(41,"input",47),t.qZA()()(),t.TgZ(42,"button",48),t._uU(43," Search "),t.qZA()()),2&e){const n=t.MAs(25),o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("value",o.period),t.xp6(16),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n)}}function M(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Date"),t.qZA())}function x(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WDATE)}}function R(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Tally / Order"),t.qZA())}function W(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WTALLY)}}function B(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Reference Number"),t.qZA())}function Y(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WREFNO)}}function K(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Pieces"),t.qZA())}function G(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WPIECE)}}function L(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Weight"),t.qZA())}function k(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WWEIGH)}}function F(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Type"),t.qZA())}function J(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WTYPE)}}function Q(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Return / Payment Type"),t.qZA())}function w(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WRTNTP)}}function $(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Consignee"),t.qZA())}function z(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WCONS)}}function H(e,r){1&e&&(t.TgZ(0,"th",49),t._uU(1,"Min"),t.qZA())}function X(e,r){if(1&e&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WMIN)}}function j(e,r){1&e&&t._UZ(0,"tr",51)}function V(e,r){1&e&&t._UZ(0,"tr",52)}const tt=function(){return[4,8,16]};let et=(()=>{class e{constructor(n,o,i,c,u,s){this.router=n,this.StorerServiceService=o,this.fb=i,this.route=c,this.matDialog=u,this.cdr=s,this.StorerRead="/main-nav/storer",this.dataSource=new l.by,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.headerColumns=["Date","TallyOrder","ReferenceNo","Pieces","Weight","Type","RtnPayTp","Consignee","Min"],this.WKINVN="0",this.searchTextDisplay=!1,this.user=localStorage.getItem("userName")||"",this.columnShowHideList=[],this.StorerName="",this.period="",this.totalAmountDue=0,this.total=0}ngOnInit(){this.element=history.state,this.StorerName=this.element.STNAME,this.form=this.fb.group({Period:this.element.Period,P1STOR:[this.element.STORE]+"\xa0"+[this.element.STNAME],P1SSFX:this.element.STSFX,GEND:"",INVNO:"",Date:[this.getTodayDate()],Time:[this.formatCurrentTime()],GENDT:"",GENTM:"",CPAG:"1",WKDOCN:"",SNAME:""}),this.getAccessInvoiceEnquiry(this.pageSize,1),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const n=new Date;return`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`}getTodayDate(){return(new Date).toISOString().split("T")[0]}createFilter(){return(n,o)=>{const i=JSON.parse(o);return Object.keys(i).every(c=>{const u=n[c]?.toString().toLowerCase()||"",s=i[c].toLowerCase();return u.includes(s)})}}resetSearch(){this.form.reset(),this.currentFilters=null,this.paginator.firstPage(),this.getAccessInvoiceEnquiry(this.pageSize,1)}onPaginateChange(n){this.pageSize=n.pageSize,this.getAccessInvoiceEnquiry(n.pageSize,n.pageIndex+1)}searchAccessInvInq(){this.searchTextDisplay=1!=this.searchTextDisplay}getAccessInvoiceEnquiry(n,o){const i=this.currentFilters||{},{P1STOR:c=`${this.element.STORE}`,P1SSFX:u="",GEND:s="",WKDOCN:_=""}=i;this.getAll2Subscription&&this.getAll2Subscription.unsubscribe(),this.getAll2Subscription=this.StorerServiceService.AccessInvoiceInquiry(this.user,c,u,s,_,this.WKINVN,n,o).subscribe(nt=>{var p=JSON.parse(nt[0].data[1]?.value),v=p.returnedData;this.dataSource.data=v,this.period=p.Period,this.totalAmountDue=p["Total Amount Due"],this.loadGeneratedDateTime(v[0].WKGEND),this.StorerName=p.StorerName,this.totalRecords=p.TotalRecords})}loadGeneratedDateTime(n){const o=n.replace('WKGEND":"',"").replace(/"/g,""),i="20"+o.substring(1,3),c=o.substring(3,5),u=o.substring(5,7),s=o.substring(7,9),_=o.substring(9,11);this.form.patchValue({GENDT:new Date(`${i}-${c}-${u}`),GENTM:`${s}:${_}`})}getSupplyBySearch(n){this.currentFilters=n,this.paginator.firstPage(),this.getAccessInvoiceEnquiry(this.pageSize,1)}onPrintAccessInvoice(){const o=this.element.STORE,i=this.form.get("P1SSFX")?.value;this.StorerServiceService.PrintAccessInvoice("P",o,i,"").subscribe({next:u=>{const s=u?.[0]?.data?.[3]?.value;s&&"Submitted Successfully"===s?this.successMessage(s):this.failureMessage(s)},error:u=>{this.failureMessage("Submission Failed")}})}onPostAccessInvoice(){const o=this.element.STORE,i=this.form.get("P1SSFX")?.value;this.StorerServiceService.PostAccessInvoice("U",o,i,"").subscribe({next:u=>{const s=u?.[0]?.data,_=s?.[s.length-1]?.value;"Submitted Successfully"===_?this.successMessage(_):this.failureMessage(_)},error:u=>{this.failureMessage(u?.message||"Submission Failed")},complete:()=>{}})}successMessage(n){A().fire(n,"","success")}failureMessage(n){A().fire(n,"","error")}onBack(){this.router.navigate([this.StorerRead])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(S.F0),t.Y36(C.h),t.Y36(m.qu),t.Y36(S.gz),t.Y36(y.uw),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-storer-access-invoice-enquiry"]],viewQuery:function(n,o){if(1&n&&t.Gf(T.NW,5),2&n){let i;t.iGM(i=t.CRH())&&(o.paginator=i.first)}},standalone:!0,features:[t.jDz],decls:58,vars:14,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","search AccessInvInq",3,"click",4,"ngIf"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","TallyOrder"],["matColumnDef","ReferenceNo"],["matColumnDef","Pieces"],["matColumnDef","Weight"],["matColumnDef","Type"],["matColumnDef","RtnPayTp"],["matColumnDef","Consignee"],["matColumnDef","Min"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],[1,"buttons","button3"],["mat-raised-button","","type","submit",1,"buttons","addButton","tally-search-btn",3,"click"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","search AccessInvInq",1,"addButton",3,"click"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","readonly","",3,"value"],["matInput","","formControlName","Date","type","date"],["matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","GENDT",3,"matDatepicker"],["matSuffix","",3,"for"],["GeneratedDatePicker",""],["matInput","","type","time","formControlName","GENTM","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","formControlName","CPAG"],["matInput","","formControlName","WKDOCN"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","P1STOR",2,"text-transform","uppercase"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return o.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Accessorial Invoice WorkSheet Inquiry"),t.qZA(),t.TgZ(7,"div",3),t.YNc(8,O,3,0,"button",4),t.YNc(9,b,3,0,"button",5),t.qZA()(),t.TgZ(10,"mat-card-content",6),t.YNc(11,U,44,4,"form",7),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"table",8),t.ynx(14,9),t.YNc(15,M,2,0,"th",10),t.YNc(16,x,2,1,"td",11),t.BQk(),t.ynx(17,12),t.YNc(18,R,2,0,"th",10),t.YNc(19,W,2,1,"td",11),t.BQk(),t.ynx(20,13),t.YNc(21,B,2,0,"th",10),t.YNc(22,Y,2,1,"td",11),t.BQk(),t.ynx(23,14),t.YNc(24,K,2,0,"th",10),t.YNc(25,G,2,1,"td",11),t.BQk(),t.ynx(26,15),t.YNc(27,L,2,0,"th",10),t.YNc(28,k,2,1,"td",11),t.BQk(),t.ynx(29,16),t.YNc(30,F,2,0,"th",10),t.YNc(31,J,2,1,"td",11),t.BQk(),t.ynx(32,17),t.YNc(33,Q,2,0,"th",10),t.YNc(34,w,2,1,"td",11),t.BQk(),t.ynx(35,18),t.YNc(36,$,2,0,"th",10),t.YNc(37,z,2,1,"td",11),t.BQk(),t.ynx(38,19),t.YNc(39,H,2,0,"th",10),t.YNc(40,X,2,1,"td",11),t.BQk(),t.YNc(41,j,1,0,"tr",20),t.YNc(42,V,1,0,"tr",21),t.qZA(),t.TgZ(43,"div",22),t._UZ(44,"br")(45,"br"),t.TgZ(46,"div",23)(47,"button",24),t._uU(48),t.ALo(49,"number"),t.qZA()()(),t.TgZ(50,"div",22)(51,"div",23)(52,"button",25),t.NdJ("click",function(){return o.onPostAccessInvoice()}),t._uU(53,"Post & Print"),t.qZA(),t.TgZ(54,"button",25),t.NdJ("click",function(){return o.onPrintAccessInvoice()}),t._uU(55," Print "),t.qZA()()(),t.TgZ(56,"mat-paginator",26,27),t.NdJ("page",function(c){return o.onPaginateChange(c)}),t.qZA()()),2&n&&(t.xp6(8),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!o.searchTextDisplay),t.xp6(2),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",o.headerColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.headerColumns),t.xp6(6),t.hij(" Total Amount : $",t.xi3(49,10,o.totalAmountDue,"1.2-2")," "),t.xp6(8),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(13,tt))("pageSize",o.pageSize))},dependencies:[I.m,E.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,T.NW,D.Hw,q.lW,f.KE,f.hX,f.R9,N.Nt,h.Mq,h.hl,h.nW,d.a8,d.dk,d.dn,d.n5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,P.gM,E.JJ]}),e})()}}]);