"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[9344],{95190:(j,y,o)=>{o.d(y,{c:()=>t});var e=o(80529),O=o(75625),q=o(70262),M=o(62843),v=o(92340),R=o(94650);let t=(()=>{class _{constructor(l){this.httpClient=l,this.url=v.N.API_BASE_URL,this.httpHeader={headers:new e.WM({"Content-Type":"application/json"})}}getSupplyTransactions(l,u,i,p,N,f,d,m,T,A,g,Z,C){return this.httpClient.get(this.url+"/SupplyTransactions/read",{params:{user:l,SNSTOR:u??"",SNCONS:i??"",SNCARR:p??"",SNDOCT:N??"",SNDOCN:f??"",SNTYPE:d??"",WKSDATE:m??"",WKEDATE:T??"",SNPOOL:A??"",SNINV:g??"",recordsPerPage:Z??"",pageNo:C??""}})}createSupplyTransactions(l,u,i,p,N,f,d,m,T,A,g,Z,C,I,U,h,D,P){return this.httpClient.post(this.url+"/SupplyTransactions/create",{user:l,SNSTOR:u,SNSSFX:i,SNCONS:p,SNCARR:N,SNDOCT:f,SNDOCN:d,SNTYPE:m,SNLOCN:T,SNRQTY:A,SNXQTY:g,SNUQTY:Z,SNPOOL:C,SNINVP:I,SNREAS:U,SNSPID:h,SNNUMB:D,SNSTAT:P}).pipe((0,O.X)(1),(0,q.K)(this.httpError))}updateSupplyTransactions(l,u,i,p,N,f,d,m,T,A,g,Z,C,I,U,h,D,P,b){return this.httpClient.put(this.url+"/SupplyTransactions/update",{user:l,SNTRAN:u,SNSTOR:i,SNSSFX:p,SNCONS:N,SNCARR:f,SNDOCT:d,SNDOCN:m,SNTYPE:T,SNLOCN:A,SNRQTY:g,SNXQTY:Z,SNUQTY:C,SNPOOL:I,SNINVP:U,SNREAS:h,SNSPID:D,SNNUMB:P,SNSTAT:b}).pipe((0,O.X)(1),(0,q.K)(this.httpError))}getSupplyTransactionsInquiry(l,u,i,p){return this.httpClient.get(this.url+`/SupplyTransactions/read?user=${l}&SNSTOR=${u}&SNSSFX=${i}&SNTRAN=${p}`)}DeleteSupplytransaction(l,u){return this.httpClient.delete(this.url+`/SupplyTransactions/delete?user=${l}&SNTRAN=${u}`)}httpError(l){let u="";return u=l.error instanceof ErrorEvent?l.error.message:`Error Code: ${l.status}\nMessage: ${l.message}`,console.log(u),(0,M._)(()=>new Error(u))}}return _.\u0275fac=function(l){return new(l||_)(R.LFG(e.eN))},_.\u0275prov=R.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},19344:(j,y,o)=>{o.r(y),o.d(y,{WwSupplytransactionsAddComponent:()=>nt});var e=o(24006),O=o(65412),q=o(35226),M=o.n(q),v=o(70879),R=o(48529),t=o(94650),_=o(95190),W=o(19132),l=o(36895),u=o(97392),i=o(4859),p=o(59549),N=o(44144),f=o(84385),d=o(3238),m=o(73546);function T(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Storer Number is required. "),t.qZA())}function A(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be a number between 1 to 4 digits. "),t.qZA())}function g(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 2 characters. "),t.qZA())}function Z(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Consignee Code is required. "),t.qZA())}function C(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 1 to 12 characters. "),t.qZA())}function I(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Carrier Code is required. "),t.qZA())}function U(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 1 to 15 characters. "),t.qZA())}function h(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Supply Type is required. "),t.qZA())}function D(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be numbers or uppercase characters. "),t.qZA())}function P(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Document Type is required. "),t.qZA())}function b(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Document Number is required. "),t.qZA())}function G(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be a number between 1 to 9 digits. "),t.qZA())}function H(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Pool Affected is required for Document Types 'O' and 'A'. "),t.qZA())}function tt(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Whose Invoice is required for Document Types 'O', 'A', and 'I'. "),t.qZA())}function rt(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 1 to 2 uppercase letters. "),t.qZA())}function et(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 1 to 30 uppercase alphanumeric characters. "),t.qZA())}function at(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be a number between 1 to 3 digits. "),t.qZA())}let nt=(()=>{class a{constructor(r,n,S,c,E){this.SupplyTransactions=r,this.data=n,this.dialogRef=S,this.router=c,this.fb=E,this.user=localStorage.getItem("userName")}ngOnInit(){this.form=this.fb.group({SNSTOR:["",[e.kI.required,e.kI.pattern("[0-9]{1,4}")]],SNSSFX:["",[e.kI.maxLength(2),e.kI.pattern("^[a-zA-Z]{1,}$")]],SNCONS:["",[e.kI.maxLength(12),e.kI.pattern("^[a-zA-Z]{1,}$")]],SNCARR:["",[e.kI.maxLength(15),e.kI.pattern("^[a-zA-Z]{1,}$")]],SNTYPE:["",[e.kI.required,e.kI.maxLength(10),e.kI.pattern("^[a-zA-Z]{1,}$")]],SNDOCT:["",[e.kI.required,e.kI.maxLength(1),e.kI.pattern("^[A-Z]{1}$")]],SNDOCN:["",e.kI.pattern("[0-9]{1,9}")],SNLOCN:["",[e.kI.pattern(/^[A-Z0-9]{1,16}$/)]],SNRQTY:["",e.kI.pattern("[0-9]{1,4}")],SNXQTY:["",e.kI.pattern("[0-9]{1,4}")],SNUQTY:["",e.kI.pattern("[0-9]{1,4}")],SNPOOL:["",[e.kI.required,e.kI.pattern("^[SCT]{1}$")]],SNINVP:["",[e.kI.required,e.kI.pattern("^[SCT]{1}$")]],SNREAS:["",[e.kI.maxLength(2),e.kI.pattern("^[a-zA-Z]{1,}$")]],SNSPID:["",[e.kI.maxLength(30),e.kI.pattern("^[a-zA-Z0-9]{1,}$")]],SNNUMB:["",[e.kI.pattern(/^\d{1,3}$/)]],SNSTAT:"AC"}),this.setupDocumentTypeValidation()}ngOnDestroy(){this.supplyTransactionsSubscription&&this.supplyTransactionsSubscription.unsubscribe()}setupDocumentTypeValidation(){this.form.get("SNDOCT")?.valueChanges.subscribe(r=>{this.resetValidation(),"A"===r&&this.setValidators(["SNTYPE","SNPOOL","SNINVP"]),("I"===r||"O"===r)&&this.setValidators(["SNCONS","SNCARR","SNTYPE","SNDOCN","SNPOOL","SNINVP"])})}setValidators(r){r.forEach(n=>{this.form.get(n)?.setValidators([e.kI.required]),this.form.get(n)?.updateValueAndValidity()})}resetValidation(){["SNTYPE","SNDOCN","SNPOOL","SNINVP","SNCONS","SNCARR"].forEach(n=>{this.form.get(n)?.clearValidators(),this.form.get(n)?.updateValueAndValidity()})}addSupplytransactions(){const r=this.form.value;r.SNDOCT=r.SNDOCT.toUpperCase(),r.SNCONS=r.SNCONS.toUpperCase(),r.SNCARR=r.SNCARR.toUpperCase(),r.SNTYPE=r.SNTYPE.toUpperCase(),r.SNPOOL=r.SNPOOL.toUpperCase(),r.SNINVP=r.SNINVP.toUpperCase(),this.supplyTransactionsSubscription&&this.supplyTransactionsSubscription.unsubscribe(),this.supplyTransactionsSubscription=this.SupplyTransactions.createSupplyTransactions(this.user,r.SNSTOR,r.SNSSFX,r.SNCONS,r.SNCARR,r.SNDOCT,r.SNDOCN,r.SNTYPE,r.SNLOCN,r.SNRQTY,r.SNXQTY,r.SNUQTY,r.SNPOOL,r.SNINVP,r.SNREAS,r.SNSPID,r.SNNUMB,r.SNSTAT).subscribe(n=>{const c=JSON.parse(n[0].data[n[0].data.length-1].value).returnedData.message;c?.toUpperCase()===R.R.createMsg.toUpperCase()?(this.successMessage(c),this.closeDialog(),this.router.navigate(["/main-nav/supply-transactions/read"])):this.failureMessage(c)})}successMessage(r){M().fire(r,"","success")}failureMessage(r){M().fire(r,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(_.c),t.Y36(O.WI),t.Y36(O.so),t.Y36(W.F0),t.Y36(e.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ww-supplytransactions-add"]],standalone:!0,features:[t.jDz],decls:128,vars:18,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","SNSTOR"],[4,"ngIf"],["matInput","","formControlName","SNSSFX",2,"text-transform","uppercase"],["matInput","","formControlName","SNCONS",2,"text-transform","uppercase"],["matInput","","formControlName","SNCARR",2,"text-transform","uppercase"],["matInput","","formControlName","SNTYPE",2,"text-transform","uppercase"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["formControlName","SNDOCT"],["value",""],["value","I"],["value","O"],["value","A"],["matInput","","formControlName","SNDOCN",2,"text-transform","uppercase"],["appearance","outline"],["matInput","","formControlName","SNLOCN"],["matInput","","formControlName","SNRQTY"],["matInput","","formControlName","SNXQTY"],["matInput","","formControlName","SNUQTY"],["formControlName","SNPOOL"],["value","S"],["value","C"],["value","T"],["formControlName","SNINVP"],["matInput","","formControlName","SNREAS",2,"text-transform","uppercase"],["matInput","","formControlName","SNSPID",2,"text-transform","uppercase"],["matInput","","formControlName","SNNUMB",2,"text-transform","uppercase"],["matInput","","formControlName","SNSTAT",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(r,n){if(1&r&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Supply Transaction"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Storer Number"),t.qZA(),t._UZ(15,"input",9),t.YNc(16,T,2,0,"mat-error",10),t.YNc(17,A,2,0,"mat-error",10),t.qZA(),t.TgZ(18,"mat-form-field",8)(19,"mat-label"),t._uU(20,"Storer Suffix"),t.qZA(),t._UZ(21,"input",11),t.YNc(22,g,2,0,"mat-error",10),t.qZA(),t.TgZ(23,"mat-form-field",8)(24,"mat-label"),t._uU(25,"Consignee Code"),t.qZA(),t._UZ(26,"input",12),t.YNc(27,Z,2,0,"mat-error",10),t.YNc(28,C,2,0,"mat-error",10),t.qZA(),t.TgZ(29,"mat-form-field",8)(30,"mat-label"),t._uU(31,"Carrier Code"),t.qZA(),t._UZ(32,"input",13),t.YNc(33,I,2,0,"mat-error",10),t.YNc(34,U,2,0,"mat-error",10),t.qZA(),t.TgZ(35,"mat-form-field",8)(36,"mat-label"),t._uU(37,"Supply Type"),t.qZA(),t._UZ(38,"input",14),t.YNc(39,h,2,0,"mat-error",10),t.YNc(40,D,2,0,"mat-error",10),t.qZA(),t._UZ(41,"br"),t.TgZ(42,"div",15)(43,"label",16),t._uU(44,"Document"),t.qZA(),t.TgZ(45,"div",17)(46,"mat-form-field",8)(47,"mat-label"),t._uU(48,"Document Type"),t.qZA(),t.TgZ(49,"mat-select",18)(50,"mat-option",19),t._uU(51,"-- Select --"),t.qZA(),t.TgZ(52,"mat-option",20),t._uU(53,"I"),t.qZA(),t.TgZ(54,"mat-option",21),t._uU(55,"O"),t.qZA(),t.TgZ(56,"mat-option",22),t._uU(57,"A"),t.qZA()(),t.YNc(58,P,2,0,"mat-error",10),t.qZA(),t.TgZ(59,"mat-form-field",8)(60,"mat-label"),t._uU(61,"Document Number"),t.qZA(),t._UZ(62,"input",23),t.YNc(63,b,2,0,"mat-error",10),t.YNc(64,G,2,0,"mat-error",10),t.qZA()()(),t.TgZ(65,"mat-form-field",24)(66,"mat-label"),t._uU(67,"Location"),t.qZA(),t._UZ(68,"input",25),t.qZA(),t.TgZ(69,"mat-form-field",24)(70,"mat-label"),t._uU(71,"Returned"),t.qZA(),t._UZ(72,"input",26),t.qZA(),t.TgZ(73,"mat-form-field",24)(74,"mat-label"),t._uU(75,"Rejected"),t.qZA(),t._UZ(76,"input",27),t.qZA(),t.TgZ(77,"mat-form-field",24)(78,"mat-label"),t._uU(79,"Used"),t.qZA(),t._UZ(80,"input",28),t.qZA(),t.TgZ(81,"mat-form-field",8)(82,"mat-label"),t._uU(83,"Pool Affected"),t.qZA(),t.TgZ(84,"mat-select",29)(85,"mat-option",19),t._uU(86,"-- Select --"),t.qZA(),t.TgZ(87,"mat-option",30),t._uU(88,"S"),t.qZA(),t.TgZ(89,"mat-option",31),t._uU(90,"C"),t.qZA(),t.TgZ(91,"mat-option",32),t._uU(92,"T"),t.qZA()(),t.YNc(93,H,2,0,"mat-error",10),t.qZA(),t.TgZ(94,"mat-form-field",8)(95,"mat-label"),t._uU(96,"Whose Invoice"),t.qZA(),t.TgZ(97,"mat-select",33)(98,"mat-option",19),t._uU(99,"-- Select --"),t.qZA(),t.TgZ(100,"mat-option",30),t._uU(101,"S"),t.qZA(),t.TgZ(102,"mat-option",31),t._uU(103,"C"),t.qZA(),t.TgZ(104,"mat-option",32),t._uU(105,"T"),t.qZA()(),t.YNc(106,tt,2,0,"mat-error",10),t.qZA(),t.TgZ(107,"mat-form-field",8)(108,"mat-label"),t._uU(109,"Reason Code"),t.qZA(),t._UZ(110,"input",34),t.YNc(111,rt,2,0,"mat-error",10),t.qZA(),t.TgZ(112,"mat-form-field",8)(113,"mat-label"),t._uU(114,"Supply ID Number"),t.qZA(),t._UZ(115,"input",35),t.YNc(116,et,2,0,"mat-error",10),t.qZA(),t.TgZ(117,"mat-form-field",8)(118,"mat-label"),t._uU(119,"Rate Number"),t.qZA(),t._UZ(120,"input",36),t.YNc(121,at,2,0,"mat-error",10),t.qZA(),t.TgZ(122,"mat-form-field",8)(123,"mat-label"),t._uU(124,"Status"),t.qZA(),t._UZ(125,"input",37),t.qZA()()(),t.TgZ(126,"button",38),t.NdJ("click",function(){return n.addSupplytransactions()}),t._uU(127,"Create"),t.qZA()()()()),2&r){let S,c,E,L,Y,x,B,K,Q,J,V,w,k,$,F,X,z;t.xp6(9),t.Q6J("formGroup",n.form),t.xp6(7),t.Q6J("ngIf",null==(S=n.form.get("SNSTOR"))?null:S.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(c=n.form.get("SNSTOR"))?null:c.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==(E=n.form.get("SNSSFX"))?null:E.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==(L=n.form.get("SNCONS"))?null:L.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(Y=n.form.get("SNCONS"))?null:Y.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==(x=n.form.get("SNCARR"))?null:x.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(B=n.form.get("SNCARR"))?null:B.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==(K=n.form.get("SNTYPE"))?null:K.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(Q=n.form.get("SNTYPE"))?null:Q.hasError("pattern")),t.xp6(18),t.Q6J("ngIf",null==(J=n.form.get("SNDOCT"))?null:J.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(V=n.form.get("SNDOCN"))?null:V.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(w=n.form.get("SNDOCN"))?null:w.hasError("pattern")),t.xp6(29),t.Q6J("ngIf",null==(k=n.form.get("SNPOOL"))?null:k.hasError("required")),t.xp6(13),t.Q6J("ngIf",null==($=n.form.get("SNINVP"))?null:$.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(F=n.form.get("SNREAS"))?null:F.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==(X=n.form.get("SNSPID"))?null:X.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==(z=n.form.get("SNNUMB"))?null:z.hasError("pattern"))}},dependencies:[v.m,l.O5,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,u.Hw,i.lW,p.TO,p.KE,p.hX,N.Nt,f.gD,d.ey,m.a8,m.dk,m.dn,m.n5]}),a})()}}]);