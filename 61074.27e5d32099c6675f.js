"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[61074],{61074:(at,d,r)=>{r.r(d),r.d(d,{RAgingInquiryComponent:()=>it});var T=r(98739),s=r(7155),A=r(77579),y=r(70879),Z=r(89881),t=r(94650),h=r(19132),m=r(24006),I=r(65412),C=r(23128),g=r(36895),q=r(97392),v=r(4859),p=r(59549),D=r(44144),U=r(84385),b=r(3238),_=r(73546),R=r(10266);function O(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.searchInquiry())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Filter"),t.qZA()()}}function S(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.searchInquiry())}),t._UZ(1,"img",36),t.TgZ(2,"span"),t._uU(3,"Filter"),t.qZA()()}}function x(e,i){if(1&e&&(t.TgZ(0,"mat-form-field",40)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",50)(4,"mat-option",51),t._uU(5,"AI = Accessorial Invoice"),t.qZA(),t.TgZ(6,"mat-option",52),t._uU(7,"GI = General Invoice"),t.qZA(),t.TgZ(8,"mat-option",53),t._uU(9,"SI = Storage Invoice"),t.qZA(),t.TgZ(10,"mat-option",54),t._uU(11,"FI = Freight Invoice"),t.qZA(),t.TgZ(12,"mat-option",55),t._uU(13,"MI = Miscellaneous Invoice"),t.qZA()()()),2&e){const n=i.$implicit;t.xp6(2),t.hij("Include Type ",n,""),t.xp6(1),t.Q6J("formControlName","includeType"+n)}}function E(e,i){if(1&e&&(t.TgZ(0,"mat-form-field",40)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-select",50)(4,"mat-option",51),t._uU(5,"AI = Accessorial Invoice"),t.qZA(),t.TgZ(6,"mat-option",52),t._uU(7,"GI = General Invoice"),t.qZA(),t.TgZ(8,"mat-option",53),t._uU(9,"SI = Storage Invoice"),t.qZA(),t.TgZ(10,"mat-option",54),t._uU(11,"FI = Freight Invoice"),t.qZA(),t.TgZ(12,"mat-option",55),t._uU(13,"MI = Miscellaneous Invoice"),t.qZA()()()),2&e){const n=i.$implicit;t.xp6(2),t.hij("Omit ",n,""),t.xp6(1),t.Q6J("formControlName","omitType"+n)}}const f=function(){return[1,2,3,4,5]};function N(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"form",37),t.NdJ("ngSubmit",function(){t.CHM(n);const o=t.oxw();return t.KtG(o.getInquiryBySearch(o.form.value))}),t.TgZ(1,"div",38)(2,"div",39)(3,"mat-form-field",40)(4,"mat-label"),t._uU(5,"Aging Date"),t.qZA(),t._UZ(6,"input",41),t.qZA(),t.TgZ(7,"mat-form-field",42)(8,"mat-label"),t._uU(9,"Customer"),t.qZA(),t._UZ(10,"input",43),t.qZA(),t.TgZ(11,"div",44)(12,"label",45),t._uU(13,"Include Types"),t.qZA(),t.TgZ(14,"div",46),t.YNc(15,x,14,2,"mat-form-field",47),t.qZA()(),t._UZ(16,"br"),t.TgZ(17,"div",44)(18,"label",45),t._uU(19,"Omit"),t.qZA(),t.TgZ(20,"div",46),t.YNc(21,E,14,2,"mat-form-field",47),t.qZA()()()(),t.TgZ(22,"div",48)(23,"button",49),t._uU(24," Search "),t.qZA()()()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.form),t.xp6(15),t.Q6J("ngForOf",t.DdM(3,f)),t.xp6(6),t.Q6J("ngForOf",t.DdM(4,f))}}function M(e,i){1&e&&(t.TgZ(0,"th",56),t._uU(1,"Status"),t.qZA())}function B(e,i){if(1&e&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.AHSTAT)}}function P(e,i){1&e&&(t.TgZ(0,"th",56),t._uU(1,"Invoice Number"),t.qZA())}function L(e,i){if(1&e&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.AHINV," ")}}function K(e,i){1&e&&(t.TgZ(0,"th",56),t._uU(1,"Invoice Date"),t.qZA())}function F(e,i){if(1&e&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.AHDATE)}}function Y(e,i){1&e&&(t.TgZ(0,"th",56),t._uU(1,"Transaction Type"),t.qZA())}function W(e,i){if(1&e&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.AHTRNC)}}function J(e,i){1&e&&(t.TgZ(0,"th",56),t._uU(1,"Transaction Code"),t.qZA())}function w(e,i){if(1&e&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.AHTYPE)}}function Q(e,i){1&e&&(t.TgZ(0,"th",56),t._uU(1,"Building Number"),t.qZA())}function $(e,i){if(1&e&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.AHBLDG)}}function G(e,i){1&e&&(t.TgZ(0,"th",56),t._uU(1,"Bill-To Customer"),t.qZA())}function k(e,i){if(1&e&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.CSDSCH)}}function H(e,i){1&e&&(t.TgZ(0,"th",56),t._uU(1,"Balance Due"),t.qZA())}function j(e,i){if(1&e&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" $",t.xi3(2,1,n.AHBALN,"1.2-2")," ")}}function z(e,i){1&e&&t._UZ(0,"th",59)}function X(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"td",57)(1,"div",60)(2,"button",61)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",62)(6,"li")(7,"button",63),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.agingInquiryRead(l))}),t.TgZ(8,"mat-icon",64),t._uU(9,"message"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Inquiry"),t.qZA()()()()()()}}function V(e,i){1&e&&t._UZ(0,"tr",65)}function tt(e,i){1&e&&t._UZ(0,"tr",66)}function et(e,i){1&e&&(t.TgZ(0,"div",67),t._UZ(1,"img",68),t.TgZ(2,"h3",69),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",70),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}const nt=function(){return[8,16,24]};let it=(()=>{class e{constructor(n,a,o,l,u){this.router=n,this.fb=a,this.route=o,this.matDialog=l,this.customerService=u,this.displayedColumns=["Status","Invoice Number","Invoice Date","Transaction Code","Invoice Type","Building Number","Bill-To Customer","Balance Due","Actions"],this.LT30=0,this.Over30=0,this.Over60=0,this.Over90=0,this.Over120=0,this.Due=0,this.Unapplied=0,this.Net=0,this.isLoading=!1,this.noData=!1,this.dataSource=new s.by,this.duplicateSource=[],this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.searchTextDisplay=!1,this.user=localStorage.getItem("userName")||"",this.pageNumber=1,this.searchInput$=new A.x,this.url="/main-nav/customers/read"}ngOnInit(){const n=(new Date).toISOString().split("T")[0];this.element=history.state,console.log(n),this.form=this.fb.group({AGDAT:[n],CSDSC:this.element.WKCUST+"\xa0"+this.element.CUNAME,includeType1:"",includeType2:"",includeType3:"",includeType4:"",includeType5:"",omitType1:"",omitType2:"",omitType3:"",omitType4:"",omitType5:""}),this.getInquiry(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}ngOnDestroy(){this.agingSubscription&&this.agingSubscription.unsubscribe()}applyGlobalFilterInput(n){this.searchInput$.next(n)}getInquiry(n,a){const o=this.form.value;this.agingSubscription&&this.agingSubscription.unsubscribe(),this.isLoading=!0,this.noData=!1,this.agingSubscription=this.customerService.AgingInquiryRead(this.user,this.element.WKCUST,this.element.CUSFX,this.element.CUSSFX,o.AGDAT,o.includeType1,o.includeType2,o.includeType3,o.includeType4,o.includeType5,o.omitType1,o.omitType2,o.omitType3,o.omitType4,o.omitType5,n,a).subscribe({next:l=>{const u=JSON.parse(l[0].data[1]?.value||"{}"),c=u.returnedData||[];this.dataSource.data=c,this.totalRecords=u.TotalRecords||0,this.duplicateSource=c,this.dataSource.paginator=this.paginator,this.LT30=u.WKTLT30??0,this.Over30=u.WKT30??0,this.Due=u.WKTDUE??0,this.Over60=u.WKT60??0,this.Over90=u.WKT90??0,this.Unapplied=u.WKUNAP??0,this.Over120=u.WKT120??0,this.Net=u.WKNET??0,this.noData=0===c.length,this.isLoading=!1},error:()=>{this.dataSource.data=[],this.totalRecords=0,this.noData=!0,this.isLoading=!1}})}getInquiryBySearch(n){this.currentFilters=n,this.paginator.firstPage(),this.getInquiry(this.pageSize,this.pageNumber)}onBack(){this.router.navigate([this.url])}onPaginateChange(n){this.pageSize=n.pageSize,this.getInquiry(n.pageSize,n.pageIndex+1)}createFilter(){return(n,a)=>{const o=JSON.parse(a);return Object.keys(o).every(l=>{const u=n[l]?.toString().toLowerCase()||"",c=o[l].toLowerCase();return u.includes(c)})}}resetSearch(){const n={AGDAT:this.form.get("AGDAT")?.value||(new Date).toISOString().split("T")[0],CSDSC:this.form.get("CSDSC")?.value||`${this.element.STORE} \xa0 ${this.element.STNAME}`};this.form.reset(),this.form.patchValue({...n,includeType1:"",includeType2:"",includeType3:"",includeType4:"",includeType5:"",omitType1:"",omitType2:"",omitType3:"",omitType4:"",omitType5:""}),this.currentFilters=null,this.pageNumber=1,this.paginator.firstPage(),this.getInquiry(this.pageSize,1)}agingInquiryRead(n){this.matDialog.open(Z.R,{width:"1000px",maxHeight:"80vh",data:n,autoFocus:!1})}searchInquiry(){this.searchTextDisplay=1!=this.searchTextDisplay}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(m.qu),t.Y36(h.gz),t.Y36(I.uw),t.Y36(C.v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-r-aging-inquiry"]],viewQuery:function(n,a){if(1&n&&t.Gf(T.NW,5),2&n){let o;t.iGM(o=t.CRH())&&(a.paginator=o.first)}},standalone:!0,features:[t.jDz],decls:80,vars:43,consts:[[1,"over-Flow"],[1,"header-buttons","d-flex","align-items-center"],[1,"d-flex","align-items-center","me-auto"],["mat-button","",1,"backButton","go-back-btn",3,"click"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Inquiry",3,"click",4,"ngIf"],["mat-button","","type","reset","matTooltip","Reset Inquiry",1,"addButton","buttons",3,"click"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup","ngSubmit",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Invoice Number"],["mat-cell","","class","Primary-row",4,"matCellDef"],["matColumnDef","Invoice Date"],["matColumnDef","Invoice Type"],["matColumnDef","Transaction Code"],["matColumnDef","Building Number"],["matColumnDef","Bill-To Customer"],["matColumnDef","Balance Due"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],[1,"summary-container","info"],[1,"summary-row","align-between"],[1,"summary-pill"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Inquiry",1,"addButton",3,"click"],["src","assets/svg/header/filter.svg"],[1,"form","over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["type","date","matInput","","formControlName","AGDAT"],["appearance","outline",1,"full-width2"],["readonly","","matInput","","formControlName","CSDSC"],[1,"form-group1"],[1,"form-heading"],[1,"form-input"],["appearance","outline","class","full-width",4,"ngFor","ngForOf"],[1,"footer"],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn"],[3,"formControlName"],["value","AI"],["value","GI"],["value","SI"],["value","FI"],["value","MI"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"Primary-row"],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","data-bs-toggle","dropdown",1,"btn"],[1,"dropdown-menu"],["mat-icon-button","",3,"click"],["color","primary"],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(n,a){1&n&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"div",1)(3,"mat-card-title",2)(4,"button",3),t.NdJ("click",function(){return a.onBack()}),t.TgZ(5,"mat-icon"),t._uU(6,"navigate_before"),t.qZA()(),t._uU(7," Customer Receivables Inquiry "),t.qZA(),t.TgZ(8,"mat-form-field",4)(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.TgZ(11,"input",6),t.NdJ("input",function(l){return a.applyGlobalFilterInput(l.target.value)}),t.qZA()(),t.YNc(12,O,5,0,"button",7),t.YNc(13,S,4,0,"button",8),t.TgZ(14,"button",9),t.NdJ("click",function(){return a.resetSearch()}),t.TgZ(15,"mat-icon"),t._uU(16,"loop"),t.qZA()()()(),t.TgZ(17,"mat-card-content",10),t.YNc(18,N,25,5,"form",11),t.qZA(),t.TgZ(19,"table",12),t.ynx(20,13),t.YNc(21,M,2,0,"th",14),t.YNc(22,B,2,1,"td",15),t.BQk(),t.ynx(23,16),t.YNc(24,P,2,0,"th",14),t.YNc(25,L,2,1,"td",17),t.BQk(),t.ynx(26,18),t.YNc(27,K,2,0,"th",14),t.YNc(28,F,2,1,"td",15),t.BQk(),t.ynx(29,19),t.YNc(30,Y,2,0,"th",14),t.YNc(31,W,2,1,"td",15),t.BQk(),t.ynx(32,20),t.YNc(33,J,2,0,"th",14),t.YNc(34,w,2,1,"td",15),t.BQk(),t.ynx(35,21),t.YNc(36,Q,2,0,"th",14),t.YNc(37,$,2,1,"td",15),t.BQk(),t.ynx(38,22),t.YNc(39,G,2,0,"th",14),t.YNc(40,k,2,1,"td",15),t.BQk(),t.ynx(41,23),t.YNc(42,H,2,0,"th",14),t.YNc(43,j,3,4,"td",15),t.BQk(),t.ynx(44,24),t.YNc(45,z,1,0,"th",25),t.YNc(46,X,12,0,"td",15),t.BQk(),t.YNc(47,V,1,0,"tr",26),t.YNc(48,tt,1,0,"tr",27),t.qZA(),t.YNc(49,et,6,0,"div",28),t.TgZ(50,"div",29)(51,"div",30)(52,"div",31),t._uU(53),t.ALo(54,"number"),t.qZA(),t.TgZ(55,"div",31),t._uU(56),t.ALo(57,"number"),t.qZA(),t.TgZ(58,"div",31),t._uU(59),t.ALo(60,"number"),t.qZA()(),t.TgZ(61,"div",30)(62,"div",31),t._uU(63),t.ALo(64,"number"),t.qZA(),t.TgZ(65,"div",31),t._uU(66),t.ALo(67,"number"),t.qZA(),t.TgZ(68,"div",31),t._uU(69),t.ALo(70,"number"),t.qZA()(),t.TgZ(71,"div",30)(72,"div",31),t._uU(73),t.ALo(74,"number"),t.qZA(),t.TgZ(75,"div",31),t._uU(76),t.ALo(77,"number"),t.qZA()()(),t.TgZ(78,"mat-paginator",32,33),t.NdJ("page",function(l){return a.onPaginateChange(l)}),t.qZA()()),2&n&&(t.xp6(12),t.Q6J("ngIf",a.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!a.searchTextDisplay),t.xp6(5),t.Q6J("ngIf",a.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",a.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",!a.isLoading&&a.noData),t.xp6(4),t.hij("LT 30 : $",t.xi3(54,18,a.LT30,"1.2-2"),""),t.xp6(3),t.hij("Over 30 : $",t.xi3(57,21,a.Over30,"1.2-2"),""),t.xp6(3),t.hij("Due : $",t.xi3(60,24,a.Due,"1.2-2"),""),t.xp6(4),t.hij("Over 60 : $",t.xi3(64,27,a.Over60,"1.2-2"),""),t.xp6(3),t.hij("Over 90 : $",t.xi3(67,30,a.Over90,"1.2-2"),""),t.xp6(3),t.hij("Unapplied : $",t.xi3(70,33,a.Unapplied,"1.2-2"),""),t.xp6(4),t.hij("Over 120 : $",t.xi3(74,36,a.Over120,"1.2-2"),""),t.xp6(3),t.hij("Net : $",t.xi3(77,39,a.Net,"1.2-2"),""),t.xp6(2),t.Q6J("length",a.totalRecords)("pageSizeOptions",t.DdM(42,nt))("pageSize",a.pageSize))},dependencies:[y.m,g.sg,g.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,T.NW,q.Hw,v.lW,p.KE,p.hX,p.qo,D.Nt,U.gD,b.ey,_.a8,_.dk,_.dn,_.n5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,R.gM,g.JJ]}),e})()}}]);