"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[78058,34894,26628,70096,49741],{34894:(U,d,o)=>{o.d(d,{e:()=>D});var r=o(94650),A=o(24006);let D=(()=>{class l{constructor(t,s){this.el=t,this.control=s}onInputChange(t){const s=this.el.nativeElement,m=s.value.toUpperCase();s.value=m,this.control&&this.control.control&&this.control.control.setValue(m,{emitEvent:!1})}}return l.\u0275fac=function(t){return new(t||l)(r.Y36(r.SBq),r.Y36(A.a5))},l.\u0275dir=r.lG2({type:l,selectors:[["","appUppercase",""]],hostBindings:function(t,s){1&t&&r.NdJ("input",function(h){return s.onInputChange(h)})},standalone:!0}),l})()},78058:(U,d,o)=>{o.r(d),o.d(d,{DockAppointmentComponent:()=>b});var r=o(24006),A=o(70879),D=o(35226),l=o.n(D),_=o(48529),t=o(94650),s=o(65412),m=o(19132),h=o(15627),Z=o(72122),E=o(97392),C=o(4859),g=o(59549),v=o(44144),P=o(84385),y=o(3238),f=o(73546),M=o(34894);let b=(()=>{class p{constructor(e,a,i,n,u){this.fb=e,this.matDialog=a,this.router=i,this.iHeaderSvc=n,this.dockSchedulerService=u,this.user=localStorage.getItem("userName"),this.tallyNum=null,this.tallyUrl="/main-nav/tallys/read"}ngOnInit(){this.element=history.state;const e=this.element?.dockAppointment;this.dockApptDefaults=Array.isArray(e)?e[0]:e,this.tallyNum=this.element?.tally?.IHTALY??this.element?.IHTALY??null,this.form=this.fb.group({appointmentNum:{value:this.dockApptDefaults?.DSAPPT||0,disabled:!0},building:{value:this.dockApptDefaults?.DSBLDG||"",disabled:!0},inOut:{value:this.dockApptDefaults?.DSINOU||"",disabled:!0},scacCode:[this.dockApptDefaults?.DSSCAC||"",r.kI.required],requestDate:[this.formatDate(this.dockApptDefaults?.REQDT)||"",r.kI.required],requestTime:[this.formatTime(this.dockApptDefaults?.REQTM)||""],appointmentType:[this.dockApptDefaults?.DSATYP||""],loadType:[this.dockApptDefaults?.DSLTYP||""],expectedDuration:[this.dockApptDefaults?.DSDURN||""],quantityExpected:[this.dockApptDefaults?.DSQTY||""],weightExpected:[this.dockApptDefaults?.DSWGHT||""],trailerNumber:[this.dockApptDefaults?.DSTRAL||""],priority:[this.dockApptDefaults?.DSPRTY||""],contact:[this.dockApptDefaults?.DSCONT||""],phone:[this.dockApptDefaults?.DSCNPH||""],email:[this.dockApptDefaults?.DSCNEM||""]})}ngOnDestroy(){this.dockApptSubscription&&this.dockApptSubscription.unsubscribe()}onBack(){this.router.navigateByUrl(this.tallyUrl)}get isUpdateMode(){return!!this.dockApptDefaults?.DSAPPT&&0!==Number(this.dockApptDefaults.DSAPPT)}dockAppointmentCreate(){const e=this.form.getRawValue();let a="0000";if(e.requestTime){const[i,n]=e.requestTime.split(":").map(u=>u.padStart(2,"0"));a=`${i}${n}`}this.dockApptSubscription=this.iHeaderSvc.createDockAppt(this.user??"",this.tallyNum??0,e.appointmentNum,_.R.fullBuilding(e.building),e.inOut,e.scacCode,e.requestDate,Number(a),e.appointmentType,e.loadType,e.expectedDuration,e.quantityExpected,e.weightExpected,e.trailerNumber,e.priority,e.contact,e.phone,e.email).subscribe(i=>{const n=i[0]?.data,u=n?.[n.length-2]?.value?.trim(),c=n?.[n.length-1]?.value?.trim(),O=n?.[2]?.value;if("Dock Appointment Updated Successfully"===c)return this.successMessage(c),void this.router.navigateByUrl(this.tallyUrl);if("Dock Appointment Created Successfully"===c){if(this.dockApptDefaults.DSAPPT=O,u.includes("Call DSCRUD"))return void this.openCommentsFromTally();this.successMessage(c),this.router.navigateByUrl(this.tallyUrl)}else this.failureMessage(c)})}openCommentsFromTally(){const e={...this.dockApptDefaults,fromTallyCreate:!0,apptNumber:this.dockApptDefaults.DSAPPT,tally:this.element.tally};this.router.navigateByUrl("/main-nav/dock-scheduler/comments/read",{state:e})}formatDate(e){if(!e)return"";if("string"==typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const a=String(e).replace(/\D/g,"");if(8===a.length)return`${a.substring(0,4)}-${a.substring(4,6)}-${a.substring(6,8)}`;if(6===a.length){const i=a.substring(0,2),n=a.substring(2,4);return`${"20"+a.substring(4,6)}-${i}-${n}`}return""}formatTime(e){if(!e)return"";const a=String(e).replace(/\D/g,"");return 6===a.length||4===a.length?`${a.substring(0,2)}:${a.substring(2,4)}`:""}successMessage(e){l().fire(e,"","success")}failureMessage(e){l().fire(e||"Operation failed","","error")}}return p.\u0275fac=function(e){return new(e||p)(t.Y36(r.qu),t.Y36(s.uw),t.Y36(m.F0),t.Y36(h.X),t.Y36(Z.A))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-dock-appointment"]],standalone:!0,features:[t.jDz],decls:104,vars:3,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","appointmentNum"],["matInput","","formControlName","building","appUppercase","","maxlength","3"],["matInput","","formControlName","inOut","appUppercase","","maxlength","1"],["matInput","","formControlName","scacCode","appUppercase",""],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","type","date","formControlName","requestDate"],["matInput","","type","time","formControlName","requestTime"],["formControlName","appointmentType"],["value","TR"],["value","PG"],["value","RC"],["value","DT"],["value","RT"],["value","SH"],["formControlName","loadType"],["value","S"],["value","F"],["value","C"],["value","P"],["value","K"],["matInput","","formControlName","expectedDuration"],["matInput","","formControlName","quantityExpected"],["matInput","","formControlName","weightExpected"],["matInput","","formControlName","trailerNumber","appUppercase",""],["matInput","","formControlName","priority"],["matInput","","formControlName","contact"],["matInput","","formControlName","phone"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","email"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return a.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Maintain Dock Schedule"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Appointment"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Building"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",7)(20,"mat-label"),t._uU(21,"In/Out"),t.qZA(),t._UZ(22,"input",10),t.qZA(),t.TgZ(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"SCAC Code"),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.TgZ(27,"div",12)(28,"label",13),t._uU(29,"Request"),t.qZA(),t.TgZ(30,"div",14)(31,"mat-form-field",7)(32,"mat-label"),t._uU(33,"Request Date"),t.qZA(),t._UZ(34,"input",15),t.qZA(),t.TgZ(35,"mat-form-field",7)(36,"mat-label"),t._uU(37,"Request Time"),t.qZA(),t._UZ(38,"input",16),t.qZA()()(),t.TgZ(39,"mat-form-field",7)(40,"mat-label"),t._uU(41,"Appointment Type"),t.qZA(),t.TgZ(42,"mat-select",17)(43,"mat-option",18),t._uU(44,"TR = Trailer"),t.qZA(),t.TgZ(45,"mat-option",19),t._uU(46,"PG = Piggyback"),t.qZA(),t.TgZ(47,"mat-option",20),t._uU(48,"RC = Railcar"),t.qZA(),t.TgZ(49,"mat-option",21),t._uU(50,"DT = Drop trailer"),t.qZA(),t.TgZ(51,"mat-option",22),t._uU(52,"RT = Return"),t.qZA(),t.TgZ(53,"mat-option",23),t._uU(54,"SH = Shuttle"),t.qZA()()(),t.TgZ(55,"mat-form-field",7)(56,"mat-label"),t._uU(57,"Load Type"),t.qZA(),t.TgZ(58,"mat-select",24)(59,"mat-option",25),t._uU(60,"S = Slip Sheet"),t.qZA(),t.TgZ(61,"mat-option",26),t._uU(62,"F = Floor unloaded"),t.qZA(),t.TgZ(63,"mat-option",27),t._uU(64,"C = Clamp"),t.qZA(),t.TgZ(65,"mat-option",28),t._uU(66,"P = Pallet"),t.qZA(),t.TgZ(67,"mat-option",29),t._uU(68,"K = Sack"),t.qZA()()(),t.TgZ(69,"mat-form-field",7)(70,"mat-label"),t._uU(71,"Expected Duration"),t.qZA(),t._UZ(72,"input",30),t.qZA(),t.TgZ(73,"mat-form-field",7)(74,"mat-label"),t._uU(75,"Quantity Expected"),t.qZA(),t._UZ(76,"input",31),t.qZA(),t.TgZ(77,"mat-form-field",7)(78,"mat-label"),t._uU(79,"Weight Expected"),t.qZA(),t._UZ(80,"input",32),t.qZA(),t.TgZ(81,"mat-form-field",7)(82,"mat-label"),t._uU(83,"Trailer Number"),t.qZA(),t._UZ(84,"input",33),t.qZA(),t.TgZ(85,"mat-form-field",7)(86,"mat-label"),t._uU(87,"Priority"),t.qZA(),t._UZ(88,"input",34),t.qZA(),t.TgZ(89,"mat-form-field",7)(90,"mat-label"),t._uU(91,"Contact"),t.qZA(),t._UZ(92,"input",35),t.qZA(),t.TgZ(93,"mat-form-field",7)(94,"mat-label"),t._uU(95,"Phone"),t.qZA(),t._UZ(96,"input",36),t.qZA(),t.TgZ(97,"mat-form-field",37)(98,"mat-label"),t._uU(99,"Email"),t.qZA(),t.TgZ(100,"textarea",38),t._uU(101,"Email"),t.qZA()()()(),t.TgZ(102,"button",39),t.NdJ("click",function(){return a.dockAppointmentCreate()}),t._uU(103),t.qZA()()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",a.form),t.xp6(94),t.Q6J("disabled",!a.form.valid),t.xp6(1),t.hij(" ",a.isUpdateMode?"Update":"Create"," "))},dependencies:[A.m,r._Y,r.Fj,r.JJ,r.JL,r.nD,r.sg,r.u,E.Hw,C.lW,g.KE,g.hX,v.Nt,P.gD,y.ey,f.a8,f.dk,f.dn,f.n5,M.e]}),p})()}}]);