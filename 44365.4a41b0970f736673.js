"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[44365],{44365:(Q,f,p)=>{p.r(f),p.d(f,{PreTrailInspectionComponent:()=>O});var r=p(24006),_=p(70879),C=p(35226),u=p.n(C),m=p(65412),b=p(48529),T=p(23661),e=p(94650),h=p(84696),g=p(19132),Z=p(36895),w=p(97392),I=p(4859),c=p(59549),v=p(44144),l=p(73546);function U(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-dropdown-inspection",20),e.NdJ("valueSelected",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownChange(0,a))}),e.qZA()}}function N(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-dropdown-inspection",21),e.NdJ("valueSelected",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownChange(1,a))}),e.qZA()}}function D(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-dropdown-inspection",22),e.NdJ("valueSelected",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownChange(2,a))}),e.qZA()}}function S(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-dropdown-inspection",23),e.NdJ("valueSelected",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownChange(3,a))}),e.qZA()}}function A(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-dropdown-inspection",24),e.NdJ("valueSelected",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownChange(4,a))}),e.qZA()}}function k(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-dropdown-inspection",25),e.NdJ("valueSelected",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownChange(5,a))}),e.qZA()}}function F(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-dropdown-inspection",26),e.NdJ("valueSelected",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownChange(6,a))}),e.qZA()}}function x(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-dropdown-inspection",27),e.NdJ("valueSelected",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownChange(7,a))}),e.qZA()}}function J(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Comment is required"),e.qZA())}function q(n,s){if(1&n&&(e.TgZ(0,"mat-form-field",28)(1,"mat-label"),e._uU(2,"Comment"),e.qZA(),e._UZ(3,"textarea",29),e.TgZ(4,"mat-hint"),e._uU(5,"Only "),e.TgZ(6,"strong"),e._uU(7,"60 characters"),e.qZA(),e._uU(8," are allowed"),e.qZA(),e.YNc(9,J,2,0,"mat-error",30),e.qZA()),2&n){const t=e.oxw();let o;e.xp6(9),e.Q6J("ngIf",null==(o=t.form.get("comment"))?null:o.hasError("required"))}}function Y(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.update())}),e._uU(1," Update "),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!t.isUpdateEnabled())}}let y=(()=>{class n{constructor(t,o,a,i,d){this.data=t,this.Orderservice=o,this.router=a,this.fb=i,this.dialogRef=d,this.OrdersReadURL="/main-nav/orders/read",this.selectOptions=["Y","N"],this.user=localStorage.getItem("userName")||"",this.showDropdowns=[!0,!1,!1,!1,!1,!1,!1,!1],this.allDropdownsCompleted=!1}ngOnInit(){this.form=this.fb.group({ApptNo:[this.data.apptNumber,[r.kI.required]],safetyCheck:["",r.kI.required],wheels:["",r.kI.required],holesFree:["",r.kI.required],odorFree:["",r.kI.required],insectFree:["",r.kI.required],dockPlace:["",r.kI.required],pictures:["",r.kI.required],trailer:["",r.kI.required],comment:["",[r.kI.required,r.kI.maxLength(60)]]})}onDropdownChange(t,o){if(this.form.get(["safetyCheck","wheels","holesFree","odorFree","insectFree","dockPlace","pictures","trailer"][t])?.setValue(o),0===t&&"N"===o)return this.closeDialog(),void this.router.navigate([this.OrdersReadURL]);("Y"===o||"N"===o)&&(this.showDropdowns.fill(!1),t+1<this.showDropdowns.length&&(this.showDropdowns[t+1]=!0),t+1===this.showDropdowns.length&&(this.allDropdownsCompleted=!0))}update(){const t=this.form.value;this.trailSubscription&&this.trailSubscription.unsubscribe(),this.trailSubscription=this.Orderservice.trailerInspection(this.data.apptNumber,t.safetyCheck,t.wheels,t.holesFree,t.odorFree,t.insectFree,t.dockPlace,t.pictures,t.trailer,t.comment).subscribe(o=>{const i=o[0].data[o[0].data.length-1].value;i.toUpperCase()===b.R.updated.toUpperCase()?(this.successMessage(i),this.closeDialog(),this.router.navigate([this.OrdersReadURL])):this.failureMessage(i)})}successMessage(t){u().fire(t,"","success")}failureMessage(t){u().fire(t,"","error")}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.trailSubscription&&this.trailSubscription.unsubscribe()}isUpdateEnabled(){const t=this.form.get("comment")?.value;return this.form.valid&&t&&t.trim().length>=1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.WI),e.Y36(h.b),e.Y36(g.F0),e.Y36(r.qu),e.Y36(m.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-inspection"]],standalone:!0,features:[e.jDz],decls:26,vars:11,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","ApptNo"],["label","Perform Safety Check",3,"valueSelected",4,"ngIf"],["label","Are Wheel Chocks in Place",3,"valueSelected",4,"ngIf"],["label","Are Floor, Walls, Ceiling Free of Holes",3,"valueSelected",4,"ngIf"],["label","Is Trailer Clean, Dry, and Odor Free",3,"valueSelected",4,"ngIf"],["label","Is Trailer Free of Insects",3,"valueSelected",4,"ngIf"],["label","Is the Dock Plate in Place",3,"valueSelected",4,"ngIf"],["label","Pictures Taken",3,"valueSelected",4,"ngIf"],["label","Trailer",3,"valueSelected",4,"ngIf"],["appearance","outline","class","full-width w-100",4,"ngIf"],["mat-button","","class","buttons addButton","mat-raised-button","",3,"disabled","click",4,"ngIf"],["label","Perform Safety Check",3,"valueSelected"],["label","Are Wheel Chocks in Place",3,"valueSelected"],["label","Are Floor, Walls, Ceiling Free of Holes",3,"valueSelected"],["label","Is Trailer Clean, Dry, and Odor Free",3,"valueSelected"],["label","Is Trailer Free of Insects",3,"valueSelected"],["label","Is the Dock Plate in Place",3,"valueSelected"],["label","Pictures Taken",3,"valueSelected"],["label","Trailer",3,"valueSelected"],["appearance","outline",1,"full-width","w-100"],["matInput","","required","","maxlength","60","formControlName","comment"],[4,"ngIf"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),e._uU(4,"Trailer Inspection"),e.qZA()(),e.TgZ(5,"button",2),e.NdJ("click",function(){return o.closeDialog()}),e.TgZ(6,"mat-icon",3),e._uU(7,"close"),e.qZA()()(),e.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Appointment Number"),e.qZA(),e._UZ(15,"input",9),e.qZA(),e.YNc(16,U,1,0,"app-dropdown-inspection",10),e.YNc(17,N,1,0,"app-dropdown-inspection",11),e.YNc(18,D,1,0,"app-dropdown-inspection",12),e.YNc(19,S,1,0,"app-dropdown-inspection",13),e.YNc(20,A,1,0,"app-dropdown-inspection",14),e.YNc(21,k,1,0,"app-dropdown-inspection",15),e.YNc(22,F,1,0,"app-dropdown-inspection",16),e.YNc(23,x,1,0,"app-dropdown-inspection",17),e.YNc(24,q,10,1,"mat-form-field",18),e.qZA()(),e.YNc(25,Y,2,1,"button",19),e.qZA()()()),2&t&&(e.xp6(9),e.Q6J("formGroup",o.form),e.xp6(7),e.Q6J("ngIf",o.showDropdowns[0]),e.xp6(1),e.Q6J("ngIf",o.showDropdowns[1]),e.xp6(1),e.Q6J("ngIf",o.showDropdowns[2]),e.xp6(1),e.Q6J("ngIf",o.showDropdowns[3]),e.xp6(1),e.Q6J("ngIf",o.showDropdowns[4]),e.xp6(1),e.Q6J("ngIf",o.showDropdowns[5]),e.xp6(1),e.Q6J("ngIf",o.showDropdowns[6]),e.xp6(1),e.Q6J("ngIf",o.showDropdowns[7]),e.xp6(1),e.Q6J("ngIf",o.allDropdownsCompleted),e.xp6(1),e.Q6J("ngIf",o.allDropdownsCompleted))},dependencies:[_.m,Z.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.nD,r.sg,r.u,w.Hw,I.lW,c.TO,c.KE,c.bx,c.hX,v.Nt,l.a8,l.dk,l.dn,l.n5,T.A]}),n})();var P=p(34894);let O=(()=>{class n{constructor(t,o,a,i){this.matDialog=t,this.Orderservice=o,this.router=a,this.fb=i,this.OrdersReadURL="/main-nav/orders/read",this.user=localStorage.getItem("userName")||""}ngOnInit(){this.element=history.state,this.form=this.fb.group({ApptNo:[this.element.apptNumber,[r.kI.required,r.kI.pattern("[0-9]{1,7}")]],DoorLocation:["",[r.kI.required,r.kI.pattern("[a-zA-Z0-9 ]{1,16}")]],TrailerRailCarNumber:["",[r.kI.required,r.kI.pattern("[a-zA-Z0-9 ]{1,30}")]]})}ngOnDestroy(){this.trailSubscription&&this.trailSubscription.unsubscribe()}update(){var t=this.form.value;const o=Number(t.ApptNo);this.trailSubscription&&this.trailSubscription.unsubscribe(),this.trailSubscription=this.Orderservice.verifyDock(o,t.DoorLocation,t.TrailerRailCarNumber).subscribe(a=>{const d=a[0].data[a[0].data.length-1].value;d&&""!==d.trim()?this.failureMessage(d):this.next()})}successMessage(t){u().fire(t,"","success")}failureMessage(t){u().fire(t,"","error")}onBack(){this.router.navigate([this.OrdersReadURL])}next(){this.element.apptNumber=this.form.get("ApptNo")?.value,this.matDialog.open(y,{width:"1000px",maxHeight:"80vh",data:this.element,autoFocus:!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.uw),e.Y36(h.b),e.Y36(g.F0),e.Y36(r.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-pre-trail-inspection"]],standalone:!0,features:[e.jDz],decls:25,vars:2,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["required","","matInput","","formControlName","ApptNo"],["required","","matInput","","formControlName","DoorLocation","appUppercase",""],["appearance","outline",1,"full-width2"],["required","","matInput","","formControlName","TrailerRailCarNumber","appUppercase",""],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),e.NdJ("click",function(){return o.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before "),e.qZA()(),e._uU(6," Verify Dock Appointment Trailer and Door "),e.qZA()(),e.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Appointment Number"),e.qZA(),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"mat-form-field",7)(16,"mat-label"),e._uU(17," Door Location "),e.qZA(),e._UZ(18,"input",9),e.qZA(),e.TgZ(19,"mat-form-field",10)(20,"mat-label"),e._uU(21,"Trailer/Rail Car Number "),e.qZA(),e._UZ(22,"input",11),e.qZA()()(),e.TgZ(23,"button",12),e.NdJ("click",function(){return o.update()}),e._uU(24," Update "),e.qZA()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(15),e.Q6J("disabled",!(o.form.valid&&o.form.dirty)))},dependencies:[_.m,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,w.Hw,I.lW,c.KE,c.hX,v.Nt,l.a8,l.dk,l.dn,l.n5,P.e]}),n})()}}]);