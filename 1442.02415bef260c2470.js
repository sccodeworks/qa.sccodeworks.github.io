"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[1442,1790,8754,5645,2313],{11790:(I,D,o)=>{o.d(D,{y:()=>y});var v=o(65412),n=o(94650),u=o(97392),S=o(4859);let U=(()=>{class C{constructor(s,t){this.dialogRef=s,this.data=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return C.\u0275fac=function(s){return new(s||C)(n.Y36(v.so),n.Y36(v.WI))},C.\u0275cmp=n.Xpm({type:C,selectors:[["app-alert-dialog"]],decls:10,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["id","close-icon",3,"click"],[1,"content-span","full-width"],["mat-flat-button","","id","no-button",3,"mat-dialog-close"],["mat-flat-button","","id","yes-button",3,"mat-dialog-close"]],template:function(s,t){1&s&&(n.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),n.NdJ("click",function(){return t.closeDialog()}),n._uU(3,"close "),n.qZA(),n.TgZ(4,"span",3),n._uU(5),n.qZA()(),n.TgZ(6,"button",4),n._uU(7,"Cancel"),n.qZA(),n.TgZ(8,"button",5),n._uU(9,"Delete"),n.qZA()()),2&s&&(n.xp6(5),n.Oqu(t.data.message),n.xp6(1),n.Q6J("mat-dialog-close",!1),n.xp6(2),n.Q6J("mat-dialog-close",!0))},dependencies:[u.Hw,S.lW,v.ZT]}),C})(),y=(()=>{class C{constructor(s){this.dialog=s}openCustomAlert(s){return this.dialog.open(U,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:s}})}}return C.\u0275fac=function(s){return new(s||C)(n.LFG(v.uw))},C.\u0275prov=n.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},69501:(I,D,o)=>{o.d(D,{J:()=>E});var v=o(24006),n=o(47957),u=o(59549),S=o(44144),U=o(69751),y=o(68675),C=o(54004),_=o(70879),s=o(94650),t=o(36895),l=o(3238);function p(f,A){if(1&f&&(s.TgZ(0,"mat-option",6),s._uU(1),s.qZA()),2&f){const a=A.$implicit;s.Q6J("value",a),s.xp6(1),s.hij(" ",a.description," ")}}function T(f,A){1&f&&(s.TgZ(0,"mat-error"),s._uU(1,"Please select a valid option."),s.qZA())}let E=(()=>{class f{constructor(a){this.fb=a,this.options=[],this.value=null,this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.onChange=c=>{this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new U.y,this.filteredOptions=this.control.valueChanges.pipe((0,y.O)(""),(0,C.U)(c=>this._filter(c)))}_filter(a){if(null==a||0===a.length)return this.errorState=!1,this.options;let c="";"string"==typeof a&&(c=a.toLowerCase());const Z=this.options.filter(k=>{const w=k.value?.toString().toLowerCase(),M=k.description?.toLowerCase();return w.includes(c)||M.includes(c)});return this.errorState=0===Z.length&&a.length>0,Z}writeValue(a){this.control.setValue(a&&"object"==typeof a?`${a.value} - ${a.description}`:"string"==typeof a?a:""),this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0}onOptionSelected(a){if(this.control.setValue(a),a&&a.value){const[c,Z]=a.description.split(" ");this.valueControlName.setValue(c),this.suffixControlName.setValue(Z||""),this.onChange(a.value),this.autocompleteTrigger.closePanel()}else console.error("Selected option value is undefined or null")}displayOptionText(a){return a?a.value:""}registerOnChange(a){this.onChange=a}registerOnTouched(a){this.onTouched=a}setDisabledState(a){this.disabled=a}setDescribedByIds(a){}onContainerClick(a){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}}return f.\u0275fac=function(a){return new(a||f)(s.Y36(v.qu))},f.\u0275cmp=s.Xpm({type:f,selectors:[["app-dropdown"]],viewQuery:function(a,c){if(1&a&&s.Gf(n.ZL,7),2&a){let Z;s.iGM(Z=s.CRH())&&(c.autocompleteTrigger=Z.first)}},hostVars:1,hostBindings:function(a,c){2&a&&s.uIk("aria-describedby",c.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance",valueControlName:"valueControlName",suffixControlName:"suffixControlName",displayControlName:"displayControlName"},standalone:!0,features:[s._Bn([{provide:v.JU,multi:!0,useExisting:f},{provide:u.Eo,useExisting:f}],[{provide:v.gN,useExisting:v.sg}]),s.jDz],decls:9,vars:10,consts:[[3,"appearance"],["matInput","",3,"formControl","placeholder","matAutocomplete","blur"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(a,c){if(1&a&&(s.TgZ(0,"mat-form-field",0)(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",1),s.NdJ("blur",function(){return c.onTouched()}),s.qZA(),s.TgZ(4,"mat-autocomplete",2,3),s.NdJ("optionSelected",function(k){return c.onOptionSelected(k.option.value)}),s.YNc(6,p,2,2,"mat-option",4),s.ALo(7,"async"),s.qZA(),s.YNc(8,T,2,0,"mat-error",5),s.qZA()),2&a){const Z=s.MAs(5);s.Q6J("appearance",c.appearance),s.xp6(2),s.Oqu(c.label),s.xp6(1),s.Q6J("formControl",c.control)("placeholder",c.placeholder)("matAutocomplete",Z),s.xp6(1),s.Q6J("displayWith",c.displayOptionText),s.xp6(2),s.Q6J("ngForOf",s.lcZ(7,8,c.filteredOptions)),s.xp6(2),s.Q6J("ngIf",c.control.invalid&&c.control.touched)}},dependencies:[_.m,t.sg,t.O5,v.Fj,v.JJ,v.oH,u.TO,u.KE,u.hX,S.Nt,l.ey,t.Ov,v.UX,n.Bb,n.XC,n.ZL,u.lN,S.c]}),f})()},83490:(I,D,o)=>{o.d(D,{y:()=>C});var v=o(80529),n=o(75625),u=o(70262),S=o(62843),U=o(92340),y=o(94650);let C=(()=>{class _{constructor(t){this.httpClient=t,this.url=U.N.API_BASE_URL,this.httpHeader={headers:new v.WM({"Content-Type":"application/json"})}}getAccountingAttribute(t,l,p,T){return this.httpClient.get(this.url+"/accountAttributes/read",{params:{user:t,attribute:l??"",recordsPerPage:p??"",pageNo:T??""}})}AccountingAttributeCreate(t,l,p){return this.httpClient.post(this.url+"/accountAttributes/create",{user:t,attribute:l,description:p}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}AccountingAttributeUpdate(t,l,p){return this.httpClient.put(this.url+"/accountAttributes/update",{user:t,attribute:l,description:p}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}AccountingAttributeDelete(t,l){return this.httpClient.delete(this.url+`/accountAttributes/delete?user=${t}&attribute=${l}`)}httpError(t){let l="";return l=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(l),(0,S._)(()=>new Error(l))}}return _.\u0275fac=function(t){return new(t||_)(y.LFG(v.eN))},_.\u0275prov=y.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},16799:(I,D,o)=>{o.d(D,{x:()=>C});var v=o(80529),n=o(75625),u=o(70262),S=o(62843),U=o(92340),y=o(94650);let C=(()=>{class _{constructor(t){this.httpClient=t,this.url=U.N.API_BASE_URL,this.httpHeader={headers:new v.WM({"Content-Type":"application/json"})}}getTaskCodes(t,l,p,T,E,f){return this.httpClient.get(this.url+`/TaskCodes/read?user=${t}&storer=${l}&suffix=${p}&status=${T}&recordsPerPage=${E}&pageNo=${f}`)}TaskCodesCreate(t,l,p,T,E,f,A,a,c,Z,k,w,M,O){return this.httpClient.post(this.url+"/TaskCodes/create",{TSTASK:t,TSSTOR:l,TSSSFX:p,TSDESC:T,TSMINM:E,TSBASE:f,TSRATE:A,TSLEGC:a,TSLEGS:c,TSMKUP:Z,TSQUOT:k,TSAUTO:w,TSVARC:M,user:O}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesUpdate(t,l,p,T,E,f,A,a,c,Z,k,w,M,O){return this.httpClient.put(this.url+"/TaskCodes/update",{TSTASK:t,TSSTOR:l,TSSSFX:p,TSDESC:T,TSMINM:E,TSBASE:f,TSRATE:A,TSLEGC:a,TSLEGS:c,TSMKUP:Z,TSQUOT:k,TSAUTO:w,TSVARC:M,user:O}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}taskCodesCopyTask(t,l,p,T,E,f,A,a,c,Z,k,w,M,O,W,R){return this.httpClient.put(this.url+"/TaskCodes/copyTask",{user:t,taskCode:l,storer1:p,storerSuffix1:T,storer2:E,storerSuffix2:f,description:A,minimum:a,base:c,rate:Z,ledgerCode:k,ledgerCodeSuffix:w,markup:M,taskOnQuote:O,autoCharge:W,recalculate:R}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesCopySet(t,l,p,T){return this.httpClient.put(this.url+"/TaskCodes/CopySet",{storer:t,suffix:l,storerNumber:p,storerSuffix:T}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}taskCodesConstraint(t,l,p,T,E,f,A,a){return this.httpClient.post(this.url+"/TaskCodes/constraint",{documentType:t,taskCode:l,storer:p,suffix:T,constraintF:E,relationship:f,constraintV:A,status:a}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesActivate(t,l,p){return this.httpClient.put(this.url+"/TaskCodes/activate",{taskCode:t,storer:l,suffix:p}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesDeactivate(t,l,p){return this.httpClient.put(this.url+"/TaskCodes/Deactivate",{taskCode:t,storer:l,suffix:p}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}taskCodesDelete(t,l,p){return this.httpClient.delete(this.url+`/TaskCodes/delete?taskId=${t}&storer=${l}&suffix=${p}`)}getTaskCodesAttributes(t,l,p,T){return this.httpClient.get(this.url+`/TaskCodes/Attributes?user=${t}&key=${l}&recordsPerPage=${p}&pageNo=${T}`)}TaskCodesAttributesCreate(t,l,p,T,E,f,A,a){return this.httpClient.post(this.url+"/TaskCodes/Attributes/create",{user:t,EAFLID:l,EAKEY:p,EAATRB:T,EAVALU:E,EASTAT:f,EATMST:A,EAUSER:a}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesAttributesUpdate(t,l,p,T,E,f,A,a){return this.httpClient.put(this.url+"/TaskCodes/Attributes/update",{EAFLID:t,EAKEY:l,EAATRB:p,EAVALU:T,EASTAT:E,EATMST:f,EAUSER:A,user:a}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}taskCodesAttributesDelete(t,l){return this.httpClient.delete(this.url+`/TaskCodes/Attributes/delete?key=${t}&attribute=${l}`)}httpError(t){let l="";return l=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(l),(0,S._)(()=>new Error(l))}}return _.\u0275fac=function(t){return new(t||_)(y.LFG(v.eN))},_.\u0275prov=y.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},41442:(I,D,o)=>{o.r(D),o.d(D,{WwTaskcodesAttributesComponent:()=>et});var v=o(98739),n=o(7155),u=o(24006),S=o(65412),U=o(70879),y=o(35226),C=o.n(y),_=o(48529),s=o(69501),t=o(94650),l=o(19132),p=o(83490),T=o(16799),E=o(97392),f=o(4859),A=o(59549),a=o(44144),c=o(73546);let Z=(()=>{class r{constructor(e,i,d,h,g,b){this.anyvariable=e,this.dialogRef=i,this.router=d,this.accountAttributesService=h,this.fb=g,this.taskCodesService=b,this.attributeOptions=[],this.user=localStorage.getItem("userName")||"",this.keyValue=""}ngOnDestroy(){this.attributeSubscription&&this.attributeSubscription.unsubscribe()}ngOnInit(){console.log(this.anyvariable);const i=(d,h)=>String(d).padStart(h,"0");console.log(i(this.anyvariable.TSSTOR,4)),this.keyValue=i(this.anyvariable.TSSTOR,4),this.form=this.fb.group({EAFLID:{value:"TS",disabled:!0},EAKEY:{value:this.anyvariable.TSTASK+i(this.anyvariable.TSSTOR,4),disabled:!0},EAATRB:["",u.kI.required],EAVALU:["",u.kI.required],EASTAT:"AC",EATMST:"",EAUSER:""}),this.fetchAttributes()}fetchAttributes(){this.accountAttributesService.getAccountingAttribute(this.user,"",10,1).subscribe(d=>{this.result=d;var h=this.result[0].data[1]?.value,g=JSON.parse(h);this.attributeSource=g.returnedData,this.attributeOptions=this.attributeSource.map(b=>({value:b.A2ATRB,description:b.A2DESC}))})}taskCodesAttributesCreate(){var e=this.form.value;console.log(e);const d=(e.EAATRB||"").toUpperCase();this.attributeSubscription&&this.attributeSubscription.unsubscribe(),this.attributeSubscription=this.taskCodesService.TaskCodesAttributesCreate(this.user,this.form.get("EAFLID")?.value,this.form.get("EAKEY")?.value,d,e.EAVALU.toUpperCase(),e.EASTAT,e.EATMST,this.user).subscribe(h=>{const g=h[0]?.data?.length,b=g?h[0]?.data[g-1]?.value:void 0,N=b?JSON.parse(b)?.returnedData?.message:void 0;N?.toUpperCase()===_.R.createMsg.toUpperCase()?(this.successMessage(N),this.closeDialog(),this.router.navigateByUrl("/main-nav/task-codes-attributes/read",{state:this.anyvariable})):this.failureMessage(N)})}successMessage(e){C().fire(e,"","success")}failureMessage(e){C().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(S.WI),t.Y36(S.so),t.Y36(l.F0),t.Y36(p.y),t.Y36(u.qu),t.Y36(T.x))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-ww-taskcodes-attributes-create"]],standalone:!0,features:[t.jDz],decls:39,vars:3,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EAFLID",2,"text-transform","uppercase"],["matInput","","formControlName","EAKEY",2,"text-transform","uppercase"],["formControlName","EAATRB","label","Attribute","placeholder","Search or Enter Attribute","appearance","outline",3,"options"],["matInput","","formControlName","EAVALU",2,"text-transform","uppercase"],["matInput","","formControlName","EASTAT",2,"text-transform","uppercase"],["matInput","","formControlName","EATMST","readonly",""],["matInput","","formControlName","EAUSER","readonly","",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Entity Attributes"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"File ID"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"key"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t._UZ(20,"app-dropdown",11),t.TgZ(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Value"),t.qZA(),t._UZ(24,"input",12),t.qZA(),t.TgZ(25,"mat-form-field",8)(26,"mat-label"),t._uU(27,"Status"),t.qZA(),t._UZ(28,"input",13),t.qZA(),t.TgZ(29,"mat-form-field",8)(30,"mat-label"),t._uU(31,"Last Changed"),t.qZA(),t._UZ(32,"input",14),t.qZA(),t.TgZ(33,"mat-form-field",8)(34,"mat-label"),t._uU(35,"Change User"),t.qZA(),t._UZ(36,"input",15),t.qZA()()(),t.TgZ(37,"button",16),t.NdJ("click",function(){return i.taskCodesAttributesCreate()}),t._uU(38,"Create"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",i.form),t.xp6(11),t.Q6J("options",i.attributeOptions),t.xp6(17),t.Q6J("disabled",!i.form.valid))},dependencies:[U.m,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,E.Hw,f.lW,A.KE,A.hX,a.Nt,c.a8,c.dk,c.dn,c.n5,s.J]}),r})(),k=(()=>{class r{constructor(e,i,d,h,g,b){this.anyvariable=e,this.dialogRef=i,this.router=d,this.fb=h,this.taskCodesService=g,this.accountAttributesService=b,this.attributeOptions=[],this.user=localStorage.getItem("userName")||"",this.keyValue=""}ngOnInit(){this.form=this.fb.group({EAFLID:{value:this.anyvariable[1].EAFLID,disabled:!0},EAKEY:{value:this.anyvariable[1].EAKEY,disabled:!0},EAATRB:this.anyvariable[1].EAATRB,EAVALU:this.anyvariable[1].EAVALU,EASTAT:this.anyvariable[1].EASTAT,EATMST:{value:this.anyvariable[1].EATMST,disabled:!0},EAUSER:{value:this.anyvariable[1].EAUSER,disabled:!0}}),this.fetchAttributes()}ngOnDestroy(){this.attributeSubscription&&this.attributeSubscription.unsubscribe()}fetchAttributes(){this.accountAttributesService.getAccountingAttribute(this.user,"",10,1).subscribe(d=>{this.result=d;var h=this.result[0].data[1]?.value,g=JSON.parse(h);this.attributeSource=g.returnedData,this.attributeOptions=this.attributeSource.map(b=>({value:b.A2ATRB,description:b.A2DESC}))})}TaskCodesAttributesUpdate(){var e=this.form.value;const d=(e.EAATRB||"").toUpperCase();this.attributeSubscription&&this.attributeSubscription.unsubscribe(),this.attributeSubscription=this.taskCodesService.TaskCodesAttributesUpdate(this.anyvariable[1].EAFLID,this.anyvariable[1].EAKEY,d,e.EAVALU.toUpperCase(),e.EASTAT,this.anyvariable[1].EATMST,this.user,this.user).subscribe(h=>{const g=h[0]?.data?.length,b=g?h[0]?.data[g-1]?.value:void 0,N=b?JSON.parse(b)?.returnedData?.message:void 0;N?.toUpperCase()===_.R.updateMsg.toUpperCase()?(this.successMessage(N),this.closeDialog(),this.router.navigateByUrl("/main-nav/task-codes-attributes/read",{state:this.anyvariable[0]})):this.failureMessage(N)})}successMessage(e){C().fire(e,"","success")}failureMessage(e){C().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(S.WI),t.Y36(S.so),t.Y36(l.F0),t.Y36(u.qu),t.Y36(T.x),t.Y36(p.y))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-ww-taskcodes-attributes-change"]],standalone:!0,features:[t.jDz],decls:39,vars:2,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EAFLID",2,"text-transform","uppercase"],["matInput","","formControlName","EAKEY",2,"text-transform","uppercase"],["appearance","outline","formControlName","EAATRB","label","Attribute","placeholder","Search or Enter Attribute",3,"options"],["matInput","","formControlName","EAVALU",2,"text-transform","uppercase"],["matInput","","formControlName","EASTAT",2,"text-transform","uppercase"],["matInput","","formControlName","EATMST"],["matInput","","formControlName","EAUSER",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Entity Attributes"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"File ID"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"key"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t._UZ(20,"app-dropdown",11),t.TgZ(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Value"),t.qZA(),t._UZ(24,"input",12),t.qZA(),t.TgZ(25,"mat-form-field",8)(26,"mat-label"),t._uU(27,"Status"),t.qZA(),t._UZ(28,"input",13),t.qZA(),t.TgZ(29,"mat-form-field",8)(30,"mat-label"),t._uU(31,"Last Changed"),t.qZA(),t._UZ(32,"input",14),t.qZA(),t.TgZ(33,"mat-form-field",8)(34,"mat-label"),t._uU(35,"Change User"),t.qZA(),t._UZ(36,"input",15),t.qZA()()(),t.TgZ(37,"button",16),t.NdJ("click",function(){return i.TaskCodesAttributesUpdate()}),t._uU(38,"Update"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",i.form),t.xp6(11),t.Q6J("options",i.attributeOptions))},dependencies:[U.m,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,E.Hw,f.lW,A.KE,A.hX,a.Nt,c.a8,c.dk,c.dn,c.n5,s.J]}),r})();var w=o(11790),M=o(36895),O=o(28255),W=o(10266),R=o(90455);function x(r,m){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12)(2,"div",33)(3,"span",34),t.NdJ("click",function(d){return d.stopPropagation()}),t.TgZ(4,"mat-slide-toggle",35),t.NdJ("ngModelChange",function(d){const g=t.CHM(e).$implicit;return t.KtG(g.isActive=d)})("change",function(){const h=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.toggleColumn(h))}),t._uU(5),t.qZA()()()(),t.BQk()}if(2&r){const e=m.$implicit;t.xp6(4),t.Q6J("ngModel",e.isActive),t.xp6(1),t.hij(" ",e.name," ")}}function L(r,m){1&r&&(t.TgZ(0,"th",36),t._uU(1,"Attribute"),t.qZA())}function P(r,m){if(1&r&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAATRB)}}function B(r,m){1&r&&(t.TgZ(0,"th",36),t._uU(1,"Value"),t.qZA())}function K(r,m){if(1&r&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAVALU)}}function Y(r,m){1&r&&(t.TgZ(0,"th",36),t._uU(1,"Last Changed"),t.qZA())}function F(r,m){if(1&r&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.xp6(1),t.Oqu(e.EATMST)}}function J(r,m){1&r&&(t.TgZ(0,"th",36),t._uU(1,"User"),t.qZA())}function $(r,m){if(1&r&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAUSER)}}function q(r,m){1&r&&(t.TgZ(0,"th",36),t._uU(1,"Status"),t.qZA())}function Q(r,m){if(1&r&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.xp6(1),t.Oqu(e.EASTAT)}}function V(r,m){1&r&&(t.TgZ(0,"th",36),t._uU(1,"Key"),t.qZA())}function H(r,m){if(1&r&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAKEY)}}function G(r,m){1&r&&t._UZ(0,"th",38)}function j(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"td",37)(1,"div",39)(2,"button",40)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",41)(6,"li")(7,"button",42),t.NdJ("click",function(){const h=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.taskCodesAttributesChangeForm(h))}),t.TgZ(8,"mat-icon",43),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Change"),t.qZA()()(),t.TgZ(12,"li")(13,"button",42),t.NdJ("click",function(){const h=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.taskCodesAttributesDelete(h))}),t.TgZ(14,"mat-icon",44),t._uU(15,"delete"),t.qZA(),t.TgZ(16,"mat-label"),t._uU(17,"Delete"),t.qZA()()()()()()}}function X(r,m){1&r&&t._UZ(0,"tr",45)}function z(r,m){1&r&&t._UZ(0,"tr",46)}const tt=function(){return[8,16,24]};let et=(()=>{class r{constructor(e,i,d,h,g){this.matDialog=e,this.taskCodesService=i,this.CustomAlertService=d,this.router=h,this.fb=g,this.INITIAL_PAGE=1,this.searchTextDisplay=!1,this.user=localStorage.getItem("userName"),this.selectedRow=[],this.editedRows=[],this.keyValue="",this.dataSource=new n.by,this.duplicateSource=[],this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.displayedColumns=["Attribute","Value","LastChanged","User","Status","Actions"],this.columnShowHideList=[]}ngOnInit(){this.element=history.state;const i=(d,h)=>String(d).padStart(h,"0");console.log(i(this.element.TSSTOR,4)),this.keyValue=i(this.element.TSSTOR,4),this.form=this.fb.group({FLID:"TS",KEY:this.element.TSTASK+i(this.element.TSSTOR,4)}),this.initializeColumnProperties(),this.editedRows=[],this.getTaskCodesAttributes(this.pageSize,this.INITIAL_PAGE)}onPaginateChange(e){this.pageSize=e.pageSize,this.getTaskCodesAttributes(e.pageSize,e.pageIndex+this.INITIAL_PAGE)}ngOnDestroy(){this.taskCodesSubscription&&this.taskCodesSubscription.unsubscribe()}toggleColumn(e){if(e.isActive)this.displayedColumns.splice(e.position>this.displayedColumns.length-1?this.displayedColumns.length-1:e.position,0,e.name);else{let i=this.displayedColumns.indexOf(e.name);i>-1&&this.displayedColumns.splice(i,1)}}initializeColumnProperties(){this.displayedColumns.forEach((e,i)=>{"Actions"!=e&&this.columnShowHideList.push({position:i,name:e,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Key",isActive:!1})}rowClick(e){this.selectedRow=e}getTaskCodesAttributes(e,i){var d=this.form.value;this.taskCodesSubscription&&this.taskCodesSubscription.unsubscribe(),this.taskCodesSubscription=this.taskCodesService.getTaskCodesAttributes(this.user,d.KEY,e,i).subscribe(h=>{const g=h?.[0]?.data?.[1]?.value;if(g)try{const b=JSON.parse(g);b?.returnedData?(this.duplicateSource=b.returnedData,this.dataSource=new n.by(this.duplicateSource),this.totalRecords=b.TotalRecords||0):console.error("Returned data is undefined or null.")}catch(b){console.error("Error parsing response data:",b)}else console.error("Error fetching attributes data")})}taskCodesAttributesDelete(e){var i=this.form.value;this.CustomAlertService.openCustomAlert("Are you sure want to delete this attribute: "+e.EAATRB+" ?").afterClosed().subscribe(h=>{h&&(this.deleteTaskCodesAttributesSubscription&&this.deleteTaskCodesAttributesSubscription.unsubscribe(),this.deleteTaskCodesAttributesSubscription=this.taskCodesService.taskCodesAttributesDelete(i.KEY,e.EAATRB).subscribe(g=>{const b=g?.[0]?.data?.[g[0].data.length-1]?.value;b?.toUpperCase()===_.R.deleteShortMsg.toUpperCase()?(this.successMessage(b),this.getTaskCodesAttributes()):this.failureMessage(b)}))})}onBack(){this.router.navigate(["/main-nav/task-codes/read"])}taskCodesAttributesCreateForm(e){this.matDialog.open(Z,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}taskCodesAttributesChangeForm(e){this.matDialog.open(k,{width:"1000px",maxHeight:"80vh",data:[this.element,e],autoFocus:!1})}successMessage(e){C().fire(e,"","success")}failureMessage(e){C().fire(e,"","error")}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(S.uw),t.Y36(T.x),t.Y36(w.y),t.Y36(l.F0),t.Y36(u.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-ww-taskcodes-attributes"]],viewQuery:function(e,i){if(1&e&&t.Gf(v.NW,5),2&e){let d;t.iGM(d=t.CRH())&&(i.paginator=d.first)}},standalone:!0,features:[t.jDz],decls:59,vars:10,consts:[[1,"over-Flow"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","matTooltip","Add New AccountAttributes",1,"addButton",3,"click"],[1,"menu-container"],["mainMenuButton","matMenu"],[1,"grid-container"],[4,"ngFor","ngForOf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","FLID",2,"text-transform","uppercase"],["matInput","","formControlName","KEY",2,"text-transform","uppercase"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Attribute"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Value"],["matColumnDef","LastChanged"],["matColumnDef","User"],["matColumnDef","Status"],["matColumnDef","Key"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],[1,"grid-item"],[3,"click"],[2,"color","blue",3,"ngModel","ngModelChange","change"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title")(3,"button",1),t.NdJ("click",function(){return i.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Work With Entity Attributes"),t.qZA(),t.TgZ(7,"div",2)(8,"button",3),t.NdJ("click",function(){return i.taskCodesAttributesCreateForm(i.element)}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()(),t.TgZ(11,"mat-menu",4,5)(13,"div",6),t.YNc(14,x,6,2,"ng-container",7),t.qZA()(),t.TgZ(15,"button",8,9)(17,"mat-icon"),t._uU(18,"visibility_off"),t.qZA()()()(),t.TgZ(19,"mat-card-content",10)(20,"form",11)(21,"div",12)(22,"div",13)(23,"mat-form-field",14)(24,"mat-label"),t._uU(25,"File ID"),t.qZA(),t._UZ(26,"input",15),t.qZA(),t.TgZ(27,"mat-form-field",14)(28,"mat-label"),t._uU(29,"Key"),t.qZA(),t._UZ(30,"input",16),t.qZA()()(),t.TgZ(31,"button",17),t._uU(32," Search "),t.qZA()()(),t.TgZ(33,"table",18),t.ynx(34,19),t.YNc(35,L,2,0,"th",20),t.YNc(36,P,2,1,"td",21),t.BQk(),t.ynx(37,22),t.YNc(38,B,2,0,"th",20),t.YNc(39,K,2,1,"td",21),t.BQk(),t.ynx(40,23),t.YNc(41,Y,2,0,"th",20),t.YNc(42,F,2,1,"td",21),t.BQk(),t.ynx(43,24),t.YNc(44,J,2,0,"th",20),t.YNc(45,$,2,1,"td",21),t.BQk(),t.ynx(46,25),t.YNc(47,q,2,0,"th",20),t.YNc(48,Q,2,1,"td",21),t.BQk(),t.ynx(49,26),t.YNc(50,V,2,0,"th",20),t.YNc(51,H,2,1,"td",21),t.BQk(),t.ynx(52,27),t.YNc(53,G,1,0,"th",28),t.YNc(54,j,18,0,"td",21),t.BQk(),t.YNc(55,X,1,0,"tr",29),t.YNc(56,z,1,0,"tr",30),t.qZA(),t.TgZ(57,"mat-paginator",31,32),t.NdJ("page",function(h){return i.onPaginateChange(h)}),t.qZA()()),2&e){const d=t.MAs(12);t.xp6(14),t.Q6J("ngForOf",i.columnShowHideList),t.xp6(1),t.Q6J("matMenuTriggerFor",d),t.xp6(5),t.Q6J("formGroup",i.form),t.xp6(13),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.totalRecords)("pageSizeOptions",t.DdM(9,tt))("pageSize",i.pageSize)}},dependencies:[U.m,M.sg,u._Y,u.Fj,u.JJ,u.JL,u.On,u.sg,u.u,v.NW,E.Hw,O.VK,O.p6,f.lW,A.KE,A.hX,a.Nt,c.a8,c.dk,c.dn,c.n5,n.BZ,n.fO,n.as,n.w1,n.Dz,n.nj,n.ge,n.ev,n.XQ,n.Gk,W.gM,R.Rr]}),r})()}}]);