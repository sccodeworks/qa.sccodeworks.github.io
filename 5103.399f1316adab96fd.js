"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[5103],{69501:(I,S,a)=>{a.d(S,{J:()=>p});var m=a(24006),_=a(47957),C=a(59549),L=a(44144),D=a(69751),A=a(68675),O=a(54004),t=a(70879),n=a(94650),e=a(36895),r=a(3238);function s(l,h){if(1&l&&(n.TgZ(0,"mat-option",6),n._uU(1),n.qZA()),2&l){const o=h.$implicit;n.Q6J("value",o),n.xp6(1),n.hij(" ",o.description," ")}}function i(l,h){1&l&&(n.TgZ(0,"mat-error"),n._uU(1,"Please select a valid option."),n.qZA())}let p=(()=>{class l{constructor(o){this.fb=o,this.options=[],this.value=null,this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.onChange=u=>{this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new D.y,this.filteredOptions=this.control.valueChanges.pipe((0,A.O)(""),(0,O.U)(u=>this._filter(u)))}_filter(o){if(null==o||0===o.length)return this.errorState=!1,this.options;let u="";"string"==typeof o&&(u=o.toLowerCase());const c=this.options.filter(E=>{const T=E.value?.toString().toLowerCase(),f=E.description?.toLowerCase();return T.includes(u)||f.includes(u)});return this.errorState=0===c.length&&o.length>0,c}writeValue(o){this.control.setValue(o&&"object"==typeof o?`${o.value} - ${o.description}`:"string"==typeof o?o:""),this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0}onOptionSelected(o){if(this.control.setValue(o),o&&o.value){const[u,c]=o.description.split(" ");this.valueControlName.setValue(u),this.suffixControlName.setValue(c||""),this.onChange(o.value),this.autocompleteTrigger.closePanel()}else console.error("Selected option value is undefined or null")}displayOptionText(o){return o?o.value:""}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o}setDescribedByIds(o){}onContainerClick(o){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}}return l.\u0275fac=function(o){return new(o||l)(n.Y36(m.qu))},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-dropdown"]],viewQuery:function(o,u){if(1&o&&n.Gf(_.ZL,7),2&o){let c;n.iGM(c=n.CRH())&&(u.autocompleteTrigger=c.first)}},hostVars:1,hostBindings:function(o,u){2&o&&n.uIk("aria-describedby",u.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance",valueControlName:"valueControlName",suffixControlName:"suffixControlName",displayControlName:"displayControlName"},standalone:!0,features:[n._Bn([{provide:m.JU,multi:!0,useExisting:l},{provide:C.Eo,useExisting:l}],[{provide:m.gN,useExisting:m.sg}]),n.jDz],decls:9,vars:10,consts:[[3,"appearance"],["matInput","",3,"formControl","placeholder","matAutocomplete","blur"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(o,u){if(1&o&&(n.TgZ(0,"mat-form-field",0)(1,"mat-label"),n._uU(2),n.qZA(),n.TgZ(3,"input",1),n.NdJ("blur",function(){return u.onTouched()}),n.qZA(),n.TgZ(4,"mat-autocomplete",2,3),n.NdJ("optionSelected",function(E){return u.onOptionSelected(E.option.value)}),n.YNc(6,s,2,2,"mat-option",4),n.ALo(7,"async"),n.qZA(),n.YNc(8,i,2,0,"mat-error",5),n.qZA()),2&o){const c=n.MAs(5);n.Q6J("appearance",u.appearance),n.xp6(2),n.Oqu(u.label),n.xp6(1),n.Q6J("formControl",u.control)("placeholder",u.placeholder)("matAutocomplete",c),n.xp6(1),n.Q6J("displayWith",u.displayOptionText),n.xp6(2),n.Q6J("ngForOf",n.lcZ(7,8,u.filteredOptions)),n.xp6(2),n.Q6J("ngIf",u.control.invalid&&u.control.touched)}},dependencies:[t.m,e.sg,e.O5,m.Fj,m.JJ,m.oH,C.TO,C.KE,C.hX,L.Nt,r.ey,e.Ov,m.UX,_.Bb,_.XC,_.ZL,C.lN,L.c]}),l})()},46546:(I,S,a)=>{a.d(S,{f:()=>O});var m=a(80529),_=a(75625),C=a(70262),L=a(62843),D=a(92340),A=a(94650);let O=(()=>{class t{constructor(e){this.httpClient=e,this.url=D.N.API_BASE_URL,this.httpHeader={headers:new m.WM({"Content-Type":"application/json"})}}getLedgerCodes(e,r,s,i){return this.httpClient.get(this.url+`/LedgerCodes/read?user=${e}&LedgerCode=${r}&recordsPerPage=${s}&pageNo=${i}`)}getAll(e){return this.httpClient.get(this.url+`/LedgerCodes/readAll?user=${e}`)}createLedgerCodes(e,r,s,i,p,l){return this.httpClient.post(this.url+"/LedgerCodes/create",{LELEGC:e,LELEGS:r,LEDESC:s,LECC:i,LECSFX:p,user:l}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}updateLedgerCodes(e,r,s,i,p,l){return this.httpClient.put(this.url+"/LedgerCodes/update",{LELEGC:e,LELEGS:r,LEDESC:s,LECC:i,LECSFX:p,user:l}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}deleteLedgerCodes(e,r,s){return this.httpClient.delete(this.url+`/LedgerCodes/delete?user=${e}&LedgerCode=${r}&LedgerSubCode=${s}`)}LedgerCodesConsolidate(e,r,s,i){return this.httpClient.put(this.url+"/LedgerCodes/consolidate",{LedgerCode1:e,LedgerSubCode1:r,LedgerCode2:s,LedgerSubCode2:i}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}getLCTransactions(e,r,s,i,p){return this.httpClient.get(this.url+`/LedgerCodes/transactions/read?user=${e}&LedgerCode=${r}&LedgerSubCode=${s}&recordsPerPage=${i}&pageNo=${p}`)}updateLcTransactions(e,r,s,i,p,l,h,o){return this.httpClient.put(this.url+"/LedgerCodes/transactions/update",{user:e,InvoiceNum:r,SequenceNum:s,InvoiceDate:i,LineAmount:p,LedgerCode:l,LedgerSubCode:h,Building:o}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}getLctInvInquiry(e,r){return this.httpClient.get(this.url+`/LedgerCodes/transactions/InvInquiry/read?user=${e}&InvoiceNum=${r}`)}getLctAdjInquiry(e,r){return this.httpClient.get(this.url+`/LedgerCodes/transactions/AdjInquiry/read?user=${e}&InvoiceNum=${r}`)}getLCAttributes(e,r,s,i){return this.httpClient.get(this.url+`/LedgerCodes/attributes/read?user=${e}&key=${r}&recordsPerPage=${s}&pageNo=${i}`)}LCAttributesCreate(e,r,s,i,p,l,h,o){return this.httpClient.post(this.url+"/LedgerCodes/attributes/create",{user:e,EAFLID:r,EAKEY:s,EAATRB:i,EAVALU:p,EASTAT:l,EATMST:h,EAUSER:o}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}LCAttributesUpdate(e,r,s,i,p,l,h,o){return this.httpClient.put(this.url+"/LedgerCodes/attributes/update",{EAFLID:e,EAKEY:r,EAATRB:s,EAVALU:i,EASTAT:p,EATMST:l,EAUSER:h,user:o}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}LCAttributesDelete(e,r){return this.httpClient.delete(this.url+`/LedgerCodes/attributes/delete?key=${e}&attribute=${r}`)}RevenueDistReport(e,r,s,i,p,l,h,o,u,c,E,T,f,d){return this.httpClient.put(this.url+"/LedgerCodes/LedgerCodesRevReport/update",{LedgerCode:e,LedgerCodeSuffix:r,StartDate:s,EndDate:i,StartingCustomer:p,StartingCustomerSuffix:l,StartingCustomerSuffix2:h,EndingCustomer:o,EndingCustomerSuffix:u,EndingCustomerSuffix2:c,StartingBuildingNumber:E,EndingBuildingNumber:T,OutPut:f,Email:d}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}LCRevInquiry(e,r,s){return this.httpClient.get(this.url+`/LedgerCodes/LCRevInquiry/read?user=${e}&LedgerCode=${r}&LedgerSubCode=${s}`)}httpError(e){let r="";return r=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(r),(0,L._)(()=>new Error(r))}}return t.\u0275fac=function(e){return new(e||t)(A.LFG(m.eN))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},16799:(I,S,a)=>{a.d(S,{x:()=>O});var m=a(80529),_=a(75625),C=a(70262),L=a(62843),D=a(92340),A=a(94650);let O=(()=>{class t{constructor(e){this.httpClient=e,this.url=D.N.API_BASE_URL,this.httpHeader={headers:new m.WM({"Content-Type":"application/json"})}}getTaskCodes(e,r,s,i,p,l){return this.httpClient.get(this.url+`/TaskCodes/read?user=${e}&storer=${r}&suffix=${s}&status=${i}&recordsPerPage=${p}&pageNo=${l}`)}TaskCodesCreate(e,r,s,i,p,l,h,o,u,c,E,T,f,d){return this.httpClient.post(this.url+"/TaskCodes/create",{TSTASK:e,TSSTOR:r,TSSSFX:s,TSDESC:i,TSMINM:p,TSBASE:l,TSRATE:h,TSLEGC:o,TSLEGS:u,TSMKUP:c,TSQUOT:E,TSAUTO:T,TSVARC:f,user:d}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}TaskCodesUpdate(e,r,s,i,p,l,h,o,u,c,E,T,f,d){return this.httpClient.put(this.url+"/TaskCodes/update",{TSTASK:e,TSSTOR:r,TSSSFX:s,TSDESC:i,TSMINM:p,TSBASE:l,TSRATE:h,TSLEGC:o,TSLEGS:u,TSMKUP:c,TSQUOT:E,TSAUTO:T,TSVARC:f,user:d}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}taskCodesCopyTask(e,r,s,i,p,l,h,o,u,c,E,T,f,d,g,v){return this.httpClient.put(this.url+"/TaskCodes/copyTask",{user:e,taskCode:r,storer1:s,storerSuffix1:i,storer2:p,storerSuffix2:l,description:h,minimum:o,base:u,rate:c,ledgerCode:E,ledgerCodeSuffix:T,markup:f,taskOnQuote:d,autoCharge:g,recalculate:v}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}TaskCodesCopySet(e,r,s,i){return this.httpClient.put(this.url+"/TaskCodes/CopySet",{storer:e,suffix:r,storerNumber:s,storerSuffix:i}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}taskCodesConstraint(e,r,s,i,p,l,h,o){return this.httpClient.post(this.url+"/TaskCodes/constraint",{documentType:e,taskCode:r,storer:s,suffix:i,constraintF:p,relationship:l,constraintV:h,status:o}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}TaskCodesActivate(e,r,s){return this.httpClient.put(this.url+"/TaskCodes/activate",{taskCode:e,storer:r,suffix:s}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}TaskCodesDeactivate(e,r,s){return this.httpClient.put(this.url+"/TaskCodes/Deactivate",{taskCode:e,storer:r,suffix:s}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}taskCodesDelete(e,r,s){return this.httpClient.delete(this.url+`/TaskCodes/delete?taskId=${e}&storer=${r}&suffix=${s}`)}getTaskCodesAttributes(e,r,s,i){return this.httpClient.get(this.url+`/TaskCodes/Attributes?user=${e}&key=${r}&recordsPerPage=${s}&pageNo=${i}`)}TaskCodesAttributesCreate(e,r,s,i,p,l,h,o){return this.httpClient.post(this.url+"/TaskCodes/Attributes/create",{user:e,EAFLID:r,EAKEY:s,EAATRB:i,EAVALU:p,EASTAT:l,EATMST:h,EAUSER:o}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}TaskCodesAttributesUpdate(e,r,s,i,p,l,h,o){return this.httpClient.put(this.url+"/TaskCodes/Attributes/update",{EAFLID:e,EAKEY:r,EAATRB:s,EAVALU:i,EASTAT:p,EATMST:l,EAUSER:h,user:o}).pipe((0,_.X)(1),(0,C.K)(this.httpError))}taskCodesAttributesDelete(e,r){return this.httpClient.delete(this.url+`/TaskCodes/Attributes/delete?key=${e}&attribute=${r}`)}httpError(e){let r="";return r=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(r),(0,L._)(()=>new Error(r))}}return t.\u0275fac=function(e){return new(e||t)(A.LFG(m.eN))},t.\u0275prov=A.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},5103:(I,S,a)=>{a.r(S),a.d(S,{WwTaskcodesAddComponent:()=>E});var m=a(24006),_=a(65412),C=a(70879),L=a(35226),D=a.n(L),A=a(48529),O=a(69501),t=a(94650),n=a(19132),e=a(16799),r=a(11240),s=a(46546),i=a(97392),p=a(4859),l=a(59549),h=a(44144),o=a(84385),u=a(3238),c=a(73546);let E=(()=>{class T{constructor(d,g,v,P,U,M,N){this.data=d,this.dialogRef=g,this.router=v,this.fb=P,this.taskCodesService=U,this.storerSvc=M,this.ledgerCodesService=N,this.user=localStorage.getItem("userName")||"",this.storerOptions=[],this.ledgerOptions=[],this.totalRecords=0,this.currentPage=1}ngOnInit(){this.form=this.fb.group({TSTASK:"",TSSTOR:"",TSSSFX:"",TSDESC:"",TSMINM:".00",TSBASE:"",TSRATE:".0000",TSLEGC:["",m.kI.required],TSLEGS:["",m.kI.required],TSMKUP:"",TSQUOT:"Y",TSAUTO:"N",TSVARC:"Y",TSLDES:""}),this.fetchStorer(),this.fetchLedgerCode()}get storeControlName(){return this.form.controls.TSSTOR}get suffixControlName(){return this.form.controls.TSSSFX}get ledgerControlName(){return this.form.controls.TSLEGC}get subLedgerControlName(){return this.form.controls.TSLEGS}ngOnDestroy(){this.taskCodesSubscription&&this.taskCodesSubscription.unsubscribe()}fetchStorer(){this.storerSvc.getStorerCodes().subscribe(d=>{this.storerOptions=d.map(g=>({value:g.STORE,description:`${g.STORE}${g.STSFX?" "+g.STSFX:""}  ${g.STNAME}`}))})}fetchLedgerCode(){this.ledgerSource=[];const v=P=>{this.ledgerCodesService.getLedgerCodes(this.user,"",10,P).subscribe(U=>{const M=U[0].data[1]?.value,R=JSON.parse(M).returnedData;this.ledgerSource=[...this.ledgerSource,...R],R.length<10?this.ledgerOptions=this.ledgerSource.map(Z=>({value:Z.LELEGC,description:`${Z.LELEGC}${Z.LELEGC?" "+Z.LELEGS:""}  ${Z.LEDESC}`})):v(P+1)})};v(1)}taskCodesCreate(){var d=this.form.value;this.taskCodesSubscription&&this.taskCodesSubscription.unsubscribe(),this.taskCodesSubscription=this.taskCodesService.TaskCodesCreate(d.TSTASK,d.TSSTOR,d.TSSSFX,d.TSDESC,d.TSMINM,d.TSBASE.toUpperCase(),d.TSRATE,d.TSLEGC,d.TSLEGS,d.TSMKUP,d.TSQUOT,d.TSAUTO,d.TSVARC,this.user).subscribe(v=>{const P=v[0]?.data?.length,U=P?v[0]?.data[P-1]?.value:void 0,M=U?JSON.parse(U)?.returnedData?.message:void 0;M?.toUpperCase()===A.R.createMsg.toUpperCase()?(this.successMessage(M),this.closeDialog(),this.router.navigate(["/main-nav/task-codes/read"])):this.failureMessage(M)})}successMessage(d){D().fire(d,"","success")}failureMessage(d){D().fire(d,"","error")}closeDialog(){this.dialogRef.close()}}return T.\u0275fac=function(d){return new(d||T)(t.Y36(_.WI),t.Y36(_.so),t.Y36(n.F0),t.Y36(m.qu),t.Y36(e.x),t.Y36(r.h),t.Y36(s.f))},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-ww-taskcodes-add"]],standalone:!0,features:[t.jDz],decls:93,vars:8,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","TSTASK"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["label","Storer","placeholder","Search or Enter Storer",3,"options","valueControlName","suffixControlName"],["matInput","","formControlName","TSSSFX",2,"text-transform","uppercase"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","TSDESC"],["matInput","","formControlName","TSRATE"],["matInput","","formControlName","TSBASE",2,"text-transform","uppercase"],["matInput","","formControlName","TSMINM"],["label","Ledger Code*","placeholder","Search or Enter Ledger Code",3,"options","valueControlName","suffixControlName"],["appearance","outline"],["matInput","","formControlName","TSLEGS"],["matInput","","formControlName","TSMKUP"],["formControlName","TSAUTO"],["value",""],["value","I"],["value","O"],["value","N"],["formControlName","TSVARC"],["value","Y"],["formControlName","TSQUOT"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(d,g){1&d&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Task Code Maintenance"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return g.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Task Code"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",10)(17,"label",11),t._uU(18,"Storer"),t.qZA(),t.TgZ(19,"div",12),t._UZ(20,"app-dropdown",13),t.TgZ(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Storer Suffix"),t.qZA(),t._UZ(24,"input",14),t.qZA()()(),t.TgZ(25,"mat-form-field",15)(26,"mat-label"),t._uU(27,"Description"),t.qZA(),t.TgZ(28,"textarea",16),t._uU(29," Description"),t.qZA()(),t.TgZ(30,"div",10)(31,"label",11),t._uU(32,"Rate/Base"),t.qZA(),t.TgZ(33,"div",12)(34,"mat-form-field",8)(35,"mat-label"),t._uU(36,"Rate"),t.qZA(),t._UZ(37,"input",17),t.qZA(),t.TgZ(38,"mat-form-field",8)(39,"mat-label"),t._uU(40,"Base"),t.qZA(),t._UZ(41,"input",18),t.qZA()()(),t.TgZ(42,"mat-form-field",8)(43,"mat-label"),t._uU(44,"Minimum"),t.qZA(),t._UZ(45,"input",19),t.qZA(),t.TgZ(46,"div",10)(47,"label",11),t._uU(48,"Ledger Code"),t.qZA(),t.TgZ(49,"div",12),t._UZ(50,"app-dropdown",20),t.TgZ(51,"mat-form-field",21)(52,"mat-label"),t._uU(53,"sub-code"),t.qZA(),t._UZ(54,"input",22),t.qZA()()(),t.TgZ(55,"mat-form-field",8)(56,"mat-label"),t._uU(57,"Markup"),t.qZA(),t._UZ(58,"input",23),t.qZA(),t.TgZ(59,"mat-form-field",8)(60,"mat-label"),t._uU(61,"Auto Charge"),t.qZA(),t.TgZ(62,"mat-select",24)(63,"mat-option",25),t._uU(64,"-- Select --"),t.qZA(),t.TgZ(65,"mat-option",26),t._uU(66,"I"),t.qZA(),t.TgZ(67,"mat-option",27),t._uU(68,"O"),t.qZA(),t.TgZ(69,"mat-option",28),t._uU(70,"N"),t.qZA()()(),t.TgZ(71,"mat-form-field",8)(72,"mat-label"),t._uU(73,"Recalculate At Posting"),t.qZA(),t.TgZ(74,"mat-select",29)(75,"mat-option",25),t._uU(76,"-- Select --"),t.qZA(),t.TgZ(77,"mat-option",30),t._uU(78,"Y"),t.qZA(),t.TgZ(79,"mat-option",28),t._uU(80,"N"),t.qZA()()(),t.TgZ(81,"mat-form-field",8)(82,"mat-label"),t._uU(83,"Task on Quote"),t.qZA(),t.TgZ(84,"mat-select",31)(85,"mat-option",25),t._uU(86,"-- Select --"),t.qZA(),t.TgZ(87,"mat-option",30),t._uU(88,"Y"),t.qZA(),t.TgZ(89,"mat-option",28),t._uU(90,"N"),t.qZA()()()()(),t.TgZ(91,"button",32),t.NdJ("click",function(){return g.taskCodesCreate()}),t._uU(92,"Create"),t.qZA()()()()),2&d&&(t.xp6(9),t.Q6J("formGroup",g.form),t.xp6(11),t.Q6J("options",g.storerOptions)("valueControlName",g.storeControlName)("suffixControlName",g.suffixControlName),t.xp6(30),t.Q6J("options",g.ledgerOptions)("valueControlName",g.ledgerControlName)("suffixControlName",g.subLedgerControlName),t.xp6(41),t.Q6J("disabled",!g.form.valid))},dependencies:[C.m,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,i.Hw,p.lW,l.KE,l.hX,h.Nt,o.gD,u.ey,c.a8,c.dk,c.dn,c.n5,O.J]}),T})()}}]);