"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[6341],{6341:(z,g,i)=>{i.r(g),i.d(g,{StorerAccessInvoiceEnquiryComponent:()=>w});var T=i(98739),c=i(7155),S=i(70879),t=i(94650),A=i(19132),C=i(11240),l=i(24006),y=i(65412),I=i(36895),v=i(97392),Z=i(4859),h=i(59549),q=i(44144),f=i(99602),u=i(73546),N=i(10266);function O(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.searchAccessInvInq())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function P(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.searchAccessInvInq())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function M(e,o){if(1&e&&(t.TgZ(0,"form",27)(1,"div",28)(2,"div",29)(3,"mat-form-field",30)(4,"mat-label"),t._uU(5,"WorkSheet "),t.qZA(),t._UZ(6,"input",31),t.qZA(),t.TgZ(7,"mat-form-field",30)(8,"mat-label"),t._uU(9,"Date "),t.qZA(),t._UZ(10,"input",32)(11,"mat-datepicker-toggle",33)(12,"mat-datepicker",null,34),t.qZA(),t.TgZ(14,"mat-form-field",30)(15,"mat-label"),t._uU(16,"Time"),t.qZA(),t._UZ(17,"input",35),t.qZA(),t.TgZ(18,"div",36)(19,"label",37),t._uU(20,"Generated"),t.qZA(),t.TgZ(21,"div",38)(22,"mat-form-field",30)(23,"mat-label"),t._uU(24,"Generated Date "),t.qZA(),t._UZ(25,"input",39)(26,"mat-datepicker-toggle",33)(27,"mat-datepicker",null,40),t.qZA(),t.TgZ(29,"mat-form-field",30)(30,"mat-label"),t._uU(31,"Generated Time"),t.qZA(),t._UZ(32,"input",41),t.qZA()()(),t.TgZ(33,"mat-form-field",30)(34,"mat-label"),t._uU(35," Page Of "),t.qZA(),t._UZ(36,"input",42),t.qZA(),t.TgZ(37,"mat-form-field",30)(38,"mat-label"),t._uU(39,"Document"),t.qZA(),t._UZ(40,"input",43),t.qZA(),t.TgZ(41,"mat-form-field",44)(42,"mat-label"),t._uU(43," Storer "),t.qZA(),t._UZ(44,"input",45),t.qZA()()(),t.TgZ(45,"button",46),t._uU(46," Search "),t.qZA()()),2&e){const n=t.MAs(13),a=t.MAs(28),r=t.oxw();t.Q6J("formGroup",r.form),t.xp6(10),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(14),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a)}}function U(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," Date "),t.qZA())}function x(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," TallyOrder "),t.qZA())}function R(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," Reference No. "),t.qZA())}function b(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," Pieces "),t.qZA())}function B(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," Weight "),t.qZA())}function W(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," Type "),t.qZA())}function k(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," RtnPayTp "),t.qZA())}function G(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," Consignee "),t.qZA())}function Q(e,o){1&e&&(t.TgZ(0,"th",47),t._uU(1," Min "),t.qZA())}function K(e,o){if(1&e&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.WKP1LINE," ")}}function J(e,o){1&e&&t._UZ(0,"tr",49)}function L(e,o){1&e&&t._UZ(0,"tr",50)}const F=function(){return["fullWidth"]},Y=function(){return[8,16,24]};let w=(()=>{class e{constructor(n,a,r,s,m){this.router=n,this.StorerServiceService=a,this.fb=r,this.route=s,this.matDialog=m,this.StorerRead="/main-nav/storer",this.dataSource=new c.by,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.headerColumns=["Date","TallyOrder","Reference No.","Pieces","Weight","Type","RtnPayTp","Consignee","Min"],this.displayedColumns=["fullWidth"],this.searchTextDisplay=!1,this.user=localStorage.getItem("userName")||"",this.columnShowHideList=[]}ngOnInit(){this.element=history.state,this.form=this.fb.group({P1STOR:[this.element.STORE]+"\xa0"+[this.element.STNAME],P1SSFX:this.element.STSFX,GEND:"",INVNO:"",Date:[new Date],Time:[this.formatCurrentTime()],GENDT:"",GENTM:"",CPAG:"1",WKDOCN:"",SNAME:""}),this.getAccessInvoiceEnquiry(this.pageSize,1),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const n=new Date;return`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`}createFilter(){return(n,a)=>{const r=JSON.parse(a);return Object.keys(r).every(s=>n[s].toString().toLowerCase().includes(r[s].toLowerCase()))}}resetSearch(){this.form.reset(),this.currentFilters=null,this.paginator.firstPage(),this.getAccessInvoiceEnquiry(this.pageSize,1)}onPaginateChange(n){this.pageSize=n.pageSize,this.getAccessInvoiceEnquiry(n.pageSize,n.pageIndex+1)}searchAccessInvInq(){this.searchTextDisplay=1!=this.searchTextDisplay}getAccessInvoiceEnquiry(n,a){const r=this.currentFilters||{},{P1STOR:s=`${this.element.STORE}`,P1SSFX:m="",GEND:_="",WKDOCN:d=""}=r;console.log("Filters:",{P1STOR:s,P1SSFX:m,GEND:_}),this.getAll2Subscription&&this.getAll2Subscription.unsubscribe(),this.getAll2Subscription=this.StorerServiceService.AccessInvoiceInquiry(this.user,s,m,_,d,n,a).subscribe(E=>{try{if(E[0].data[1]?.value){const p=JSON.parse(E[0].data[1].value),D=p.returnedData;this.dataSource.data=D,this.totalRecords=p.TotalRecords,this.loadGeneratedDateTime(D[0].WKGEND)}else console.warn("Received empty or null response for data."),this.dataSource.data=[],this.totalRecords=0}catch(p){console.error("Failed to parse JSON response:",p),this.dataSource.data=[],this.totalRecords=0}})}loadGeneratedDateTime(n){const a=n.replace('WKGEND":"',"").replace(/"/g,""),r="20"+a.substring(1,3),s=a.substring(3,5),m=a.substring(5,7),_=a.substring(7,9),d=a.substring(9,11);this.form.patchValue({GENDT:new Date(`${r}-${s}-${m}`),GENTM:`${_}:${d}`})}getSupplyBySearch(n){this.currentFilters=n,this.paginator.firstPage(),this.getAccessInvoiceEnquiry(this.pageSize,1)}onBack(){this.router.navigate([this.StorerRead])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(A.F0),t.Y36(C.h),t.Y36(l.qu),t.Y36(A.gz),t.Y36(y.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-storer-access-invoice-enquiry"]],viewQuery:function(n,a){if(1&n&&t.Gf(T.NW,5),2&n){let r;t.iGM(r=t.CRH())&&(a.paginator=r.first)}},standalone:!0,features:[t.jDz],decls:37,vars:11,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","search AccessInvInq",3,"click",4,"ngIf"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Date"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","TallyOrder"],["matColumnDef","Reference No."],["matColumnDef","Pieces"],["matColumnDef","Weight"],["matColumnDef","Type"],["matColumnDef","RtnPayTp"],["matColumnDef","Consignee"],["matColumnDef","Min"],["matColumnDef","fullWidth"],["mat-cell","","colspan","10",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","search AccessInvInq",1,"addButton",3,"click"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","INVNO"],["matInput","","formControlName","Date",3,"matDatepicker"],["matSuffix","",3,"for"],["DatePicker",""],["matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","GENDT",3,"matDatepicker"],["GeneratedDatePicker",""],["matInput","","type","time","formControlName","GENTM","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","formControlName","CPAG"],["matInput","","formControlName","WKDOCN"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","P1STOR",2,"text-transform","uppercase"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell","","mat-header-cell",""],["mat-cell","","colspan","10"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return a.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Accessorial Invoice WorkSheet Inquiry"),t.qZA(),t.TgZ(7,"div",3),t.YNc(8,O,3,0,"button",4),t.YNc(9,P,3,0,"button",5),t.qZA()(),t.TgZ(10,"mat-card-content",6),t.YNc(11,M,47,5,"form",7),t.qZA(),t.TgZ(12,"table",8),t.ynx(13,9),t.YNc(14,U,2,0,"th",10),t.BQk(),t.ynx(15,11),t.YNc(16,x,2,0,"th",10),t.BQk(),t.ynx(17,12),t.YNc(18,R,2,0,"th",10),t.BQk(),t.ynx(19,13),t.YNc(20,b,2,0,"th",10),t.BQk(),t.ynx(21,14),t.YNc(22,B,2,0,"th",10),t.BQk(),t.ynx(23,15),t.YNc(24,W,2,0,"th",10),t.BQk(),t.ynx(25,16),t.YNc(26,k,2,0,"th",10),t.BQk(),t.ynx(27,17),t.YNc(28,G,2,0,"th",10),t.BQk(),t.ynx(29,18),t.YNc(30,Q,2,0,"th",10),t.BQk(),t.ynx(31,19),t.YNc(32,K,2,1,"td",20),t.BQk(),t.YNc(33,J,1,0,"tr",21),t.YNc(34,L,1,0,"tr",22),t.qZA(),t.TgZ(35,"mat-paginator",23,24),t.NdJ("page",function(s){return a.onPaginateChange(s)}),t.qZA()()),2&n&&(t.xp6(8),t.Q6J("ngIf",a.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!a.searchTextDisplay),t.xp6(2),t.Q6J("ngIf",a.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",a.dataSource),t.xp6(21),t.Q6J("matHeaderRowDef",a.headerColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(9,F)),t.xp6(1),t.Q6J("length",a.totalRecords)("pageSizeOptions",t.DdM(10,Y))("pageSize",a.pageSize))},dependencies:[S.m,I.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,T.NW,v.Hw,Z.lW,h.KE,h.hX,h.R9,q.Nt,f.Mq,f.hl,f.nW,u.a8,u.dk,u.dn,u.n5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,N.gM]}),e})()}}]);