"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[9829],{69829:(ct,g,c)=>{c.r(g),c.d(g,{ReceivablesInvoiceInquirySiComponent:()=>ot});var h=c(98739),r=c(7155),T=c(70879),t=c(94650),l=c(24006),S=c(19132),C=c(81543),d=c(36895),b=c(97392),f=c(28255),y=c(4859),v=c(59549),Z=c(44144),I=c(99602),p=c(73546),q=c(10266),A=c(90455);function D(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.searchItem())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function R(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.searchItem())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function N(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",39)(2,"div",40)(3,"span",41),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(4,"mat-slide-toggle",42),t.NdJ("ngModelChange",function(a){const m=t.CHM(e).$implicit;return t.KtG(m.isActive=a)})("change",function(){const s=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.toggleColumn(s))}),t._uU(5),t.qZA()()()(),t.BQk()}if(2&n){const e=o.$implicit;t.xp6(4),t.Q6J("ngModel",e.isActive),t.xp6(1),t.hij(" ",e.name," ")}}function x(n,o){if(1&n&&(t.TgZ(0,"form",43)(1,"div",39)(2,"div",44)(3,"mat-form-field",45)(4,"mat-label"),t._uU(5," Invoice Number "),t.qZA(),t._UZ(6,"input",46),t.qZA(),t.TgZ(7,"mat-form-field",45)(8,"mat-label"),t._uU(9,"Position to Item"),t.qZA(),t._UZ(10,"input",47),t.qZA(),t.TgZ(11,"div",48)(12,"label",49),t._uU(13,"Generated"),t.qZA(),t.TgZ(14,"div",50)(15,"mat-form-field",45)(16,"mat-label"),t._uU(17,"Generated Date "),t.qZA(),t._UZ(18,"input",51)(19,"mat-datepicker",null,52),t.qZA(),t.TgZ(21,"mat-form-field",45)(22,"mat-label"),t._uU(23,"Generated Time"),t.qZA(),t._UZ(24,"input",53),t.qZA()()(),t.TgZ(25,"mat-form-field",54)(26,"mat-label"),t._uU(27," Storer "),t.qZA(),t._UZ(28,"input",55),t.qZA()()(),t.TgZ(29,"button",56),t._uU(30," Search "),t.qZA()()),2&n){const e=t.MAs(20),i=t.oxw(2);t.Q6J("formGroup",i.form),t.xp6(18),t.Q6J("matDatepicker",e),t.xp6(10),t.Q6J("value",i.fullStorer)}}function M(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1," Item "),t.qZA())}function E(n,o){if(1&n&&(t.TgZ(0,"td",58)(1,"tr")(2,"td"),t._uU(3),t.qZA()(),t.TgZ(4,"tr")(5,"td"),t._uU(6),t.qZA()()()),2&n){const e=o.$implicit;t.xp6(3),t.Oqu(e.WKITDSC),t.xp6(3),t.Oqu(e.WKS1LOT1)}}function U(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Balance"),t.qZA())}function O(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.WK1BALN+e.WK1BUNT)}}function P(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Weight"),t.qZA())}function B(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.WK1WUNT)}}function K(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Date Received"),t.qZA())}function W(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.WKS1RCVD)}}function L(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Charge Amount"),t.qZA())}function w(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(0!==e.WKAMT?e.WKAMT:"")}}function Y(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"MN"),t.qZA())}function G(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.WK1MIN)}}function k(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Transaction Date"),t.qZA())}function Q(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.WKS1TRAN)}}function H(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Shipped"),t.qZA())}function J(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.WSHIP)}}function F(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Rate"),t.qZA())}function $(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(0!==e.WKRATE?e.WKRATE:"")}}function z(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Days Past Grace"),t.qZA())}function V(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(0!==e.WKPGRAC?e.WKPGRAC:"")}}function j(n,o){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Months Storage"),t.qZA())}function X(n,o){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(0!==e.WKS1MULT?e.WKS1MULT:"")}}function tt(n,o){1&n&&t._UZ(0,"tr",59)}function et(n,o){1&n&&t._UZ(0,"tr",60)}const nt=function(){return[8,16,24]};function it(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title",2)(4,"button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onBack())}),t.TgZ(5,"mat-icon"),t._uU(6,"navigate_before "),t.qZA()(),t._uU(7,"Grace Period Exception Inquiry"),t.qZA(),t.TgZ(8,"div",4),t.YNc(9,D,3,0,"button",5),t.YNc(10,R,3,0,"button",6),t.TgZ(11,"mat-menu",7,8)(13,"div",9),t.YNc(14,N,6,2,"ng-container",10),t.qZA()(),t.TgZ(15,"button",11,12)(17,"mat-icon"),t._uU(18,"visibility_off"),t.qZA()(),t.TgZ(19,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.resetSearch())}),t.TgZ(20,"mat-icon"),t._uU(21,"loop"),t.qZA()()()(),t.TgZ(22,"mat-card-content",14),t.YNc(23,x,31,3,"form",15),t.qZA(),t._UZ(24,"br"),t.TgZ(25,"table",16),t.ynx(26,17),t.YNc(27,M,2,0,"th",18),t.YNc(28,E,7,2,"td",19),t.BQk(),t.ynx(29,20),t.YNc(30,U,2,0,"th",18),t.YNc(31,O,2,1,"td",19),t.BQk(),t.ynx(32,21),t.YNc(33,P,2,0,"th",18),t.YNc(34,B,2,1,"td",19),t.BQk(),t.ynx(35,22),t.YNc(36,K,2,0,"th",18),t.YNc(37,W,2,1,"td",19),t.BQk(),t.ynx(38,23),t.YNc(39,L,2,0,"th",18),t.YNc(40,w,2,1,"td",19),t.BQk(),t.ynx(41,24),t.YNc(42,Y,2,0,"th",18),t.YNc(43,G,2,1,"td",19),t.BQk(),t.ynx(44,25),t.YNc(45,k,2,0,"th",18),t.YNc(46,Q,2,1,"td",19),t.BQk(),t.ynx(47,26),t.YNc(48,H,2,0,"th",18),t.YNc(49,J,2,1,"td",19),t.BQk(),t.ynx(50,27),t.YNc(51,F,2,0,"th",18),t.YNc(52,$,2,1,"td",19),t.BQk(),t.ynx(53,28),t.YNc(54,z,2,0,"th",18),t.YNc(55,V,2,1,"td",19),t.BQk(),t.ynx(56,29),t.YNc(57,j,2,0,"th",18),t.YNc(58,X,2,1,"td",19),t.BQk(),t.YNc(59,tt,1,0,"tr",30),t.YNc(60,et,1,0,"tr",31),t.qZA(),t._UZ(61,"br"),t.TgZ(62,"div",32)(63,"div",33)(64,"button",34),t._uU(65," Total Amount Due : $ "),t.qZA()()(),t.TgZ(66,"mat-paginator",35,36),t.NdJ("page",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.onPaginateChange(a))}),t.qZA()(),t.BQk()}if(2&n){const e=t.MAs(12),i=t.oxw();t.xp6(9),t.Q6J("ngIf",i.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!i.searchTextDisplay),t.xp6(4),t.Q6J("ngForOf",i.columnShowHideList),t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(8),t.Q6J("ngIf",i.searchTextDisplay),t.xp6(2),t.Q6J("dataSource",i.dataSource),t.xp6(34),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(6),t.Q6J("length",i.totalRecords)("pageSizeOptions",t.DdM(11,nt))("pageSize",i.pageSize)}}let ot=(()=>{class n{constructor(e,i,a){this.fb=e,this.router=i,this.RecvSvc=a,this.dataSource=new r.by,this.duplicateSource=[],this.user=localStorage.getItem("userName")||"",this.editedRows=[],this.searchTextDisplay=!1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.displayedColumns=["Item","Balance","Weight","DateReceived","ChargeAmount","MN"],this.columnShowHideList=[],this.totalAmountDue=0,this.Storer=0,this.StorerName="",this.isNavigating=!1,this.receivablesUrl="/main-nav/receivables/read"}toggleColumn(e){if(e.isActive)this.displayedColumns.splice(e.position>this.displayedColumns.length-1?this.displayedColumns.length-1:e.position,0,e.name);else{let i=this.displayedColumns.indexOf(e.name);i>-1&&this.displayedColumns.splice(i,1)}}initializeColumnProperties(){this.displayedColumns.forEach((e,i)=>{"Actions"!=e&&this.columnShowHideList.push({position:i,name:e,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"TransactionDate",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Shipped",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Rate",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"DaysPastGrace",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"MonthsStorage",isActive:!1})}searchItem(){this.searchTextDisplay=1!=this.searchTextDisplay}ngOnInit(){this.element=history.state,this.form=this.fb.group({invoiceNumber:this.element.WKINV,PositiontoItem:"",GENDT:"",GENTM:"",Period:this.element.AHDESC}),this.initializeColumnProperties(),this.editedRows=[];const e=this.pageSize,i=this.pageNumber;this.isNavigating=!0,this.getInvInquirySI(e,i),this.dataSource.filterPredicate=this.createFilter()}ngOnDestroy(){this.invoiceInquirySubscription&&this.invoiceInquirySubscription.unsubscribe()}createFilter(){return(e,i)=>{const a=JSON.parse(i);return Object.keys(a).every(s=>e[s].toString().toLowerCase().includes(a[s].toLowerCase()))}}getInvInquirySI(e,i){const a=this.currentFilters||{},{WKINVN:s=`${this.element.WKINV}`}=a;this.invoiceInquirySubscription&&this.invoiceInquirySubscription.unsubscribe(),this.invoiceInquirySubscription=this.RecvSvc.FreightInv(this.user,s,e,i).subscribe(m=>{try{const _=JSON.parse(m[0].data[1]?.value),u=_.returnedData;if("SI1"===_.Type)return this.isNavigating=!0,console.log("Navigating to another form..."),void this.router.navigateByUrl("/main-nav/receivables/invoice-inquiry-Storage-SI2",{state:{invoice:this.element.WKINV,Name:u[0].WKSNAME}});this.displayedColumns=98===u[0]?.WKS1TYPE?["Item"]:["Item","Balance","Weight","DateReceived","ChargeAmount","MN"],this.dataSource.data=u,this.loadGeneratedDateTime(u[0].WKGEND),this.totalAmountDue=_["Total Amount Due"],this.Storer=u[0].S1STOR,this.StorerName=u[0].WKSNAME,this.fullStorer=`${this.Storer}  ${this.StorerName}`,console.log(this.fullStorer),this.totalRecords=_.TotalRecords}catch(_){console.error("Error processing response:",_)}})}loadGeneratedDateTime(e){const i=e.replace('WKGEND":"',"").replace(/"/g,""),a="20"+i.substring(1,3),s=i.substring(3,5),m=i.substring(5,7),_=i.substring(7,9),u=i.substring(9,11);this.form.patchValue({GENDT:new Date(`${a}-${s}-${m}`),GENTM:`${_}:${u}`})}onPaginateChange(e){this.pageSize=e.pageSize,this.getInvInquirySI(e.pageSize,e.pageIndex+this.pageNumber)}getInquireBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.getInvInquirySI(this.pageSize,this.pageNumber)}resetSearch(){this.form.reset(),this.currentFilters=null,this.paginator.firstPage(),this.getInvInquirySI(this.pageSize,this.pageNumber)}onBack(){this.router.navigate([this.receivablesUrl])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(S.F0),t.Y36(C.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-receivables-invoice-inquiry-si"]],viewQuery:function(e,i){if(1&e&&t.Gf(h.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[[4,"ngIf"],[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","search",3,"click",4,"ngIf"],[1,"menu-container"],["mainMenuButton","matMenu"],[1,"grid-container"],[4,"ngFor","ngForOf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["mat-button","","type","reset","value","Reset","matTooltip","Reset",1,"addButton","buttons",3,"click"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Balance"],["matColumnDef","Weight"],["matColumnDef","DateReceived"],["matColumnDef","ChargeAmount"],["matColumnDef","MN"],["matColumnDef","TransactionDate"],["matColumnDef","Shipped"],["matColumnDef","Rate"],["matColumnDef","DaysPastGrace"],["matColumnDef","MonthsStorage"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side1"],[1,"buttons","button3"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","search",1,"addButton",3,"click"],[1,"row"],[1,"grid-item"],[3,"click"],[2,"color","blue",3,"ngModel","ngModelChange","change"],[1,"form","over-Flow",3,"formGroup"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","invoiceNumber"],["matInput","","formControlName","positionToItem"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","GENDT","readonly","",3,"matDatepicker"],["GeneratedDatePicker",""],["matInput","","formControlName","GENTM","readonly",""],["appearance","outline",1,"full-width2"],["matInput","",3,"value"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&t.YNc(0,it,68,12,"ng-container",0),2&e&&t.Q6J("ngIf",!i.isNavigating)},dependencies:[T.m,d.sg,d.O5,l._Y,l.Fj,l.JJ,l.JL,l.On,l.sg,l.u,h.NW,b.Hw,f.VK,f.p6,y.lW,v.KE,v.hX,Z.Nt,I.Mq,I.hl,p.a8,p.dk,p.dn,p.n5,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,q.gM,A.Rr]}),n})()}}]);