"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[7104],{7104:(J,y,s)=>{s.r(y),s.d(y,{SerialPalletScheduledMovesComponent:()=>x});var o=s(24006),M=s(35226),h=s.n(M),S=s(70879),p=s(65412),Q=s(94766),t=s(94650),C=s(16082),b=s(19132),Z=s(97392),L=s(4859),f=s(59549),U=s(44144),m=s(73546),P=s(34894);let N=(()=>{class a{constructor(e,l,i,u,d,v){this.dialogRef=e,this.anyvariable=l,this.fb=i,this.moveqSvc=u,this.router=d,this.matDialog=v,this.user=localStorage.getItem("userName"),this.verifyMsg="Processed Successfully",this.outputMsg="Call MQI815CR for New Order Notificaton. Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick",this.newOrderFullPalletMsg="Call MQI815CR for New Order Notificaton. Call MQU805R for Full Pallet Pick.",this.newOrderLpFullPalletMsg="Call MQI815CR for New Order Notificaton. Call MQU805RLP for LP full Pallet Pick.",this.newOrderPartialPalletMsg="Call MQI815CR for New Order Notificaton. Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick",this.newOrderPartialPalletAltMsg="Call MQI815CR for New Order Notificaton. Call MQU811RC for Partial pallet select. Call MQU806CR for Partial pallet Pick.",this.scheduledPartialLpMsg="Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick",this.lpFullPalletNextScreenMsg="Call MQU805RLP for Next Screen.",this.lpFullPalletPickMsg="Call MQU805RLP for LP full Pallet Pick.",this.cycleCountMsg="Call MQCRUD,MQU830R for Cycle Count",this.noMoreAssignmentsMsg="NO MORE ASSIGNMENTS FOR THIS OPERATOR.",this.flipped=" ",this.flippedSerial=""}ngOnInit(){this.form=this.fb.group({oldSerial:[{value:this.anyvariable?.inputSerial||"",disabled:!0}],newSerial:["",o.kI.required]})}ngOnDestroy(){this.verifySubscription&&this.verifySubscription.unsubscribe()}verifyPallet(){const e=this.form.value;this.flipped=this.anyvariable[20]?.value?.trim(),this.flippedSerial=this.anyvariable.outputSerial||"",this.verifySubscription=this.moveqSvc.mixedSerial("VERIFY",this.user,this.anyvariable[3].value,"",this.anyvariable[8].value,this.anyvariable[9].value,this.anyvariable[10].value,e.newSerial,this.anyvariable.inputSerial,this.anyvariable[13].value,"Y"===this.flipped?this.flippedSerial:"").subscribe(i=>{const u=i?.[0]?.data||[],d=u[u.length-1]?.value?.trim()||"";if(d){if(d.toUpperCase()===this.verifyMsg.toUpperCase())return void h().fire(d,"","success").then(()=>{this.checkFirstCallAndDecide()});h().fire(d,"","error")}})}handleFirstCallNavigation(e){return e.toUpperCase()===this.noMoreAssignmentsMsg.toUpperCase()?(h().fire(e,"","error").then(()=>{this.matDialog.closeAll(),this.router.navigateByUrl("/dashboard-rfmenu/read")}),!0):e.toUpperCase()===this.cycleCountMsg.toUpperCase()?(this.matDialog.closeAll(),this.router.navigateByUrl("/main-nav/cycleCount/read",{state:this.anyvariable}),!0):e===this.newOrderFullPalletMsg||e===this.newOrderLpFullPalletMsg||e===this.newOrderPartialPalletMsg||e===this.newOrderPartialPalletAltMsg?(this.dialogRef.close(),this.matDialog.open(Q.z,{width:"1000px",maxHeight:"80vh",data:this.anyvariable,autoFocus:!1}),!0):(e===this.scheduledPartialLpMsg||e===this.lpFullPalletNextScreenMsg||e===this.lpFullPalletPickMsg)&&(this.matDialog.closeAll(),this.router.navigateByUrl("/main-nav/scheduledMoves/read",{state:this.anyvariable}),!0)}checkFirstCallAndDecide(){this.moveqSvc.updateFirstCall("FIRST",this.user).subscribe(e=>{const l=e?.[0]?.data||[],i=l[l.length-1]?.value?.trim()||"";if(i&&!this.handleFirstCallNavigation(i)){if(i===this.outputMsg)return void this.dialogRef.close({clearParent:!0});h().fire(i,"","error")}})}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.so),t.Y36(p.WI),t.Y36(o.qu),t.Y36(C.e),t.Y36(b.F0),t.Y36(p.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-verify-scheduled-moves"]],standalone:!0,features:[t.jDz],decls:22,vars:1,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","oldSerial"],["matInput","","formControlName","newSerial","appUppercase","","maxlength","30","required",""],["mat-raised-button","",1,"buttons","addButton",3,"click"]],template:function(e,l){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4," Apply and Verify LP/Serial "),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return l.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Serial"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"New Serial"),t.qZA(),t._UZ(19,"input",10),t.qZA()()(),t.TgZ(20,"button",11),t.NdJ("click",function(){return l.verifyPallet()}),t._uU(21," Verify "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",l.form))},dependencies:[S.m,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.nD,o.sg,o.u,Z.Hw,L.lW,f.KE,f.hX,U.Nt,m.a8,m.dk,m.dn,m.n5,P.e]}),a})();var F=s(36895);function w(a,n){1&a&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"LotCode1"),t.qZA(),t._UZ(3,"input",20),t.qZA()),2&a&&(t.xp6(3),t.Q6J("disabled",!0))}function q(a,n){1&a&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"LotCode2"),t.qZA(),t._UZ(3,"input",21),t.qZA()),2&a&&(t.xp6(3),t.Q6J("disabled",!0))}function T(a,n){1&a&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"LotCode3"),t.qZA(),t._UZ(3,"input",22),t.qZA()),2&a&&(t.xp6(3),t.Q6J("disabled",!0))}function A(a,n){1&a&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"Quantity"),t.qZA(),t._UZ(3,"input",23),t.qZA())}function _(a,n){1&a&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"To"),t.qZA(),t._UZ(3,"input",24),t.TgZ(4,"mat-hint",25),t._uU(5,"CLOSE PALLET"),t.qZA()())}function I(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onNext())}),t._uU(1," Next "),t.qZA()}if(2&a){const e=t.oxw();let l;t.Q6J("disabled",!(null!=(l=e.form.get("Srl"))&&l.value)&&!e.showQtyField||e.showQtyField&&!(null!=(l=e.form.get("Quantity"))&&l.value))}}function R(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSubmit())}),t._uU(1," Submit "),t.qZA()}if(2&a){const e=t.oxw();let l;t.Q6J("disabled",!(null!=(l=e.form.get("Srl"))&&l.value&&null!=(l=e.form.get("Quantity"))&&l.value&&null!=(l=e.form.get("Location"))&&l.value))}}let x=(()=>{class a{constructor(e,l,i,u){this.fb=e,this.router=l,this.moveqSvc=i,this.matDialog=u,this.user=localStorage.getItem("userName"),this.billName="",this.title="",this.currentStage="",this.paramValue="SRLSCRN",this.showQtyField=!1,this.showLocationField=!1,this.allFieldsEntered=!1,this.qtyMsg="Display the Qty field.",this.locationMsg="Display the LocationField.",this.verifyMsg="Call pgm with option VERIFY",this.qtylot1="Display the Qty field.Lotcode1 is Required",this.qtylot2="Display the Qty field.Lotcode2 is Required",this.qtylot3="Display the Qty field.Lotcode3 is Required",this.quantity="",this.didone=" ",this.scanned=" ",this.flipped=" ",this.showLot1=!1,this.showLot2=!1,this.showLot3=!1}ngOnInit(){this.element=history.state,this.billName=this.element[16].value,this.title=this.element[10].value,this.form=this.fb.group({Transaction:[{value:this.element[11].value,disabled:!0}],From:[{value:this.element[12].value,disabled:!0}],Qty:[{value:this.element[13].value,disabled:!0}],To:[{value:this.element[14].value,disabled:!0}],Type:[{value:this.element[15].value,disabled:!0}],Item:[{value:this.element[18].value,disabled:!0}],BillNumber:[{value:this.element[17].value,disabled:!0}],Lot:[{value:this.element[19].value,disabled:!0}],Srl:["",o.kI.required],Quantity:[""],Location:[""],Lot1:[""],Lot2:[""],Lot3:[""]})}ngOnDestroy(){this.serialSubscription&&this.serialSubscription.unsubscribe()}onNext(){this.serialPallet(!1)}onSubmit(){this.serialPallet(!0)}configureLotFields(e){const l=(e[5]?.value||"").trim(),i=(e[6]?.value||"").trim(),u=(e[7]?.value||"").trim();this.showLot1=!!l,this.showLot2=!!i,this.showLot3=!!u,this.form.patchValue({Lot1:l,Lot2:i,Lot3:u})}serialPallet(e){var l=this.form.value;this.flipped=this.element[20]?.value?.trim(),this.serialSubscription&&this.serialSubscription.unsubscribe(),this.serialSubscription=this.moveqSvc.mixedSerial(this.paramValue,this.user,this.element[11].value,l.Srl||"",(e||this.showQtyField)&&l.Quantity||"",(e||this.showLocationField)&&l.Location||"",this.didone,this.scanned,"",this.flipped,"").subscribe(O=>{const r=O?.[0]?.data||[],g=r[r.length-1]?.value?.trim()||"";if(!g)return;const c=g.toUpperCase();return c===this.qtyMsg.toUpperCase()?(this.showQtyField=!0,this.paramValue="QTYSCRN",this.quantity=r[8]?.value||"",void this.form.patchValue({Quantity:this.quantity})):c===this.qtylot1.toUpperCase()||c===this.qtylot2.toUpperCase()||c===this.qtylot3.toUpperCase()?(this.showQtyField=!0,this.paramValue="QTYSCRN",this.quantity=r[8]?.value||"",this.form.patchValue({Quantity:this.quantity}),void this.configureLotFields(r)):c===this.locationMsg.toUpperCase()?(this.showLocationField=!0,this.paramValue="CLOSE",void(this.didone=r[10]?.value||"")):c===this.verifyMsg.toUpperCase()?(r.outputSerial=this.element.outputSerial||"",r.inputSerial=this.element.inputSerial||"",r.flipped=this.flipped,void this.matDialog.open(N,{width:"1000px",maxHeight:"80vh",data:r,autoFocus:!1}).afterClosed().subscribe(Y=>{Y?.clearParent&&this.resetScreenState()})):void this.failureMessage(g)}),this.allFieldsEntered=!!this.form.get("Srl")?.value&&!!this.form.get("Quantity")?.value&&!!this.form.get("Location")?.value}clearEntryFields(){this.form.patchValue({Srl:"",Quantity:"",Location:""}),this.form.markAsPristine(),this.form.markAsUntouched()}resetScreenState(){this.showQtyField=!1,this.showLocationField=!1,this.allFieldsEntered=!1,this.paramValue="SRLSCRN",this.didone=" ",this.scanned=" ",this.showLot1=!1,this.showLot2=!1,this.showLot3=!1,this.form.patchValue({Srl:"",Quantity:"",Location:"",Lot1:"",Lot2:"",Lot3:""}),this.form.markAsPristine(),this.form.markAsUntouched()}successMessage(e){h().fire(e,"","success")}failureMessage(e){h().fire(e,"","error")}onBack(){this.router.navigateByUrl("/main-nav/scheduledMoves/read")}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(o.qu),t.Y36(b.F0),t.Y36(C.e),t.Y36(p.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-serial-pallet-scheduled-moves"]],standalone:!0,features:[t.jDz],decls:54,vars:10,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Transaction"],["matInput","","formControlName","From"],["matInput","","formControlName","Qty"],["matInput","","formControlName","To"],["matInput","","formControlName","Type"],["matInput","","formControlName","Item"],["matInput","","formControlName","BillNumber"],["matInput","","formControlName","Lot"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","Srl","required","","appUppercase",""],["appearance","outline","class","full-width",4,"ngIf"],["mat-raised-button","","class","buttons addButton",3,"disabled","click",4,"ngIf"],["matInput","","formControlName","Lot1",3,"disabled"],["matInput","","formControlName","Lot2",3,"disabled"],["matInput","","formControlName","Lot3",3,"disabled"],["matInput","","formControlName","Quantity","required","","appUppercase",""],["matInput","","formControlName","Location","required","","appUppercase",""],["align","start"],["mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(e,l){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return l.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before"),t.qZA()(),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7),t._UZ(12,"mat-label")(13,"input",8),t.qZA(),t.TgZ(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"From"),t.qZA(),t._UZ(17,"input",9),t.qZA(),t.TgZ(18,"mat-form-field",7)(19,"mat-label"),t._uU(20,"Quantity"),t.qZA(),t._UZ(21,"input",10),t.qZA(),t.TgZ(22,"mat-form-field",7)(23,"mat-label"),t._uU(24,"To"),t.qZA(),t._UZ(25,"input",11),t.qZA(),t.TgZ(26,"mat-form-field",7)(27,"mat-label"),t._uU(28,"Type"),t.qZA(),t._UZ(29,"input",12),t.qZA(),t.TgZ(30,"mat-form-field",7)(31,"mat-label"),t._uU(32,"Item"),t.qZA(),t._UZ(33,"input",13),t.qZA(),t.TgZ(34,"mat-form-field",7)(35,"mat-label"),t._uU(36),t.qZA(),t._UZ(37,"input",14),t.qZA(),t.TgZ(38,"mat-form-field",7)(39,"mat-label"),t._uU(40,"Lot"),t.qZA(),t._UZ(41,"input",15),t.qZA(),t.TgZ(42,"mat-form-field",16)(43,"mat-label"),t._uU(44,"Serial"),t.qZA(),t._UZ(45,"input",17),t.qZA(),t.YNc(46,w,4,1,"mat-form-field",18),t.YNc(47,q,4,1,"mat-form-field",18),t.YNc(48,T,4,1,"mat-form-field",18),t.YNc(49,A,4,0,"mat-form-field",18),t.YNc(50,_,6,0,"mat-form-field",18),t._UZ(51,"br"),t.YNc(52,I,2,1,"button",19),t.YNc(53,R,2,1,"button",19),t.qZA()()()()()),2&e&&(t.xp6(6),t.hij(" ",l.title," "),t.xp6(2),t.Q6J("formGroup",l.form),t.xp6(28),t.Oqu(l.billName),t.xp6(10),t.Q6J("ngIf",l.showLot1),t.xp6(1),t.Q6J("ngIf",l.showLot2),t.xp6(1),t.Q6J("ngIf",l.showLot3),t.xp6(1),t.Q6J("ngIf",l.showQtyField),t.xp6(1),t.Q6J("ngIf",l.showLocationField),t.xp6(2),t.Q6J("ngIf",!l.showLocationField),t.xp6(1),t.Q6J("ngIf",l.showLocationField))},dependencies:[S.m,F.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,Z.Hw,L.lW,f.KE,f.bx,f.hX,U.Nt,m.a8,m.dk,m.dn,m.n5,P.e]}),a})()}}]);