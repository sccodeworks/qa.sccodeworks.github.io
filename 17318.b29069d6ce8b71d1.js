"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[17318],{81001:(P,U,i)=>{i.d(U,{z:()=>M});var c=i(24006),g=i(65412),S=i(70879),_=i(35226),C=i.n(_),e=i(94650),N=i(72122),E=i(19132),t=i(36895),v=i(97392),O=i(4859),Z=i(59549),k=i(44144),b=i(73546);function A(D,T){if(1&D){const o=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(o);const l=e.oxw();return e.KtG(l.skipAssign())}),e._uU(1," Skip "),e.qZA()}}let M=(()=>{class D{constructor(o,n,l,d,h){this.anyvariable=o,this.dialogRef=n,this.dockSchedulerService=l,this.fb=d,this.router=h,this.user=localStorage.getItem("userName"),this.show=!1,this.updateMsg="Timeslot Updated Successfully",this.dockSchedulerUrl="/main-nav/WorkWithDockScheduler/read"}ngOnInit(){const o=this.anyvariable&&!0===this.anyvariable.shouldHideBackButton;this.appointmentNumber=o?this.anyvariable.apptNumber:this.anyvariable.DSAPPT||0,this.show=o;const n=this.formatCompressedDateTime(this.anyvariable.DSRQDT);let l="",d="";this.anyvariable.DSAPDT&&(l=this.formatCompressedDate(this.anyvariable.DSAPDT),d=this.formatCompressedTime(this.anyvariable.DSAPDT)),this.form=this.fb.group({appointmentNumber:[{value:this.appointmentNumber,disabled:!0}],buildingNumber:[{value:this.anyvariable.DSBLDG,disabled:!0}],inOut:[{value:this.anyvariable.DSINOU,disabled:!0}],appointmentType:[{value:this.anyvariable.DSATYP,disabled:!0}],loadType:[{value:this.anyvariable.DSLTYP,disabled:!0}],scacCode:[{value:this.anyvariable.DSSCAC,disabled:!0}],trailerRailCarNumber:[{value:this.anyvariable.DSTRAL,disabled:!0}],contact:[{value:this.anyvariable.DSCONT,disabled:!0}],contactPhone:[{value:this.anyvariable.DSCNPH,disabled:!0}],email:[{value:this.anyvariable.DSCNEM,disabled:!0}],requestedDateTime:[{value:n,disabled:!0}],expectedDuration:[{value:this.formatDuration(this.anyvariable.DSDURN),disabled:!0}],givenDate:[l,c.kI.required],givenTime:[d,c.kI.required],expectedDoor:this.anyvariable.DSDOOR||this.anyvariable.DSLOCN})}ngOnDestroy(){this.assignTimeDockSubscription&&this.assignTimeDockSubscription.unsubscribe()}formatDateToMMDDYY(o){if(!o)return 0;const n=new Date(o);if(isNaN(n.getTime()))return 0;const l=String(n.getMonth()+1).padStart(2,"0"),d=String(n.getDate()).padStart(2,"0"),h=String(n.getFullYear()).slice(2);return Number(`${l}${d}${h}`)}convertTimeToNumber(o){if(!o)return 0;const[n,l]=o.split(":").map(d=>d.padStart(2,"0"));return Number(`${n}${l}`)}assignTimeSlot(){const o=this.form.getRawValue(),n=this.formatDateToMMDDYY(o.givenDate),l=this.convertTimeToNumber(o.givenTime);this.assignTimeDockSubscription&&this.assignTimeDockSubscription.unsubscribe(),this.assignTimeDockSubscription=this.dockSchedulerService.updateTimeLoc(o.appointmentNumber,n,l,o.expectedDoor,"").subscribe(d=>{const h=d[0]?.data?.length,f=h?d[0]?.data[h-1]?.value:void 0;f?.toUpperCase()===this.updateMsg.toUpperCase()?(this.successMessage(f),this.closeDialog(),this.router.navigateByUrl(this.dockSchedulerUrl)):this.failureMessage(f)})}skipAssign(){this.closeDialog(),setTimeout(()=>{this.router.navigateByUrl(this.dockSchedulerUrl)},0)}formatCompressedDate(o){return o?o.split("-").slice(0,3).join("-"):""}formatCompressedTime(o){if(!o)return"";const n=o.split("-");if(n.length<4)return"";const[l,d]=n[3].split(".");return`${l}:${d}`}formatCompressedDateTime(o){if(!o)return"";const[n,l,d,h]=o.split("-");if(!h)return"";const[f,y]=h.split(".");return`${l}/${d}/${n.slice(2)} ${f}:${y}`}formatDuration(o){const n=Number(o);return Number.isFinite(n)?n.toFixed(2):""}successMessage(o){C().fire(o,"","success")}failureMessage(o){C().fire(o,"","error")}closeDialog(){this.dialogRef.close()}}return D.\u0275fac=function(o){return new(o||D)(e.Y36(g.WI),e.Y36(g.so),e.Y36(N.A),e.Y36(c.qu),e.Y36(E.F0))},D.\u0275cmp=e.Xpm({type:D,selectors:[["app-loc-work-with-dock-scheduler"]],standalone:!0,features:[e.jDz],decls:81,vars:3,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","appointmentNumber"],["matInput","","formControlName","buildingNumber"],["matInput","","formControlName","inOut"],["matInput","","formControlName","appointmentType"],["matInput","","formControlName","loadType",2,"text-transform","uppercase"],["matInput","","formControlName","scacCode",2,"text-transform","uppercase"],["matInput","","formControlName","trailerRailCarNumber",2,"text-transform","uppercase"],["matInput","","formControlName","contact",2,"text-transform","uppercase"],["matInput","","formControlName","contactPhone"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","email"],["matInput","","formControlName","requestedDateTime"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","type","date","formControlName","givenDate","required",""],["matInput","","type","time","formControlName","givenTime","required",""],["matInput","","formControlName","expectedDuration"],["matInput","","formControlName","expectedDoor"],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"],["mat-raised-button","","class","buttons addButton new-tally-form-btn","type","submit",3,"click",4,"ngIf"],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(o,n){if(1&o&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),e._uU(4,"Assign Appointment Time Slot "),e.qZA()(),e.TgZ(5,"button",2),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(6,"mat-icon",3),e._uU(7,"close"),e.qZA()()(),e.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"Appointment Number"),e.qZA(),e._UZ(15,"input",9),e.qZA(),e.TgZ(16,"mat-form-field",8)(17,"mat-label"),e._uU(18,"Building"),e.qZA(),e._UZ(19,"input",10),e.qZA(),e.TgZ(20,"mat-form-field",8)(21,"mat-label"),e._uU(22,"In/Out"),e.qZA(),e._UZ(23,"input",11),e.qZA(),e.TgZ(24,"mat-form-field",8)(25,"mat-label"),e._uU(26,"Appointment Type"),e.qZA(),e._UZ(27,"input",12),e.qZA(),e.TgZ(28,"mat-form-field",8)(29,"mat-label"),e._uU(30,"Load Type"),e.qZA(),e._UZ(31,"input",13),e.qZA(),e.TgZ(32,"mat-form-field",8)(33,"mat-label"),e._uU(34,"SCAC Code"),e.qZA(),e._UZ(35,"input",14),e.qZA(),e.TgZ(36,"mat-form-field",8)(37,"mat-label"),e._uU(38,"Trailer#"),e.qZA(),e._UZ(39,"input",15),e.qZA(),e.TgZ(40,"mat-form-field",8)(41,"mat-label"),e._uU(42,"Contact"),e.qZA(),e._UZ(43,"input",16),e.qZA(),e.TgZ(44,"mat-form-field",8)(45,"mat-label"),e._uU(46,"Contact Phone#"),e.qZA(),e._UZ(47,"input",17),e.qZA(),e.TgZ(48,"mat-form-field",18)(49,"mat-label"),e._uU(50,"Email"),e.qZA(),e._UZ(51,"input",19),e.qZA(),e.TgZ(52,"mat-form-field",18)(53,"mat-label"),e._uU(54,"Requested"),e.qZA(),e._UZ(55,"input",20),e.qZA(),e._UZ(56,"br"),e.TgZ(57,"div",21)(58,"label",22),e._uU(59,"Given"),e.qZA(),e.TgZ(60,"div",23)(61,"mat-form-field",8)(62,"mat-label"),e._uU(63,"Date"),e.qZA(),e._UZ(64,"input",24),e.qZA(),e.TgZ(65,"mat-form-field",8)(66,"mat-label"),e._uU(67," Time"),e.qZA(),e._UZ(68,"input",25),e.qZA(),e._UZ(69,"br"),e.qZA()(),e.TgZ(70,"mat-form-field",8)(71,"mat-label"),e._uU(72,"Duration"),e.qZA(),e._UZ(73,"input",26),e.qZA(),e.TgZ(74,"mat-form-field",8)(75,"mat-label"),e._uU(76,"Expected Door"),e.qZA(),e._UZ(77,"input",27),e.qZA()()(),e.TgZ(78,"button",28),e.NdJ("click",function(){return n.assignTimeSlot()}),e._uU(79," Add "),e.qZA(),e.YNc(80,A,2,0,"button",29),e.qZA()()()),2&o){let l;e.xp6(9),e.Q6J("formGroup",n.form),e.xp6(69),e.Q6J("disabled",!(null!=(l=n.form.get("givenDate"))&&l.value&&null!=(l=n.form.get("givenTime"))&&l.value)),e.xp6(2),e.Q6J("ngIf",n.show)}},dependencies:[S.m,t.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,v.Hw,O.lW,Z.KE,Z.hX,k.Nt,b.a8,b.dk,b.dn,b.n5]}),D})()},17318:(P,U,i)=>{i.d(U,{s:()=>J});var c=i(24006),g=i(65412),S=i(98739),_=i(7155),C=i(35226),e=i.n(C),N=i(70879),E=i(81001),t=i(94650),v=i(19132),O=i(72122),Z=i(36895),k=i(97392),b=i(4859),A=i(59549),M=i(44144),D=i(84385),T=i(3238),o=i(73546),n=i(34894);function l(r,u){1&r&&(t.TgZ(0,"th",39),t._uU(1,"Account"),t.qZA())}function d(r,u){if(1&r&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&r){const a=u.$implicit;t.xp6(1),t.Oqu(a.D1ACCT)}}function h(r,u){1&r&&(t.TgZ(0,"th",39),t._uU(1,"Document Number"),t.qZA())}function f(r,u){if(1&r&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&r){const a=u.$implicit;t.xp6(1),t.Oqu(a.D1DOCN)}}function y(r,u){1&r&&(t.TgZ(0,"th",39),t._uU(1,"Reference Number"),t.qZA())}function I(r,u){if(1&r&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&r){const a=u.$implicit;t.xp6(1),t.Oqu(a.D1REFN)}}function R(r,u){1&r&&(t.TgZ(0,"th",39),t._uU(1,"PO Number"),t.qZA())}function B(r,u){if(1&r&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&r){const a=u.$implicit;t.xp6(1),t.Oqu(a.D1PO)}}function w(r,u){1&r&&(t.TgZ(0,"th",39),t._uU(1,"Status"),t.qZA())}function q(r,u){if(1&r&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&r){const a=u.$implicit;t.xp6(1),t.Oqu(a.D1STAT)}}function L(r,u){1&r&&t._UZ(0,"tr",41)}function x(r,u){1&r&&t._UZ(0,"tr",42)}function K(r,u){if(1&r){const a=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(a);const m=t.oxw();return t.KtG(m.getDockScheduler())}),t._uU(1," Skip "),t.qZA()}}function Y(r,u){if(1&r){const a=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(a);const m=t.oxw();return t.KtG(m.navigateToTransportForm())}),t._uU(1," Transport "),t.qZA()}}let J=(()=>{class r{constructor(a,s,m,p,W,F,Q){this.anyvariable=a,this.router=s,this.dialogRef=m,this.fb=p,this.route=W,this.matDialog=F,this.WorkWithDockSchedulerService=Q,this.TransportUrl="/main-nav/dock-scheduler/transport/read",this.user=localStorage.getItem("userName")||"",this.dataSource=new _.by,this.duplicateSource=[],this.editedRows=[],this.show=!1,this.displayedColumns=["Account","DocumentNumber","ReferenceNumber","PONumber","Status"],this.pageSize=8,this.totalRecords=0,this.pageNumber=1,this.dockUrl="/main-nav/DockschedulerDetails/read",this.createMsg="Dock Scheduler Details Created"}ngOnInit(){const a=this.anyvariable&&!0===this.anyvariable.shouldHideBackButton;console.log(this.anyvariable),this.appointmentNumber=a?this.anyvariable.apptNumber:this.anyvariable[1].DSAPPT,this.show=this.appointmentNumber===this.anyvariable?.apptNumber,this.form=this.fb.group({apptNumber:[{value:this.appointmentNumber,disabled:!0}],documentNumber:["",[c.kI.pattern("^[0-9]{0,9}$")]],documentType:"",account:"",referenceNo:"",proNumber:"",po:""}),setTimeout(()=>{this.getDetailsCreate(this.pageSize,this.pageNumber)},0)}ngOnDestroy(){this.createDetailsSubscription&&this.createDetailsSubscription.unsubscribe()}getDetailsCreate(a,s){this.createDetailsSubscription&&this.createDetailsSubscription.unsubscribe(),this.createDetailsSubscription=this.WorkWithDockSchedulerService.getWDockSchedulerDetails(this.user,this.appointmentNumber,a,s).subscribe(m=>{var p=JSON.parse(m[0].data[1]?.value);this.dataSource.data=p.returnedData,this.totalRecords=p.TotalRecords})}createDetails(){const a=this.form.value;this.WorkWithDockSchedulerService.WDockSchedulerDetailsCreate(this.appointmentNumber,0,a.documentNumber,a.documentType,a.account,a.referenceNo,a.proNumber,a.po).subscribe(s=>{const p=s[0].data[s[0].data.length-1].value;p.toUpperCase()===this.createMsg.toUpperCase()?this.appointmentNumber===this.anyvariable?.apptNumber?(this.successMessage(p),this.getDockScheduler()):(this.successMessage(p),this.closeDialog(),this.router.navigateByUrl(this.dockUrl,{state:this.anyvariable[1]})):this.failureMessage(p)})}getDockScheduler(){this.createDetailsSubscription&&this.createDetailsSubscription.unsubscribe(),this.createDetailsSubscription=this.WorkWithDockSchedulerService.getWDockScheduler(this.user,this.appointmentNumber,"","","","","","","","","","","","","","",0,"",8,1).subscribe(a=>{var s=JSON.parse(a[0].data[1]?.value);this.dataSource.data=s.returnedData,this.nextScreen(this.dataSource.data[0])})}nextScreen(a){a.shouldHideBackButton=!0,a.apptNumber=this.appointmentNumber,this.dialogRef.close(),this.matDialog.open(E.z,{width:"1000px",maxHeight:"80vh",data:a,autoFocus:!1})}navigateToTransportForm(){const a={formData:this.form.value,dockData:this.anyvariable};console.log("Navigating to Transport Form with:",a),this.dialogRef&&this.dialogRef.close(),this.router.navigateByUrl("/main-nav/dock-scheduler/transport/read",{state:a})}successMessage(a){e().fire(a,"","success")}failureMessage(a){e().fire(a,"","error")}closeDialog(){this.dialogRef.close()}}return r.\u0275fac=function(a){return new(a||r)(t.Y36(g.WI),t.Y36(v.F0),t.Y36(g.so),t.Y36(c.qu),t.Y36(v.gz),t.Y36(g.uw),t.Y36(O.A))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-ww-dock-scheduler-details-create"]],viewQuery:function(a,s){if(1&a&&t.Gf(S.NW,5),2&a){let m;t.iGM(m=t.CRH())&&(s.paginator=m.first)}},standalone:!0,features:[t.jDz],decls:80,vars:7,consts:[[1,"over-Flow"],[1,"main-header-title"],[1,"button"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","apptNumber","readonly",""],[1,"Table-Flow"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Account"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","DocumentNumber"],["matColumnDef","ReferenceNumber"],["matColumnDef","PONumber"],["matColumnDef","Status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matInput","","formControlName","documentNumber","maxlength","9"],["formControlName","documentType"],["value",""],["value","L"],["value","I"],["value","O"],["value","B"],["value","T"],["value","M"],["matInput","","formControlName","account","maxlength","10","appUppercase",""],["appearance","outline",1,"full-width2"],["matInput","","formControlName","referenceNo","maxlength","30","appUppercase",""],["matInput","","formControlName","proNumber","maxlength","30","appUppercase",""],["matInput","","formControlName","po","maxlength","30","appUppercase",""],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"],["mat-raised-button","","class","buttons addButton new-tally-form-btn","type","submit",3,"click",4,"ngIf"],["mat-raised-button","","class","buttons addButton new-tally-form-btn","type","button",3,"click",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"click"],["mat-raised-button","","type","button",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(a,s){if(1&a&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Dock Scheduler Details"),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return s.closeDialog()}),t.TgZ(7,"mat-icon",4),t._uU(8,"close"),t.qZA()()()(),t.TgZ(9,"mat-card-content",5)(10,"form",6)(11,"div",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label"),t._uU(15," Appointment Number "),t.qZA(),t._UZ(16,"input",10),t.qZA()()(),t.TgZ(17,"div",11)(18,"table",12),t.ynx(19,13),t.YNc(20,l,2,0,"th",14),t.YNc(21,d,2,1,"td",15),t.BQk(),t.ynx(22,16),t.YNc(23,h,2,0,"th",14),t.YNc(24,f,2,1,"td",15),t.BQk(),t.ynx(25,17),t.YNc(26,y,2,0,"th",14),t.YNc(27,I,2,1,"td",15),t.BQk(),t.ynx(28,18),t.YNc(29,R,2,0,"th",14),t.YNc(30,B,2,1,"td",15),t.BQk(),t.ynx(31,19),t.YNc(32,w,2,0,"th",14),t.YNc(33,q,2,1,"td",15),t.BQk(),t.YNc(34,L,1,0,"tr",20),t.YNc(35,x,1,0,"tr",21),t.qZA()(),t.TgZ(36,"div",7)(37,"div",8)(38,"mat-form-field",9)(39,"mat-label"),t._uU(40,"Document Number"),t.qZA(),t._UZ(41,"input",22),t.qZA(),t.TgZ(42,"mat-form-field",9)(43,"mat-label"),t._uU(44,"Type"),t.qZA(),t.TgZ(45,"mat-select",23)(46,"mat-option",24),t._uU(47,"-- Select --"),t.qZA(),t.TgZ(48,"mat-option",25),t._uU(49,"L = Load"),t.qZA(),t.TgZ(50,"mat-option",26),t._uU(51,"I = Inbound tally"),t.qZA(),t.TgZ(52,"mat-option",27),t._uU(53,"O = Outbound bill"),t.qZA(),t.TgZ(54,"mat-option",28),t._uU(55,"B = Batch"),t.qZA(),t.TgZ(56,"mat-option",29),t._uU(57,"T = Transport"),t.qZA(),t.TgZ(58,"mat-option",30),t._uU(59,"M"),t.qZA()()(),t.TgZ(60,"mat-form-field",9)(61,"mat-label"),t._uU(62,"Account"),t.qZA(),t._UZ(63,"input",31),t.qZA(),t.TgZ(64,"mat-form-field",32)(65,"mat-label"),t._uU(66,"Reference Number"),t.qZA(),t._UZ(67,"input",33),t.qZA(),t.TgZ(68,"mat-form-field",32)(69,"mat-label"),t._uU(70,"PRO Number"),t.qZA(),t._UZ(71,"input",34),t.qZA(),t.TgZ(72,"mat-form-field",32)(73,"mat-label"),t._uU(74,"Purchase Order number"),t.qZA(),t._UZ(75,"input",35),t.qZA()()(),t.TgZ(76,"button",36),t.NdJ("click",function(){return s.createDetails()}),t._uU(77," Add "),t.qZA(),t.YNc(78,K,2,0,"button",37),t.YNc(79,Y,2,0,"button",38),t.qZA()()()),2&a){let m,p;t.xp6(10),t.Q6J("formGroup",s.form),t.xp6(8),t.Q6J("dataSource",s.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(41),t.Q6J("disabled",!s.form.valid||"T"===(null==(m=s.form.get("documentType"))?null:m.value)),t.xp6(2),t.Q6J("ngIf",s.show),t.xp6(1),t.Q6J("ngIf","T"===(null==(p=s.form.get("documentType"))?null:p.value))}},dependencies:[N.m,Z.O5,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.sg,c.u,k.Hw,b.lW,A.KE,A.hX,M.Nt,D.gD,T.ey,o.a8,o.dk,o.dn,o.n5,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,n.e],styles:[".Table-Flow[_ngcontent-%COMP%]{padding-bottom:50px}"]}),r})()}}]);