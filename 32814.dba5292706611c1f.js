"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[32814,34894,26628,70096,49741],{34894:(Z,T,i)=>{i.d(T,{e:()=>D});var l=i(94650),c=i(24006);let D=(()=>{class d{constructor(n,h){this.el=n,this.control=h}onInputChange(n){const h=this.el.nativeElement,t=h.value.toUpperCase();h.value=t,this.control&&this.control.control&&this.control.control.setValue(t,{emitEvent:!1})}}return d.\u0275fac=function(n){return new(n||d)(l.Y36(l.SBq),l.Y36(c.a5))},d.\u0275dir=l.lG2({type:d,selectors:[["","appUppercase",""]],hostBindings:function(n,h){1&n&&l.NdJ("input",function(I){return h.onInputChange(I)})},standalone:!0}),d})()},39505:(Z,T,i)=>{i.d(T,{L:()=>v});var l=i(24006),c=i(59549),D=i(69751),d=i(68675),C=i(54004),n=i(94650),h=i(36895),t=i(47957),I=i(3238),A=i(44144);function E(m,g){if(1&m&&(n.TgZ(0,"mat-option",4),n._uU(1),n.qZA()),2&m){const o=g.$implicit;n.Q6J("value",o),n.xp6(1),n.Oqu(o)}}let v=(()=>{class m{constructor(o){this.fb=o,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=p=>{},this.onChange=p=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new D.y,this.filteredOptions=this.control.valueChanges.pipe((0,d.O)(this.value),(0,C.U)(p=>this._filter(p)))}setDescribedByIds(o){}onContainerClick(o){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(o){null!=o&&(this.control.setValue(o),this.value=o)}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o}_filter(o){if(null==o||0==o.length)return this.options;const p=o.toLowerCase(),_=this.options.filter(M=>M.toLowerCase().includes(p));return!this.disabled&&1===_.length&&this.control.value!=_[0]&&o.length>=(this.previousValue?.length??0)&&this.control.setValue(_[0]),this.onChange(this.control.value),this.previousValue=this.control.value,_}}return m.\u0275fac=function(o){return new(o||m)(n.Y36(l.qu))},m.\u0275cmp=n.Xpm({type:m,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(o,p){2&o&&n.uIk("aria-describedby",p.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[n._Bn([{provide:l.JU,multi:!0,useExisting:m},{provide:c.Eo,useExisting:m}],[{provide:l.gN,useExisting:l.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,p){if(1&o&&(n.TgZ(0,"mat-form-field",0)(1,"mat-label"),n._uU(2),n.qZA(),n._UZ(3,"input",1),n.TgZ(4,"mat-autocomplete",null,2),n.YNc(6,E,2,2,"mat-option",3),n.ALo(7,"async"),n.qZA()()),2&o){const _=n.MAs(5);n.Q6J("appearance",p.appearance),n.xp6(2),n.Oqu(p.label),n.xp6(1),n.Q6J("id",p.id)("placeholder",p.placeholder)("formControl",p.control)("matAutocomplete",_),n.xp6(3),n.Q6J("ngForOf",n.lcZ(7,7,p.filteredOptions))}},dependencies:[h.sg,l.Fj,l.JJ,l.oH,t.XC,t.ZL,I.ey,c.KE,c.hX,A.Nt,h.Ov]}),m})()},32814:(Z,T,i)=>{i.r(T),i.d(T,{MetricsInqComponent:()=>F});var l=i(24006),c=i(7155),D=i(70879),d=i(77579),C=i(78372),n=i(71884),h=i(86385),t=i(94650),I=i(15627),A=i(19132),E=i(36895),v=i(98739),m=i(97392),g=i(4859),o=i(59549),p=i(44144),_=i(73546),M=i(34894),P=i(39505);const y=["paginator"];function S(s,u){1&s&&(t.TgZ(0,"th",44),t._uU(1,"Activity Description"),t.qZA())}function b(s,u){if(1&s&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&s){const e=u.$implicit;t.xp6(1),t.Oqu(e.WPDESC)}}function B(s,u){1&s&&(t.TgZ(0,"th",44),t._uU(1,"Base"),t.qZA())}function q(s,u){if(1&s&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&s){const e=u.$implicit;t.xp6(1),t.Oqu(e.PMBASE)}}function L(s,u){1&s&&(t.TgZ(0,"th",44),t._uU(1,"Base Units"),t.qZA())}function R(s,u){if(1&s&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&s){const e=u.$implicit;t.xp6(1),t.Oqu(e.WBASQT)}}function N(s,u){1&s&&(t.TgZ(0,"th",44),t._uU(1,"Standard"),t.qZA())}function W(s,u){if(1&s&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&s){const e=u.$implicit;t.xp6(1),t.Oqu(e.PMSTND)}}function K(s,u){1&s&&(t.TgZ(0,"th",44),t._uU(1,"Total"),t.qZA())}function x(s,u){if(1&s&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&s){const e=u.$implicit;t.xp6(1),t.Oqu(e.WEXTQT)}}function J(s,u){1&s&&t._UZ(0,"tr",46)}function Q(s,u){1&s&&t._UZ(0,"tr",47)}function Y(s,u){1&s&&(t.TgZ(0,"div",48),t._UZ(1,"img",49),t.TgZ(2,"h3",50),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",51),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}const H=function(){return[8,16,24]};let F=(()=>{class s{constructor(e,a,r){this.IheaderService=e,this.router=a,this.fb=r,this.user=localStorage.getItem("userName")||"",this.isLoading=!0,this.noData=!1,this.searchInput$=new d.x,this.allData=[],this.filteredData=[],this.pageData=[],this.isSearchMode=!1,this.dataSource=new c.by,this.taskOptions=[],this.processOption=["TALLY"],this.typeOptions=["P","A","R"],this.unitOptions=["MIN","HR","SEC"],this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.displayedColumns=["ActivityDescription","Base","BaseUnits","Standard","Total"],this.lines=0,this.tallysUrl="/main-nav/tallys/read",this.searchTextDisplay=!1}ngOnInit(){this.element=history.state,this.form=this.fb.group({tally:{value:this.element.IHTALY,disabled:!0},reference:{value:this.element.IHSTRF,disabled:!0},storer:{value:this.element.IHSTOR,disabled:!0},scheduled:{value:this.element.IHSCHA+"\xa0"+this.formatTime(this.element.IHSCHT),disabled:!0},carrier:{value:this.element.IHCARR,disabled:!0},actual:{value:this.element.IHACTA+"\xa0"+this.formatTime(this.element.IHACTT),disabled:!0},quantity:{value:this.element.IHTQTY,disabled:!0},weight:{value:parseFloat(this.element.IHTWGT).toFixed(2)||"0.00",disabled:!0},metric:["LABOR",l.kI.pattern(/^.{1,30}$/)],process:"",task:"",unit:"MIN",type:"P"}),this.fetchTasks(),this.searchInput$.pipe((0,C.b)(300),(0,n.x)()).subscribe(e=>{this.handleSearch(e)}),setTimeout(()=>{this.metricsInquiry(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()},0)}formatTime(e){const a=String(e).padStart(4,"0");return 4===a.length?a.slice(0,2)+":"+a.slice(2):a}createFilter(){return(e,a)=>{const r=JSON.parse(a);return Object.keys(r).every(f=>e[f].toString().toLowerCase().includes(r[f].toLowerCase()))}}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.dataSource.data=this.allData,void(this.noData=0===this.allData.length);this.isSearchMode=!0,0===this.allData.length&&(this.allData=[...this.dataSource.data]),this.filteredData=this.allData.filter(a=>Object.values(a).some(r=>String(r).toLowerCase().includes(e))),this.dataSource.data=this.filteredData,this.noData=0===this.filteredData.length}getMetricBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.metricsInquiry(this.pageSize,this.pageNumber)}resetSearch(){this.form.reset();const e=this.pageSize,a=this.pageNumber;this.currentFilters=null,this.paginator.firstPage(),this.metricsInquiry(e,a)}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode?this.loadPage(e.pageIndex+1):this.metricsInquiry(e.pageSize,e.pageIndex+1)}loadPage(e){const a=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(a,a+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}ngOnDestroy(){this.metricsInquirySubscription&&this.metricsInquirySubscription.unsubscribe()}fetchTasks(){this.IheaderService.process().subscribe(e=>{this.result=e;for(const a of this.result)this.taskOptions.push(a.PRTASK)})}onBack(){this.router.navigate([this.tallysUrl])}searchMetric(){this.searchTextDisplay=1!=this.searchTextDisplay}metricsInquiry(e,a){var r=this.form.value;this.isLoading=!0,this.noData=!1,this.metricsInquirySubscription&&this.metricsInquirySubscription.unsubscribe(),this.metricsInquirySubscription=this.IheaderService.MetricsInq(this.user,this.element.IHTALY,r.metric,r.process,r.task,r.unit,r.type,e,a).subscribe(f=>{this.isLoading=!1;var O=JSON.parse(f[0].data[1]?.value),U=O.returnedData;this.totalRecords=O.TotalRecords,this.lines=O.Lines,this.allData=[],this.filteredData=[],this.noData=0===U.length,this.dataSource.data=U,this.paginator&&(this.paginator.length=this.totalRecords)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(I.X),t.Y36(A.F0),t.Y36(l.qu))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-metrics-inq"]],viewQuery:function(e,a){if(1&e&&t.Gf(y,5),2&e){let r;t.iGM(r=t.CRH())&&(a.paginator=r.first)}},standalone:!0,features:[t.jDz],decls:88,vars:15,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","tally"],["matInput","","formControlName","reference"],["matInput","","formControlName","storer"],["matInput","","formControlName","scheduled"],["matInput","","disabled","",3,"value"],["matInput","","formControlName","carrier"],["matInput","","formControlName","actual"],["matInput","","formControlName","quantity"],["matInput","","formControlName","weight"],["matInput","","formControlName","metric","appUppercase",""],["formControlName","process","label","Process","appearance","outline",1,"full-width",3,"options"],["formControlName","task","label","Task","appearance","outline",1,"full-width2",3,"options"],["formControlName","unit","label","Unit","appearance","outline",1,"full-width2",3,"options"],["formControlName","type","label","P/A/R","appearance","outline",1,"full-width",3,"options"],[1,"footer"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","new-tally-form-btn"],["id","myTable","mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","ActivityDescription"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Base"],["matColumnDef","BaseUnits"],["matColumnDef","Standard"],["matColumnDef","Total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],[1,"table-summary"],[1,"form-info-message"],[1,"align-right"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return a.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Performance Metrics Inquiry - Tallys"),t.qZA(),t.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.TgZ(11,"input",6),t.NdJ("input",function(f){return a.applyGlobalFilterInput(f.target.value)}),t.qZA()()()(),t.TgZ(12,"mat-card-content",7)(13,"form",8),t.NdJ("ngSubmit",function(){return a.getMetricBySearch(a.form.value)}),t.TgZ(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Tally"),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.TgZ(20,"mat-form-field",11)(21,"mat-label"),t._uU(22,"Reference"),t.qZA(),t._UZ(23,"input",13),t.qZA(),t.TgZ(24,"mat-form-field",11)(25,"mat-label"),t._uU(26,"Storer"),t.qZA(),t._UZ(27,"input",14),t.qZA(),t.TgZ(28,"mat-form-field",11)(29,"mat-label"),t._uU(30,"Scheduled"),t.qZA(),t._UZ(31,"input",15),t.qZA(),t.TgZ(32,"mat-form-field",11)(33,"mat-label"),t._uU(34,"Lines"),t.qZA(),t._UZ(35,"input",16),t.qZA(),t.TgZ(36,"mat-form-field",11)(37,"mat-label"),t._uU(38,"Carrier"),t.qZA(),t._UZ(39,"input",17),t.qZA(),t.TgZ(40,"mat-form-field",11)(41,"mat-label"),t._uU(42,"Actual"),t.qZA(),t._UZ(43,"input",18),t.qZA(),t.TgZ(44,"mat-form-field",11)(45,"mat-label"),t._uU(46,"Quantity"),t.qZA(),t._UZ(47,"input",19),t.qZA(),t.TgZ(48,"mat-form-field",11)(49,"mat-label"),t._uU(50,"Weight"),t.qZA(),t._UZ(51,"input",20),t.qZA(),t.TgZ(52,"mat-form-field",11)(53,"mat-label"),t._uU(54,"Metric"),t.qZA(),t._UZ(55,"input",21),t.qZA(),t._UZ(56,"custom-input-autocomplete",22)(57,"custom-input-autocomplete",23)(58,"custom-input-autocomplete",24)(59,"custom-input-autocomplete",25),t.qZA()(),t.TgZ(60,"div",26)(61,"button",27),t._uU(62," Search "),t.qZA()()()(),t.TgZ(63,"table",28),t.ynx(64,29),t.YNc(65,S,2,0,"th",30),t.YNc(66,b,2,1,"td",31),t.BQk(),t.ynx(67,32),t.YNc(68,B,2,0,"th",30),t.YNc(69,q,2,1,"td",31),t.BQk(),t.ynx(70,33),t.YNc(71,L,2,0,"th",30),t.YNc(72,R,2,1,"td",31),t.BQk(),t.ynx(73,34),t.YNc(74,N,2,0,"th",30),t.YNc(75,W,2,1,"td",31),t.BQk(),t.ynx(76,35),t.YNc(77,K,2,0,"th",30),t.YNc(78,x,2,1,"td",31),t.BQk(),t.YNc(79,J,1,0,"tr",36),t.YNc(80,Q,1,0,"tr",37),t.qZA(),t.YNc(81,Y,6,0,"div",38),t.TgZ(82,"div",39)(83,"div",40)(84,"div",41),t._uU(85),t.qZA()()(),t.TgZ(86,"mat-paginator",42,43),t.NdJ("page",function(f){return a.onPaginateChange(f)}),t.qZA()()),2&e&&(t.xp6(13),t.Q6J("formGroup",a.form),t.xp6(22),t.s9C("value",a.lines),t.xp6(21),t.Q6J("options",a.processOption),t.xp6(1),t.Q6J("options",a.taskOptions),t.xp6(1),t.Q6J("options",a.unitOptions),t.xp6(1),t.Q6J("options",a.typeOptions),t.xp6(4),t.Q6J("dataSource",a.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",!a.isLoading&&a.noData),t.xp6(4),t.hij(" Total Lines : ",a.lines,""),t.xp6(1),t.Q6J("length",a.totalRecords)("pageSizeOptions",t.DdM(14,H))("pageSize",a.pageSize))},dependencies:[D.m,E.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,v.NW,m.Hw,g.lW,o.KE,o.hX,o.qo,p.Nt,_.a8,_.dk,_.dn,_.n5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,M.e,h.j,P.L]}),s})()}}]);