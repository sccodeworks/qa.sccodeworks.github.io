"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[34791,11790,38754,85645],{79979:(j,N,p)=>{p.d(N,{C:()=>A});var T=p(80529),m=p(61135),f=p(75625),Z=p(70262),o=p(62843),C=p(92340),g=p(94650);let A=(()=>{class c{constructor(s){this.httpClient=s,this.carrierDataSource=new m.X([]),this.url=C.N.API_BASE_URL,this.httpHeader={headers:new T.WM({"Content-Type":"application/json"})}}updatecarrierDataSource(s){let d=this.carrierDataSource.getValue();d.unshift(...s),this.carrierDataSource.next(d)}getCarrier(s,d,y){return this.httpClient.get(this.url+`/carriers/read?user=${s}&carrierCode=${d}&carrierName=${y}`)}getAllCarriers(s,d,y){return this.httpClient.get(this.url+`/carriers/readAll?user=${s}&pageNum=${d}&recordsPerPage=${y}`)}createCarrier(s,d,y,x,Y,w,U,F,b,v,q,_,S,I,O){return this.httpClient.post(this.url+"/carriers/create",{carrierCode:s,carrierName:d,carrierAdd1:y,carrierAdd2:x,zipcode:Y,suffix:w,carrierScacCode:U,hazardousMaterials:F,palletExchange:b,billFrequency:v,loadingAllowance:q,hundredWeight:_,minimumAmount:S,maximumAmount:I,user:O}).pipe((0,f.X)(1),(0,Z.K)(this.httpError))}updateCarrier(s,d,y,x,Y,w,U,F,b,v,q,_,S,I,O){return this.httpClient.put(this.url+"/carriers/update",{carrierCode:s,carrierName:d,carrierAdd1:y,carrierAdd2:x,zipcode:Y,suffix:w,carrierScacCode:U,hazardousMaterials:F,palletExchange:b,billFrequency:v,loadingAllowance:q,hundredWeight:_,minimumAmount:S,maximumAmount:I,user:O}).pipe((0,f.X)(1),(0,Z.K)(this.httpError))}getCarrierNames(){return this.httpClient.get(this.url+"/carriers/carrierName")}getCarrierCode(){return this.httpClient.get(this.url+"/carriers/carriercode")}httpError(s){let d="";return d=s.error instanceof ErrorEvent?s.error.message:`Error Code: ${s.status}\nMessage: ${s.message}`,console.log(d),(0,o._)(()=>new Error(d))}}return c.\u0275fac=function(s){return new(s||c)(g.LFG(T.eN))},c.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},11790:(j,N,p)=>{p.d(N,{y:()=>C});var T=p(65412),m=p(94650),f=p(97392),Z=p(4859);let o=(()=>{class g{constructor(c,t){this.dialogRef=c,this.data=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return g.\u0275fac=function(c){return new(c||g)(m.Y36(T.so),m.Y36(T.WI))},g.\u0275cmp=m.Xpm({type:g,selectors:[["app-alert-dialog"]],decls:16,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["aria-label","Close dialog",1,"close-btn",3,"click"],[1,"icon-wrapper"],["src","assets/svg/icons/Delete.svg","alt","Delete",1,"delete-svg-icon"],[1,"confirm-dialog-title"],[1,"confirmation-message"],[1,"footer","confirm-dialog"],["mat-raised-button","","id","no-button",1,"buttons","cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","id","yes-button",1,"buttons","removeButton","new-tally-form-btn",3,"mat-dialog-close"]],template:function(c,t){1&c&&(m.TgZ(0,"div",0)(1,"div",1)(2,"button",2),m.NdJ("click",function(){return t.closeDialog()}),m.TgZ(3,"mat-icon"),m._uU(4,"close"),m.qZA()(),m.TgZ(5,"div",3),m._UZ(6,"img",4),m.qZA(),m.TgZ(7,"h2",5),m._uU(8,"Confirmation"),m.qZA(),m.TgZ(9,"span",6),m._uU(10),m.qZA()(),m.TgZ(11,"div",7)(12,"button",8),m._uU(13,"Cancel"),m.qZA(),m.TgZ(14,"button",9),m._uU(15,"Delete"),m.qZA()()()),2&c&&(m.xp6(10),m.Oqu(t.data.message),m.xp6(2),m.Q6J("mat-dialog-close",!1),m.xp6(2),m.Q6J("mat-dialog-close",!0))},dependencies:[f.Hw,Z.lW,T.ZT]}),g})(),C=(()=>{class g{constructor(c){this.dialog=c}openCustomAlert(c){return this.dialog.open(o,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:c}})}}return g.\u0275fac=function(c){return new(c||g)(m.LFG(T.uw))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},34791:(j,N,p)=>{p.r(N),p.d(N,{RecurringAppointmentComponent:()=>ae});var T=p(70879),m=p(98739),f=p(7155),Z=p(48529),o=p(24006),C=p(65412),g=p(35226),A=p.n(g),c=p(86385),t=p(94650),s=p(19132),d=p(80529),y=p(75625),x=p(70262),Y=p(62843),w=p(92340);let U=(()=>{class n{constructor(e){this.httpClient=e,this.url=w.N.API_BASE_URL,this.httpHeader={headers:new d.WM({"Content-Type":"application/json"})}}getRecurringAppointments(e,r,i,u){return this.httpClient.get(this.url+"/recurringAppointment/read",{params:{user:e,scac:r??"",recordsPerPage:i??"",pageNo:u??""}})}createRecurringAppointment(e,r,i,u,l,R,D,M,k,E,P,B,W,J,L,Q,H,$,G,z,K){return this.httpClient.post(this.url+"/recurringAppointment/create",{user:e,building:r,inOut:i,scacCode:u,appointmentType:l,loadType:R,appointmentTime:D,startTime:M,stopTime:k,monday:E,tuesday:P,wednesday:B,thursday:W,friday:J,saturday:L,sunday:Q,expectedDuration:H,priority:$,contact:G,phone:z,email:K}).pipe((0,y.X)(1),(0,x.K)(this.httpError))}updateRecurringAppointment(e,r,i,u,l,R,D,M,k,E,P,B,W,J,L,Q,H,$,G,z,K,ie){return this.httpClient.put(this.url+"/recurringAppointment/update",{user:e,sequence:r,building:i,inOut:u,scacCode:l,appointmentType:R,loadType:D,appointmentTime:M,startTime:k,stopTime:E,monday:P,tuesday:B,wednesday:W,thursday:J,friday:L,saturday:Q,sunday:H,expectedDuration:$,priority:G,contact:z,phone:K,email:ie}).pipe((0,y.X)(1),(0,x.K)(this.httpError))}deleteRecurringAppointment(e,r){return this.httpClient.delete(this.url+`/recurringAppointment/delete?user=${e}&sequence=${r}`)}httpError(e){let r="";return r=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,(0,Y._)(()=>new Error(r))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var F=p(79979),b=p(36895),v=p(97392),q=p(4859),_=p(59549),S=p(44144),I=p(84385),O=p(3238),X=p(99602),h=p(73546);function tt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Day of the Week is required. "),t.qZA())}let et=(()=>{class n{constructor(e,r,i,u,l,R,D){this.anyvariable=e,this.router=r,this.route=i,this.fb=u,this.dialogRef=l,this.RecurringApptSvc=R,this.ICarSvc=D,this.user=localStorage.getItem("userName"),this.carrierOptions=[],this.readUrl="/main-nav/recurring-appt/read"}ngOnInit(){this.form=this.fb.group({building:["",[o.kI.required,o.kI.pattern(/^[A-Za-z0-9 ]*$/),o.kI.maxLength(3)]],inOut:["",o.kI.required],scacCode:["",o.kI.required],appointmentType:"",loadType:"",appointmentTime:["",o.kI.required],startRecurring:["",o.kI.required],stopRecurring:["",o.kI.required],monday:[""],tuesday:[""],wednesday:[""],thursday:[""],friday:[""],saturday:[""],sunday:[""],expectedDuration:["",o.kI.required],priority:[""],contact:["",o.kI.required],phone:["",o.kI.required],email:""},{validators:[n.atLeastOneDayValidator]}),this.fetchCarriers()}static atLeastOneDayValidator(e){return["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].some(u=>{const l=e.get(u)?.value;return l&&""!==l.trim()})?null:{atLeastOneDay:!0}}isOnlyDaysInvalid(){return!!this.form.errors?.atLeastOneDay&&["building","inOut","scacCode","appointmentTime","startRecurring","stopRecurring","expectedDuration","contact","phone"].every(i=>this.form.get(i)?.valid)}ngOnDestroy(){this.addRecurringApptSubscription&&this.addRecurringApptSubscription.unsubscribe()}fetchCarriers(){this.ICarSvc.getCarrierNames().subscribe(e=>{for(const r of e)this.carrierOptions.push(r.CRNAME)})}createRecurringAppt(){const e=this.form.value;this.addRecurringApptSubscription&&this.addRecurringApptSubscription.unsubscribe(),this.addRecurringApptSubscription=this.RecurringApptSvc.createRecurringAppointment(this.user??"",Z.R.fullBuilding(e.building),e.inOut,e.scacCode,e.appointmentType,e.loadType,e.appointmentTime.replace(":",""),e.startRecurring,e.stopRecurring,e.monday,e.tuesday,e.wednesday,e.thursday,e.friday,e.saturday,e.sunday,parseFloat(parseFloat(e.expectedDuration).toFixed(2)),e.priority,e.contact,e.phone,e.email).subscribe(r=>{const u=JSON.parse(r[0].data[r[0].data.length-1].value).returnedData.message;u.toUpperCase()===Z.R.createMsg.toUpperCase()?(this.successMessage(u),this.closeDialog(),this.router.navigate([this.readUrl])):this.failureMessage(u)})}closeDialog(){this.dialogRef.close()}successMessage(e){A().fire(e,"","success")}failureMessage(e){A().fire(e,"","error")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.WI),t.Y36(s.F0),t.Y36(s.gz),t.Y36(o.qu),t.Y36(C.so),t.Y36(U),t.Y36(F.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-recurring-appt"]],standalone:!0,features:[t.jDz],decls:129,vars:3,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","building"],["formControlName","inOut"],["value","I"],["value","O"],["matInput","","formControlName","scacCode",2,"text-transform","uppercase"],["formControlName","appointmentType"],["value","TR"],["value","PG"],["value","RC"],["value","DT"],["value","RT"],["value","SH"],["formControlName","loadType"],["value","S"],["value","F"],["value","C"],["value","P"],["value","K"],["matInput","","type","time","formControlName","appointmentTime","placeholder","HH:mm"],["invoiceDatePicker",""],["required","","type","date","matInput","","formControlName","startRecurring"],["required","","type","date","matInput","","formControlName","stopRecurring"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","monday",2,"text-transform","uppercase"],["matInput","","formControlName","tuesday",2,"text-transform","uppercase"],["matInput","","formControlName","wednesday",2,"text-transform","uppercase"],["matInput","","formControlName","thursday",2,"text-transform","uppercase"],["matInput","","formControlName","friday",2,"text-transform","uppercase"],["matInput","","formControlName","saturday",2,"text-transform","uppercase"],["matInput","","formControlName","sunday",2,"text-transform","uppercase"],[4,"ngIf"],["matInput","","formControlName","expectedDuration"],["matInput","","formControlName","priority",2,"text-transform","uppercase"],["matInput","","formControlName","contact"],["matInput","","formControlName","phone"],["matInput","","formControlName","email"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Recurring Appointment"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return r.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Building"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"In/Out"),t.qZA(),t.TgZ(19,"mat-select",10)(20,"mat-option",11),t._uU(21,"I=Inbound"),t.qZA(),t.TgZ(22,"mat-option",12),t._uU(23,"O=Outbound"),t.qZA()()(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Carrier Code"),t.qZA(),t._UZ(27,"input",13),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Appointment Type"),t.qZA(),t.TgZ(31,"mat-select",14)(32,"mat-option",15),t._uU(33,"TR = Trailer"),t.qZA(),t.TgZ(34,"mat-option",16),t._uU(35,"PG = Piggyback"),t.qZA(),t.TgZ(36,"mat-option",17),t._uU(37,"RC = Railcar"),t.qZA(),t.TgZ(38,"mat-option",18),t._uU(39,"DT = Drop trailer"),t.qZA(),t.TgZ(40,"mat-option",19),t._uU(41,"RT = Return"),t.qZA(),t.TgZ(42,"mat-option",20),t._uU(43,"SH = Shuttle"),t.qZA()()(),t.TgZ(44,"mat-form-field",8)(45,"mat-label"),t._uU(46,"Load Type"),t.qZA(),t.TgZ(47,"mat-select",21)(48,"mat-option",22),t._uU(49,"S = Slip Sheet"),t.qZA(),t.TgZ(50,"mat-option",23),t._uU(51,"F = Floor unloaded"),t.qZA(),t.TgZ(52,"mat-option",24),t._uU(53,"C = Clamp"),t.qZA(),t.TgZ(54,"mat-option",25),t._uU(55,"P = Pallet"),t.qZA(),t.TgZ(56,"mat-option",26),t._uU(57,"K = Sack"),t.qZA()()(),t.TgZ(58,"mat-form-field",8)(59,"mat-label"),t._uU(60,"Appointment Time "),t.qZA(),t._UZ(61,"input",27),t.qZA(),t.TgZ(62,"mat-form-field",8)(63,"mat-label"),t._uU(64,"Start Recurring"),t.qZA(),t._UZ(65,"mat-datepicker",null,28)(67,"input",29),t.qZA(),t.TgZ(68,"mat-form-field",8)(69,"mat-label"),t._uU(70,"Stop Recurring"),t.qZA(),t._UZ(71,"mat-datepicker",null,28)(73,"input",30),t.qZA(),t.TgZ(74,"div",31)(75,"label",32),t._uU(76,"Appointment Days"),t.qZA(),t.TgZ(77,"div",33)(78,"mat-form-field",8)(79,"mat-label"),t._uU(80,"Monday"),t.qZA(),t._UZ(81,"input",34),t.qZA(),t.TgZ(82,"mat-form-field",8)(83,"mat-label"),t._uU(84,"Tuesday"),t.qZA(),t._UZ(85,"input",35),t.qZA(),t.TgZ(86,"mat-form-field",8)(87,"mat-label"),t._uU(88,"Wednesday"),t.qZA(),t._UZ(89,"input",36),t.qZA(),t.TgZ(90,"mat-form-field",8)(91,"mat-label"),t._uU(92,"Thursday"),t.qZA(),t._UZ(93,"input",37),t.qZA(),t.TgZ(94,"mat-form-field",8)(95,"mat-label"),t._uU(96,"Friday"),t.qZA(),t._UZ(97,"input",38),t.qZA(),t.TgZ(98,"mat-form-field",8)(99,"mat-label"),t._uU(100,"Saturday"),t.qZA(),t._UZ(101,"input",39),t.qZA(),t.TgZ(102,"mat-form-field",8)(103,"mat-label"),t._uU(104,"Sunday"),t.qZA(),t._UZ(105,"input",40),t.qZA()(),t.YNc(106,tt,2,0,"mat-error",41),t.qZA(),t.TgZ(107,"mat-form-field",8)(108,"mat-label"),t._uU(109,"Expect Duration"),t.qZA(),t._UZ(110,"input",42),t.qZA(),t.TgZ(111,"mat-form-field",8)(112,"mat-label"),t._uU(113,"Priority"),t.qZA(),t._UZ(114,"input",43),t.qZA(),t.TgZ(115,"mat-form-field",8)(116,"mat-label"),t._uU(117,"Contact"),t.qZA(),t._UZ(118,"input",44),t.qZA(),t.TgZ(119,"mat-form-field",8)(120,"mat-label"),t._uU(121,"Phone"),t.qZA(),t._UZ(122,"input",45),t.qZA(),t.TgZ(123,"mat-form-field",8)(124,"mat-label"),t._uU(125,"Email"),t.qZA(),t._UZ(126,"input",46),t.qZA()()(),t.TgZ(127,"button",47),t.NdJ("click",function(){return r.createRecurringAppt()}),t._uU(128,"Create"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",r.form),t.xp6(97),t.Q6J("ngIf",r.isOnlyDaysInvalid()),t.xp6(21),t.Q6J("disabled",!r.form.valid))},dependencies:[T.m,b.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,v.Hw,q.lW,_.TO,_.KE,_.hX,S.Nt,I.gD,O.ey,X.Mq,h.a8,h.dk,h.dn,h.n5,c.j]}),n})();var nt=p(11790);let rt=(()=>{class n{constructor(e,r,i,u,l,R){this.anyvariable=e,this.fb=r,this.router=i,this.CustomAlertService=u,this.RecurringApptSvc=l,this.dialogRef=R,this.user=localStorage.getItem("userName"),this.readUrl="/main-nav/recurring-appt/read"}ngOnInit(){this.form=this.fb.group({building:this.anyvariable.DSBLDG,inOut:this.anyvariable.DSINOU,scacCode:this.anyvariable.DSSCAC,appointmentType:this.anyvariable.DSATYP,loadType:this.anyvariable.DSLTYP,appointmentTime:Z.R.formatFullTime(this.anyvariable.RAAPTM),startRecurring:this.anyvariable.WSTRT,stopRecurring:this.anyvariable.WSTOP,monday:this.anyvariable.WMON,tuesday:this.anyvariable.WTUE,wednesday:this.anyvariable.WWED,thursday:this.anyvariable.WTHU,friday:this.anyvariable.WFRI,saturday:this.anyvariable.WSAT,sunday:this.anyvariable.WSUN,expectedDuration:this.anyvariable.DSDURN,priority:this.anyvariable.DSPRTY,contact:this.anyvariable.DSCONT,phone:this.anyvariable.DSCNPH,email:this.anyvariable.DSCNEM}),this.form.disable()}ngOnDestroy(){this.deleteRecurringApptSubscription&&this.deleteRecurringApptSubscription.unsubscribe()}deleteRecurringAppt(){this.CustomAlertService.openCustomAlert("Are you sure you want to delete this Recurring Appointment?").afterClosed().subscribe(r=>{r&&(this.deleteRecurringApptSubscription&&this.deleteRecurringApptSubscription.unsubscribe(),this.deleteRecurringApptSubscription=this.RecurringApptSvc.deleteRecurringAppointment(this.user||"",this.anyvariable.RASEQN).subscribe(i=>{const l=JSON.parse(i[0].data[i[0].data.length-1].value).returnedData.message;l.toUpperCase()===Z.R.deleteMsg.toUpperCase()?(this.successMessage(l),this.closeDialog(),this.router.navigate([this.readUrl])):(this.failureMessage(l),this.router.navigate([this.readUrl]))}))})}successMessage(e){return A().fire(e,"","success")}failureMessage(e){return A().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.WI),t.Y36(o.qu),t.Y36(s.F0),t.Y36(nt.y),t.Y36(U),t.Y36(C.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-recurring-appt"]],standalone:!0,features:[t.jDz],decls:98,vars:1,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","building"],["matInput","","formControlName","inOut"],["matInput","","formControlName","scacCode"],["matInput","","formControlName","appointmentType"],["matInput","","formControlName","loadType"],["type","time","matInput","","formControlName","appointmentTime"],["matInput","","formControlName","startRecurring"],["matInput","","formControlName","stopRecurring"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","monday",2,"text-transform","uppercase"],["matInput","","formControlName","tuesday",2,"text-transform","uppercase"],["matInput","","formControlName","wednesday",2,"text-transform","uppercase"],["matInput","","formControlName","thursday",2,"text-transform","uppercase"],["matInput","","formControlName","friday",2,"text-transform","uppercase"],["matInput","","formControlName","saturday",2,"text-transform","uppercase"],["matInput","","formControlName","sunday",2,"text-transform","uppercase"],["matInput","","formControlName","expectedDuration"],["matInput","","formControlName","priority",2,"text-transform","uppercase"],["matInput","","formControlName","contact"],["matInput","","formControlName","phone"],["matInput","","formControlName","email"],["mat-button","",1,"buttons","removeButton",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Delete a Recurring Appointment"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return r.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Building"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"In/Out"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"SCAC Code"),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Appointment Type"),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Load Type"),t.qZA(),t._UZ(31,"input",13),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34,"Appointment Time"),t.qZA(),t._UZ(35,"input",14),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38,"Start Recurring"),t.qZA(),t._UZ(39,"input",15),t.qZA(),t.TgZ(40,"mat-form-field",8)(41,"mat-label"),t._uU(42,"Stop Recurring"),t.qZA(),t._UZ(43,"input",16),t.qZA(),t.TgZ(44,"div",17)(45,"label",18),t._uU(46,"Appointment Days"),t.qZA(),t.TgZ(47,"div",19)(48,"mat-form-field",8)(49,"mat-label"),t._uU(50,"Monday"),t.qZA(),t._UZ(51,"input",20),t.qZA(),t.TgZ(52,"mat-form-field",8)(53,"mat-label"),t._uU(54,"Tuesday"),t.qZA(),t._UZ(55,"input",21),t.qZA(),t.TgZ(56,"mat-form-field",8)(57,"mat-label"),t._uU(58,"Wednesday"),t.qZA(),t._UZ(59,"input",22),t.qZA(),t.TgZ(60,"mat-form-field",8)(61,"mat-label"),t._uU(62,"Thursday"),t.qZA(),t._UZ(63,"input",23),t.qZA(),t.TgZ(64,"mat-form-field",8)(65,"mat-label"),t._uU(66,"Friday"),t.qZA(),t._UZ(67,"input",24),t.qZA(),t.TgZ(68,"mat-form-field",8)(69,"mat-label"),t._uU(70,"Saturday"),t.qZA(),t._UZ(71,"input",25),t.qZA(),t.TgZ(72,"mat-form-field",8)(73,"mat-label"),t._uU(74,"Sunday"),t.qZA(),t._UZ(75,"input",26),t.qZA()()(),t.TgZ(76,"mat-form-field",8)(77,"mat-label"),t._uU(78,"Expect Duration"),t.qZA(),t._UZ(79,"input",27),t.qZA(),t.TgZ(80,"mat-form-field",8)(81,"mat-label"),t._uU(82,"Priority"),t.qZA(),t._UZ(83,"input",28),t.qZA(),t.TgZ(84,"mat-form-field",8)(85,"mat-label"),t._uU(86,"Contact"),t.qZA(),t._UZ(87,"input",29),t.qZA(),t.TgZ(88,"mat-form-field",8)(89,"mat-label"),t._uU(90,"Phone"),t.qZA(),t._UZ(91,"input",30),t.qZA(),t.TgZ(92,"mat-form-field",8)(93,"mat-label"),t._uU(94,"Email"),t.qZA(),t._UZ(95,"input",31),t.qZA()()(),t.TgZ(96,"button",32),t.NdJ("click",function(){return r.deleteRecurringAppt()}),t._uU(97,"Delete"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",r.form))},dependencies:[T.m,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,v.Hw,q.lW,_.KE,_.hX,S.Nt,h.a8,h.dk,h.dn,h.n5]}),n})();function at(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Day of the Week is required. "),t.qZA())}let it=(()=>{class n{constructor(e,r,i,u,l){this.anyvariable=e,this.router=r,this.fb=i,this.RecurringApptSvc=u,this.dialogRef=l,this.user=localStorage.getItem("userName"),this.readUrl="/main-nav/recurring-appt/read"}ngOnInit(){this.form=this.fb.group({building:[this.anyvariable.DSBLDG,[o.kI.required,o.kI.pattern(/^[A-Za-z0-9 ]*$/),o.kI.maxLength(3)]],inOut:[this.anyvariable.DSINOU,o.kI.required],scacCode:[this.anyvariable.DSSCAC,o.kI.required],appointmentType:[this.anyvariable.DSATYP],loadType:[this.anyvariable.DSLTYP],appointmentTime:[Z.R.formatFullTime(this.anyvariable.RAAPTM),o.kI.required],startRecurring:[this.formatDateForInput(this.anyvariable.WSTRT),o.kI.required],stopRecurring:[this.formatDateForInput(this.anyvariable.WSTOP),o.kI.required],monday:[this.anyvariable.WMON],tuesday:[this.anyvariable.WTUE],wednesday:[this.anyvariable.WWED],thursday:[this.anyvariable.WTHU],friday:[this.anyvariable.WFRI],saturday:[this.anyvariable.WSAT],sunday:[this.anyvariable.WSUN],expectedDuration:[this.anyvariable.DSDURN,o.kI.required],priority:this.anyvariable.DSPRTY,contact:[this.anyvariable.DSCONT,o.kI.required],phone:[this.anyvariable.DSCNPH,o.kI.required],email:this.anyvariable.DSCNEM},{validators:[n.atLeastOneDayValidator]})}static atLeastOneDayValidator(e){return["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].some(u=>{const l=e.get(u)?.value;return l&&""!==l.trim()})?null:{atLeastOneDay:!0}}isOnlyDaysInvalid(){return!!this.form.errors?.atLeastOneDay&&["building","inOut","scacCode","appointmentTime","startRecurring","stopRecurring","expectedDuration","contact","phone"].every(i=>this.form.get(i)?.valid)}formatDateForInput(e){if(!e)return"";const[r,i,u]=e.split("/");let l=u;return u&&2===u.length&&(l="20"+u),`${l}-${r.padStart(2,"0")}-${i.padStart(2,"0")}`}ngOnDestroy(){this.updateRecurringApptSubscription&&this.updateRecurringApptSubscription.unsubscribe()}updateRecurringAppt(){const e=this.form.value;this.updateRecurringApptSubscription&&this.updateRecurringApptSubscription.unsubscribe(),this.updateRecurringApptSubscription=this.RecurringApptSvc.updateRecurringAppointment(this.user??"",this.anyvariable.RASEQN,Z.R.fullBuilding(e.building),e.inOut,e.scacCode,e.appointmentType,e.loadType,Z.R.timeStringToNumber(e.appointmentTime).toString(),e.startRecurring,e.stopRecurring,e.monday,e.tuesday,e.wednesday,e.thursday,e.friday,e.saturday,e.sunday,parseFloat(parseFloat(e.expectedDuration).toFixed(2)),e.priority,e.contact,e.phone,e.email).subscribe(r=>{const u=JSON.parse(r[0].data[r[0].data.length-1].value).returnedData.message;u.toUpperCase()===Z.R.updateMsg.toUpperCase()?(this.successMessage(u),this.closeDialog(),this.router.navigate([this.readUrl])):this.failureMessage(u)})}closeDialog(){this.dialogRef.close()}successMessage(e){A().fire(e,"","success")}failureMessage(e){A().fire(e,"","error")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.WI),t.Y36(s.F0),t.Y36(o.qu),t.Y36(U),t.Y36(C.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-recurring-appt"]],standalone:!0,features:[t.jDz],decls:129,vars:3,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","building"],["formControlName","inOut"],["value","I"],["value","O"],["matInput","","formControlName","scacCode",2,"text-transform","uppercase"],["formControlName","appointmentType"],["value","TR"],["value","PG"],["value","RC"],["value","DT"],["value","RT"],["value","SH"],["formControlName","loadType"],["value","S"],["value","F"],["value","C"],["value","P"],["value","K"],["matInput","","type","time","formControlName","appointmentTime","placeholder","HH:mm"],["invoiceDatePicker",""],["required","","type","date","matInput","","formControlName","startRecurring"],["required","","type","date","matInput","","formControlName","stopRecurring"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","monday",2,"text-transform","uppercase"],["matInput","","formControlName","tuesday",2,"text-transform","uppercase"],["matInput","","formControlName","wednesday",2,"text-transform","uppercase"],["matInput","","formControlName","thursday",2,"text-transform","uppercase"],["matInput","","formControlName","friday",2,"text-transform","uppercase"],["matInput","","formControlName","saturday",2,"text-transform","uppercase"],["matInput","","formControlName","sunday",2,"text-transform","uppercase"],[4,"ngIf"],["matInput","","formControlName","expectedDuration"],["matInput","","formControlName","priority",2,"text-transform","uppercase"],["matInput","","formControlName","contact"],["matInput","","formControlName","phone"],["matInput","","formControlName","email"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,r){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Recurring Appointment"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return r.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Building"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"In/Out"),t.qZA(),t.TgZ(19,"mat-select",10)(20,"mat-option",11),t._uU(21,"I=Inbound"),t.qZA(),t.TgZ(22,"mat-option",12),t._uU(23,"O=Outbound"),t.qZA()()(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Carrier Code"),t.qZA(),t._UZ(27,"input",13),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Appointment Type"),t.qZA(),t.TgZ(31,"mat-select",14)(32,"mat-option",15),t._uU(33,"TR = Trailer"),t.qZA(),t.TgZ(34,"mat-option",16),t._uU(35,"PG = Piggyback"),t.qZA(),t.TgZ(36,"mat-option",17),t._uU(37,"RC = Railcar"),t.qZA(),t.TgZ(38,"mat-option",18),t._uU(39,"DT = Drop trailer"),t.qZA(),t.TgZ(40,"mat-option",19),t._uU(41,"RT = Return"),t.qZA(),t.TgZ(42,"mat-option",20),t._uU(43,"SH = Shuttle"),t.qZA()()(),t.TgZ(44,"mat-form-field",8)(45,"mat-label"),t._uU(46,"Load Type"),t.qZA(),t.TgZ(47,"mat-select",21)(48,"mat-option",22),t._uU(49,"S = Slip Sheet"),t.qZA(),t.TgZ(50,"mat-option",23),t._uU(51,"F = Floor unloaded"),t.qZA(),t.TgZ(52,"mat-option",24),t._uU(53,"C = Clamp"),t.qZA(),t.TgZ(54,"mat-option",25),t._uU(55,"P = Pallet"),t.qZA(),t.TgZ(56,"mat-option",26),t._uU(57,"K = Sack"),t.qZA()()(),t.TgZ(58,"mat-form-field",8)(59,"mat-label"),t._uU(60,"Appointment Time "),t.qZA(),t._UZ(61,"input",27),t.qZA(),t.TgZ(62,"mat-form-field",8)(63,"mat-label"),t._uU(64,"Start Recurring"),t.qZA(),t._UZ(65,"mat-datepicker",null,28)(67,"input",29),t.qZA(),t.TgZ(68,"mat-form-field",8)(69,"mat-label"),t._uU(70,"Stop Recurring"),t.qZA(),t._UZ(71,"mat-datepicker",null,28)(73,"input",30),t.qZA(),t.TgZ(74,"div",31)(75,"label",32),t._uU(76,"Appointment Days"),t.qZA(),t.TgZ(77,"div",33)(78,"mat-form-field",8)(79,"mat-label"),t._uU(80,"Monday"),t.qZA(),t._UZ(81,"input",34),t.qZA(),t.TgZ(82,"mat-form-field",8)(83,"mat-label"),t._uU(84,"Tuesday"),t.qZA(),t._UZ(85,"input",35),t.qZA(),t.TgZ(86,"mat-form-field",8)(87,"mat-label"),t._uU(88,"Wednesday"),t.qZA(),t._UZ(89,"input",36),t.qZA(),t.TgZ(90,"mat-form-field",8)(91,"mat-label"),t._uU(92,"Thursday"),t.qZA(),t._UZ(93,"input",37),t.qZA(),t.TgZ(94,"mat-form-field",8)(95,"mat-label"),t._uU(96,"Friday"),t.qZA(),t._UZ(97,"input",38),t.qZA(),t.TgZ(98,"mat-form-field",8)(99,"mat-label"),t._uU(100,"Saturday"),t.qZA(),t._UZ(101,"input",39),t.qZA(),t.TgZ(102,"mat-form-field",8)(103,"mat-label"),t._uU(104,"Sunday"),t.qZA(),t._UZ(105,"input",40),t.qZA()(),t.YNc(106,at,2,0,"mat-error",41),t.qZA(),t.TgZ(107,"mat-form-field",8)(108,"mat-label"),t._uU(109,"Expect Duration"),t.qZA(),t._UZ(110,"input",42),t.qZA(),t.TgZ(111,"mat-form-field",8)(112,"mat-label"),t._uU(113,"Priority"),t.qZA(),t._UZ(114,"input",43),t.qZA(),t.TgZ(115,"mat-form-field",8)(116,"mat-label"),t._uU(117,"Contact"),t.qZA(),t._UZ(118,"input",44),t.qZA(),t.TgZ(119,"mat-form-field",8)(120,"mat-label"),t._uU(121,"Phone"),t.qZA(),t._UZ(122,"input",45),t.qZA(),t.TgZ(123,"mat-form-field",8)(124,"mat-label"),t._uU(125,"Email"),t.qZA(),t._UZ(126,"input",46),t.qZA()()(),t.TgZ(127,"button",47),t.NdJ("click",function(){return r.updateRecurringAppt()}),t._uU(128,"Update"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",r.form),t.xp6(97),t.Q6J("ngIf",r.isOnlyDaysInvalid()),t.xp6(21),t.Q6J("disabled",!r.form.valid))},dependencies:[T.m,b.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,v.Hw,q.lW,_.TO,_.KE,_.hX,S.Nt,I.gD,O.ey,X.Mq,h.a8,h.dk,h.dn,h.n5,c.j]}),n})();var V=p(28255),ot=p(10266),ut=p(90455);function pt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.searchRecurringAppointments())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function mt(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",47)(2,"div",48)(3,"span",49),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(4,"mat-slide-toggle",50),t.NdJ("ngModelChange",function(i){const l=t.CHM(e).$implicit;return t.KtG(l.isActive=i)})("change",function(){const u=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.toggleColumn(u))}),t._uU(5),t.qZA()()()(),t.BQk()}if(2&n){const e=a.$implicit;t.xp6(4),t.Q6J("ngModel",e.isActive),t.xp6(1),t.hij(" ",e.name," ")}}function lt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.searchRecurringAppointments())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function st(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",52),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getBySearch(i.form.value))}),t.TgZ(1,"div",47)(2,"div",53)(3,"mat-form-field",54)(4,"mat-label"),t._uU(5,"SCAC"),t.qZA(),t._UZ(6,"input",55),t.qZA()()(),t.TgZ(7,"button",56),t._uU(8," Search "),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.form)}}function ct(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"SCAC"),t.qZA())}function dt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.DSSCAC)}}function gt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Building"),t.qZA())}function ft(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.DSBLDG)}}function ht(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"In/Out"),t.qZA())}function At(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.DSINOU)}}function Zt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Appointment Type"),t.qZA())}function _t(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.DSATYP)}}function Tt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Load Type"),t.qZA())}function Ct(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.DSLTYP)}}function yt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Appointment Time"),t.qZA())}function Rt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit,r=t.oxw();t.xp6(1),t.hij(" ",r.Global.formatFullTime(e.RAAPTM)," ")}}function bt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Expected Duration"),t.qZA())}function Ut(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.DSDURN,"1.2-2"))}}function vt(n,a){if(1&n&&(t.TgZ(0,"th",59),t._uU(1,"Appointment Days"),t.qZA()),2&n){const e=t.oxw();t.uIk("colspan",e.visibleDayCount)}}function qt(n,a){1&n&&(t.TgZ(0,"th",59),t._uU(1,"Mon"),t.qZA())}function St(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WMON)}}function Dt(n,a){1&n&&(t.TgZ(0,"th",59),t._uU(1,"Tue"),t.qZA())}function Nt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WTUE)}}function xt(n,a){1&n&&(t.TgZ(0,"th",59),t._uU(1,"Wed"),t.qZA())}function It(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WWED)}}function Ot(n,a){1&n&&(t.TgZ(0,"th",59),t._uU(1,"Thu"),t.qZA())}function Yt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WTHU)}}function wt(n,a){1&n&&(t.TgZ(0,"th",59),t._uU(1,"Fri"),t.qZA())}function Ft(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WFRI)}}function Mt(n,a){1&n&&(t.TgZ(0,"th",59),t._uU(1,"Sat"),t.qZA())}function kt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WSAT)}}function Et(n,a){1&n&&(t.TgZ(0,"th",59),t._uU(1,"Sun"),t.qZA())}function Pt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WSUN)}}function Bt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Start Date"),t.qZA())}function Wt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WSTRT)}}function Jt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Stop Date"),t.qZA())}function Lt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.WSTOP)}}function Qt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Contact"),t.qZA())}function Ht(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.DSCONT)}}function $t(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Phone Number"),t.qZA())}function Gt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.DSCNPH)}}function zt(n,a){1&n&&(t.TgZ(0,"th",57),t._uU(1,"Status"),t.qZA())}function Kt(n,a){if(1&n&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.RASTAT)}}function jt(n,a){1&n&&t._UZ(0,"th",60)}function Xt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",58)(1,"div",61)(2,"button",62)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",63)(6,"li")(7,"button",64),t.NdJ("click",function(){const u=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.updateRecurringAppt(u))}),t.TgZ(8,"mat-icon",65),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Update"),t.qZA()()(),t.TgZ(12,"li")(13,"button",64),t.NdJ("click",function(){const u=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteRecurringAppt(u))}),t.TgZ(14,"mat-icon",66),t._uU(15,"delete"),t.qZA(),t.TgZ(16,"mat-label"),t._uU(17,"Delete"),t.qZA()()()()()()}}function Vt(n,a){1&n&&t._UZ(0,"tr",67)}function te(n,a){1&n&&t._UZ(0,"tr",67)}function ee(n,a){if(1&n&&(t.ynx(0),t.YNc(1,te,1,0,"tr",41),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("matHeaderRowDef",e.headerRow2)}}function ne(n,a){1&n&&t._UZ(0,"tr",68)}const re=function(){return[8,16,24]};let ae=(()=>{class n{constructor(e,r,i,u,l){this.fb=e,this.matDialog=r,this.router=i,this.route=u,this.RecurringApptSvc=l,this.dataSource=new f.by,this.duplicateSource=[],this.user=localStorage.getItem("userName"),this.editedRows=[],this.searchTextDisplay=!1,this.displayedColumns=["SCAC","Building","InOut","AppointmentType","LoadType","AppointmentTime","ExpectedDuration","Mon","Tue","Wed","Thu","Fri","Sat","Sun","StartDate","StopDate","Actions"],this.dayColumns=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.headerRow1=[],this.headerRow2=[],this.visibleDayCount=7,this.rowColumns=[],this.Global=Z.R,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.columnShowHideList=[]}ngOnInit(){this.form=this.fb.group({scac:""}),this.initializeColumnProperties(),this.editedRows=[],this.updateHeaderRows(),this.getRecurringAppts(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()}ngOnDestroy(){this.recurringApptSubscription&&this.recurringApptSubscription.unsubscribe()}searchRecurringAppointments(){this.searchTextDisplay=1!=this.searchTextDisplay}getRecurringAppts(e,r){const i=this.currentFilters||{},{scac:u=""}=i;this.recurringApptSubscription&&this.recurringApptSubscription.unsubscribe(),this.recurringApptSubscription=this.RecurringApptSvc.getRecurringAppointments(this.user??"",u.toUpperCase(),e,r).subscribe(l=>{var R=JSON.parse(l[0].data[1]?.value);this.dataSource.data=R.returnedData,this.totalRecords=R.TotalRecords})}toggleColumn(e){if(e.isActive)this.displayedColumns.splice(e.position>this.displayedColumns.length-1?this.displayedColumns.length-1:e.position,0,e.name);else{let r=this.displayedColumns.indexOf(e.name);r>-1&&this.displayedColumns.splice(r,1)}this.updateHeaderRows()}initializeColumnProperties(){this.displayedColumns.forEach((e,r)=>{"Actions"!=e&&"Carrier"!=e&&this.columnShowHideList.push({position:r,name:e,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Contact",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length-1,name:"PhoneNumber",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length-1,name:"Status",isActive:!1})}updateHeaderRows(){const e=this.dayColumns.filter(r=>this.displayedColumns.includes(r));if(this.headerRow1=this.displayedColumns.filter(r=>!this.dayColumns.includes(r)),0===e.length)this.headerRow1=this.headerRow1.filter(r=>"AppointmentDays"!==r);else if(!this.headerRow1.includes("AppointmentDays")){const r=this.headerRow1.indexOf("StartDate"),i=this.headerRow1.indexOf("Actions");this.headerRow1.splice(r>-1?r:i>-1?i:this.headerRow1.length,0,"AppointmentDays")}this.headerRow2=e,this.visibleDayCount=e.length,this.rowColumns=this.displayedColumns.filter(r=>"AppointmentDays"!==r)}addRecurringAppt(){this.matDialog.open(et,{width:"1000px",maxHeight:"80vh",autoFocus:!1})}updateRecurringAppt(e){this.matDialog.open(it,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}deleteRecurringAppt(e){this.matDialog.open(rt,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}createFilter(){return(e,r)=>{const i=JSON.parse(r);return Object.keys(i).every(u=>(e[u]??"").toString().toLowerCase().includes(i[u].toLowerCase()))}}getBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.getRecurringAppts(this.pageSize,this.pageNumber)}resetSearch(){this.form.reset();const e=this.pageSize,r=this.pageNumber;this.currentFilters=null,this.paginator.firstPage(),this.getRecurringAppts(e,r)}onPaginateChange(e){this.pageSize=e.pageSize,this.getRecurringAppts(e.pageSize,e.pageIndex+1)}successMessage(e){A().fire(e,"","success")}failureMessage(e){A().fire(e,"","error")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.qu),t.Y36(C.uw),t.Y36(s.F0),t.Y36(s.gz),t.Y36(U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-recurring-appointment"]],viewQuery:function(e,r){if(1&e&&t.Gf(m.NW,5),2&e){let i;t.iGM(i=t.CRH())&&(r.paginator=i.first)}},standalone:!0,features:[t.jDz],decls:91,vars:13,consts:[[1,"over-Flow"],[1,"title"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],[1,"menu-container"],["mainMenuButton","matMenu"],[1,"grid-container"],[4,"ngFor","ngForOf"],["mat-button","","class","addButton","matTooltip","Search Recurring Appointments",3,"click",4,"ngIf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],["mat-button","","matTooltip","Add New Recurring Appointment",1,"addButton",3,"click"],["mat-button","","type","reset","value","Reset","matTooltip","Reset Recurring Appointments",1,"addButton","buttons",3,"click"],[1,"tally-serach-form"],[3,"formGroup","ngSubmit",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","SCAC"],["mat-header-cell","","rowspan","2",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Building"],["matColumnDef","InOut"],["matColumnDef","AppointmentType"],["matColumnDef","LoadType"],["matColumnDef","AppointmentTime"],["matColumnDef","ExpectedDuration"],["matColumnDef","AppointmentDays"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","Mon"],["matColumnDef","Tue"],["matColumnDef","Wed"],["matColumnDef","Thu"],["matColumnDef","Fri"],["matColumnDef","Sat"],["matColumnDef","Sun"],["matColumnDef","StartDate"],["matColumnDef","StopDate"],["matColumnDef","Contact"],["matColumnDef","PhoneNumber"],["matColumnDef","Status"],["matColumnDef","Actions"],["mat-header-cell","","rowspan","2","class","tally_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],[4,"ngIf"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],[1,"row"],[1,"grid-item"],[3,"click"],[2,"color","blue",3,"ngModel","ngModelChange","change"],["mat-button","","matTooltip","Search Recurring Appointments",1,"addButton",3,"click"],[3,"formGroup","ngSubmit"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","scac",2,"text-transform","uppercase"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell","","rowspan","2"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","","rowspan","2",1,"tally_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row",""]],template:function(e,r){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t._uU(3,"Work With Recurring Appointments"),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,pt,3,0,"button",3),t.TgZ(6,"mat-menu",4,5)(8,"div",6),t.YNc(9,mt,6,2,"ng-container",7),t.qZA()(),t.YNc(10,lt,3,0,"button",8),t.TgZ(11,"button",9,10)(13,"mat-icon"),t._uU(14,"visibility_off"),t.qZA()(),t.TgZ(15,"button",11),t.NdJ("click",function(){return r.addRecurringAppt()}),t.TgZ(16,"mat-icon"),t._uU(17,"add"),t.qZA()(),t.TgZ(18,"button",12),t.NdJ("click",function(){return r.resetSearch()}),t.TgZ(19,"mat-icon"),t._uU(20,"loop"),t.qZA()()()(),t.TgZ(21,"mat-card-content",13),t.YNc(22,st,9,1,"form",14),t.qZA(),t.TgZ(23,"table",15),t.ynx(24,16),t.YNc(25,ct,2,0,"th",17),t.YNc(26,dt,2,1,"td",18),t.BQk(),t.ynx(27,19),t.YNc(28,gt,2,0,"th",17),t.YNc(29,ft,2,1,"td",18),t.BQk(),t.ynx(30,20),t.YNc(31,ht,2,0,"th",17),t.YNc(32,At,2,1,"td",18),t.BQk(),t.ynx(33,21),t.YNc(34,Zt,2,0,"th",17),t.YNc(35,_t,2,1,"td",18),t.BQk(),t.ynx(36,22),t.YNc(37,Tt,2,0,"th",17),t.YNc(38,Ct,2,1,"td",18),t.BQk(),t.ynx(39,23),t.YNc(40,yt,2,0,"th",17),t.YNc(41,Rt,2,1,"td",18),t.BQk(),t.ynx(42,24),t.YNc(43,bt,2,0,"th",17),t.YNc(44,Ut,3,4,"td",18),t.BQk(),t.ynx(45,25),t.YNc(46,vt,2,1,"th",26),t.BQk(),t.ynx(47,27),t.YNc(48,qt,2,0,"th",26),t.YNc(49,St,2,1,"td",18),t.BQk(),t.ynx(50,28),t.YNc(51,Dt,2,0,"th",26),t.YNc(52,Nt,2,1,"td",18),t.BQk(),t.ynx(53,29),t.YNc(54,xt,2,0,"th",26),t.YNc(55,It,2,1,"td",18),t.BQk(),t.ynx(56,30),t.YNc(57,Ot,2,0,"th",26),t.YNc(58,Yt,2,1,"td",18),t.BQk(),t.ynx(59,31),t.YNc(60,wt,2,0,"th",26),t.YNc(61,Ft,2,1,"td",18),t.BQk(),t.ynx(62,32),t.YNc(63,Mt,2,0,"th",26),t.YNc(64,kt,2,1,"td",18),t.BQk(),t.ynx(65,33),t.YNc(66,Et,2,0,"th",26),t.YNc(67,Pt,2,1,"td",18),t.BQk(),t.ynx(68,34),t.YNc(69,Bt,2,0,"th",17),t.YNc(70,Wt,2,1,"td",18),t.BQk(),t.ynx(71,35),t.YNc(72,Jt,2,0,"th",17),t.YNc(73,Lt,2,1,"td",18),t.BQk(),t.ynx(74,36),t.YNc(75,Qt,2,0,"th",17),t.YNc(76,Ht,2,1,"td",18),t.BQk(),t.ynx(77,37),t.YNc(78,$t,2,0,"th",17),t.YNc(79,Gt,2,1,"td",18),t.BQk(),t.ynx(80,38),t.YNc(81,zt,2,0,"th",17),t.YNc(82,Kt,2,1,"td",18),t.BQk(),t.ynx(83,39),t.YNc(84,jt,1,0,"th",40),t.YNc(85,Xt,18,0,"td",18),t.BQk(),t.YNc(86,Vt,1,0,"tr",41),t.YNc(87,ee,2,1,"ng-container",42),t.YNc(88,ne,1,0,"tr",43),t.qZA(),t.TgZ(89,"mat-paginator",44,45),t.NdJ("page",function(u){return r.onPaginateChange(u)}),t.qZA()()),2&e){const i=t.MAs(7);t.xp6(5),t.Q6J("ngIf",r.searchTextDisplay),t.xp6(4),t.Q6J("ngForOf",r.columnShowHideList),t.xp6(1),t.Q6J("ngIf",!r.searchTextDisplay),t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(11),t.Q6J("ngIf",r.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",r.dataSource),t.xp6(63),t.Q6J("matHeaderRowDef",r.headerRow1),t.xp6(1),t.Q6J("ngIf",r.headerRow2.length>0),t.xp6(1),t.Q6J("matRowDefColumns",r.rowColumns),t.xp6(1),t.Q6J("length",r.totalRecords)("pageSizeOptions",t.DdM(12,re))("pageSize",r.pageSize)}},dependencies:[T.m,b.sg,b.O5,o._Y,o.Fj,o.JJ,o.JL,o.On,o.sg,o.u,m.NW,v.Hw,V.VK,V.p6,q.lW,_.KE,_.hX,S.Nt,h.a8,h.dk,h.dn,h.n5,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,ot.gM,ut.Rr,b.JJ]}),n})()}}]);