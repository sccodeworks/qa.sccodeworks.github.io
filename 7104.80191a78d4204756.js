"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[7104],{7104:(D,S,o)=>{o.r(S),o.d(S,{SerialPalletScheduledMovesComponent:()=>V});var s=o(24006),Q=o(35226),c=o.n(Q),C=o(70879),v=o(65412),F=o(65679),N=o(86091),A=o(85139),t=o(94650),b=o(16082),P=o(19132),L=o(97392),U=o(4859),p=o(59549),M=o(44144),m=o(73546),Z=o(34894);let w=(()=>{class l{constructor(e,a,i,n,h,d){this.dialogRef=e,this.anyvariable=a,this.fb=i,this.moveqSvc=n,this.router=h,this.matDialog=d,this.user=localStorage.getItem("userName"),this.verifyMsg="Processed Successfully",this.outputMsg="Call MQI815CR for New Order Notificaton. Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick",this.newOrderFullPalletMsg="Call MQI815CR for New Order Notificaton. Call MQU805R for Full Pallet Pick.",this.newOrderLpFullPalletMsg="Call MQI815CR for New Order Notificaton. Call MQU805RLP for LP full Pallet Pick.",this.newOrderPartialPalletMsg="Call MQI815CR for New Order Notificaton. Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick",this.newOrderPartialPalletAltMsg="Call MQI815CR for New Order Notificaton. Call MQU811RC for Partial pallet select. Call MQU806CR for Partial pallet Pick.",this.scheduledPartialLpMsg="Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick",this.lpFullPalletNextScreenMsg="Call MQU805RLP for Next Screen.",this.lpFullPalletPickMsg="Call MQU805RLP for LP full Pallet Pick.",this.cycleCountMsg="Call MQCRUD,MQU830R for Cycle Count",this.noMoreAssignmentsMsg="NO MORE ASSIGNMENTS FOR THIS OPERATOR.",this.PartialPalletMsg="Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick",this.fullPalletMsg="Call MQU805R for Full Pallet Pick.",this.lpPartialPalletPickMsg="Call MQU811RC for Partial pallet select. Call MQU806CLR for LP Partialpallet Pick",this.flipped=" ",this.flippedSerial=""}ngOnInit(){this.transaction=this.anyvariable.transaction,this.form=this.fb.group({oldSerial:[{value:this.anyvariable?.inputSerial||"",disabled:!0}],newSerial:["",s.kI.required]})}ngOnDestroy(){this.verifySubscription&&this.verifySubscription.unsubscribe()}verifyPallet(){const e=this.form.value;this.flipped=this.anyvariable[20]?.value?.trim(),this.flippedSerial=this.anyvariable.outputSerial||"",this.verifySubscription=this.moveqSvc.mixedSerial("VERIFY",this.user,this.transaction,"",this.anyvariable[8].value,this.anyvariable[9].value,this.anyvariable[10].value,e.newSerial,this.anyvariable.inputSerial,this.anyvariable[13].value,"Y"===this.flipped?this.flippedSerial:"").subscribe(i=>{const n=i?.[0]?.data||[],h=n[n.length-1]?.value?.trim()||"";if(h){if(h.toUpperCase()===this.verifyMsg.toUpperCase())return void c().fire(h,"","success").then(()=>{this.checkFirstCallAndDecide()});c().fire(h,"","error")}})}handleFirstCallNavigation(e,a){if(e.toUpperCase()===this.noMoreAssignmentsMsg.toUpperCase())return c().fire(e,"","error").then(()=>{this.matDialog.closeAll(),this.router.navigateByUrl("/dashboard-rfmenu/read")}),!0;if(e.toUpperCase()===this.cycleCountMsg.toUpperCase()){const i=a[4]?.value;return this.moveqSvc.cycleCount(this.user,i).subscribe(n=>{const d=JSON.parse(n[0].data[1]?.value).returnedData;d.transaction=i;const g=[d,a];this.matDialog.closeAll(),this.router.navigate(["/main-nav/cycleCount/read"],{state:g})}),!0}return a===this.fullPalletMsg?(this.anyvariable.transaction=this.transaction,this.matDialog.open(N.b,{width:"1000px",maxHeight:"90vh",data:this.anyvariable,autoFocus:!1}),!0):e===this.PartialPalletMsg||e===this.lpPartialPalletPickMsg?(this.anyvariable.transaction=this.transaction,this.matDialog.open(A.V,{width:"1000px",maxHeight:"90vh",data:this.anyvariable,autoFocus:!1}),!0):e===this.newOrderFullPalletMsg||e===this.newOrderLpFullPalletMsg||e===this.newOrderPartialPalletMsg||e===this.newOrderPartialPalletAltMsg?(this.dialogRef.close(),a.transaction=this.transaction,this.matDialog.open(F.z,{width:"1000px",maxHeight:"80vh",data:a,autoFocus:!1}),!0):e===this.lpFullPalletPickMsg?(this.resetEntryFields(),!0):(e===this.scheduledPartialLpMsg||e===this.lpFullPalletNextScreenMsg)&&(this.matDialog.closeAll(),this.router.navigateByUrl("/main-nav/scheduledMoves/read"),!0)}resetEntryFields(){this.form.patchValue({Srl:"",Quantity:"",Location:""}),this.form.get("Srl")?.markAsPristine(),this.form.get("Srl")?.markAsUntouched(),this.form.get("Srl")?.setErrors(null),this.form.get("Quantity")?.markAsPristine(),this.form.get("Quantity")?.markAsUntouched(),this.form.get("Quantity")?.setErrors(null),this.form.get("Location")?.markAsPristine(),this.form.get("Location")?.markAsUntouched(),this.form.get("Location")?.setErrors(null),setTimeout(()=>{document.querySelector('input[formcontrolname="Srl"]')?.focus()},100)}checkFirstCallAndDecide(){this.moveqSvc.updateFirstCall("FIRST",this.user,this.anyvariable[9]?.value).subscribe(e=>{const a=e?.[0]?.data||[];this.transaction=a[4]?.value;const i=a[a.length-1]?.value?.trim()||"";if(i&&!this.handleFirstCallNavigation(i,a)){if(i===this.outputMsg)return void this.dialogRef.close({clearParent:!0});c().fire(i,"","error")}})}closeDialog(){this.dialogRef.close()}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(v.so),t.Y36(v.WI),t.Y36(s.qu),t.Y36(b.e),t.Y36(P.F0),t.Y36(v.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-verify-scheduled-moves"]],standalone:!0,features:[t.jDz],decls:22,vars:1,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","oldSerial"],["matInput","","formControlName","newSerial","appUppercase","","maxlength","30","required",""],["mat-raised-button","",1,"buttons","addButton",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4," Apply and Verify LP/Serial "),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return a.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Serial"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"New Serial"),t.qZA(),t._UZ(19,"input",10),t.qZA()()(),t.TgZ(20,"button",11),t.NdJ("click",function(){return a.verifyPallet()}),t._uU(21," Verify "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",a.form))},dependencies:[C.m,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.sg,s.u,L.Hw,U.lW,p.KE,p.hX,M.Nt,m.a8,m.dk,m.dn,m.n5,Z.e]}),l})();var q=o(36895);function T(l,u){1&l&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"LotCode1"),t.qZA(),t._UZ(3,"input",20),t.qZA()),2&l&&(t.xp6(3),t.Q6J("disabled",!0))}function R(l,u){1&l&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"LotCode2"),t.qZA(),t._UZ(3,"input",21),t.qZA()),2&l&&(t.xp6(3),t.Q6J("disabled",!0))}function I(l,u){1&l&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"LotCode3"),t.qZA(),t._UZ(3,"input",22),t.qZA()),2&l&&(t.xp6(3),t.Q6J("disabled",!0))}function _(l,u){1&l&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"Quantity"),t.qZA(),t._UZ(3,"input",23),t.qZA())}function k(l,u){1&l&&(t.TgZ(0,"mat-form-field",7)(1,"mat-label"),t._uU(2,"To"),t.qZA(),t._UZ(3,"input",24),t.TgZ(4,"mat-hint",25),t._uU(5,"CLOSE PALLET"),t.qZA()())}function x(l,u){if(1&l){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onNext())}),t._uU(1," Next "),t.qZA()}if(2&l){const e=t.oxw();let a;t.Q6J("disabled",!(null!=(a=e.form.get("Srl"))&&a.value)&&!e.showQtyField||e.showQtyField&&!(null!=(a=e.form.get("Quantity"))&&a.value))}}function O(l,u){if(1&l){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSubmit())}),t._uU(1," Submit "),t.qZA()}if(2&l){const e=t.oxw();let a;t.Q6J("disabled",!(null!=(a=e.form.get("Srl"))&&a.value&&null!=(a=e.form.get("Quantity"))&&a.value&&null!=(a=e.form.get("Location"))&&a.value))}}let V=(()=>{class l{constructor(e,a,i,n){this.fb=e,this.router=a,this.moveqSvc=i,this.matDialog=n,this.user=localStorage.getItem("userName"),this.billName="",this.title="",this.currentStage="",this.paramValue="SRLSCRN",this.showQtyField=!1,this.showLocationField=!1,this.allFieldsEntered=!1,this.qtyMsg="Display the Qty field.",this.locationMsg="Display the LocationField.",this.verifyMsg="Call pgm with option VERIFY",this.qtylot1="Display the Qty field.Lotcode1 is Required",this.qtylot2="Display the Qty field.Lotcode2 is Required",this.qtylot3="Display the Qty field.Lotcode3 is Required",this.quantity="",this.didone=" ",this.scanned=" ",this.flipped=" ",this.showLot1=!1,this.showLot2=!1,this.showLot3=!1}ngOnInit(){this.element=history.state,this.billName=this.element[16].value,this.title=this.element[10].value,this.form=this.fb.group({Transaction:[{value:this.element[11].value,disabled:!0}],From:[{value:this.element[12].value,disabled:!0}],Qty:[{value:this.element[13].value,disabled:!0}],To:[{value:this.element[14].value,disabled:!0}],Type:[{value:this.element[15].value,disabled:!0}],Item:[{value:this.element[18].value,disabled:!0}],BillNumber:[{value:this.element[17].value,disabled:!0}],Lot:[{value:this.element[19].value,disabled:!0}],Srl:["",s.kI.required],Quantity:[""],Location:[""],Lot1:[""],Lot2:[""],Lot3:[""]})}ngOnDestroy(){this.serialSubscription&&this.serialSubscription.unsubscribe()}onNext(){this.serialPallet(!1)}onSubmit(){this.serialPallet(!0)}configureLotFields(e){const a=(e[5]?.value||"").trim(),i=(e[6]?.value||"").trim(),n=(e[7]?.value||"").trim();this.showLot1=!!a,this.showLot2=!!i,this.showLot3=!!n,this.form.patchValue({Lot1:a,Lot2:i,Lot3:n})}serialPallet(e){var a=this.form.value;this.flipped=this.element[20]?.value?.trim(),this.serialSubscription&&this.serialSubscription.unsubscribe(),this.serialSubscription=this.moveqSvc.mixedSerial(this.paramValue,this.user,this.element[11].value,a.Srl||"",(e||this.showQtyField)&&a.Quantity||"",(e||this.showLocationField)&&a.Location||"",this.didone,this.scanned,"",this.flipped,"").subscribe(J=>{const r=J?.[0]?.data||[],y=r[r.length-1]?.value?.trim()||"";if(!y)return;const f=y.toUpperCase();return f===this.qtyMsg.toUpperCase()?(this.showQtyField=!0,this.paramValue="QTYSCRN",this.quantity=r[8]?.value||"",void this.form.patchValue({Quantity:this.quantity})):f===this.qtylot1.toUpperCase()||f===this.qtylot2.toUpperCase()||f===this.qtylot3.toUpperCase()?(this.showQtyField=!0,this.paramValue="QTYSCRN",this.quantity=r[8]?.value||"",this.form.patchValue({Quantity:this.quantity}),void this.configureLotFields(r)):f===this.locationMsg.toUpperCase()?(this.showLocationField=!0,this.paramValue="CLOSE",void(this.didone=r[10]?.value||"")):f===this.verifyMsg.toUpperCase()?(r.outputSerial=this.element.outputSerial||"",r.inputSerial=this.element.inputSerial||"",r.flipped=this.flipped,void this.matDialog.open(w,{width:"1000px",maxHeight:"80vh",data:r,autoFocus:!1}).afterClosed().subscribe(Y=>{Y?.clearParent&&this.resetScreenState()})):void this.failureMessage(y)}),this.allFieldsEntered=!!this.form.get("Srl")?.value&&!!this.form.get("Quantity")?.value&&!!this.form.get("Location")?.value}clearEntryFields(){this.form.patchValue({Srl:"",Quantity:"",Location:""}),this.form.markAsPristine(),this.form.markAsUntouched()}resetScreenState(){this.showQtyField=!1,this.showLocationField=!1,this.allFieldsEntered=!1,this.paramValue="SRLSCRN",this.didone=" ",this.scanned=" ",this.showLot1=!1,this.showLot2=!1,this.showLot3=!1,this.form.patchValue({Srl:"",Quantity:"",Location:"",Lot1:"",Lot2:"",Lot3:""}),this.form.markAsPristine(),this.form.markAsUntouched()}successMessage(e){c().fire(e,"","success")}failureMessage(e){c().fire(e,"","error")}onBack(){this.router.navigateByUrl("/main-nav/scheduledMoves/read")}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(s.qu),t.Y36(P.F0),t.Y36(b.e),t.Y36(v.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-serial-pallet-scheduled-moves"]],standalone:!0,features:[t.jDz],decls:54,vars:10,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Transaction"],["matInput","","formControlName","From"],["matInput","","formControlName","Qty"],["matInput","","formControlName","To"],["matInput","","formControlName","Type"],["matInput","","formControlName","Item"],["matInput","","formControlName","BillNumber"],["matInput","","formControlName","Lot"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","Srl","required","","appUppercase",""],["appearance","outline","class","full-width",4,"ngIf"],["mat-raised-button","","class","buttons addButton",3,"disabled","click",4,"ngIf"],["matInput","","formControlName","Lot1",3,"disabled"],["matInput","","formControlName","Lot2",3,"disabled"],["matInput","","formControlName","Lot3",3,"disabled"],["matInput","","formControlName","Quantity","required","","appUppercase",""],["matInput","","formControlName","Location","required","","appUppercase",""],["align","start"],["mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return a.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before"),t.qZA()(),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7),t._UZ(12,"mat-label")(13,"input",8),t.qZA(),t.TgZ(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"From"),t.qZA(),t._UZ(17,"input",9),t.qZA(),t.TgZ(18,"mat-form-field",7)(19,"mat-label"),t._uU(20,"Quantity"),t.qZA(),t._UZ(21,"input",10),t.qZA(),t.TgZ(22,"mat-form-field",7)(23,"mat-label"),t._uU(24,"To"),t.qZA(),t._UZ(25,"input",11),t.qZA(),t.TgZ(26,"mat-form-field",7)(27,"mat-label"),t._uU(28,"Type"),t.qZA(),t._UZ(29,"input",12),t.qZA(),t.TgZ(30,"mat-form-field",7)(31,"mat-label"),t._uU(32,"Item"),t.qZA(),t._UZ(33,"input",13),t.qZA(),t.TgZ(34,"mat-form-field",7)(35,"mat-label"),t._uU(36),t.qZA(),t._UZ(37,"input",14),t.qZA(),t.TgZ(38,"mat-form-field",7)(39,"mat-label"),t._uU(40,"Lot"),t.qZA(),t._UZ(41,"input",15),t.qZA(),t.TgZ(42,"mat-form-field",16)(43,"mat-label"),t._uU(44,"Serial"),t.qZA(),t._UZ(45,"input",17),t.qZA(),t.YNc(46,T,4,1,"mat-form-field",18),t.YNc(47,R,4,1,"mat-form-field",18),t.YNc(48,I,4,1,"mat-form-field",18),t.YNc(49,_,4,0,"mat-form-field",18),t.YNc(50,k,6,0,"mat-form-field",18),t._UZ(51,"br"),t.YNc(52,x,2,1,"button",19),t.YNc(53,O,2,1,"button",19),t.qZA()()()()()),2&e&&(t.xp6(6),t.hij(" ",a.title," "),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(28),t.Oqu(a.billName),t.xp6(10),t.Q6J("ngIf",a.showLot1),t.xp6(1),t.Q6J("ngIf",a.showLot2),t.xp6(1),t.Q6J("ngIf",a.showLot3),t.xp6(1),t.Q6J("ngIf",a.showQtyField),t.xp6(1),t.Q6J("ngIf",a.showLocationField),t.xp6(2),t.Q6J("ngIf",!a.showLocationField),t.xp6(1),t.Q6J("ngIf",a.showLocationField))},dependencies:[C.m,q.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,L.Hw,U.lW,p.KE,p.bx,p.hX,M.Nt,m.a8,m.dk,m.dn,m.n5,Z.e]}),l})()}}]);