"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[13617],{69501:(U,O,i)=>{i.d(O,{J:()=>c});var e=i(94650),_=i(24006),f=i(47957),g=i(59549),T=i(44144),C=i(69751),v=i(68675),t=i(54004),A=i(70879),a=i(36895),l=i(3238);function m(p,h){if(1&p&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&p){const o=h.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",o.description," ")}}function u(p,h){1&p&&(e.TgZ(0,"mat-option"),e._uU(1," No matching results "),e.qZA())}function d(p,h){1&p&&(e.TgZ(0,"mat-error"),e._uU(1," This field is required. Please select an option. "),e.qZA())}function E(p,h){1&p&&(e.TgZ(0,"mat-hint",8),e._uU(1," The option you entered is not valid. Please select one from the list. "),e.qZA())}let c=(()=>{class p{constructor(o){this.fb=o,this.options=[],this.value=null,this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.isRequired=!1,this.selectionChange=new e.vpe,this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.onChange=n=>{this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0},this.onTouched=()=>{},this.control=this.fb.control("",{validators:this.isRequired?[_.kI.required]:[]}),this.stateChanges=new C.y,this.filteredOptions=this.control.valueChanges.pipe((0,v.O)(""),(0,t.U)(n=>this._filter(n)))}onFocus(){(!this.control.value||"string"==typeof this.control.value&&""===this.control.value.trim())&&this.control.setValue("")}ngOnInit(){this.isRequired&&this.control.setValidators([_.kI.required]),this.control.updateValueAndValidity(),this.filteredOptions=this.control.valueChanges.pipe((0,v.O)(""),(0,t.U)(o=>this._filter(o)))}_filter(o){let n="";if("string"==typeof o)n=o.trim();else{if(!o||"object"!=typeof o)return this.options;n=o.value.toLowerCase()}if(""===n)return this.errorState=!1,this.options;const r=this.options.filter(s=>s.value.toLowerCase().includes(n)||s.description.toLowerCase().includes(n));return this.errorState=0===r.length&&n.length>0,r}writeValue(o){this.control.setValue(o&&"object"==typeof o?`${o.value} - ${o.description}`:"string"==typeof o?o:""),this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0}onOptionSelected(o){this.control.setValue(o);const[n,r]=o.description.split(" ");this.valueControlName.setValue(n),this.suffixControlName&&this.suffixControlName.setValue(r||""),this.onChange(o.value),this.selectionChange.emit(o.value),this.autocompleteTrigger.closePanel()}displayOptionText(o){return o?o.value:""}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){this.disabled=o}setDescribedByIds(o){}onContainerClick(o){this.autocompleteTrigger&&this.autocompleteTrigger.openPanel()}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}}return p.\u0275fac=function(o){return new(o||p)(e.Y36(_.qu))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-dropdown"]],viewQuery:function(o,n){if(1&o&&e.Gf(f.ZL,7),2&o){let r;e.iGM(r=e.CRH())&&(n.autocompleteTrigger=r.first)}},hostVars:1,hostBindings:function(o,n){2&o&&e.uIk("aria-describedby",n.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance",valueControlName:"valueControlName",suffixControlName:"suffixControlName",displayControlName:"displayControlName",isRequired:"isRequired"},outputs:{selectionChange:"selectionChange"},standalone:!0,features:[e._Bn([{provide:_.JU,multi:!0,useExisting:p},{provide:g.Eo,useExisting:p}],[{provide:_.gN,useExisting:_.sg}]),e.jDz],decls:12,vars:15,consts:[["appearance","outline",1,"full-width2"],["matInput","",3,"formControl","placeholder","matAutocomplete","focus","blur"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","hint-error","style","color: red; font-size:12px",4,"ngIf"],[3,"value"],[1,"hint-error",2,"color","red","font-size","12px"]],template:function(o,n){if(1&o&&(e.TgZ(0,"mat-form-field",0)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",1),e.NdJ("focus",function(){return n.onFocus(),n.autocompleteTrigger.openPanel()})("blur",function(){return n.onTouched()}),e.qZA(),e.TgZ(4,"mat-autocomplete",2,3),e.NdJ("optionSelected",function(s){return n.onOptionSelected(s.option.value)}),e.YNc(6,m,2,2,"mat-option",4),e.ALo(7,"async"),e.YNc(8,u,2,0,"mat-option",5),e.ALo(9,"async"),e.qZA(),e.YNc(10,d,2,0,"mat-error",5),e.YNc(11,E,2,0,"mat-hint",6),e.qZA()),2&o){const r=e.MAs(5);let s;e.ekj("mat-form-field-invalid",n.control.invalid&&n.control.touched||n.errorState),e.xp6(2),e.Oqu(n.label),e.xp6(1),e.Q6J("formControl",n.control)("placeholder",n.placeholder)("matAutocomplete",r),e.xp6(1),e.Q6J("displayWith",n.displayOptionText),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,11,n.filteredOptions)),e.xp6(2),e.Q6J("ngIf",0===(null==(s=e.lcZ(9,13,n.filteredOptions))?null:s.length)&&n.control.value),e.xp6(2),e.Q6J("ngIf",n.control.invalid&&n.control.touched),e.xp6(1),e.Q6J("ngIf",n.errorState)}},dependencies:[A.m,a.sg,a.O5,_.Fj,_.JJ,_.oH,g.TO,g.KE,g.bx,g.hX,T.Nt,l.ey,a.Ov,_.UX,f.Bb,f.XC,f.ZL,g.lN,T.c]}),p})()},13617:(U,O,i)=>{i.r(O),i.d(O,{OperatorEquipmentAddComponent:()=>h});var e=i(24006),_=i(65412),f=i(35226),g=i.n(f),T=i(70879),C=i(48529),v=i(69501),t=i(94650),A=i(19132),a=i(12412),l=i(97392),m=i(4859),u=i(59549),d=i(44144),E=i(84385),c=i(3238),p=i(73546);let h=(()=>{class o{constructor(r,s,D,P,q){this.anyvariable=r,this.dialogRef=s,this.router=D,this.fb=P,this.OperatorEquipmentSvc=q,this.user=localStorage.getItem("userName"),this.equipmentTypeOptions=[],this.buildingsOptions=[],this.readUrl="/main-nav/operatorEquipment/read"}ngOnInit(){this.form=this.fb.group({EQBLDG:["",[e.kI.required,e.kI.pattern(/^[A-Za-z0-9 ]*$/),e.kI.maxLength(3)]],EQEQUI:["",e.kI.required],EQTYPE:["",e.kI.required],EQMAX:"",EQLPEL:["",e.kI.required],EQMANU:"",EQOWN:["",e.kI.required],EQWORK:["",e.kI.required],EQTRLR:"",EQFTYP:["",e.kI.required],EQRAIS:"",EQSTAT:"AC"}),this.fetchEquipmentTypes(),this.fetchBuildings()}ngOnDestroy(){this.operatorEquipmentSubscription&&this.operatorEquipmentSubscription.unsubscribe()}fetchEquipmentTypes(){this.OperatorEquipmentSvc.getEquipmentTypes().subscribe(r=>{this.equipmentTypeOptions=r.map(s=>({value:s.VLVALU,description:`${s.VLVALU} - ${s.VLSDSC}`}))})}get typeControlName(){return this.form.controls.EQTYPE}fetchBuildings(){this.OperatorEquipmentSvc.getBuildings().subscribe(r=>{this.buildingsOptions=r.map(s=>({value:s.BUILD,description:`${s.BUILD} - ${s.BUNAME}`}))})}get buildingsControlName(){return this.form.controls.EQBLDG}addOperatorEquipments(){const r=this.form.value;this.operatorEquipmentSubscription&&this.operatorEquipmentSubscription.unsubscribe(),this.operatorEquipmentSubscription=this.OperatorEquipmentSvc.createOperatorEquipment(this.user??"",C.R.fullBuilding(this.form.get("EQBLDG")?.value),r.EQEQUI,this.form.get("EQTYPE")?.value,r.EQMAX,r.EQTRLR,r.EQFTYP.toUpperCase(),r.EQRAIS.toUpperCase(),r.EQLPEL.toUpperCase(),r.EQMANU,r.EQOWN.toUpperCase(),r.EQWORK.toUpperCase(),r.EQSTAT).subscribe(s=>{const P=JSON.parse(s[0].data[s[0].data.length-1].value).returnedData.message;P.toUpperCase()===C.R.createMsg.toUpperCase()?(this.successMessage(P),this.closeDialog(),this.router.navigate([this.readUrl])):this.failureMessage(P)})}closeDialog(){this.dialogRef.close()}successMessage(r){g().fire(r,"","success")}failureMessage(r){g().fire(r,"","error")}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(_.WI),t.Y36(_.so),t.Y36(A.F0),t.Y36(e.qu),t.Y36(a.b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-operator-equipment-add"]],standalone:!0,features:[t.jDz],decls:71,vars:8,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline","label","Building #","placeholder","Search or Enter Building",3,"options","valueControlName","isRequired"],["appearance","outline",1,"full-width"],["matInput","","required","","formControlName","EQEQUI",2,"text-transform","uppercase"],["appearance","outline","label","Equipment Type","placeholder","Search or Enter Equipment Type",3,"options","valueControlName","isRequired"],["matInput","","formControlName","EQMAX",2,"text-transform","uppercase"],["formControlName","EQLPEL"],["value","L"],["value","E"],["matInput","","formControlName","EQMANU",2,"text-transform","uppercase"],["formControlName","EQOWN"],["value","OWN"],["value","LEASE"],["matInput","","required","","formControlName","EQWORK",2,"text-transform","uppercase"],["matInput","","formControlName","EQTRLR",2,"text-transform","uppercase"],["formControlName","EQFTYP"],["value","P"],["value","S"],["value","C"],["matInput","","formControlName","EQRAIS",2,"text-transform","uppercase"],["matInput","","formControlName","EQSTAT",2,"text-transform","uppercase"],[1,"footer"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(r,s){1&r&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Operator Equipment"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return s.closeDialog()}),t.TgZ(6,"mat-icon"),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6),t._UZ(12,"app-dropdown",7),t.TgZ(13,"mat-form-field",8)(14,"mat-label"),t._uU(15," Equipment # "),t.qZA(),t._UZ(16,"input",9),t.qZA(),t._UZ(17,"app-dropdown",10),t.TgZ(18,"mat-form-field",8)(19,"mat-label"),t._uU(20," Maximum Capacity "),t.qZA(),t._UZ(21,"input",11),t.qZA(),t.TgZ(22,"mat-form-field",8)(23,"mat-label"),t._uU(24,"LP or Electric"),t.qZA(),t.TgZ(25,"mat-select",12)(26,"mat-option",13),t._uU(27,"L = LP Gas"),t.qZA(),t.TgZ(28,"mat-option",14),t._uU(29,"E = Electric"),t.qZA()()(),t.TgZ(30,"mat-form-field",8)(31,"mat-label"),t._uU(32," Manufacturer "),t.qZA(),t._UZ(33,"input",15),t.qZA(),t.TgZ(34,"mat-form-field",8)(35,"mat-label"),t._uU(36,"Own or Lease"),t.qZA(),t.TgZ(37,"mat-select",16)(38,"mat-option",17),t._uU(39,"O = Own"),t.qZA(),t.TgZ(40,"mat-option",18),t._uU(41,"L = Lease"),t.qZA()()(),t.TgZ(42,"mat-form-field",8)(43,"mat-label"),t._uU(44," Shift or Day PM "),t.qZA(),t._UZ(45,"input",19),t.qZA(),t.TgZ(46,"mat-form-field",8)(47,"mat-label"),t._uU(48,"Trailer Capable "),t.qZA(),t._UZ(49,"input",20),t.qZA(),t.TgZ(50,"mat-form-field",8)(51,"mat-label"),t._uU(52,"Freight Type"),t.qZA(),t.TgZ(53,"mat-select",21)(54,"mat-option",22),t._uU(55,"P = Pallet"),t.qZA(),t.TgZ(56,"mat-option",23),t._uU(57,"S = Slip Sheet"),t.qZA(),t.TgZ(58,"mat-option",24),t._uU(59,"C = Clamp"),t.qZA()()(),t.TgZ(60,"mat-form-field",8)(61,"mat-label"),t._uU(62,"Raised Forks "),t.qZA(),t._UZ(63,"input",25),t.qZA(),t.TgZ(64,"mat-form-field",8)(65,"mat-label"),t._uU(66,"Status"),t.qZA(),t._UZ(67,"input",26),t.qZA()()(),t.TgZ(68,"div",27)(69,"button",28),t.NdJ("click",function(){return s.addOperatorEquipments()}),t._uU(70,"Create"),t.qZA()()()()()),2&r&&(t.xp6(9),t.Q6J("formGroup",s.form),t.xp6(3),t.Q6J("options",s.buildingsOptions)("valueControlName",s.buildingsControlName)("isRequired",!0),t.xp6(5),t.Q6J("options",s.equipmentTypeOptions)("valueControlName",s.typeControlName)("isRequired",!0),t.xp6(52),t.Q6J("disabled",!s.form.valid))},dependencies:[T.m,e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.sg,e.u,l.Hw,m.lW,u.KE,u.hX,d.Nt,E.gD,c.ey,p.a8,p.dk,p.dn,p.n5,v.J]}),o})()},12412:(U,O,i)=>{i.d(O,{b:()=>v});var e=i(80529),_=i(75625),f=i(70262),g=i(62843),T=i(92340),C=i(94650);let v=(()=>{class t{constructor(a){this.httpClient=a,this.url=T.N.API_BASE_URL,this.httpHeader={headers:new e.WM({"Content-Type":"application/json"})}}getOperatorEquipment(a,l,m,u,d,E){return this.httpClient.get(this.url+"/operatorEquipment/read",{params:{user:a,building:l??"",equipNumber:m??"",status:u??"",recordsPerPage:d??"",pageNo:E??""}})}createOperatorEquipment(a,l,m,u,d,E,c,p,h,o,n,r,s){return this.httpClient.post(this.url+"/operatorEquipment/create",{user:a,EQBLDG:l,EQEQUI:m,EQTYPE:u,EQMAX:d,EQTRLR:E,EQFTYP:c,EQRAIS:p,EQLPEL:h,EQMANU:o,EQOWN:n,EQWORK:r,EQSTAT:s}).pipe((0,_.X)(1),(0,f.K)(this.httpError))}updateOperatorEquipment(a,l,m,u,d,E,c,p,h,o,n,r,s){return this.httpClient.put(this.url+"/operatorEquipment/update",{user:a,EQBLDG:l,EQEQUI:m,EQTYPE:u,EQMAX:d,EQTRLR:E,EQFTYP:c,EQRAIS:p,EQLPEL:h,EQMANU:o,EQOWN:n,EQWORK:r,EQSTAT:s}).pipe((0,_.X)(1),(0,f.K)(this.httpError))}deleteOperatorEquipment(a,l,m,u){return this.httpClient.delete(this.url+`/operatorEquipment/deleteEquipment?user=${a}&building=${l}&equipment=${m}&equipmentType=${u}`)}getEquipmentTypes(){return this.httpClient.get(this.url+"/operatorEquipment/equipmentType")}getBuildings(){return this.httpClient.get(this.url+"/operatorEquipment/Building")}getOperatorEquipmentDetails(){return this.httpClient.get(this.url+"/OperatorEquipmentDetails/read/OperatorEquipmentDetails")}getOperatorEquipmentExceptions(a,l,m,u,d){return this.httpClient.get(this.url+"/operatorEquipment/readExceptions",{params:{user:a,type:l??"",building:m??"",recordsPerPage:u??"",pageNo:d??""}})}createOpEquipException(a,l,m,u,d,E,c){return this.httpClient.post(this.url+"/operatorEquipment/createException",{user:a,EWTYPE:l,EWBLDG:m,EWRULE:u,EWZONE:d,EWTTYP:E,EWSTYP:c}).pipe((0,_.X)(1),(0,f.K)(this.httpError))}UpdateOpEquipException(a,l,m,u,d,E,c){return this.httpClient.put(this.url+"/operatorEquipment/updateException",{user:a,EWTYPE:l,EWBLDG:m,EWRULE:u,EWZONE:d,EWTTYP:E,EWSTYP:c}).pipe((0,_.X)(1),(0,f.K)(this.httpError))}OpEquipExceptionDelete(a,l,m,u,d){return this.httpClient.delete(this.url+`/operatorEquipment/deleteException?user=${a}&type=${l}&building=${m}&rule=${u}&zone=${d}`)}getOEquipmentMaintQuesHeader(a,l,m,u,d,E,c,p,h){return this.httpClient.get(this.url+"/EquipmentMaintQuesHeader/read",{params:{user:a,equipnum:l??"",equiptype:m??"",operator:u??"",building:d??"",date:E??"",time:c??"",recordsPerPage:p??"",pageNo:h??""}})}getOEquipmentMaintQuesHeaderDetails(a,l,m,u){return this.httpClient.get(this.url+"/EquipmentMaintQuesHeader/details/read",{params:{user:a,transno:l??"",recordsPerPage:m??"",pageNo:u??""}})}httpError(a){let l="";return l=a.error instanceof ErrorEvent?a.error.message:`Error Code: ${a.status}\nMessage: ${a.message}`,console.log(l),(0,g._)(()=>new Error(l))}}return t.\u0275fac=function(a){return new(a||t)(C.LFG(e.eN))},t.\u0275prov=C.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);