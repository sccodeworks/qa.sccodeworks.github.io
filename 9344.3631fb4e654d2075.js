"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[9344],{95190:(F,y,n)=>{n.d(y,{c:()=>W});var r=n(80529),h=n(75625),M=n(70262),O=n(62843),v=n(92340),t=n(94650);let W=(()=>{class S{constructor(l){this.httpClient=l,this.url=v.N.API_BASE_URL,this.httpHeader={headers:new r.WM({"Content-Type":"application/json"})}}getSupplyTransactions(l,i,u,_,d,f,p,c,N,T,g,A,C){return this.httpClient.get(this.url+"/SupplyTransactions/read",{params:{user:l,SNSTOR:i??"",SNCONS:u??"",SNCARR:_??"",SNDOCT:d??"",SNDOCN:f??"",SNTYPE:p??"",WKSDATE:c??"",WKEDATE:N??"",SNPOOL:T??"",SNINV:g??"",recordsPerPage:A??"",pageNo:C??""}})}createSupplyTransactions(l,i,u,_,d,f,p,c,N,T,g,A,C,Z,E,P,D,U){return this.httpClient.post(this.url+"/SupplyTransactions/create",{user:l,SNSTOR:i,SNSSFX:u,SNCONS:_,SNCARR:d,SNDOCT:f,SNDOCN:p,SNTYPE:c,SNLOCN:N,SNRQTY:T,SNXQTY:g,SNUQTY:A,SNPOOL:C,SNINVP:Z,SNREAS:E,SNSPID:P,SNNUMB:D,SNSTAT:U}).pipe((0,h.X)(1),(0,M.K)(this.httpError))}updateSupplyTransactions(l,i,u,_,d,f,p,c,N,T,g,A,C,Z,E,P,D,U,x){return this.httpClient.put(this.url+"/SupplyTransactions/update",{user:l,SNTRAN:i,SNSTOR:u,SNSSFX:_,SNCONS:d,SNCARR:f,SNDOCT:p,SNDOCN:c,SNTYPE:N,SNLOCN:T,SNRQTY:g,SNXQTY:A,SNUQTY:C,SNPOOL:Z,SNINVP:E,SNREAS:P,SNSPID:D,SNNUMB:U,SNSTAT:x}).pipe((0,h.X)(1),(0,M.K)(this.httpError))}getSupplyTransactionsInquiry(l,i,u,_){return this.httpClient.get(this.url+`/SupplyTransactions/read?user=${l}&SNSTOR=${i}&SNSSFX=${u}&SNTRAN=${_}`)}DeleteSupplytransaction(l,i){return this.httpClient.delete(this.url+`/SupplyTransactions/delete?user=${l}&SNTRAN=${i}`)}httpError(l){let i="";return i=l.error instanceof ErrorEvent?l.error.message:`Error Code: ${l.status}\nMessage: ${l.message}`,console.log(i),(0,O._)(()=>new Error(i))}}return S.\u0275fac=function(l){return new(l||S)(t.LFG(r.eN))},S.\u0275prov=t.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},19344:(F,y,n)=>{n.r(y),n.d(y,{WwSupplytransactionsAddComponent:()=>rt});var r=n(24006),h=n(65412),M=n(35226),O=n.n(M),v=n(70879),t=n(94650),W=n(95190),S=n(19132),V=n(36895),l=n(97392),i=n(4859),u=n(59549),_=n(44144),d=n(84385),f=n(3238),p=n(73546);function c(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Storer Number is required. "),t.qZA())}function N(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be a number between 1 to 4 digits. "),t.qZA())}function T(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 2 characters. "),t.qZA())}function g(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Consignee Code is required for Document Type 'I'. "),t.qZA())}function A(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 1 to 12 characters. "),t.qZA())}function C(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",8)(1,"mat-label"),t._uU(2,"Consignee Code"),t.qZA(),t._UZ(3,"input",28),t.YNc(4,g,2,0,"mat-error",10),t.YNc(5,A,2,0,"mat-error",10),t.qZA()),2&a){const e=t.oxw();let o,m;t.xp6(4),t.Q6J("ngIf",null==(o=e.form.get("SNCONS"))?null:o.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(m=e.form.get("SNCONS"))?null:m.hasError("pattern"))}}function Z(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 1 to 15 characters. "),t.qZA())}function E(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",8)(1,"mat-label"),t._uU(2,"Carrier Code"),t.qZA(),t._UZ(3,"input",29),t.YNc(4,Z,2,0,"mat-error",10),t.qZA()),2&a){const e=t.oxw();let o;t.xp6(4),t.Q6J("ngIf",null==(o=e.form.get("SNCARR"))?null:o.hasError("pattern"))}}function P(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Supply Type is required. "),t.qZA())}function D(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be numbers or uppercase characters. "),t.qZA())}function U(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Document Type is required. "),t.qZA())}function x(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be a number between 1 to 9 digits. "),t.qZA())}function X(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",8)(1,"mat-label"),t._uU(2,"Document No"),t.qZA(),t._UZ(3,"input",30),t.YNc(4,x,2,0,"mat-error",10),t.qZA()),2&a){const e=t.oxw();let o;t.xp6(4),t.Q6J("ngIf",null==(o=e.form.get("SNDOCN"))?null:o.hasError("pattern"))}}function z(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Pool Affected is required for Document Types 'O' and 'A'. "),t.qZA())}function j(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Whose Invoice is required for Document Types 'O', 'A', and 'I'. "),t.qZA())}function G(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 1 to 2 uppercase letters. "),t.qZA())}function H(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be 1 to 30 uppercase alphanumeric characters. "),t.qZA())}function tt(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Must be a number between 1 to 3 digits. "),t.qZA())}let rt=(()=>{class a{constructor(e,o,m,I,q){this.SupplyTransactions=e,this.data=o,this.dialogRef=m,this.router=I,this.fb=q,this.user=localStorage.getItem("userName")}ngOnInit(){this.form=this.fb.group({SNSTOR:["",[r.kI.required,r.kI.pattern("[0-9]{1,4}")]],SNSSFX:["",[r.kI.maxLength(2),r.kI.pattern("^[a-zA-Z]{1,}$")]],SNCONS:["",[r.kI.maxLength(12),r.kI.pattern("^[a-zA-Z]{1,}$")]],SNCARR:["",[r.kI.maxLength(15),r.kI.pattern("^[a-zA-Z]{1,}$")]],SNTYPE:["",[r.kI.required,r.kI.maxLength(10),r.kI.pattern("^[a-zA-Z]{1,}$")]],SNDOCT:["",[r.kI.required,r.kI.maxLength(1),r.kI.pattern("^[A-Z]{1}$")]],SNDOCN:["",r.kI.pattern("[0-9]{1,9}")],SNLOCN:["",[r.kI.pattern(/^[A-Z0-9]{1,16}$/)]],SNRQTY:["",r.kI.pattern("[0-9]{1,4}")],SNXQTY:["",r.kI.pattern("[0-9]{1,4}")],SNUQTY:["",r.kI.pattern("[0-9]{1,4}")],SNPOOL:["",[r.kI.required,r.kI.pattern("^[SCT]{1}$")]],SNINVP:["",[r.kI.required,r.kI.pattern("^[SCT]{1}$")]],SNREAS:["",[r.kI.maxLength(2),r.kI.pattern("^[a-zA-Z]{1,}$")]],SNSPID:["",[r.kI.maxLength(30),r.kI.pattern("^[a-zA-Z0-9]{1,}$")]],SNNUMB:["",[r.kI.pattern(/^\d{1,3}$/)]],SNSTAT:"AC"}),this.setupDocumentTypeValidation()}ngOnDestroy(){this.SupplyTransactionsSubscription&&this.SupplyTransactionsSubscription.unsubscribe()}setupDocumentTypeValidation(){this.form.get("SNDOCT")?.valueChanges.subscribe(e=>{this.resetValidation(),"O"===e?(this.form.get("SNTYPE")?.setValidators([r.kI.required]),this.form.get("SNDOCN")?.setValidators([r.kI.required]),this.form.get("SNPOOL")?.setValidators([r.kI.required]),this.form.get("SNINVP")?.setValidators([r.kI.required])):"A"===e?(this.form.get("SNTYPE")?.setValidators([r.kI.required]),this.form.get("SNPOOL")?.setValidators([r.kI.required]),this.form.get("SNINVP")?.setValidators([r.kI.required])):"I"===e&&(this.form.get("SNCONS")?.setValidators([r.kI.required]),this.form.get("SNCARR")?.setValidators([r.kI.required]),this.form.get("SNTYPE")?.setValidators([r.kI.required]),this.form.get("SNDOCN")?.setValidators([r.kI.required]),this.form.get("SNPOOL")?.setValidators([r.kI.required]),this.form.get("SNINVP")?.setValidators([r.kI.required])),this.form.get("SNTYPE")?.updateValueAndValidity(),this.form.get("SNDOCN")?.updateValueAndValidity(),this.form.get("SNPOOL")?.updateValueAndValidity(),this.form.get("SNINVP")?.updateValueAndValidity(),this.form.get("SNCONS")?.updateValueAndValidity(),this.form.get("SNCARR")?.updateValueAndValidity()})}resetValidation(){this.form.get("SNTYPE")?.clearValidators(),this.form.get("SNDOCN")?.clearValidators(),this.form.get("SNPOOL")?.clearValidators(),this.form.get("SNINVP")?.clearValidators(),this.form.get("SNCONS")?.clearValidators(),this.form.get("SNCARR")?.clearValidators()}addSupplytransactions(){if(this.form.invalid)return void O().fire("Please fill all required fields","","error");const e=this.form.value;e.SNDOCT=e.SNDOCT.toUpperCase(),e.SNCONS=e.SNCONS.toUpperCase(),e.SNCARR=e.SNCARR.toUpperCase(),e.SNTYPE=e.SNTYPE.toUpperCase(),e.SNPOOL=e.SNPOOL.toUpperCase(),e.SNINVP=e.SNINVP.toUpperCase(),this.SupplyTransactionsSubscription&&this.SupplyTransactionsSubscription.unsubscribe(),this.SupplyTransactionsSubscription=this.SupplyTransactions.createSupplyTransactions(this.user,e.SNSTOR,e.SNSSFX,e.SNCONS,e.SNCARR,e.SNDOCT,e.SNDOCN,e.SNTYPE,e.SNLOCN,e.SNRQTY,e.SNXQTY,e.SNUQTY,e.SNPOOL,e.SNINVP,e.SNREAS,e.SNSPID,e.SNNUMB,e.SNSTAT).subscribe(o=>{const I=JSON.parse(o[0].data[o[0].data.length-1].value).returnedData.message;"Record Created Successfully"===I?(this.successMessage("Supplytransactions created successfully"),this.closeDialog(),this.router.navigate(["/main-nav/supply-transactions/read"])):this.failureMessage(I)})}successMessage(e){O().fire(e,"","success")}failureMessage(e){O().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(W.c),t.Y36(h.WI),t.Y36(h.so),t.Y36(S.F0),t.Y36(r.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ww-supplytransactions-add"]],standalone:!0,features:[t.jDz],decls:86,vars:16,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","SNSTOR"],[4,"ngIf"],["matInput","","formControlName","SNSSFX",2,"text-transform","uppercase"],["appearance","outline","class","full-width",4,"ngIf"],["matInput","","formControlName","SNTYPE",2,"text-transform","uppercase"],["formControlName","SNDOCT"],["value","I"],["value","O"],["value","A"],["formControlName","SNPOOL"],["value","S"],["value","C"],["value","T"],["formControlName","SNINVP"],["matInput","","formControlName","SNREAS",2,"text-transform","uppercase"],["matInput","","formControlName","SNSPID",2,"text-transform","uppercase"],["matInput","","formControlName","SNNUMB",2,"text-transform","uppercase"],["matInput","","formControlName","SNSTAT",2,"text-transform","uppercase",3,"disabled"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"],["matInput","","formControlName","SNCONS",2,"text-transform","uppercase"],["matInput","","formControlName","SNCARR",2,"text-transform","uppercase"],["matInput","","formControlName","SNDOCN",2,"text-transform","uppercase"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Supply Transaction"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Storer Number"),t.qZA(),t._UZ(15,"input",9),t.YNc(16,c,2,0,"mat-error",10),t.YNc(17,N,2,0,"mat-error",10),t.qZA(),t.TgZ(18,"mat-form-field",8)(19,"mat-label"),t._uU(20,"Storer Suffix"),t.qZA(),t._UZ(21,"input",11),t.YNc(22,T,2,0,"mat-error",10),t.qZA(),t.YNc(23,C,6,2,"mat-form-field",12),t.YNc(24,E,5,1,"mat-form-field",12),t.TgZ(25,"mat-form-field",8)(26,"mat-label"),t._uU(27,"Supply Type"),t.qZA(),t._UZ(28,"input",13),t.YNc(29,P,2,0,"mat-error",10),t.YNc(30,D,2,0,"mat-error",10),t.qZA(),t.TgZ(31,"mat-form-field",8)(32,"mat-label"),t._uU(33,"Document Type"),t.qZA(),t.TgZ(34,"mat-select",14)(35,"mat-option",15),t._uU(36,"I"),t.qZA(),t.TgZ(37,"mat-option",16),t._uU(38,"O"),t.qZA(),t.TgZ(39,"mat-option",17),t._uU(40,"A"),t.qZA()(),t.YNc(41,U,2,0,"mat-error",10),t.qZA(),t.YNc(42,X,5,1,"mat-form-field",12),t.TgZ(43,"mat-form-field",8)(44,"mat-label"),t._uU(45,"Pool Affected"),t.qZA(),t.TgZ(46,"mat-select",18)(47,"mat-option",19),t._uU(48,"S"),t.qZA(),t.TgZ(49,"mat-option",20),t._uU(50,"C"),t.qZA(),t.TgZ(51,"mat-option",21),t._uU(52,"T"),t.qZA()(),t.YNc(53,z,2,0,"mat-error",10),t.qZA(),t.TgZ(54,"mat-form-field",8)(55,"mat-label"),t._uU(56,"Whose Invoice"),t.qZA(),t.TgZ(57,"mat-select",22)(58,"mat-option",19),t._uU(59,"S"),t.qZA(),t.TgZ(60,"mat-option",20),t._uU(61,"C"),t.qZA(),t.TgZ(62,"mat-option",21),t._uU(63,"T"),t.qZA()(),t.YNc(64,j,2,0,"mat-error",10),t.qZA(),t.TgZ(65,"mat-form-field",8)(66,"mat-label"),t._uU(67,"Reason Code"),t.qZA(),t._UZ(68,"input",23),t.YNc(69,G,2,0,"mat-error",10),t.qZA(),t.TgZ(70,"mat-form-field",8)(71,"mat-label"),t._uU(72,"Supply ID Number"),t.qZA(),t._UZ(73,"input",24),t.YNc(74,H,2,0,"mat-error",10),t.qZA(),t.TgZ(75,"mat-form-field",8)(76,"mat-label"),t._uU(77,"Rate Number"),t.qZA(),t._UZ(78,"input",25),t.YNc(79,tt,2,0,"mat-error",10),t.qZA(),t.TgZ(80,"mat-form-field",8)(81,"mat-label"),t._uU(82,"Status"),t.qZA(),t._UZ(83,"input",26),t.qZA()()(),t.TgZ(84,"button",27),t.NdJ("click",function(){return o.addSupplytransactions()}),t._uU(85,"Add"),t.qZA()()()()),2&e){let m,I,q,L,Y,b,k,w,R,B,K,J,Q,$;t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("ngIf",null==(m=o.form.get("SNSTOR"))?null:m.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(I=o.form.get("SNSTOR"))?null:I.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==(q=o.form.get("SNSSFX"))?null:q.hasError("pattern")),t.xp6(1),t.Q6J("ngIf","I"===(null==(L=o.form.get("SNDOCT"))?null:L.value)),t.xp6(1),t.Q6J("ngIf","I"===(null==(Y=o.form.get("SNDOCT"))?null:Y.value)),t.xp6(5),t.Q6J("ngIf",null==(b=o.form.get("SNTYPE"))?null:b.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(k=o.form.get("SNTYPE"))?null:k.hasError("pattern")),t.xp6(11),t.Q6J("ngIf",null==(w=o.form.get("SNDOCT"))?null:w.hasError("required")),t.xp6(1),t.Q6J("ngIf","O"===(null==(R=o.form.get("SNDOCT"))?null:R.value)||"I"===(null==(R=o.form.get("SNDOCT"))?null:R.value)),t.xp6(11),t.Q6J("ngIf",null==(B=o.form.get("SNPOOL"))?null:B.hasError("required")),t.xp6(11),t.Q6J("ngIf",null==(K=o.form.get("SNINVP"))?null:K.hasError("required")),t.xp6(5),t.Q6J("ngIf",null==(J=o.form.get("SNREAS"))?null:J.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==(Q=o.form.get("SNSPID"))?null:Q.hasError("pattern")),t.xp6(5),t.Q6J("ngIf",null==($=o.form.get("SNNUMB"))?null:$.hasError("pattern")),t.xp6(4),t.Q6J("disabled",!0)}},dependencies:[v.m,V.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.Hw,i.lW,u.TO,u.KE,u.hX,_.Nt,d.gD,f.ey,p.a8,p.dk,p.dn,p.n5]}),a})()}}]);