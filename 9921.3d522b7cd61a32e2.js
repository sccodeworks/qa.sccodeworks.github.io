"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[9921],{39505:(B,C,i)=>{i.d(C,{L:()=>c});var l=i(24006),p=i(59549),E=i(69751),v=i(68675),T=i(54004),t=i(94650),f=i(36895),h=i(47957),L=i(3238),S=i(44144);function A(m,d){if(1&m&&(t.TgZ(0,"mat-option",4),t._uU(1),t.qZA()),2&m){const n=d.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}let c=(()=>{class m{constructor(n){this.fb=n,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=s=>{},this.onChange=s=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new E.y,this.filteredOptions=this.control.valueChanges.pipe((0,v.O)(this.value),(0,T.U)(s=>this._filter(s)))}setDescribedByIds(n){}onContainerClick(n){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(n){null!=n&&(this.control.setValue(n),this.value=n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this.disabled=n}_filter(n){if(null==n||0==n.length)return this.options;const s=n.toLowerCase(),g=this.options.filter(R=>R.toLowerCase().includes(s));return!this.disabled&&1===g.length&&this.control.value!=g[0]&&n.length>=(this.previousValue?.length??0)&&this.control.setValue(g[0]),this.onChange(this.control.value),this.previousValue=this.control.value,g}}return m.\u0275fac=function(n){return new(n||m)(t.Y36(l.qu))},m.\u0275cmp=t.Xpm({type:m,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(n,s){2&n&&t.uIk("aria-describedby",s.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[t._Bn([{provide:l.JU,multi:!0,useExisting:m},{provide:p.Eo,useExisting:m}],[{provide:l.gN,useExisting:l.sg}])],decls:8,vars:8,consts:[[3,"appearance"],["matInput","",3,"id","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,s){if(1&n&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2),t.qZA(),t._UZ(3,"input",1),t.TgZ(4,"mat-autocomplete",null,2),t.YNc(6,A,2,2,"mat-option",3),t.ALo(7,"async"),t.qZA()()),2&n){const g=t.MAs(5);t.Q6J("appearance",s.appearance),t.xp6(2),t.Oqu(s.label),t.xp6(1),t.Q6J("id",s.id)("formControl",s.control)("matAutocomplete",g),t.xp6(3),t.Q6J("ngForOf",t.lcZ(7,6,s.filteredOptions))}},dependencies:[f.sg,l.Fj,l.JJ,l.oH,h.XC,h.ZL,L.ey,p.KE,p.hX,S.Nt,f.Ov]}),m})()},89921:(B,C,i)=>{i.r(C),i.d(C,{LedgercodeRevReportComponent:()=>X});var l=i(24006),p=i(35226),E=i.n(p),v=i(70879),T=i(50692),t=i(94650),f=i(19132),h=i(46546),L=i(36895),S=i(97392),A=i(4859),c=i(59549),m=i(44144),d=i(73546),n=i(39505);function s(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Ledger Code is required. "),t.qZA())}function g(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Ledger Code must be up to 4 digits. "),t.qZA())}function R(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Ledger Code Suffix is required. "),t.qZA())}function x(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Ledger Code Suffix must be up to 4 digits. "),t.qZA())}function V(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Start Date is required. "),t.qZA())}function J(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use DD-MM-YYYY. "),t.qZA())}function q(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," End Date is required. "),t.qZA())}function Y(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use DD-MM-YYYY. "),t.qZA())}function K(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Starting Customer must be a number with up to 4 digits or *FIRST. "),t.qZA())}function W(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,' Ending Customer must be a number with up to 4 digits or *LAST". '),t.qZA())}function y(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,' Ending Building Number must be a number with up to 3 digits or *"LAST. '),t.qZA())}function Q(o,u){1&o&&(t.TgZ(0,"div"),t._uU(1,"Email is required."),t.qZA())}function F(o,u){1&o&&(t.TgZ(0,"div"),t._uU(1,"Please enter a valid email address."),t.qZA())}function $(o,u){if(1&o&&(t.TgZ(0,"mat-error"),t.YNc(1,Q,2,0,"div",9),t.YNc(2,F,2,0,"div",9),t.qZA()),2&o){const e=t.oxw(2);let r,a;t.xp6(1),t.Q6J("ngIf",null==(r=e.form.get("Email"))||null==r.errors?null:r.errors.required),t.xp6(1),t.Q6J("ngIf",null==(a=e.form.get("Email"))||null==a.errors?null:a.errors.email)}}function j(o,u){if(1&o&&(t.TgZ(0,"mat-form-field",14)(1,"mat-label"),t._uU(2,"Email:"),t.qZA(),t._UZ(3,"input",25),t.YNc(4,$,3,2,"mat-error",9),t.qZA()),2&o){const e=t.oxw();let r;t.xp6(4),t.Q6J("ngIf",(null==(r=e.form.get("Email"))?null:r.invalid)&&((null==(r=e.form.get("Email"))?null:r.dirty)||(null==(r=e.form.get("Email"))?null:r.touched)))}}let X=(()=>{class o{constructor(e,r,a,_){this.fb=e,this.router=r,this.route=a,this.LedgerCodesService=_,this.StartingCustomerOptions=["*FIRST"],this.EndingCustomerOptions=["*LAST"],this.StartingBuildingNumberOptions=["*FIRST"],this.EndingBuildingNumberOptions=["*LAST"],this.OutputOptions=["*PRINTER","*DISPLAY","*EMAIL"],this.user=localStorage.getItem("userName")}ngOnInit(){this.element=history.state,console.log(this.element),this.form=this.fb.group({LedgerCode:[this.element.LELEGC,[l.kI.required,this.specificPatternValidator()]],LedgerCodeSuffix:[this.element.LELEGS,[l.kI.required,this.specificPatternValidator()]],StartDate:["",[l.kI.required,this.dateValidator()]],EndDate:["",[l.kI.required,this.dateValidator()]],StartingCustomer:["",[this.startingCustomerValidator()]],StartingCustomerSuffix:"",StartingCustomerSuffix2:"",EndingCustomer:["",[this.endingCustomerValidator()]],EndingCustomerSuffix:"",EndingCustomerSuffix2:"",StartingBuildingNumber:"",EndingBuildingNumber:["",[this.endingBuildingNumber()]],OutPut:"",Email:["",[this.emailValidator()]]}),this.form.get("OutPut")?.valueChanges.subscribe(e=>{this.shouldDisplayEmailField()||this.form.get("Email")?.setValue("")}),this.form.get("StartingCustomer")?.valueChanges.subscribe(e=>{"*FIRST"===e&&this.form.get("StartingCustomer")?.setValue("0",{emitEvent:!1})}),this.form.get("EndingCustomer")?.valueChanges.subscribe(e=>{"*LAST"===e&&this.form.get("EndingCustomer")?.setValue("9999",{emitEvent:!1})}),this.form.get("EndingBuildingNumber")?.valueChanges.subscribe(e=>{"*LAST"===e&&this.form.get("EndingBuildingNumber")?.setValue("999",{emitEvent:!1})})}shouldDisplayEmailField(){const e=this.form.get("OutPut")?.value;return"*BOTH"===e||"*EMAIL"===e}maxLengthValidator(e){return r=>{const a=r.value;return a&&a.length<=e?null:{maxLengthExceeded:!0}}}alphanumericValidator(){return e=>/^[a-zA-Z0-9 *]*$/.test(e.value)?null:{invalidCharacter:!0}}specificPatternValidator(){return e=>/^\d{0,4}$/.test(e.value)?null:{invalidPattern:!0}}emailValidator(){return e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)?null:{invalidEmail:!0}}dateValidator(){return e=>/^\d{4}-\d{2}-\d{2}$/.test(e.value)?null:{invalidDate:!0}}startingCustomerValidator(){return e=>{const r=e.value;return/^\d{0,4}$/.test(r)&&r.length<=4||"*FIRST"===r?null:{invalidStartingCustomer:!0}}}endingCustomerValidator(){return e=>{const r=e.value;return/^\d{0,4}$/.test(r)&&r.length<=4||"*LAST"===r?null:{invalidEndingCustomer:!0}}}endingBuildingNumber(){return e=>{const r=e.value;return/^\d{0,3}$/.test(r)&&r.length<=4||"*LAST"===r?null:{invalidEndingBuildingNumber:!0}}}RevenueDistReport(){const e=this.form.value;"*FIRST"===e.StartingCustomer&&(e.StartingCustomer="0"),"*LAST"===e.EndingCustomer&&(e.EndingCustomer="9999"),"*LAST"===e.EndingBuildingNumber&&(e.EndingBuildingNumber="999"),this.LedgerCodesServiceSubscription&&this.LedgerCodesServiceSubscription.unsubscribe(),this.LedgerCodesServiceSubscription=this.LedgerCodesService.RevenueDistReport(e.LedgerCode,e.LedgerCodeSuffix,e.StartDate,e.EndDate,e.StartingCustomer,e.StartingCustomerSuffix,e.StartingCustomerSuffix2,e.EndingCustomer,e.EndingCustomerSuffix,e.EndingCustomerSuffix2,e.StartingBuildingNumber,e.EndingBuildingNumber,e.OutPut,e.Email).subscribe(r=>{const _=r[0].data[r[0].data.length-1].value;"Successfully Submitted"===_?(this.successMessage(_),this.router.navigate(["/main-nav/ledgerCode/revenue-report"])):this.failureMessage(_)})}successMessage(e){E().fire(e,"","success")}failureMessage(e){E().fire(e,"","error")}onBack(){this.router.navigate(["/main-nav/ledgerCode/read"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l.qu),t.Y36(f.F0),t.Y36(f.gz),t.Y36(h.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ledgercode-rev-report"]],standalone:!0,features:[t.jDz],decls:62,vars:18,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","LedgerCode"],[4,"ngIf"],["matInput","","formControlName","LedgerCodeSuffix"],["type","date","matInput","","formControlName","StartDate"],["type","date","matInput","","formControlName","EndDate"],["appearance","outline","formControlName","StartingCustomer","label","Starting Customer ",3,"options"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","StartingCustomerSuffix"],["matInput","","formControlName","StartingCustomerSuffix2"],["appearance","outline","formControlName","EndingCustomer","label","Ending Customer ",3,"options"],["matInput","","formControlName","EndingCustomerSuffix"],["matInput","","formControlName","EndingCustomerSuffix2"],["appearance","outline","formControlName","StartingBuildingNumber","label","Starting Building Number  ",3,"options"],["appearance","outline","formControlName","EndingBuildingNumber","label","Ending Building Number  ",3,"options"],["appearance","outline","formControlName","OutPut","label","Output Type",1,"full-width",3,"options"],["appearance","outline","class","full-width2",4,"ngIf"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"],["matInput","","formControlName","Email","placeholder","Enter your email"]],template:function(e,r){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return r.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," 12 Ledger Codes Revenue Report "),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Ledger Code "),t.qZA(),t._UZ(14,"input",8),t.YNc(15,s,2,0,"mat-error",9),t.YNc(16,g,2,0,"mat-error",9),t.qZA(),t.TgZ(17,"mat-form-field",7)(18,"mat-label"),t._uU(19,"Ledger Code Suffix "),t.qZA(),t._UZ(20,"input",10),t.YNc(21,R,2,0,"mat-error",9),t.YNc(22,x,2,0,"mat-error",9),t.qZA(),t.TgZ(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"Start Date:"),t.qZA(),t._UZ(26,"input",11),t.YNc(27,V,2,0,"mat-error",9),t.YNc(28,J,2,0,"mat-error",9),t.qZA(),t.TgZ(29,"mat-form-field",7)(30,"mat-label"),t._uU(31,"End Date"),t.qZA(),t._UZ(32,"input",12),t.YNc(33,q,2,0,"mat-error",9),t.YNc(34,Y,2,0,"mat-error",9),t.qZA(),t._UZ(35,"custom-input-autocomplete",13),t.YNc(36,K,2,0,"mat-error",9),t.TgZ(37,"mat-form-field",14)(38,"mat-label"),t._uU(39," Starting Customer Suffix "),t.qZA(),t._UZ(40,"input",15),t.qZA(),t.TgZ(41,"mat-form-field",14)(42,"mat-label"),t._uU(43," Starting Customer Suffix II "),t.qZA(),t._UZ(44,"input",16),t.qZA(),t._UZ(45,"custom-input-autocomplete",17),t.YNc(46,W,2,0,"mat-error",9),t.TgZ(47,"mat-form-field",14)(48,"mat-label"),t._uU(49,"Ending Customer Suffix"),t.qZA(),t._UZ(50,"input",18),t.qZA(),t.TgZ(51,"mat-form-field",14)(52,"mat-label"),t._uU(53,"Ending Customer Suffix II"),t.qZA(),t._UZ(54,"input",19),t.qZA(),t._UZ(55,"custom-input-autocomplete",20)(56,"custom-input-autocomplete",21),t.YNc(57,y,2,0,"mat-error",9),t._UZ(58,"custom-input-autocomplete",22),t.YNc(59,j,5,1,"mat-form-field",23),t.qZA()(),t.TgZ(60,"button",24),t.NdJ("click",function(){return r.RevenueDistReport()}),t._uU(61,"Submit"),t.qZA()()()()),2&e){let a,_,Z,I,O,D,b,U,P,M,N;t.xp6(8),t.Q6J("formGroup",r.form),t.xp6(7),t.Q6J("ngIf",null==(a=r.form.get("LedgerCode"))?null:a.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(_=r.form.get("LedgerCode"))?null:_.hasError("invalidPattern")),t.xp6(5),t.Q6J("ngIf",null==(Z=r.form.get("LedgerCodeSuffix"))?null:Z.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(I=r.form.get("LedgerCodeSuffix"))?null:I.hasError("invalidPattern")),t.xp6(5),t.Q6J("ngIf",null==(O=r.form.get("StartDate"))?null:O.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(D=r.form.get("StartDate"))?null:D.hasError("invalidDate")),t.xp6(5),t.Q6J("ngIf",null==(b=r.form.get("EndDate"))?null:b.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(U=r.form.get("EndDate"))?null:U.hasError("invalidDate")),t.xp6(1),t.Q6J("options",r.StartingCustomerOptions),t.xp6(1),t.Q6J("ngIf",null==(P=r.form.get("StartingCustomer"))?null:P.hasError("invalidStartingCustomer")),t.xp6(9),t.Q6J("options",r.EndingCustomerOptions),t.xp6(1),t.Q6J("ngIf",null==(M=r.form.get("EndingCustomer"))?null:M.hasError("invalidEndingCustomer")),t.xp6(9),t.Q6J("options",r.StartingBuildingNumberOptions),t.xp6(1),t.Q6J("options",r.EndingBuildingNumberOptions),t.xp6(1),t.Q6J("ngIf",null==(N=r.form.get("EndingBuildingNumber"))?null:N.hasError("invalidEndingBuildingNumber")),t.xp6(1),t.Q6J("options",r.OutputOptions),t.xp6(1),t.Q6J("ngIf",r.shouldDisplayEmailField())}},dependencies:[v.m,L.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,S.Hw,A.lW,c.TO,c.KE,c.hX,m.Nt,d.a8,d.dk,d.dn,d.n5,T.j,n.L]}),o})()}}]);