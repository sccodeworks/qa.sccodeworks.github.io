"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[8410],{8410:(at,g,r)=>{r.r(g),r.d(g,{StorageinvoiceInquiryTypeVComponent:()=>nt});var v=r(35226),d=r.n(v),_=r(36895),h=r(98739),u=r(7155),y=r(70879),t=r(94650),T=r(19132),I=r(11240),m=r(24006),A=r(65412),C=r(97392),f=r(28255),Z=r(4859),S=r(59549),D=r(44144),p=r(73546),E=r(10266),b=r(90455);function M(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchStorer())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function q(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchStorer())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function U(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(1,"mat-slide-toggle",40),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).$implicit;return t.KtG(s.isActive=a)})("change",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.toggleColumn(l))}),t._uU(2),t.qZA(),t._UZ(3,"br"),t.qZA()}if(2&i){const e=o.$implicit;t.xp6(1),t.Q6J("ngModel",e.isActive),t.xp6(1),t.hij(" ",e.name," ")}}function N(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",41),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getInquireBySearch(a.form.value))}),t.TgZ(1,"div",42)(2,"div",43)(3,"mat-form-field",44)(4,"mat-label"),t._uU(5,"Date "),t.qZA(),t._UZ(6,"input",45),t.qZA(),t.TgZ(7,"mat-form-field",44)(8,"mat-label"),t._uU(9,"Time"),t.qZA(),t._UZ(10,"input",46),t.qZA(),t.TgZ(11,"mat-form-field",44)(12,"mat-label"),t._uU(13,"Position to Item"),t.qZA(),t._UZ(14,"input",47),t.qZA(),t.TgZ(15,"div",48)(16,"label",49),t._uU(17,"Generated"),t.qZA(),t.TgZ(18,"div",50)(19,"mat-form-field",44)(20,"mat-label"),t._uU(21,"Generated Date "),t.qZA(),t._UZ(22,"input",51),t.qZA(),t.TgZ(23,"mat-form-field",44)(24,"mat-label"),t._uU(25,"Generated Time"),t.qZA(),t._UZ(26,"input",52),t.qZA()()(),t.TgZ(27,"mat-form-field",44)(28,"mat-label"),t._uU(29," Storer "),t.qZA(),t._UZ(30,"input",53),t.qZA()()(),t.TgZ(31,"button",54),t._uU(32," Search "),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(22),t.Q6J("value",e.GeneratedDate),t.xp6(4),t.Q6J("value",e.GeneratedTime)}}function x(i,o){1&i&&(t.TgZ(0,"th",55),t._uU(1," Item "),t.qZA())}function O(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",e.WKITDSC," ")}}function P(i,o){1&i&&(t.TgZ(0,"th",55),t._uU(1," Aged Balance "),t.qZA())}function R(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.AsE(" ",0!==e.WK1BALN?e.WK1BALN:""," ",0!==e.WK1BUNT?e.WK1BUNT:""," ")}}function B(i,o){1&i&&(t.TgZ(0,"th",55),t._uU(1," Aged Weight "),t.qZA())}function W(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.AsE(" ",t.xi3(2,2,e.WK1WGHT,"1.2-2")," ",e.WK1WUNT," ")}}function K(i,o){1&i&&(t.TgZ(0,"th",55),t._uU(1," Days Old "),t.qZA())}function V(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij("",0!==e.WKS1DAYS?e.WKS1DAYS:""," ")}}function L(i,o){1&i&&(t.TgZ(0,"th",55),t._uU(1," Charge Amount "),t.qZA())}function F(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.hij(" ",0!==e.WKAMT?e.WKAMT:"","")}}function w(i,o){1&i&&(t.TgZ(0,"th",55),t._uU(1," Minimum charge "),t.qZA())}function Y(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.WK1MIN)}}function G(i,o){1&i&&(t.TgZ(0,"th",57),t._uU(1,"Rate"),t.qZA())}function J(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(0!==e.WKRATE?e.WKRATE:"")}}function H(i,o){1&i&&(t.TgZ(0,"th",57),t._uU(1,"Invoiced From"),t.qZA())}function Q(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.WKS1FDAT)}}function k(i,o){1&i&&(t.TgZ(0,"th",57),t._uU(1,"Invoiced To"),t.qZA())}function z(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.WKS1TDAT)}}function $(i,o){1&i&&(t.TgZ(0,"th",57),t._uU(1,"Aged Date "),t.qZA())}function X(i,o){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.xp6(1),t.Oqu(e.WKS1DATE)}}function j(i,o){1&i&&t._UZ(0,"tr",58)}function tt(i,o){1&i&&t._UZ(0,"tr",59)}function et(i,o){1&i&&(t.TgZ(0,"div",60),t._uU(1," Invoice exceeds reasonable amount for the storer, reasonable storer amount set at $500.00 "),t.qZA())}const it=function(){return[8,16,24]};let nt=(()=>{class i{constructor(e,n,a,l,s,c){this.router=e,this.StorerServiceService=n,this.fb=a,this.route=l,this.matDialog=s,this.cdr=c,this.StorerRead="/main-nav/storer",this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.duplicateSource=[],this.displayedColumns=["Item","AgedBalance","AgedWeight","DaysOld","ChargeAmount","Minimumcharge"],this.dataSource=new u.by,this.user=localStorage.getItem("userName")||"",this.INITIAL_PAGE=1,this.DEFAULT_PAGE_SIZE=8,this.editedRows=[],this.searchTextDisplay=!0,this.columnShowHideList=[],this.selectedRow=[],this.period="",this.totalAmountDue=0,this.total=0,this.item=""}ngOnInit(){this.element=history.state;const e=new Date,n=(0,_.p6)(e,"yyyy-MM-dd","en-US"),a=(0,_.p6)(e,"HH:mm","en-US");this.S1STOR=this.element.STORE,this.S1SSFX=this.element.STSFX,this.STNAME=this.element.STNAME,this.form=this.fb.group({Date:[{value:n,disabled:!0}],Time:[{value:a,disabled:!0}],S1STOR:[{value:this.element.STORE+"\xa0"+this.element.STNAME,disabled:!0}],S1SSFX:[{value:this.S1SSFX,disabled:!0}],INVNO:[{value:"",disabled:!0}],GENDT:[{value:"",disabled:!0}],GENTM:[{value:"",disabled:!0}],WKITEM:[this.item],SNAME:[{value:"",disabled:!0}]}),this.initializeColumnProperties(),this.editedRows=[],this.getStorageInvoice(this.pageSize,this.INITIAL_PAGE),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`}ngOnDestroy(){this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe()}createFilter(){return(e,n)=>{const a=JSON.parse(n);return Object.keys(a).every(l=>e[l]?.toString().toLowerCase().includes(a[l].toLowerCase())||!1)}}searchStorer(){this.searchTextDisplay=1!=this.searchTextDisplay}getInquireBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,this.INITIAL_PAGE)}resetSearch(){this.form.reset(),this.currentFilters=null,this.paginator.firstPage(),this.getStorageInvoice(this.pageSize,this.INITIAL_PAGE)}onPaginateChange(e){this.pageSize=e.pageSize,this.getStorageInvoice(e.pageSize,e.pageIndex+1)}toggleColumn(e){if(e.isActive)this.displayedColumns.splice(e.position>this.displayedColumns.length-1?this.displayedColumns.length-1:e.position,0,e.name);else{let n=this.displayedColumns.indexOf(e.name);n>-1&&this.displayedColumns.splice(n,1)}}initializeColumnProperties(){this.displayedColumns.forEach((e,n)=>{"Actions"!=e&&"Rate"!=e&&this.columnShowHideList.push({position:n,name:e,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Rate",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"InvoicedFrom",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"InvoicedTo",isActive:!1}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"AgedDate",isActive:!1})}rowClick(e){this.selectedRow=e}getStorageInvoice(e,n){const l=this.form.controls.WKITEM.value||"";this.StorageInvoicesSubscription&&this.StorageInvoicesSubscription.unsubscribe(),this.StorageInvoicesSubscription=this.StorerServiceService.StorageInvoiceInquiryVtype(this.user,this.element.STORE,this.element.STSFX,"","0",l,e,n).subscribe(s=>{console.log(s);var c=JSON.parse(s[0].data[1]?.value);this.dataSource.data=c.returnedData,this.totalRecords=c.TotalRecords,this.GeneratedDate=c["Generated Date"],this.GeneratedTime=c["Generated Time"],this.totalAmountDue=c["Total Amount Due"],this.item=c?.WKITEM||"",this.form.patchValue({WKITEM:this.item})})}onPrintAccessInvoice(){const n=this.element.STORE,a=this.form.get("S1SSFX")?.value;this.StorerServiceService.PrintStorageInvoice("P",n,a,"").subscribe({next:s=>{console.log("Print Access Invoice response:",s);const c=s.msg||"Submitted Successfully";"Submitted Successfully"===c?this.successMessage(c):this.failureMessage(c)},error:s=>{console.error("Print Access Invoice error:",s),this.failureMessage("Submission Failed")}})}onPostAccessInvoice(){const n=this.element.STORE,a=this.form.get("S1SSFX")?.value;this.StorerServiceService.PostStorageInvoice("U",n,a,"").subscribe({next:s=>{console.log("Post Access Invoice response:",s);const c=s.msg||"Submitted Successfully";"Submitted Successfully"===c?this.successMessage(c):this.failureMessage(c)},error:s=>{console.error("Post Access Invoice error:",s),this.failureMessage("Submission Failed")}})}successMessage(e){d().fire(e,"","success")}failureMessage(e){d().fire(e,"","error")}onBack(){this.router.navigate([this.StorerRead])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.F0),t.Y36(I.h),t.Y36(m.qu),t.Y36(T.gz),t.Y36(A.uw),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-storageinvoice-inquiry-type-v"]],viewQuery:function(e,n){if(1&e&&t.Gf(h.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first)}},standalone:!0,features:[t.jDz],decls:71,vars:17,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Storage invoice details",3,"click",4,"ngIf"],["mainMenuButton","matMenu"],[3,"click",4,"ngFor","ngForOf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],[1,"tally-serach-form"],["class","over-Flow",3,"formGroup","ngSubmit",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","AgedBalance"],["matColumnDef","AgedWeight"],["matColumnDef","DaysOld"],["matColumnDef","ChargeAmount"],["matColumnDef","Minimumcharge"],["matColumnDef","Rate"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","InvoicedFrom"],["matColumnDef","InvoicedTo"],["matColumnDef","AgedDate"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],["class","warning-message",4,"ngIf"],[1,"Content-page-both-right"],[1,"right-side-content"],[1,"buttons","button3"],["mat-raised-button","","type","submit",1,"buttons","addButton","tally-search-btn",3,"click"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Storage invoice details",1,"addButton",3,"click"],[3,"click"],[2,"color","blue",3,"ngModel","ngModelChange","change"],[1,"over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Date"],["matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","formControlName","WKITEM",2,"text-transform","uppercase"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","GENDT",3,"value"],["matInput","","formControlName","GENTM",3,"value"],["matInput","","formControlName","S1STOR",2,"text-transform","uppercase"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-cell",""],["mat-header-row",""],["mat-row",""],[1,"warning-message"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return n.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Storage Invoice Inquiry "),t.qZA(),t.TgZ(7,"div",3),t.YNc(8,M,3,0,"button",4),t.YNc(9,q,3,0,"button",5),t.TgZ(10,"mat-menu",null,6),t.YNc(12,U,4,2,"span",7),t.qZA(),t.TgZ(13,"button",8,9)(15,"mat-icon"),t._uU(16,"visibility_off"),t.qZA()()()(),t.TgZ(17,"mat-card-content",10),t.YNc(18,N,33,3,"form",11),t.qZA(),t.TgZ(19,"table",12),t.ynx(20,13),t.YNc(21,x,2,0,"th",14),t.YNc(22,O,2,1,"td",15),t.BQk(),t.ynx(23,16),t.YNc(24,P,2,0,"th",14),t.YNc(25,R,2,2,"td",15),t.BQk(),t.ynx(26,17),t.YNc(27,B,2,0,"th",14),t.YNc(28,W,3,5,"td",15),t.BQk(),t.ynx(29,18),t.YNc(30,K,2,0,"th",14),t.YNc(31,V,2,1,"td",15),t.BQk(),t.ynx(32,19),t.YNc(33,L,2,0,"th",14),t.YNc(34,F,2,1,"td",15),t.BQk(),t.ynx(35,20),t.YNc(36,w,2,0,"th",14),t.YNc(37,Y,2,1,"td",15),t.BQk(),t.ynx(38,21),t.YNc(39,G,2,0,"th",22),t.YNc(40,J,2,1,"td",15),t.BQk(),t.ynx(41,23),t.YNc(42,H,2,0,"th",22),t.YNc(43,Q,2,1,"td",15),t.BQk(),t.ynx(44,24),t.YNc(45,k,2,0,"th",22),t.YNc(46,z,2,1,"td",15),t.BQk(),t.ynx(47,25),t.YNc(48,$,2,0,"th",22),t.YNc(49,X,2,1,"td",15),t.BQk(),t.YNc(50,j,1,0,"tr",26),t.YNc(51,tt,1,0,"tr",27),t.qZA(),t._UZ(52,"br"),t.TgZ(53,"div",28)(54,"div",29),t.YNc(55,et,2,0,"div",30),t.qZA()(),t.TgZ(56,"div",31),t._UZ(57,"br"),t.TgZ(58,"div",32)(59,"button",33),t._uU(60),t.ALo(61,"number"),t.qZA()()(),t._UZ(62,"br"),t.TgZ(63,"div",28)(64,"div",29)(65,"button",34),t.NdJ("click",function(){return n.onPostAccessInvoice()}),t._uU(66,"Post & Print"),t.qZA(),t.TgZ(67,"button",34),t.NdJ("click",function(){return n.onPrintAccessInvoice()}),t._uU(68," Print "),t.qZA()()(),t.TgZ(69,"mat-paginator",35,36),t.NdJ("page",function(l){return n.onPaginateChange(l)}),t.qZA()()),2&e){const a=t.MAs(11);t.xp6(8),t.Q6J("ngIf",n.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!n.searchTextDisplay),t.xp6(3),t.Q6J("ngForOf",n.columnShowHideList),t.xp6(1),t.Q6J("matMenuTriggerFor",a),t.xp6(5),t.Q6J("ngIf",n.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(4),t.Q6J("ngIf",n.totalAmountDue>500),t.xp6(5),t.hij(" Total Amount : $",t.xi3(61,13,n.totalAmountDue,"1.2-2")," "),t.xp6(9),t.Q6J("length",n.totalRecords)("pageSizeOptions",t.DdM(16,it))("pageSize",n.pageSize)}},dependencies:[y.m,_.sg,_.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.On,m.sg,m.u,h.NW,C.Hw,f.VK,f.p6,Z.lW,S.KE,S.hX,D.Nt,p.a8,p.dk,p.dn,p.n5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,E.gM,b.Rr,_.JJ]}),i})()}}]);