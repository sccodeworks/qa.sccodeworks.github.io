"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[32814,34894,26628,70096,49741],{34894:(Z,C,i)=>{i.d(C,{e:()=>I});var r=i(94650),m=i(24006);let I=(()=>{class h{constructor(a,_){this.el=a,this.control=_}onInputChange(a){const _=this.el.nativeElement,d=_.value.toUpperCase();_.value=d,this.control&&this.control.control&&this.control.control.setValue(d,{emitEvent:!1})}}return h.\u0275fac=function(a){return new(a||h)(r.Y36(r.SBq),r.Y36(m.a5))},h.\u0275dir=r.lG2({type:h,selectors:[["","appUppercase",""]],hostBindings:function(a,_){1&a&&r.NdJ("input",function(A){return _.onInputChange(A)})},standalone:!0}),h})()},39505:(Z,C,i)=>{i.d(C,{L:()=>M});var r=i(24006),m=i(59549),I=i(69751),h=i(68675),t=i(54004),a=i(94650),_=i(36895),d=i(47957),A=i(3238),v=i(44144);function E(p,g){if(1&p&&(a.TgZ(0,"mat-option",4),a._uU(1),a.qZA()),2&p){const s=g.$implicit;a.Q6J("value",s),a.xp6(1),a.Oqu(s)}}let M=(()=>{class p{constructor(s){this.fb=s,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=c=>{},this.onChange=c=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new I.y,this.filteredOptions=this.control.valueChanges.pipe((0,h.O)(this.value),(0,t.U)(c=>this._filter(c)))}setDescribedByIds(s){}onContainerClick(s){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(s){null!=s&&(this.control.setValue(s),this.value=s)}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}setDisabledState(s){this.disabled=s}_filter(s){if(null==s||0==s.length)return this.options;const c=s.toLowerCase(),f=this.options.filter(O=>O.toLowerCase().includes(c));return!this.disabled&&1===f.length&&this.control.value!=f[0]&&s.length>=(this.previousValue?.length??0)&&this.control.setValue(f[0]),this.onChange(this.control.value),this.previousValue=this.control.value,f}}return p.\u0275fac=function(s){return new(s||p)(a.Y36(r.qu))},p.\u0275cmp=a.Xpm({type:p,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(s,c){2&s&&a.uIk("aria-describedby",c.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[a._Bn([{provide:r.JU,multi:!0,useExisting:p},{provide:m.Eo,useExisting:p}],[{provide:r.gN,useExisting:r.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(s,c){if(1&s&&(a.TgZ(0,"mat-form-field",0)(1,"mat-label"),a._uU(2),a.qZA(),a._UZ(3,"input",1),a.TgZ(4,"mat-autocomplete",null,2),a.YNc(6,E,2,2,"mat-option",3),a.ALo(7,"async"),a.qZA()()),2&s){const f=a.MAs(5);a.Q6J("appearance",c.appearance),a.xp6(2),a.Oqu(c.label),a.xp6(1),a.Q6J("id",c.id)("placeholder",c.placeholder)("formControl",c.control)("matAutocomplete",f),a.xp6(3),a.Q6J("ngForOf",a.lcZ(7,7,c.filteredOptions))}},dependencies:[_.sg,r.Fj,r.JJ,r.oH,d.XC,d.ZL,A.ey,m.KE,m.hX,v.Nt,_.Ov]}),p})()},32814:(Z,C,i)=>{i.r(C),i.d(C,{MetricsInqComponent:()=>K});var r=i(24006),m=i(7155),I=i(70879),h=i(86385),t=i(94650),a=i(15627),_=i(19132),d=i(98739),A=i(97392),v=i(4859),E=i(59549),M=i(44144),p=i(73546),g=i(34894),s=i(39505);const c=["paginator"];function f(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Activity Description"),t.qZA())}function O(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.WPDESC)}}function U(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Base"),t.qZA())}function P(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.PMBASE)}}function y(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Base Units"),t.qZA())}function B(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.WBASQT)}}function q(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Standard"),t.qZA())}function S(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.PMSTND)}}function b(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Total"),t.qZA())}function R(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.WEXTQT)}}function L(o,l){1&o&&t._UZ(0,"tr",37)}function N(o,l){1&o&&t._UZ(0,"tr",38)}const W=function(){return[8,16,24]};let K=(()=>{class o{constructor(e,n,u){this.IheaderService=e,this.router=n,this.fb=u,this.user=localStorage.getItem("userName")||"",this.dataSource=new m.by,this.taskOptions=[],this.processOption=["TALLY"],this.typeOptions=["P","A","R"],this.unitOptions=["MIN","HR","SEC"],this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.displayedColumns=["ActivityDescription","Base","BaseUnits","Standard","Total"],this.lines=0,this.tallysUrl="/main-nav/tallys/read",this.searchTextDisplay=!1}ngOnInit(){this.element=history.state,this.form=this.fb.group({tally:{value:this.element.IHTALY,disabled:!0},reference:{value:this.element.IHSTRF,disabled:!0},storer:{value:this.element.IHSTOR,disabled:!0},scheduled:{value:this.element.IHSCHA+"\xa0"+this.formatTime(this.element.IHSCHT),disabled:!0},carrier:{value:this.element.IHCARR,disabled:!0},actual:{value:this.element.IHACTA+"\xa0"+this.formatTime(this.element.IHACTT),disabled:!0},quantity:{value:this.element.IHTQTY,disabled:!0},weight:{value:parseFloat(this.element.IHTWGT).toFixed(2)||"0.00",disabled:!0},metric:["LABOR",r.kI.pattern(/^.{1,30}$/)],process:"",task:"",unit:"MIN",type:"P"}),this.fetchTasks(),setTimeout(()=>{this.metricsInquiry(this.pageSize,this.pageNumber),this.dataSource.filterPredicate=this.createFilter()},0)}formatTime(e){const n=String(e).padStart(4,"0");return 4===n.length?n.slice(0,2)+":"+n.slice(2):n}createFilter(){return(e,n)=>{const u=JSON.parse(n);return Object.keys(u).every(T=>e[T].toString().toLowerCase().includes(u[T].toLowerCase()))}}getMetricBySearch(e){this.currentFilters=e,this.paginator.firstPage(),this.metricsInquiry(this.pageSize,this.pageNumber)}resetSearch(){this.form.reset();const e=this.pageSize,n=this.pageNumber;this.currentFilters=null,this.paginator.firstPage(),this.metricsInquiry(e,n)}onPaginateChange(e){this.pageSize=e.pageSize,this.metricsInquiry(e.pageSize,e.pageIndex+1)}ngOnDestroy(){this.metricsInquirySubscription&&this.metricsInquirySubscription.unsubscribe()}fetchTasks(){this.IheaderService.process().subscribe(e=>{this.result=e;for(const n of this.result)this.taskOptions.push(n.PRTASK)})}onBack(){this.router.navigate([this.tallysUrl])}searchMetric(){this.searchTextDisplay=1!=this.searchTextDisplay}metricsInquiry(e,n){var u=this.form.value;this.IheaderService.MetricsInq(this.user,this.element.IHTALY,u.metric,u.process,u.task,u.unit,u.type,e,n).subscribe(T=>{var D=JSON.parse(T[0].data[1]?.value);this.dataSource.data=D.returnedData,this.totalRecords=D.TotalRecords,this.lines=D.Lines})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.X),t.Y36(_.F0),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-metrics-inq"]],viewQuery:function(e,n){if(1&e&&t.Gf(c,5),2&e){let u;t.iGM(u=t.CRH())&&(n.paginator=u.first)}},standalone:!0,features:[t.jDz],decls:77,vars:13,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","tally"],["matInput","","formControlName","reference"],["matInput","","formControlName","storer"],["matInput","","formControlName","scheduled"],["matInput","","disabled","",3,"value"],["matInput","","formControlName","carrier"],["matInput","","formControlName","actual"],["matInput","","formControlName","quantity"],["matInput","","formControlName","weight"],["matInput","","formControlName","metric","appUppercase",""],["formControlName","process","label","Process","appearance","outline",1,"full-width",3,"options"],["formControlName","task","label","Task","appearance","outline",1,"full-width2",3,"options"],["formControlName","unit","label","Unit","appearance","outline",1,"full-width2",3,"options"],["formControlName","type","label","P/A/R","appearance","outline",1,"full-width",3,"options"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","ActivityDescription"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Base"],["matColumnDef","BaseUnits"],["matColumnDef","Standard"],["matColumnDef","Total"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return n.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Performance Metrics Inquiry - Tallys"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4),t.NdJ("ngSubmit",function(){return n.getMetricBySearch(n.form.value)}),t.TgZ(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Tally"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Reference"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",7)(20,"mat-label"),t._uU(21,"Storer"),t.qZA(),t._UZ(22,"input",10),t.qZA(),t.TgZ(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"Scheduled"),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.TgZ(27,"mat-form-field",7)(28,"mat-label"),t._uU(29,"Lines"),t.qZA(),t._UZ(30,"input",12),t.qZA(),t.TgZ(31,"mat-form-field",7)(32,"mat-label"),t._uU(33,"Carrier"),t.qZA(),t._UZ(34,"input",13),t.qZA(),t.TgZ(35,"mat-form-field",7)(36,"mat-label"),t._uU(37,"Actual"),t.qZA(),t._UZ(38,"input",14),t.qZA(),t.TgZ(39,"mat-form-field",7)(40,"mat-label"),t._uU(41,"Quantity"),t.qZA(),t._UZ(42,"input",15),t.qZA(),t.TgZ(43,"mat-form-field",7)(44,"mat-label"),t._uU(45,"Weight"),t.qZA(),t._UZ(46,"input",16),t.qZA(),t.TgZ(47,"mat-form-field",7)(48,"mat-label"),t._uU(49,"Metric"),t.qZA(),t._UZ(50,"input",17),t.qZA(),t._UZ(51,"custom-input-autocomplete",18)(52,"custom-input-autocomplete",19)(53,"custom-input-autocomplete",20)(54,"custom-input-autocomplete",21),t.qZA()(),t.TgZ(55,"button",22),t._uU(56," Search "),t.qZA()()(),t.TgZ(57,"table",23),t.ynx(58,24),t.YNc(59,f,2,0,"th",25),t.YNc(60,O,2,1,"td",26),t.BQk(),t.ynx(61,27),t.YNc(62,U,2,0,"th",25),t.YNc(63,P,2,1,"td",26),t.BQk(),t.ynx(64,28),t.YNc(65,y,2,0,"th",25),t.YNc(66,B,2,1,"td",26),t.BQk(),t.ynx(67,29),t.YNc(68,q,2,0,"th",25),t.YNc(69,S,2,1,"td",26),t.BQk(),t.ynx(70,30),t.YNc(71,b,2,0,"th",25),t.YNc(72,R,2,1,"td",26),t.BQk(),t.YNc(73,L,1,0,"tr",31),t.YNc(74,N,1,0,"tr",32),t.qZA(),t.TgZ(75,"mat-paginator",33,34),t.NdJ("page",function(T){return n.onPaginateChange(T)}),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("formGroup",n.form),t.xp6(22),t.s9C("value",n.lines),t.xp6(21),t.Q6J("options",n.processOption),t.xp6(1),t.Q6J("options",n.taskOptions),t.xp6(1),t.Q6J("options",n.unitOptions),t.xp6(1),t.Q6J("options",n.typeOptions),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("length",n.totalRecords)("pageSizeOptions",t.DdM(12,W))("pageSize",n.pageSize))},dependencies:[I.m,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,d.NW,A.Hw,v.lW,E.KE,E.hX,M.Nt,p.a8,p.dk,p.dn,p.n5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,g.e,h.j,s.L]}),o})()}}]);