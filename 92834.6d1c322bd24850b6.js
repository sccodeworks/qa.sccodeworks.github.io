"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[92834,51860,10599],{51860:(N,M,s)=>{s.d(M,{c:()=>C});var T=s(80529),d=s(75625),m=s(70262),E=s(62843),S=s(92340),f=s(94650);let C=(()=>{class t{constructor(a){this.httpClient=a,this.url=S.N.API_BASE_URL,this.apply="/Payments/read/Apply?",this.httpHeader={headers:new T.WM({"Content-Type":"application/json"})}}getPayments(a,i,o,p,h,_,c,W,g,v,O,Z){return this.httpClient.get(this.url+"/Payments/read?",{params:{user:a,customer:i??"",customersuffixone:o??"",customersuffixtwo:p??"",checknumber:h??"",startdate:_??"",enddate:c??"",paymentno:W??"",refno:g??"",status:v??"",recordsPerPage:O??"",pageNo:Z??""}})}getPaymentInquiry(a,i,o,p){return this.httpClient.get(this.url+`/Payments/read/Inquiry?user=${a}&paymentno=${i}&recordsPerPage=${o??""}&pageNo=${p??""}`)}getPaymentDetailInquiry(a,i,o,p){return this.httpClient.get(this.url+`/Payments/read/Detail/Inquiry?user=${a}&paymentno=${i}&recordsPerPage=${o??""}&pageNo=${p??""}`)}getPaymentApply(a,i,o,p,h,_,c){return this.httpClient.get(this.url+this.apply+`?user=${a}&PaymentNumber=${i}&PHCUST=${o}&PHCSFX=${p}&PHCSF2=${h}&recordsPerPage=${_??""}&pageNo=${c??""}`)}getPaymentApplyDetail(a,i,o,p){return this.httpClient.get(this.url+`/Payments/read/Apply/Details?user=${a}&PaymentNumber=${i}&recordsPerPage=${o??""}&pageNo=${p??""}`)}createpayments(a,i,o,p,h,_,c,W,g,v,O){return this.httpClient.post(this.url+"/Payments/create",{PHTDAT:a,PHCUST:i,PHCSFX:o,PHCSF2:p,PHCHK:h,PHREF:_,PHDESC:c,PHAMT:W,PHDATE:g,PHDDAT:v,user:O}).pipe((0,d.X)(1),(0,m.K)(this.httpError))}updatepayments(a,i,o,p,h,_,c,W,g,v,O,Z,w,x){return this.httpClient.put(this.url+"/Payments/update",{PHPAY:a,PHTDAT:i,PHCUST:o,PHCSFX:p,PHCSF2:h,PHCHK:_,PHREF:c,PHDESC:W,PHAMT:g,PHDATE:v,PHDDAT:O,PHSTAT:Z,PHTRNC:w,user:x}).pipe((0,d.X)(1),(0,m.K)(this.httpError))}getPaymentComment(a,i,o,p){return this.httpClient.get(this.url+`/Payments/comments/read?user=${a}&key=${i}&recordsPerPage=${o??""}&pageNo=${p??""}`)}updateComment(a,i,o,p,h,_){return this.httpClient.put(this.url+"/Payments/comments/update",{user:a,fileID:i,key:o,sub:p,comment:h,seq:_}).pipe((0,d.X)(1),(0,m.K)(this.httpError))}createComment(a,i,o,p,h){return this.httpClient.post(this.url+"/Payments/comments/create",{user:a,fileID:i,key:o,sub:p,comment:h}).pipe((0,d.X)(1),(0,m.K)(this.httpError))}deleteComment(a,i,o,p,h){return this.httpClient.delete(this.url+`/Payments/comments/delete?user=${a}&fileID=${i}&key=${o}&sub=${p}&seq=${h}`)}PaymentsPrint(a,i){return this.httpClient.put(this.url+"/Payments/Print",{PaymentNumber:a,user:i}).pipe((0,d.X)(1),(0,m.K)(this.httpError))}PaymentsRecal(a,i){return this.httpClient.put(this.url+"/Payments/Recalculate",{PaymentNumber:a,user:i}).pipe((0,d.X)(1),(0,m.K)(this.httpError))}PaymentDelete(a,i){return this.httpClient.delete(this.url+`/Payments/delete?user=${a}&PaymentNum=${i}`)}httpError(a){let i="";return i=a.error instanceof ErrorEvent?a.error.message:`Error Code: ${a.status}\nMessage: ${a.message}`,console.log(i),(0,E._)(()=>new Error(i))}}return t.\u0275fac=function(a){return new(a||t)(f.LFG(T.eN))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},92834:(N,M,s)=>{s.r(M),s.d(M,{WwPaymentsAppldetailsComponent:()=>G});var T=s(15861),d=s(98739),m=s(7155),E=s(77579),S=s(78372),f=s(71884),C=s(70879),t=s(94650),y=s(19132),a=s(24006),i=s(51860),o=s(65412),p=s(36895),h=s(97392),_=s(4859),c=s(59549),W=s(44144),g=s(73546);function v(n,r){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Status"),t.qZA())}function O(n,r){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.WPDSTAT)}}function Z(n,r){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Invoice"),t.qZA())}function w(n,r){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.WPDINV)}}function x(n,r){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Sequence"),t.qZA())}function L(n,r){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.WPDISEQ)}}function b(n,r){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Ledger Code"),t.qZA())}function B(n,r){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.WCSDESC)}}function K(n,r){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Customer"),t.qZA())}function Y(n,r){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e.WCUST)}}function z(n,r){1&n&&(t.TgZ(0,"th",34),t._uU(1,"Application Amount"),t.qZA())}function q(n,r){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.WTOTAMT,"1.2-2"))}}function k(n,r){1&n&&t._UZ(0,"tr",36)}function J(n,r){1&n&&t._UZ(0,"tr",37)}function Q(n,r){1&n&&(t.TgZ(0,"div",38),t._UZ(1,"img",39),t.TgZ(2,"h3",40),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",41),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}function H(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" Total Applied: $",void 0!==e.AppliedTotal?e.AppliedTotal:t.xi3(2,1,0,"1.2-2"),"")}}function j(n,r){if(1&n&&(t._uU(0),t.ALo(1,"number")),2&n){const e=t.oxw();t.hij("Total Applied : $",void 0!==e.AppliedTotal?e.AppliedTotal:t.xi3(1,1,0,"1.2-2"),"")}}const F=function(){return[8,16,24]};let G=(()=>{class n{constructor(e,l,u,P){this.router=e,this.fb=l,this.PaymentSvc=u,this.matDialog=P,this.displayedColumns=["Status","Invoice","Sequence","LedgerCode","Customer","ApplicationAmount"],this.user=localStorage.getItem("userName"),this.duplicateSource=[],this.searchInput$=new E.x,this.isSearchMode=!1,this.pageSize=8,this.totalRecords=0,this.pageNumber=1,this.allData=[],this.filteredData=[],this.pageData=[],this.isLoading=!0,this.noData=!1,this.AppliedTotal=0}ngOnInit(){this.element=history.state;const e=`$${parseFloat(this.element.PHAMT).toFixed(2)}`;this.form=this.fb.group({PHPAY:this.element.WKPAY,PHAMT:e,PCUST:this.element.PHCUST}),this.getPaymentApply(this.pageSize,this.pageNumber),this.searchInput$.pipe((0,S.b)(500),(0,f.x)()).subscribe(l=>{this.handleSearch(l)})}ngOnDestroy(){this.getPaymentsSubscription&&this.getPaymentsSubscription.unsubscribe()}getPaymentApply(e,l){this.getPaymentsSubscription&&this.getPaymentsSubscription.unsubscribe(),this.isLoading=!0,this.noData=!1,this.dataSource=new m.by([]),this.getPaymentsSubscription=this.PaymentSvc.getPaymentApplyDetail(this.user,this.element.WKPAY,e,l).subscribe({next:u=>{var U=JSON.parse(u[0].data[1].value);this.duplicateSource=U.returnedData||[];const D=this.duplicateSource||[];let I=0;for(let A=0;A<D.length;A++)I+=Number(D[A].PDAMT)||0;this.AppliedTotal=I,this.totalRecords=U?.Totalrecords??U?.TotalRecords??D.length,this.dataSource.data=D,this.isLoading=!1,this.noData=0===D.length,this.paginator&&(this.paginator.length=this.totalRecords,this.paginator.pageSize=e??this.pageSize)},error:()=>this.handlePaymentApplDetailsNoData()})}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.getPaymentApply(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(e,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}loadPage(e){const l=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(l,l+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode?this.loadPage(e.pageIndex+1):this.getPaymentApply(e.pageSize,e.pageIndex+1)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}loadSearchChunks(e,l){var u=this;return(0,T.Z)(function*(){const{chunkSize:P,maxCalls:U}=u.getSearchStrategy(u.totalRecords||0);let D=1,I=0,A=[];for(;I<U;){const X=(yield u.PaymentSvc.getPaymentApplyDetail(u.user,u.element.WKPAY,P,D).toPromise())?.[0]?.data?.[1]?.value||"{}",R=JSON.parse(X)?.returnedData||[],V=R.filter(tt=>Object.values(tt).some(et=>String(et).toLowerCase().includes(e)));if(A.push(...V),A.length>0||R.length<P)break;D++,I++}u.allData=A,u.filteredData=A,u.totalRecords=A.length,l?.()})()}handlePaymentApplDetailsNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.AppliedTotal=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new m.by([])}onBack(){this.router.navigate(["/main-nav/Payments/read"])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.F0),t.Y36(a.qu),t.Y36(i.c),t.Y36(o.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ww-payments-appldetails"]],viewQuery:function(e,l){if(1&e&&t.Gf(d.NW,5),2&e){let u;t.iGM(u=t.CRH())&&(l.paginator=u.first)}},standalone:!0,features:[t.jDz],decls:58,vars:11,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","PHPAY","readonly",""],["matInput","","formControlName","PHAMT","readonly",""],["matInput","","formControlName","PCUST","readonly",""],["mat-table","","id","myTable",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Invoice"],["matColumnDef","Sequence"],["matColumnDef","LedgerCode"],["matColumnDef","Customer"],["matColumnDef","ApplicationAmount"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],[1,"table-summary"],[1,"form-info-message"],[1,"align-right"],[4,"ngIf","ngIfElse"],["defaultPaid",""],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,l){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return l.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Work With Payment Applications"),t.qZA(),t.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.TgZ(11,"input",6),t.NdJ("input",function(P){return l.applyGlobalFilterInput(P.target.value)}),t.qZA()()()(),t.TgZ(12,"mat-card-content",7)(13,"form",8)(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Payment Number"),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.TgZ(20,"mat-form-field",11)(21,"mat-label"),t._uU(22,"Amount"),t.qZA(),t._UZ(23,"input",13),t.qZA(),t.TgZ(24,"mat-form-field",11)(25,"mat-label"),t._uU(26,"Payee"),t.qZA(),t._UZ(27,"input",14),t.qZA()()()()(),t.TgZ(28,"table",15),t.ynx(29,16),t.YNc(30,v,2,0,"th",17),t.YNc(31,O,2,1,"td",18),t.BQk(),t.ynx(32,19),t.YNc(33,Z,2,0,"th",17),t.YNc(34,w,2,1,"td",18),t.BQk(),t.ynx(35,20),t.YNc(36,x,2,0,"th",17),t.YNc(37,L,2,1,"td",18),t.BQk(),t.ynx(38,21),t.YNc(39,b,2,0,"th",17),t.YNc(40,B,2,1,"td",18),t.BQk(),t.ynx(41,22),t.YNc(42,K,2,0,"th",17),t.YNc(43,Y,2,1,"td",18),t.BQk(),t.ynx(44,23),t.YNc(45,z,2,0,"th",17),t.YNc(46,q,3,4,"td",18),t.BQk(),t.YNc(47,k,1,0,"tr",24),t.YNc(48,J,1,0,"tr",25),t.qZA(),t.YNc(49,Q,6,0,"div",26),t.TgZ(50,"div",27)(51,"div",28)(52,"div",29),t.YNc(53,H,3,4,"span",30),t.YNc(54,j,2,4,"ng-template",null,31,t.W1O),t.qZA()()(),t.TgZ(56,"mat-paginator",32,33),t.NdJ("page",function(P){return l.onPaginateChange(P)}),t.qZA()()),2&e){const u=t.MAs(55);t.xp6(13),t.Q6J("formGroup",l.form),t.xp6(15),t.Q6J("dataSource",l.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",l.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.displayedColumns),t.xp6(1),t.Q6J("ngIf",!l.isLoading&&l.noData),t.xp6(4),t.Q6J("ngIf",void 0!==l.AppliedTotal)("ngIfElse",u),t.xp6(3),t.Q6J("length",l.totalRecords)("pageSizeOptions",t.DdM(10,F))("pageSize",l.pageSize)}},dependencies:[C.m,p.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,d.NW,h.Hw,_.lW,c.KE,c.hX,c.qo,W.Nt,g.a8,g.dk,g.dn,g.n5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,p.JJ]}),n})()},15861:(N,M,s)=>{function T(m,E,S,f,C,t,y){try{var a=m[t](y),i=a.value}catch(o){return void S(o)}a.done?E(i):Promise.resolve(i).then(f,C)}function d(m){return function(){var E=this,S=arguments;return new Promise(function(f,C){var t=m.apply(E,S);function y(i){T(t,f,C,y,a,"next",i)}function a(i){T(t,f,C,y,a,"throw",i)}y(void 0)})}}s.d(M,{Z:()=>d})}}]);