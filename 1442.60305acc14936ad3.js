"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[1442,1790,8754,5645,2313],{11790:(O,w,r)=>{r.d(w,{y:()=>U});var s=r(65412),n=r(94650),u=r(97392),S=r(4859);let D=(()=>{class T{constructor(b,t){this.dialogRef=b,this.data=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return T.\u0275fac=function(b){return new(b||T)(n.Y36(s.so),n.Y36(s.WI))},T.\u0275cmp=n.Xpm({type:T,selectors:[["app-alert-dialog"]],decls:10,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["id","close-icon",3,"click"],[1,"content-span","full-width"],["mat-flat-button","","id","no-button",3,"mat-dialog-close"],["mat-flat-button","","id","yes-button",3,"mat-dialog-close"]],template:function(b,t){1&b&&(n.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),n.NdJ("click",function(){return t.closeDialog()}),n._uU(3,"close "),n.qZA(),n.TgZ(4,"span",3),n._uU(5),n.qZA()(),n.TgZ(6,"button",4),n._uU(7,"Cancel"),n.qZA(),n.TgZ(8,"button",5),n._uU(9,"Delete"),n.qZA()()),2&b&&(n.xp6(5),n.Oqu(t.data.message),n.xp6(1),n.Q6J("mat-dialog-close",!1),n.xp6(2),n.Q6J("mat-dialog-close",!0))},dependencies:[u.Hw,S.lW,s.ZT]}),T})(),U=(()=>{class T{constructor(b){this.dialog=b}openCustomAlert(b){return this.dialog.open(D,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:b}})}}return T.\u0275fac=function(b){return new(b||T)(n.LFG(s.uw))},T.\u0275prov=n.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},69501:(O,w,r)=>{r.d(w,{J:()=>E});var s=r(94650),n=r(24006),u=r(47957),S=r(59549),D=r(44144),U=r(69751),T=r(68675),_=r(54004),b=r(70879),t=r(36895),l=r(3238);function d(p,A){if(1&p&&(s.TgZ(0,"mat-option",7),s._uU(1),s.qZA()),2&p){const i=A.$implicit;s.Q6J("value",i),s.xp6(1),s.hij(" ",i.description," ")}}function g(p,A){1&p&&(s.TgZ(0,"mat-error"),s._uU(1,"This field is required. Please select an option."),s.qZA())}function v(p,A){1&p&&(s.TgZ(0,"mat-hint",8),s._uU(1," The option you entered is not valid. Please select one from the list. "),s.qZA())}let E=(()=>{class p{constructor(i){this.fb=i,this.options=[],this.value=null,this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.isRequired=!1,this.selectionChange=new s.vpe,this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.onChange=h=>{this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0},this.onTouched=()=>{},this.control=this.fb.control("",{validators:this.isRequired?[n.kI.required]:[]}),this.stateChanges=new U.y,this.filteredOptions=this.control.valueChanges.pipe((0,T.O)(""),(0,_.U)(h=>this._filter(h)))}ngOnInit(){this.isRequired&&this.control.setValidators([n.kI.required]),this.control.updateValueAndValidity()}_filter(i){if(null==i||0===i.length)return this.errorState=!1,this.options;let h="";"string"==typeof i&&(h=i.toLowerCase());const k=this.options.filter(y=>{const N=y.value?.toString().toLowerCase(),M=y.description?.toLowerCase();return N.includes(h)||M.includes(h)});return this.errorState=0===k.length&&i.length>0,k}writeValue(i){this.control.setValue(i&&"object"==typeof i?`${i.value} - ${i.description}`:"string"==typeof i?i:""),this.errorState=0===this._filter(this.control.value).length&&this.control.value.length>0}onOptionSelected(i){if(this.control.setValue(i),i&&i.value){const[h,k]=i.description.split(" ");this.valueControlName.setValue(h),this.suffixControlName&&this.suffixControlName.setValue(k||""),this.onChange(i.value),this.selectionChange.emit(i.value),this.autocompleteTrigger.closePanel()}else console.error("Selected option value is undefined or null")}displayOptionText(i){return i?i.value:""}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i}setDescribedByIds(i){}onContainerClick(i){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}}return p.\u0275fac=function(i){return new(i||p)(s.Y36(n.qu))},p.\u0275cmp=s.Xpm({type:p,selectors:[["app-dropdown"]],viewQuery:function(i,h){if(1&i&&s.Gf(u.ZL,7),2&i){let k;s.iGM(k=s.CRH())&&(h.autocompleteTrigger=k.first)}},hostVars:1,hostBindings:function(i,h){2&i&&s.uIk("aria-describedby",h.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance",valueControlName:"valueControlName",suffixControlName:"suffixControlName",displayControlName:"displayControlName",isRequired:"isRequired"},outputs:{selectionChange:"selectionChange"},standalone:!0,features:[s._Bn([{provide:n.JU,multi:!0,useExisting:p},{provide:S.Eo,useExisting:p}],[{provide:n.gN,useExisting:n.sg}]),s.jDz],decls:10,vars:12,consts:[["appearance","outline",1,"full-width2"],["matInput","",3,"formControl","placeholder","matAutocomplete","blur"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","hint-error","style","color: red; font-size:12px",4,"ngIf"],[3,"value"],[1,"hint-error",2,"color","red","font-size","12px"]],template:function(i,h){if(1&i&&(s.TgZ(0,"mat-form-field",0)(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",1),s.NdJ("blur",function(){return h.onTouched()}),s.qZA(),s.TgZ(4,"mat-autocomplete",2,3),s.NdJ("optionSelected",function(y){return h.onOptionSelected(y.option.value)}),s.YNc(6,d,2,2,"mat-option",4),s.ALo(7,"async"),s.qZA(),s.YNc(8,g,2,0,"mat-error",5),s.YNc(9,v,2,0,"mat-hint",6),s.qZA()),2&i){const k=s.MAs(5);s.ekj("mat-form-field-invalid",h.control.invalid&&h.control.touched||h.errorState),s.xp6(2),s.Oqu(h.label),s.xp6(1),s.Q6J("formControl",h.control)("placeholder",h.placeholder)("matAutocomplete",k),s.xp6(1),s.Q6J("displayWith",h.displayOptionText),s.xp6(2),s.Q6J("ngForOf",s.lcZ(7,10,h.filteredOptions)),s.xp6(2),s.Q6J("ngIf",h.control.invalid&&h.control.touched),s.xp6(1),s.Q6J("ngIf",h.errorState)}},dependencies:[b.m,t.sg,t.O5,n.Fj,n.JJ,n.oH,S.TO,S.KE,S.bx,S.hX,D.Nt,l.ey,t.Ov,n.UX,u.Bb,u.XC,u.ZL,S.lN,D.c]}),p})()},83490:(O,w,r)=>{r.d(w,{y:()=>T});var s=r(80529),n=r(75625),u=r(70262),S=r(62843),D=r(92340),U=r(94650);let T=(()=>{class _{constructor(t){this.httpClient=t,this.url=D.N.API_BASE_URL,this.httpHeader={headers:new s.WM({"Content-Type":"application/json"})}}getAccountingAttribute(t,l,d,g){return this.httpClient.get(this.url+"/accountAttributes/read",{params:{user:t,attribute:l??"",recordsPerPage:d??"",pageNo:g??""}})}AccountingAttributeCreate(t,l,d){return this.httpClient.post(this.url+"/accountAttributes/create",{user:t,attribute:l,description:d}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}AccountingAttributeUpdate(t,l,d){return this.httpClient.put(this.url+"/accountAttributes/update",{user:t,attribute:l,description:d}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}AccountingAttributeDelete(t,l){return this.httpClient.delete(this.url+`/accountAttributes/delete?user=${t}&attribute=${l}`)}httpError(t){let l="";return l=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(l),(0,S._)(()=>new Error(l))}}return _.\u0275fac=function(t){return new(t||_)(U.LFG(s.eN))},_.\u0275prov=U.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},16799:(O,w,r)=>{r.d(w,{x:()=>T});var s=r(80529),n=r(75625),u=r(70262),S=r(62843),D=r(92340),U=r(94650);let T=(()=>{class _{constructor(t){this.httpClient=t,this.url=D.N.API_BASE_URL,this.httpHeader={headers:new s.WM({"Content-Type":"application/json"})}}getTaskCodes(t,l,d,g,v,E){return this.httpClient.get(this.url+`/TaskCodes/read?user=${t}&storer=${l}&suffix=${d}&status=${g}&recordsPerPage=${v}&pageNo=${E}`)}TaskCodesCreate(t,l,d,g,v,E,p,A,i,h,k,y,N,M){return this.httpClient.post(this.url+"/TaskCodes/create",{TSTASK:t,TSSTOR:l,TSSSFX:d,TSDESC:g,TSMINM:v,TSBASE:E,TSRATE:p,TSLEGC:A,TSLEGS:i,TSMKUP:h,TSQUOT:k,TSAUTO:y,TSVARC:N,user:M}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesUpdate(t,l,d,g,v,E,p,A,i,h,k,y,N,M){return this.httpClient.put(this.url+"/TaskCodes/update",{TSTASK:t,TSSTOR:l,TSSSFX:d,TSDESC:g,TSMINM:v,TSBASE:E,TSRATE:p,TSLEGC:A,TSLEGS:i,TSMKUP:h,TSQUOT:k,TSAUTO:y,TSVARC:N,user:M}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}taskCodesCopyTask(t,l,d,g,v,E,p,A,i,h,k,y,N,M,R,I){return this.httpClient.put(this.url+"/TaskCodes/copyTask",{user:t,taskCode:l,storer1:d,storerSuffix1:g,storer2:v,storerSuffix2:E,description:p,minimum:A,base:i,rate:h,ledgerCode:k,ledgerCodeSuffix:y,markup:N,taskOnQuote:M,autoCharge:R,recalculate:I}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesCopySet(t,l,d,g){return this.httpClient.put(this.url+"/TaskCodes/CopySet",{storer:t,suffix:l,storerNumber:d,storerSuffix:g}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}taskCodesConstraint(t,l,d,g,v,E,p,A){return this.httpClient.post(this.url+"/TaskCodes/constraint",{documentType:t,taskCode:l,storer:d,suffix:g,constraintF:v,relationship:E,constraintV:p,status:A}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesActivate(t,l,d){return this.httpClient.put(this.url+"/TaskCodes/activate",{taskCode:t,storer:l,suffix:d}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesDeactivate(t,l,d){return this.httpClient.put(this.url+"/TaskCodes/Deactivate",{taskCode:t,storer:l,suffix:d}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}taskCodesDelete(t,l,d){return this.httpClient.delete(this.url+`/TaskCodes/delete?taskId=${t}&storer=${l}&suffix=${d}`)}getAttributesNames(){return this.httpClient.get(this.url+"/TaskCodes/getNames")}getLedgerNames(){return this.httpClient.get(this.url+"/TaskCodes/getLedgerNames")}getTaskCodesAttributes(t,l,d,g){return this.httpClient.get(this.url+`/TaskCodes/Attributes?user=${t}&key=${l}&recordsPerPage=${d}&pageNo=${g}`)}TaskCodesAttributesCreate(t,l,d,g,v,E,p,A){return this.httpClient.post(this.url+"/TaskCodes/Attributes/create",{user:t,EAFLID:l,EAKEY:d,EAATRB:g,EAVALU:v,EASTAT:E,EATMST:p,EAUSER:A}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}TaskCodesAttributesUpdate(t,l,d,g,v,E,p,A){return this.httpClient.put(this.url+"/TaskCodes/Attributes/update",{EAFLID:t,EAKEY:l,EAATRB:d,EAVALU:g,EASTAT:v,EATMST:E,EAUSER:p,user:A}).pipe((0,n.X)(1),(0,u.K)(this.httpError))}taskCodesAttributesDelete(t,l){return this.httpClient.delete(this.url+`/TaskCodes/Attributes/delete?key=${t}&attribute=${l}`)}taskCodesConstraintDelete(t,l,d,g,v,E,p,A){return this.httpClient.delete(this.url+`/TaskCodes/constraint/delete?documentType=${t}&taskCode=${l}&storer=${d}&suffix=${g}&constraintF=${v}&relationship=${E}&constraintV=${p}&status=${A}`)}httpError(t){let l="";return l=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(l),(0,S._)(()=>new Error(l))}}return _.\u0275fac=function(t){return new(t||_)(U.LFG(s.eN))},_.\u0275prov=U.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},41442:(O,w,r)=>{r.r(w),r.d(w,{WwTaskcodesAttributesComponent:()=>st});var s=r(98739),n=r(7155),u=r(24006),S=r(65412),D=r(70879),U=r(35226),T=r.n(U),_=r(48529),b=r(69501),t=r(94650),l=r(19132),d=r(83490),g=r(16799),v=r(97392),E=r(4859),p=r(59549),A=r(44144),i=r(73546);let h=(()=>{class a{constructor(e,o,c,f,C,Z){this.anyvariable=e,this.dialogRef=o,this.router=c,this.accountAttributesService=f,this.fb=C,this.taskCodesService=Z,this.attributeOptions=[],this.user=localStorage.getItem("userName")||"",this.keyValue="",this.suffixControl=new u.NI("")}ngOnDestroy(){this.attributeSubscription&&this.attributeSubscription.unsubscribe()}ngOnInit(){console.log(this.anyvariable);const o=(c,f)=>String(c).padStart(f,"0");console.log(o(this.anyvariable.TSSTOR,4)),this.keyValue=o(this.anyvariable.TSSTOR,4),this.form=this.fb.group({EAFLID:{value:"TS",disabled:!0},EAKEY:{value:this.anyvariable.TSTASK+o(this.anyvariable.TSSTOR,4),disabled:!0},EAATRB:["",u.kI.required],EAVALU:["",u.kI.required],EASTAT:"AC",EATMST:"",EAUSER:""}),this.fetchAttributes()}get attributeControlName(){return this.form.controls.EAATRB}fetchAttributes(){this.taskCodesService.getAttributesNames().subscribe(e=>{this.attributeOptions=e.map(o=>({value:o.A2ATRB,description:`${o.A2ATRB} - ${o.A2DESC}`}))})}taskCodesAttributesCreate(){var e=this.form.value;const c=(e.EAATRB||"").toUpperCase();this.attributeSubscription&&this.attributeSubscription.unsubscribe(),this.attributeSubscription=this.taskCodesService.TaskCodesAttributesCreate(this.user,this.form.get("EAFLID")?.value,this.form.get("EAKEY")?.value,c,e.EAVALU.toUpperCase(),e.EASTAT,e.EATMST,this.user).subscribe(f=>{const C=f[0]?.data?.length,Z=C?f[0]?.data[C-1]?.value:void 0,x=Z?JSON.parse(Z)?.returnedData?.message:void 0;x?.toUpperCase()===_.R.createMsg.toUpperCase()?(this.successMessage(x),this.closeDialog(),this.router.navigateByUrl("/main-nav/task-codes-attributes/read",{state:this.anyvariable})):this.failureMessage(x)})}successMessage(e){T().fire(e,"","success")}failureMessage(e){T().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(S.WI),t.Y36(S.so),t.Y36(l.F0),t.Y36(d.y),t.Y36(u.qu),t.Y36(g.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ww-taskcodes-attributes-create"]],standalone:!0,features:[t.jDz],decls:39,vars:5,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EAFLID",2,"text-transform","uppercase"],["matInput","","formControlName","EAKEY",2,"text-transform","uppercase"],["appearance","outline","label","Attribute","placeholder","Search or Enter Attribute",3,"options","valueControlName","isRequired"],["matInput","","formControlName","EAVALU",2,"text-transform","uppercase"],["matInput","","formControlName","EASTAT",2,"text-transform","uppercase"],["matInput","","formControlName","EATMST","readonly",""],["matInput","","formControlName","EAUSER","readonly","",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Entity Attributes"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"File ID"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"key"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t._UZ(20,"app-dropdown",11),t.TgZ(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Value"),t.qZA(),t._UZ(24,"input",12),t.qZA(),t.TgZ(25,"mat-form-field",8)(26,"mat-label"),t._uU(27,"Status"),t.qZA(),t._UZ(28,"input",13),t.qZA(),t.TgZ(29,"mat-form-field",8)(30,"mat-label"),t._uU(31,"Last Changed"),t.qZA(),t._UZ(32,"input",14),t.qZA(),t.TgZ(33,"mat-form-field",8)(34,"mat-label"),t._uU(35,"Change User"),t.qZA(),t._UZ(36,"input",15),t.qZA()()(),t.TgZ(37,"button",16),t.NdJ("click",function(){return o.taskCodesAttributesCreate()}),t._uU(38,"Create"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("options",o.attributeOptions)("valueControlName",o.attributeControlName)("isRequired",!0),t.xp6(17),t.Q6J("disabled",!o.form.valid))},dependencies:[D.m,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,v.Hw,E.lW,p.KE,p.hX,A.Nt,i.a8,i.dk,i.dn,i.n5,b.J]}),a})();var k=r(36895);function y(a,m){if(1&a){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",8)(2,"mat-label"),t._uU(3,"Attribute"),t.qZA(),t.TgZ(4,"input",18),t.NdJ("focus",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.toggleDropdown())}),t.qZA()()()}}function N(a,m){if(1&a){const e=t.EpF();t.TgZ(0,"div",19)(1,"app-dropdown",20),t.NdJ("selectionChange",function(c){t.CHM(e);const f=t.oxw();return t.KtG(f.onOptionSelected(c))}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("options",e.attributeOptions)("valueControlName",e.attributeControlName)}}let M=(()=>{class a{constructor(e,o,c,f,C,Z){this.anyvariable=e,this.dialogRef=o,this.router=c,this.fb=f,this.taskCodesService=C,this.accountAttributesService=Z,this.attributeOptions=[],this.user=localStorage.getItem("userName")||"",this.keyValue="",this.selectedAttribute="",this.backupAttribute="",this.showDropdown=!1,this.isOptionSelected=!1,this.isDropdownClicked=!1,this.valueChanged=!1}ngOnInit(){this.selectedAttribute=this.anyvariable[1].EAATRB,this.backupAttribute=this.selectedAttribute,this.form=this.fb.group({EAFLID:{value:this.anyvariable[1].EAFLID,disabled:!0},EAKEY:{value:this.anyvariable[1].EAKEY,disabled:!0},EAATRB:this.selectedAttribute,EAVALU:this.anyvariable[1].EAVALU,EASTAT:this.anyvariable[1].EASTAT,EATMST:{value:this.anyvariable[1].EATMST,disabled:!0},EAUSER:{value:this.anyvariable[1].EAUSER,disabled:!0}}),this.fetchAttributes(),document.addEventListener("click",this.onDocumentClick.bind(this))}toggleDropdown(){this.showDropdown=!0}onOptionSelected(e){this.valueChanged=!0,this.attributeControlName.setValue(e),this.showDropdown=!1}onDocumentClick(e){const o=e.target instanceof HTMLElement&&(e.target.closest("mat-form-field")||e.target.closest("app-dropdown")),c=e.target instanceof HTMLElement&&e.target.closest(".buttons.addButton.new-tally-form-btn");!o&&!c&&!this.valueChanged&&(this.attributeControlName.setValue(this.backupAttribute),this.showDropdown=!1),this.isDropdownClicked=!1,this.valueChanged=!1}ngOnDestroy(){this.attributeSubscription&&this.attributeSubscription.unsubscribe(),document.removeEventListener("click",this.onDocumentClick.bind(this))}get attributeControlName(){return this.form.controls.EAATRB}fetchAttributes(){this.taskCodesService.getAttributesNames().subscribe(e=>{this.attributeOptions=e.map(o=>({value:o.A2ATRB,description:`${o.A2ATRB} - ${o.A2DESC}`}))})}TaskCodesAttributesUpdate(){var e=this.form.value;const c=(e.EAATRB||"").toUpperCase();this.attributeSubscription&&this.attributeSubscription.unsubscribe(),this.attributeSubscription=this.taskCodesService.TaskCodesAttributesUpdate(this.anyvariable[1].EAFLID,this.anyvariable[1].EAKEY,c,e.EAVALU.toUpperCase(),e.EASTAT,this.anyvariable[1].EATMST,this.user,this.user).subscribe(f=>{const C=f[0]?.data?.length,Z=C?f[0]?.data[C-1]?.value:void 0,x=Z?JSON.parse(Z)?.returnedData?.message:void 0;x?.toUpperCase()===_.R.updateMsg.toUpperCase()?(this.successMessage(x),this.closeDialog(),this.router.navigateByUrl("/main-nav/task-codes-attributes/read",{state:this.anyvariable[0]})):this.failureMessage(x)})}successMessage(e){T().fire(e,"","success")}failureMessage(e){T().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(S.WI),t.Y36(S.so),t.Y36(l.F0),t.Y36(u.qu),t.Y36(g.x),t.Y36(d.y))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ww-taskcodes-attributes-change"]],standalone:!0,features:[t.jDz],decls:40,vars:4,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EAFLID",2,"text-transform","uppercase"],["matInput","","formControlName","EAKEY",2,"text-transform","uppercase"],[4,"ngIf"],["tabindex","0",4,"ngIf"],["matInput","","formControlName","EAVALU",2,"text-transform","uppercase"],["matInput","","formControlName","EASTAT",2,"text-transform","uppercase"],["matInput","","formControlName","EATMST"],["matInput","","formControlName","EAUSER",2,"text-transform","uppercase"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"],["required","","matInput","","formControlName","EAATRB","readonly","",3,"focus"],["tabindex","0"],["label","Attribute","placeholder","Search or Enter Attribute to Change",3,"options","valueControlName","selectionChange"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Entity Attributes"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"File ID"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"key"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.YNc(20,y,5,0,"div",11),t.YNc(21,N,2,2,"div",12),t.TgZ(22,"mat-form-field",8)(23,"mat-label"),t._uU(24,"Value"),t.qZA(),t._UZ(25,"input",13),t.qZA(),t.TgZ(26,"mat-form-field",8)(27,"mat-label"),t._uU(28,"Status"),t.qZA(),t._UZ(29,"input",14),t.qZA(),t.TgZ(30,"mat-form-field",8)(31,"mat-label"),t._uU(32,"Last Changed"),t.qZA(),t._UZ(33,"input",15),t.qZA(),t.TgZ(34,"mat-form-field",8)(35,"mat-label"),t._uU(36,"Change User"),t.qZA(),t._UZ(37,"input",16),t.qZA()()(),t.TgZ(38,"button",17),t.NdJ("click",function(){return o.TaskCodesAttributesUpdate()}),t._uU(39,"Update"),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(11),t.Q6J("ngIf",!o.showDropdown),t.xp6(1),t.Q6J("ngIf",o.showDropdown),t.xp6(17),t.Q6J("disabled",!o.form.valid))},dependencies:[D.m,k.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.sg,u.u,v.Hw,E.lW,p.KE,p.hX,A.Nt,i.a8,i.dk,i.dn,i.n5,b.J]}),a})();var R=r(11790),I=r(28255),W=r(10266),L=r(90455);function B(a,m){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12)(2,"div",33)(3,"span",34),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(4,"mat-slide-toggle",35),t.NdJ("ngModelChange",function(c){const C=t.CHM(e).$implicit;return t.KtG(C.isActive=c)})("change",function(){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.toggleColumn(f))}),t._uU(5),t.qZA()()()(),t.BQk()}if(2&a){const e=m.$implicit;t.xp6(4),t.Q6J("ngModel",e.isActive),t.xp6(1),t.hij(" ",e.name," ")}}function P(a,m){1&a&&(t.TgZ(0,"th",36),t._uU(1,"Attribute"),t.qZA())}function K(a,m){if(1&a&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&a){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAATRB)}}function Y(a,m){1&a&&(t.TgZ(0,"th",36),t._uU(1,"Value"),t.qZA())}function F(a,m){if(1&a&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&a){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAVALU)}}function J(a,m){1&a&&(t.TgZ(0,"th",36),t._uU(1,"Last Changed"),t.qZA())}function q(a,m){if(1&a&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&a){const e=m.$implicit;t.xp6(1),t.Oqu(e.EATMST)}}function $(a,m){1&a&&(t.TgZ(0,"th",36),t._uU(1,"User"),t.qZA())}function V(a,m){if(1&a&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&a){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAUSER)}}function Q(a,m){1&a&&(t.TgZ(0,"th",36),t._uU(1,"Status"),t.qZA())}function H(a,m){if(1&a&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&a){const e=m.$implicit;t.xp6(1),t.Oqu(e.EASTAT)}}function G(a,m){1&a&&(t.TgZ(0,"th",36),t._uU(1,"Key"),t.qZA())}function j(a,m){if(1&a&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&a){const e=m.$implicit;t.xp6(1),t.Oqu(e.EAKEY)}}function z(a,m){1&a&&t._UZ(0,"th",38)}function X(a,m){if(1&a){const e=t.EpF();t.TgZ(0,"td",37)(1,"div",39)(2,"button",40)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",41)(6,"li")(7,"button",42),t.NdJ("click",function(){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.taskCodesAttributesChangeForm(f))}),t.TgZ(8,"mat-icon",43),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Change"),t.qZA()()(),t.TgZ(12,"li")(13,"button",42),t.NdJ("click",function(){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.taskCodesAttributesDelete(f))}),t.TgZ(14,"mat-icon",44),t._uU(15,"delete"),t.qZA(),t.TgZ(16,"mat-label"),t._uU(17,"Delete"),t.qZA()()()()()()}}function tt(a,m){1&a&&t._UZ(0,"tr",45)}function et(a,m){if(1&a){const e=t.EpF();t.TgZ(0,"tr",46),t.NdJ("click",function(){const f=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.rowClick(f))}),t.qZA()}}const ot=function(){return[8,16,24]};let st=(()=>{class a{constructor(e,o,c,f,C){this.matDialog=e,this.taskCodesService=o,this.CustomAlertService=c,this.router=f,this.fb=C,this.INITIAL_PAGE=1,this.searchTextDisplay=!1,this.user=localStorage.getItem("userName"),this.editedRows=[],this.keyValue="",this.dataSource=new n.by,this.duplicateSource=[],this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.displayedColumns=["Attribute","Value","LastChanged","User","Status","Actions"],this.columnShowHideList=[]}ngOnInit(){this.element=history.state;const o=(c,f)=>String(c).padStart(f,"0");console.log(o(this.element.TSSTOR,4)),this.keyValue=o(this.element.TSSTOR,4),this.form=this.fb.group({FLID:"TS",KEY:this.element.TSTASK+o(this.element.TSSTOR,4)}),this.initializeColumnProperties(),this.editedRows=[],this.getTaskCodesAttributes(this.pageSize,this.INITIAL_PAGE)}onPaginateChange(e){this.pageSize=e.pageSize,this.getTaskCodesAttributes(e.pageSize,e.pageIndex+this.INITIAL_PAGE)}ngOnDestroy(){this.taskCodesSubscription&&this.taskCodesSubscription.unsubscribe()}toggleColumn(e){if(e.isActive)this.displayedColumns.splice(e.position>this.displayedColumns.length-1?this.displayedColumns.length-1:e.position,0,e.name);else{let o=this.displayedColumns.indexOf(e.name);o>-1&&this.displayedColumns.splice(o,1)}}initializeColumnProperties(){this.displayedColumns.forEach((e,o)=>{"Actions"!=e&&this.columnShowHideList.push({position:o,name:e,isActive:!0})}),this.columnShowHideList.push({position:this.columnShowHideList.length,name:"Key",isActive:!1})}rowClick(e){this.selectedRow=e}getTaskCodesAttributes(e,o){var c=this.form.value;this.taskCodesSubscription&&this.taskCodesSubscription.unsubscribe(),this.taskCodesSubscription=this.taskCodesService.getTaskCodesAttributes(this.user,c.KEY,e,o).subscribe(f=>{const C=f?.[0]?.data?.[1]?.value;if(C)try{const Z=JSON.parse(C);Z?.returnedData?(this.duplicateSource=Z.returnedData,this.dataSource=new n.by(this.duplicateSource),this.totalRecords=Z.TotalRecords||0):console.error("Returned data is undefined or null.")}catch(Z){console.error("Error parsing response data:",Z)}else console.error("Error fetching attributes data")})}taskCodesAttributesDelete(e){var o=this.form.value;this.CustomAlertService.openCustomAlert("Are you sure want to delete this attribute: "+e.EAATRB+" ?").afterClosed().subscribe(f=>{f&&(this.deleteTaskCodesAttributesSubscription&&this.deleteTaskCodesAttributesSubscription.unsubscribe(),this.deleteTaskCodesAttributesSubscription=this.taskCodesService.taskCodesAttributesDelete(o.KEY,e.EAATRB).subscribe(C=>{const Z=C?.[0]?.data?.[C[0].data.length-1]?.value;Z?.toUpperCase()===_.R.deleteShortMsg.toUpperCase()?(this.successMessage(Z),this.getTaskCodesAttributes()):this.failureMessage(Z)}))})}onBack(){this.router.navigate(["/main-nav/task-codes/read"])}taskCodesAttributesCreateForm(e){this.matDialog.open(h,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}taskCodesAttributesChangeForm(e){this.matDialog.open(M,{width:"1000px",maxHeight:"80vh",data:[this.element,e],autoFocus:!1})}successMessage(e){T().fire(e,"","success")}failureMessage(e){T().fire(e,"","error")}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(S.uw),t.Y36(g.x),t.Y36(R.y),t.Y36(l.F0),t.Y36(u.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ww-taskcodes-attributes"]],viewQuery:function(e,o){if(1&e&&t.Gf(s.NW,5),2&e){let c;t.iGM(c=t.CRH())&&(o.paginator=c.first)}},standalone:!0,features:[t.jDz],decls:59,vars:10,consts:[[1,"over-Flow"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","matTooltip","Add New AccountAttributes",1,"addButton",3,"click"],[1,"menu-container"],["mainMenuButton","matMenu"],[1,"grid-container"],[4,"ngFor","ngForOf"],["mat-button","","matTooltip","Hide/Show Columns",1,"mat-focus-indicator","addButton","mat-button","mat-button-base","tally-toltip-btn",3,"matMenuTriggerFor"],["menuTrigger","matMenuTrigger"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","FLID",2,"text-transform","uppercase"],["matInput","","formControlName","KEY",2,"text-transform","uppercase"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Attribute"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Value"],["matColumnDef","LastChanged"],["matColumnDef","User"],["matColumnDef","Status"],["matColumnDef","Key"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],[1,"grid-item"],[3,"click"],[2,"color","blue",3,"ngModel","ngModelChange","change"],["mat-header-cell","","mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title")(3,"button",1),t.NdJ("click",function(){return o.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Work With Entity Attributes"),t.qZA(),t.TgZ(7,"div",2)(8,"button",3),t.NdJ("click",function(){return o.taskCodesAttributesCreateForm(o.element)}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA()(),t.TgZ(11,"mat-menu",4,5)(13,"div",6),t.YNc(14,B,6,2,"ng-container",7),t.qZA()(),t.TgZ(15,"button",8,9)(17,"mat-icon"),t._uU(18,"visibility_off"),t.qZA()()()(),t.TgZ(19,"mat-card-content",10)(20,"form",11)(21,"div",12)(22,"div",13)(23,"mat-form-field",14)(24,"mat-label"),t._uU(25,"File ID"),t.qZA(),t._UZ(26,"input",15),t.qZA(),t.TgZ(27,"mat-form-field",14)(28,"mat-label"),t._uU(29,"Key"),t.qZA(),t._UZ(30,"input",16),t.qZA()()(),t.TgZ(31,"button",17),t._uU(32," Search "),t.qZA()()(),t.TgZ(33,"table",18),t.ynx(34,19),t.YNc(35,P,2,0,"th",20),t.YNc(36,K,2,1,"td",21),t.BQk(),t.ynx(37,22),t.YNc(38,Y,2,0,"th",20),t.YNc(39,F,2,1,"td",21),t.BQk(),t.ynx(40,23),t.YNc(41,J,2,0,"th",20),t.YNc(42,q,2,1,"td",21),t.BQk(),t.ynx(43,24),t.YNc(44,$,2,0,"th",20),t.YNc(45,V,2,1,"td",21),t.BQk(),t.ynx(46,25),t.YNc(47,Q,2,0,"th",20),t.YNc(48,H,2,1,"td",21),t.BQk(),t.ynx(49,26),t.YNc(50,G,2,0,"th",20),t.YNc(51,j,2,1,"td",21),t.BQk(),t.ynx(52,27),t.YNc(53,z,1,0,"th",28),t.YNc(54,X,18,0,"td",21),t.BQk(),t.YNc(55,tt,1,0,"tr",29),t.YNc(56,et,1,0,"tr",30),t.qZA(),t.TgZ(57,"mat-paginator",31,32),t.NdJ("page",function(f){return o.onPaginateChange(f)}),t.qZA()()),2&e){const c=t.MAs(12);t.xp6(14),t.Q6J("ngForOf",o.columnShowHideList),t.xp6(1),t.Q6J("matMenuTriggerFor",c),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(13),t.Q6J("dataSource",o.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(9,ot))("pageSize",o.pageSize)}},dependencies:[D.m,k.sg,u._Y,u.Fj,u.JJ,u.JL,u.On,u.sg,u.u,s.NW,v.Hw,I.VK,I.p6,E.lW,p.KE,p.hX,A.Nt,i.a8,i.dk,i.dn,i.n5,n.BZ,n.fO,n.as,n.w1,n.Dz,n.nj,n.ge,n.ev,n.XQ,n.Gk,W.gM,L.Rr]}),a})()}}]);