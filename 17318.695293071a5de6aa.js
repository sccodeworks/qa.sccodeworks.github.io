"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[17318],{17318:(F,D,n)=>{n.d(D,{s:()=>Y});var s=n(24006),m=n(65412),f=n(98739),u=n(7155),g=n(35226),d=n.n(g),b=n(70879),C=n(81001),t=n(94650),p=n(19132),T=n(72122),v=n(36895),Z=n(97392),N=n(4859),h=n(59549),S=n(44144),A=n(84385),U=n(3238),c=n(73546),k=n(34894);function E(a,r){1&a&&(t.TgZ(0,"th",39),t._uU(1,"Account"),t.qZA())}function O(a,r){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.D1ACCT)}}function W(a,r){1&a&&(t.TgZ(0,"th",39),t._uU(1,"Document Number"),t.qZA())}function M(a,r){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.D1DOCN)}}function w(a,r){1&a&&(t.TgZ(0,"th",39),t._uU(1,"Reference Number"),t.qZA())}function y(a,r){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.D1REFN)}}function P(a,r){1&a&&(t.TgZ(0,"th",39),t._uU(1,"PO Number"),t.qZA())}function R(a,r){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.D1PO)}}function B(a,r){1&a&&(t.TgZ(0,"th",39),t._uU(1,"Status"),t.qZA())}function I(a,r){if(1&a&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.D1STAT)}}function x(a,r){1&a&&t._UZ(0,"tr",41)}function L(a,r){1&a&&t._UZ(0,"tr",42)}function q(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.getDockScheduler())}),t._uU(1," Skip "),t.qZA()}}function K(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.navigateToTransportForm())}),t._uU(1," Transport "),t.qZA()}}let Y=(()=>{class a{constructor(e,o,l,i,_,J,Q){this.anyvariable=e,this.router=o,this.dialogRef=l,this.fb=i,this.route=_,this.matDialog=J,this.WorkWithDockSchedulerService=Q,this.TransportUrl="/main-nav/dock-scheduler/transport/read",this.user=localStorage.getItem("userName")||"",this.dataSource=new u.by,this.duplicateSource=[],this.editedRows=[],this.show=!1,this.displayedColumns=["Account","DocumentNumber","ReferenceNumber","PONumber","Status"],this.pageSize=8,this.totalRecords=0,this.pageNumber=1,this.dockUrl="/main-nav/DockschedulerDetails/read",this.createMsg="Dock Scheduler Details Created"}ngOnInit(){const e=this.anyvariable&&!0===this.anyvariable.shouldHideBackButton;console.log(this.anyvariable),this.appointmentNumber=e?this.anyvariable.apptNumber:this.anyvariable[1].DSAPPT,this.show=this.appointmentNumber===this.anyvariable?.apptNumber,this.form=this.fb.group({apptNumber:[{value:this.appointmentNumber,disabled:!0}],documentNumber:["",[s.kI.pattern("^[0-9]{0,9}$")]],documentType:"",account:"",referenceNo:"",proNumber:"",po:""}),setTimeout(()=>{this.getDetailsCreate(this.pageSize,this.pageNumber)},0)}ngOnDestroy(){this.createDetailsSubscription&&this.createDetailsSubscription.unsubscribe()}getDetailsCreate(e,o){this.createDetailsSubscription&&this.createDetailsSubscription.unsubscribe(),this.createDetailsSubscription=this.WorkWithDockSchedulerService.getWDockSchedulerDetails(this.user,this.appointmentNumber,e,o).subscribe(l=>{var i=JSON.parse(l[0].data[1]?.value);this.dataSource.data=i.returnedData,this.totalRecords=i.TotalRecords})}createDetails(){const e=this.form.value;this.WorkWithDockSchedulerService.WDockSchedulerDetailsCreate(this.appointmentNumber,0,e.documentNumber,e.documentType,e.account,e.referenceNo,e.proNumber,e.po).subscribe(o=>{const i=o[0].data[o[0].data.length-1].value;i.toUpperCase()===this.createMsg.toUpperCase()?this.appointmentNumber===this.anyvariable?.apptNumber?(this.successMessage(i),this.getDockScheduler()):(this.successMessage(i),this.closeDialog(),this.router.navigateByUrl(this.dockUrl,{state:this.anyvariable[1]})):this.failureMessage(i)})}getDockScheduler(){this.createDetailsSubscription&&this.createDetailsSubscription.unsubscribe(),this.createDetailsSubscription=this.WorkWithDockSchedulerService.getWDockScheduler(this.user,this.appointmentNumber,"","","","","","","","","","","","","","",0,"",8,1).subscribe(e=>{var o=JSON.parse(e[0].data[1]?.value);this.dataSource.data=o.returnedData,this.nextScreen(this.dataSource.data[0])})}nextScreen(e){e.shouldHideBackButton=!0,e.apptNumber=this.appointmentNumber,this.dialogRef.close(),this.matDialog.open(C.z,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}navigateToTransportForm(){const e={formData:this.form.value,dockData:this.anyvariable};console.log("Navigating to Transport Form with:",e),this.dialogRef&&this.dialogRef.close(),this.router.navigateByUrl("/main-nav/dock-scheduler/transport/read",{state:e})}successMessage(e){d().fire(e,"","success")}failureMessage(e){d().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.WI),t.Y36(p.F0),t.Y36(m.so),t.Y36(s.qu),t.Y36(p.gz),t.Y36(m.uw),t.Y36(T.A))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-ww-dock-scheduler-details-create"]],viewQuery:function(e,o){if(1&e&&t.Gf(f.NW,5),2&e){let l;t.iGM(l=t.CRH())&&(o.paginator=l.first)}},standalone:!0,features:[t.jDz],decls:80,vars:7,consts:[[1,"over-Flow"],[1,"main-header-title"],[1,"button"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","apptNumber","readonly",""],[1,"Table-Flow"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Account"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","DocumentNumber"],["matColumnDef","ReferenceNumber"],["matColumnDef","PONumber"],["matColumnDef","Status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matInput","","formControlName","documentNumber","maxlength","9"],["formControlName","documentType"],["value",""],["value","L"],["value","I"],["value","O"],["value","B"],["value","T"],["value","M"],["matInput","","formControlName","account","maxlength","10","appUppercase",""],["appearance","outline",1,"full-width2"],["matInput","","formControlName","referenceNo","maxlength","30","appUppercase",""],["matInput","","formControlName","proNumber","maxlength","30","appUppercase",""],["matInput","","formControlName","po","maxlength","30","appUppercase",""],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"],["mat-raised-button","","class","buttons addButton new-tally-form-btn","type","submit",3,"click",4,"ngIf"],["mat-raised-button","","class","buttons addButton new-tally-form-btn","type","button",3,"click",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"click"],["mat-raised-button","","type","button",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Dock Scheduler Details"),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(7,"mat-icon",4),t._uU(8,"close"),t.qZA()()()(),t.TgZ(9,"mat-card-content",5)(10,"form",6)(11,"div",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label"),t._uU(15," Appointment Number "),t.qZA(),t._UZ(16,"input",10),t.qZA()()(),t.TgZ(17,"div",11)(18,"table",12),t.ynx(19,13),t.YNc(20,E,2,0,"th",14),t.YNc(21,O,2,1,"td",15),t.BQk(),t.ynx(22,16),t.YNc(23,W,2,0,"th",14),t.YNc(24,M,2,1,"td",15),t.BQk(),t.ynx(25,17),t.YNc(26,w,2,0,"th",14),t.YNc(27,y,2,1,"td",15),t.BQk(),t.ynx(28,18),t.YNc(29,P,2,0,"th",14),t.YNc(30,R,2,1,"td",15),t.BQk(),t.ynx(31,19),t.YNc(32,B,2,0,"th",14),t.YNc(33,I,2,1,"td",15),t.BQk(),t.YNc(34,x,1,0,"tr",20),t.YNc(35,L,1,0,"tr",21),t.qZA()(),t.TgZ(36,"div",7)(37,"div",8)(38,"mat-form-field",9)(39,"mat-label"),t._uU(40,"Document Number"),t.qZA(),t._UZ(41,"input",22),t.qZA(),t.TgZ(42,"mat-form-field",9)(43,"mat-label"),t._uU(44,"Type"),t.qZA(),t.TgZ(45,"mat-select",23)(46,"mat-option",24),t._uU(47,"-- Select --"),t.qZA(),t.TgZ(48,"mat-option",25),t._uU(49,"L = Load"),t.qZA(),t.TgZ(50,"mat-option",26),t._uU(51,"I = Inbound tally"),t.qZA(),t.TgZ(52,"mat-option",27),t._uU(53,"O = Outbound bill"),t.qZA(),t.TgZ(54,"mat-option",28),t._uU(55,"B = Batch"),t.qZA(),t.TgZ(56,"mat-option",29),t._uU(57,"T = Transport"),t.qZA(),t.TgZ(58,"mat-option",30),t._uU(59,"M"),t.qZA()()(),t.TgZ(60,"mat-form-field",9)(61,"mat-label"),t._uU(62,"Account"),t.qZA(),t._UZ(63,"input",31),t.qZA(),t.TgZ(64,"mat-form-field",32)(65,"mat-label"),t._uU(66,"Reference Number"),t.qZA(),t._UZ(67,"input",33),t.qZA(),t.TgZ(68,"mat-form-field",32)(69,"mat-label"),t._uU(70,"PRO Number"),t.qZA(),t._UZ(71,"input",34),t.qZA(),t.TgZ(72,"mat-form-field",32)(73,"mat-label"),t._uU(74,"Purchase Order number"),t.qZA(),t._UZ(75,"input",35),t.qZA()()(),t.TgZ(76,"button",36),t.NdJ("click",function(){return o.createDetails()}),t._uU(77," Add "),t.qZA(),t.YNc(78,q,2,0,"button",37),t.YNc(79,K,2,0,"button",38),t.qZA()()()),2&e){let l,i;t.xp6(10),t.Q6J("formGroup",o.form),t.xp6(8),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(41),t.Q6J("disabled",!o.form.valid||"T"===(null==(l=o.form.get("documentType"))?null:l.value)),t.xp6(2),t.Q6J("ngIf",o.show),t.xp6(1),t.Q6J("ngIf","T"===(null==(i=o.form.get("documentType"))?null:i.value))}},dependencies:[b.m,v.O5,s._Y,s.Fj,s.JJ,s.JL,s.nD,s.sg,s.u,Z.Hw,N.lW,h.KE,h.hX,S.Nt,A.gD,U.ey,c.a8,c.dk,c.dn,c.n5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,k.e],styles:[".Table-Flow[_ngcontent-%COMP%]{padding-bottom:50px}"]}),a})()}}]);