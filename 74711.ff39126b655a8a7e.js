"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[74711,34894,26628,70096,49741],{34894:(M,v,i)=>{i.d(v,{e:()=>C});var c=i(94650),y=i(24006);let C=(()=>{class p{constructor(n,_){this.el=n,this.control=_}onInputChange(n){const _=this.el.nativeElement,d=_.value.toUpperCase();_.value=d,this.control&&this.control.control&&this.control.control.setValue(d,{emitEvent:!1})}}return p.\u0275fac=function(n){return new(n||p)(c.Y36(c.SBq),c.Y36(y.a5))},p.\u0275dir=c.lG2({type:p,selectors:[["","appUppercase",""]],hostBindings:function(n,_){1&n&&c.NdJ("input",function(t){return _.onInputChange(t)})},standalone:!0}),p})()},39505:(M,v,i)=>{i.d(v,{L:()=>S});var c=i(24006),y=i(59549),C=i(69751),p=i(68675),D=i(54004),n=i(94650),_=i(36895),d=i(47957),t=i(3238),m=i(44144);function T(f,A){if(1&f&&(n.TgZ(0,"mat-option",4),n._uU(1),n.qZA()),2&f){const s=A.$implicit;n.Q6J("value",s),n.xp6(1),n.Oqu(s)}}let S=(()=>{class f{constructor(s){this.fb=s,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=h=>{},this.onChange=h=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new C.y,this.filteredOptions=this.control.valueChanges.pipe((0,p.O)(this.value),(0,D.U)(h=>this._filter(h)))}setDescribedByIds(s){}onContainerClick(s){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(s){null!=s&&(this.control.setValue(s),this.value=s)}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}setDisabledState(s){this.disabled=s}_filter(s){if(null==s||0==s.length)return this.options;const h=s.toLowerCase(),g=this.options.filter(I=>I.toLowerCase().includes(h));return!this.disabled&&1===g.length&&this.control.value!=g[0]&&s.length>=(this.previousValue?.length??0)&&this.control.setValue(g[0]),this.onChange(this.control.value),this.previousValue=this.control.value,g}}return f.\u0275fac=function(s){return new(s||f)(n.Y36(c.qu))},f.\u0275cmp=n.Xpm({type:f,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(s,h){2&s&&n.uIk("aria-describedby",h.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[n._Bn([{provide:c.JU,multi:!0,useExisting:f},{provide:y.Eo,useExisting:f}],[{provide:c.gN,useExisting:c.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(s,h){if(1&s&&(n.TgZ(0,"mat-form-field",0)(1,"mat-label"),n._uU(2),n.qZA(),n._UZ(3,"input",1),n.TgZ(4,"mat-autocomplete",null,2),n.YNc(6,T,2,2,"mat-option",3),n.ALo(7,"async"),n.qZA()()),2&s){const g=n.MAs(5);n.Q6J("appearance",h.appearance),n.xp6(2),n.Oqu(h.label),n.xp6(1),n.Q6J("id",h.id)("placeholder",h.placeholder)("formControl",h.control)("matAutocomplete",g),n.xp6(3),n.Q6J("ngForOf",n.lcZ(7,7,h.filteredOptions))}},dependencies:[_.sg,c.Fj,c.JJ,c.oH,d.XC,d.ZL,t.ey,y.KE,y.hX,m.Nt,_.Ov]}),f})()},74711:(M,v,i)=>{i.r(v),i.d(v,{ActivitySupplyPoolComponent:()=>it});var c=i(15861),y=i(98739),C=i(70879),p=i(7155),D=i(86385),n=i(77579),_=i(78372),d=i(71884),t=i(94650),m=i(24006),T=i(19132),S=i(65412),f=i(11527),A=i(36895),s=i(97392),h=i(4859),g=i(59549),I=i(44144),O=i(73546),L=i(34894),x=i(39505);function W(a,r){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use DD-MM-YYYY. "),t.qZA())}function Y(a,r){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Invalid date format. Use DD-MM-YYYY. "),t.qZA())}function K(a,r){1&a&&(t.TgZ(0,"th",41),t._uU(1,"Date"),t.qZA())}function w(a,r){if(1&a&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.WTDATE)}}function J(a,r){1&a&&(t.TgZ(0,"th",41),t._uU(1,"Reference"),t.qZA())}function Q(a,r){if(1&a&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.WKREFNO)}}function F(a,r){1&a&&(t.TgZ(0,"th",41),t._uU(1,"Wr/Bol"),t.qZA())}function z(a,r){if(1&a&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.WKDOCN)}}function q(a,r){1&a&&(t.TgZ(0,"th",41),t._uU(1,"Description"),t.qZA())}function j(a,r){if(1&a&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.WKTDESC)}}function k(a,r){1&a&&(t.TgZ(0,"th",41),t._uU(1,"Transaction Type"),t.qZA())}function V(a,r){if(1&a&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.WKTTYPE)}}function G(a,r){1&a&&(t.TgZ(0,"th",41),t._uU(1,"Quantity"),t.qZA())}function H(a,r){if(1&a&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.SNQTY)}}function $(a,r){1&a&&(t.TgZ(0,"th",41),t._uU(1,"Balance"),t.qZA())}function X(a,r){if(1&a&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&a){const e=r.$implicit;t.xp6(1),t.Oqu(e.WBALNC)}}function tt(a,r){1&a&&t._UZ(0,"tr",43)}function et(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr",44),t.NdJ("click",function(){const u=t.CHM(e).$implicit,P=t.oxw();return t.KtG(P.rowClick(u))}),t.qZA()}}function at(a,r){1&a&&(t.TgZ(0,"div",45),t._UZ(1,"img",46),t.TgZ(2,"h3",47),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",48),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}const ot=function(){return[8,16,24]};let it=(()=>{class a{constructor(e,l,o,u){this.fb=e,this.router=l,this.matDialog=o,this.supplyPoolSvc=u,this.displayedColumns=["Date","Reference","WrBol","Description","TransType","Quantity","Balance"],this.searchTextDisplay=!1,this.dataSource=new p.by,this.duplicateSource=[],this.editedRows=[],this.columnShowHideList=[],this.user=localStorage.getItem("userName")||"",this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.includeOptions=["I","O","A"],this.url="/main-nav/supplyPool/read",this.searchInput$=new n.x,this.isSearchMode=!1,this.allData=[],this.filteredData=[],this.pageData=[],this.isLoading=!0,this.noData=!1,this.date=new Date,this.firstDay=new Date(this.date.getFullYear(),this.date.getMonth(),1),this.statusValue="AC"}ngOnInit(){const e=(new Date).toISOString().split("T")[0];this.element=history.state;const l=this.pageSize;this.editedRows=[];const o=this.pageNumber;this.form=this.fb.group({supplyType:this.element.S3TYPE,pool:this.element.WKNAME,startDate:this.firstDay.toLocaleDateString("fr-CA"),endDate:e,status:this.statusValue,includeType1:"",includeType2:"",includeType3:""}),this.getActivity(l,o),this.dataSource.filterPredicate=this.createFilter(),this.searchInput$.pipe((0,_.b)(500),(0,d.x)()).subscribe(u=>{this.handleSearch(u)})}getActivity(e,l){this.isLoading=!0,this.noData=!1,this.dataSource=new p.by([]);var o=this.form.value;this.poolSubscription&&this.poolSubscription.unsubscribe(),this.poolSubscription=this.supplyPoolSvc.getSupplyPoolActivity(this.user,this.element.S3TYPE,this.element.S3STOR,this.element.S3SSFX,this.element.S3CONS,this.element.S3CARR,o.startDate,o.endDate,o.includeType1,o.includeType2,o.includeType3,e,l).subscribe({next:u=>{this.isLoading=!1;const Z=JSON.parse(u?.[0]?.data?.[1]?.value||"{}"),U=Z?.returnedData||[];this.totalRecords=Z?.TotalRecords||0,this.dataSource.data=U,this.noData=0===U.length,this.paginator&&(this.paginator.length=this.totalRecords)},error:()=>this.handleReceivableNoData()})}handleReceivableNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new p.by([])}getActivityBySearch(e){const l=this.pageSize;this.currentFilters=e,this.paginator.firstPage(),this.getActivity(l,this.pageNumber)}applyGlobalFilterInput(e){this.searchInput$.next(e)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.getActivity(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(e,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}applyManualFilter(e){this.filteredData=this.allData.filter(l=>Object.values(l).some(o=>String(o).toLowerCase().includes(e))),this.noData=0===this.filteredData.length,this.totalRecords=this.filteredData.length,this.noData?this.dataSource.data=[]:this.loadPage(1)}loadPage(e){const l=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(l,l+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}loadSearchChunks(e,l){var o=this;return(0,c.Z)(function*(){const u=o.currentFilters||{},{startDate:P="",endDate:Z="",includeType1:U="",includeType2:nt="",includeType3:lt=""}=u,{chunkSize:B,maxCalls:st}=o.getSearchStrategy(o.totalRecords||0);let R=1,b=0,E=[];for(;b<st;){const rt=(yield o.supplyPoolSvc.getSupplyPoolActivity(o.user,o.element.S3TYPE,o.element.S3STOR,o.element.S3SSFX,o.element.S3CONS,o.element.S3CARR,P,Z,U,nt,lt,B,R).toPromise())?.[0]?.data?.[1]?.value,N=JSON.parse(rt)?.returnedData||[],pt=N.filter(ut=>Object.values(ut).some(ct=>String(ct).toLowerCase().includes(e)));if(E.push(...pt),E.length>0||N.length<B)break;R++,b++}o.allData=E,o.filteredData=E,o.totalRecords=E.length,l?.()})()}resetSearch(){this.form.reset(),this.currentFilters=null,this.isSearchMode=!1,this.allData=[],this.filteredData=[],this.paginator.firstPage(),this.getActivity(this.pageSize,1)}createFilter(){return(e,l)=>{const o=JSON.parse(l);return Object.keys(o).every(u=>e[u].toString().toLowerCase().includes(o[u].toLowerCase()))}}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode?this.loadPage(e.pageIndex+1):this.getActivity(e.pageSize,e.pageIndex+1)}ngOnDestroy(){this.poolSubscription&&this.poolSubscription.unsubscribe()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}rowClick(e){this.selectedRow=e}searchSupplyPool(){this.searchTextDisplay=1!=this.searchTextDisplay}onBack(){this.router.navigate([this.url])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(m.qu),t.Y36(T.F0),t.Y36(S.uw),t.Y36(f.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-activity-supply-pool"]],viewQuery:function(e,l){if(1&e&&t.Gf(y.NW,5),2&e){let o;t.iGM(o=t.CRH())&&(l.paginator=o.first)}},standalone:!0,features:[t.jDz],decls:80,vars:14,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","supplyType","appUppercase",""],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["type","date","matInput","","formControlName","startDate"],[4,"ngIf"],["type","date","matInput","","formControlName","endDate"],["readonly","","matInput","","formControlName","pool"],["readonly","","matInput","","formControlName","status"],["appearance","outline","formControlName","includeType1","label","Include Type1",1,"full-width",3,"options"],["appearance","outline","formControlName","includeType2","label","Include Type2",1,"full-width",3,"options"],["appearance","outline","formControlName","includeType3","label","Include Type3",1,"full-width",3,"options"],[1,"footer"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","new-tally-form-btn"],["id","myTable","mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Reference"],["matColumnDef","WrBol"],["matColumnDef","Description"],["matColumnDef","TransType"],["matColumnDef","Quantity"],["matColumnDef","Balance"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,l){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return l.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Supply Activity Inquiry"),t.qZA(),t.TgZ(7,"div",3)(8,"mat-form-field",4)(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.TgZ(11,"input",6),t.NdJ("input",function(u){return l.applyGlobalFilterInput(u.target.value)}),t.qZA()()()(),t.TgZ(12,"mat-card-content",7)(13,"form",8),t.NdJ("ngSubmit",function(){return l.getActivityBySearch(l.form.value)}),t.TgZ(14,"div",9)(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Supply Type"),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.TgZ(20,"div",13)(21,"label",14),t._uU(22,"Date"),t.qZA(),t.TgZ(23,"div",15)(24,"mat-form-field",11)(25,"mat-label"),t._uU(26,"Start Date"),t.qZA(),t._UZ(27,"input",16),t.YNc(28,W,2,0,"mat-error",17),t.qZA(),t.TgZ(29,"mat-form-field",11)(30,"mat-label"),t._uU(31,"End Date"),t.qZA(),t._UZ(32,"input",18),t.YNc(33,Y,2,0,"mat-error",17),t.qZA()()(),t._UZ(34,"br"),t.TgZ(35,"mat-form-field",11)(36,"mat-label"),t._uU(37,"Pool"),t.qZA(),t._UZ(38,"input",19),t.qZA(),t.TgZ(39,"mat-form-field",11)(40,"mat-label"),t._uU(41,"Status "),t.qZA(),t._UZ(42,"input",20),t.qZA(),t.TgZ(43,"div",13)(44,"label",14),t._uU(45,"Include Types"),t.qZA(),t.TgZ(46,"div",15),t._UZ(47,"custom-input-autocomplete",21)(48,"custom-input-autocomplete",22)(49,"custom-input-autocomplete",23),t.qZA()()()(),t.TgZ(50,"div",24)(51,"button",25),t._uU(52," Search "),t.qZA()()()(),t.TgZ(53,"table",26),t.ynx(54,27),t.YNc(55,K,2,0,"th",28),t.YNc(56,w,2,1,"td",29),t.BQk(),t.ynx(57,30),t.YNc(58,J,2,0,"th",28),t.YNc(59,Q,2,1,"td",29),t.BQk(),t.ynx(60,31),t.YNc(61,F,2,0,"th",28),t.YNc(62,z,2,1,"td",29),t.BQk(),t.ynx(63,32),t.YNc(64,q,2,0,"th",28),t.YNc(65,j,2,1,"td",29),t.BQk(),t.ynx(66,33),t.YNc(67,k,2,0,"th",28),t.YNc(68,V,2,1,"td",29),t.BQk(),t.ynx(69,34),t.YNc(70,G,2,0,"th",28),t.YNc(71,H,2,1,"td",29),t.BQk(),t.ynx(72,35),t.YNc(73,$,2,0,"th",28),t.YNc(74,X,2,1,"td",29),t.BQk(),t.YNc(75,tt,1,0,"tr",36),t.YNc(76,et,1,0,"tr",37),t.qZA(),t.YNc(77,at,6,0,"div",38),t.TgZ(78,"mat-paginator",39,40),t.NdJ("page",function(u){return l.onPaginateChange(u)}),t.qZA()()),2&e){let o,u;t.xp6(13),t.Q6J("formGroup",l.form),t.xp6(15),t.Q6J("ngIf",null==(o=l.form.get("startDate"))?null:o.hasError("invalidDate")),t.xp6(5),t.Q6J("ngIf",null==(u=l.form.get("endDate"))?null:u.hasError("invalidDate")),t.xp6(14),t.Q6J("options",l.includeOptions),t.xp6(1),t.Q6J("options",l.includeOptions),t.xp6(1),t.Q6J("options",l.includeOptions),t.xp6(4),t.Q6J("dataSource",l.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",l.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.displayedColumns),t.xp6(1),t.Q6J("ngIf",!l.isLoading&&l.noData),t.xp6(1),t.Q6J("length",l.totalRecords)("pageSizeOptions",t.DdM(13,ot))("pageSize",l.pageSize)}},dependencies:[C.m,A.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,y.NW,s.Hw,h.lW,g.TO,g.KE,g.hX,g.qo,I.Nt,O.a8,O.dk,O.dn,O.n5,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,L.e,D.j,x.L]}),a})()},15861:(M,v,i)=>{function c(C,p,D,n,_,d,t){try{var m=C[d](t),T=m.value}catch(S){return void D(S)}m.done?p(T):Promise.resolve(T).then(n,_)}function y(C){return function(){var p=this,D=arguments;return new Promise(function(n,_){var d=C.apply(p,D);function t(T){c(d,n,_,t,m,"next",T)}function m(T){c(d,n,_,t,m,"throw",T)}t(void 0)})}}i.d(v,{Z:()=>y})}}]);