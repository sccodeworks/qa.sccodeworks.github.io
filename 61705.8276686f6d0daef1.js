"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[61705,34894,26628,70096,49741],{34894:(A,S,i)=>{i.d(S,{e:()=>b});var p=i(94650),l=i(24006);let b=(()=>{class a{constructor(C,u){this.el=C,this.control=u}onInputChange(C){const u=this.el.nativeElement,k=u.value.toUpperCase();u.value=k,this.control&&this.control.control&&this.control.control.setValue(k,{emitEvent:!1})}}return a.\u0275fac=function(C){return new(C||a)(p.Y36(p.SBq),p.Y36(l.a5))},a.\u0275dir=p.lG2({type:a,selectors:[["","appUppercase",""]],hostBindings:function(C,u){1&C&&p.NdJ("input",function(t){return u.onInputChange(t)})},standalone:!0}),a})()},85016:(A,S,i)=>{i.r(S),i.d(S,{CommentsWorkWithDockSchedulerComponent:()=>G});var p=i(98739),l=i(7155),b=i(70879),a=i(24006),f=i(65412),C=i(35226),u=i.n(C),k=i(48529),t=i(94650),D=i(19132),_=i(72122),T=i(97392),Z=i(4859),g=i(59549),U=i(44144),d=i(73546);let N=(()=>{class r{constructor(e,o,n,c,s){this.anyvariable=e,this.dialogRef=o,this.router=n,this.dockSchedulerService=c,this.fb=s,this.user=localStorage.getItem("userName")}ngOnInit(){this.form=this.fb.group({appointmentNo:[this.anyvariable?.apptNumber||this.anyvariable?.DSAPPT||0,a.kI.required],comments:["",a.kI.maxLength(60)]})}ngOnDestroy(){this.addCommentSubscription&&this.addCommentSubscription.unsubscribe()}commentCreate(){var e=this.form.value;this.addCommentSubscription&&this.addCommentSubscription.unsubscribe(),this.addCommentSubscription=this.dockSchedulerService.createComments(this.user,e.appointmentNo,e.comments).subscribe(n=>{const c=n[0]?.data?.length,s=c?n[0]?.data[c-1]?.value:void 0,h=s?JSON.parse(s)?.returnedData?.message:void 0;h?.toUpperCase()===k.R.createMsg.toUpperCase()?(this.successMessage(h),this.closeDialog(),this.router.navigateByUrl("/main-nav/dock-scheduler/comments/read",{state:this.anyvariable})):this.failureMessage(h)})}successMessage(e){u().fire(e,"","success")}failureMessage(e){u().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.WI),t.Y36(f.so),t.Y36(D.F0),t.Y36(_.A),t.Y36(a.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-comment-dock-scheduler"]],standalone:!0,features:[t.jDz],decls:28,vars:2,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","appointmentNo"],["appearance","outline",1,"full-width","w-100"],["matInput","","required","","maxlength","60","formControlName","comments"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Dock Scheduler Comments"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Appointment Number"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",10)(17,"mat-label"),t._uU(18,"Comment"),t.qZA(),t.TgZ(19,"textarea",11),t._uU(20," "),t.qZA(),t.TgZ(21,"mat-hint"),t._uU(22," Only "),t.TgZ(23,"strong"),t._uU(24,"60 characters "),t.qZA(),t._uU(25," are allowed"),t.qZA()()()(),t.TgZ(26,"button",12),t.NdJ("click",function(){return o.commentCreate()}),t._uU(27," Create "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(17),t.Q6J("disabled",!(o.form.valid&&o.form.dirty)))},dependencies:[b.m,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,T.Hw,Z.lW,g.KE,g.bx,g.hX,U.Nt,d.a8,d.dk,d.dn,d.n5]}),r})(),w=(()=>{class r{constructor(e,o,n,c,s){this.anyvariable=e,this.dialogRef=o,this.dockSchedulerService=n,this.router=c,this.fb=s,this.user=localStorage.getItem("userName")}ngOnInit(){this.form=this.fb.group({appointmentNo:this.anyvariable[1].DCAPPT,sequence:this.anyvariable[1].DCSEQN,comments:[this.anyvariable[1].DCCOMM,a.kI.maxLength(60)]})}ngOnDestroy(){this.updateCommentSubscription&&this.updateCommentSubscription.unsubscribe()}commentUpdate(){var e=this.form.value;this.updateCommentSubscription&&this.updateCommentSubscription.unsubscribe(),this.updateCommentSubscription=this.dockSchedulerService.updateComments(this.user,e.appointmentNo,e.sequence,e.comments).subscribe(n=>{const c=n[0]?.data?.length,s=c?n[0]?.data[c-1]?.value:void 0,h=s?JSON.parse(s)?.returnedData?.message:void 0;h?.toUpperCase()===k.R.updateMsg.toUpperCase()?(this.successMessage(h),this.closeDialog(),this.router.navigateByUrl("/main-nav/dock-scheduler/comments/read",{state:this.anyvariable[0]})):this.failureMessage(h)})}successMessage(e){u().fire(e,"","success")}failureMessage(e){u().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(f.WI),t.Y36(f.so),t.Y36(_.A),t.Y36(D.F0),t.Y36(a.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-update-comment-dock-scheduler"]],standalone:!0,features:[t.jDz],decls:28,vars:2,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","","formControlName","appointmentNo"],["appearance","outline",1,"full-width","w-100"],["matInput","","required","","maxlength","60","formControlName","comments"],["mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Dock Scheduler Comments"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Appointment Number"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",10)(17,"mat-label"),t._uU(18,"Comment"),t.qZA(),t.TgZ(19,"textarea",11),t._uU(20," "),t.qZA(),t.TgZ(21,"mat-hint"),t._uU(22," Only "),t.TgZ(23,"strong"),t._uU(24,"60 characters "),t.qZA(),t._uU(25," are allowed"),t.qZA()()()(),t.TgZ(26,"button",12),t.NdJ("click",function(){return o.commentUpdate()}),t._uU(27," Update "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(17),t.Q6J("disabled",!(o.form.valid&&o.form.dirty)))},dependencies:[b.m,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,T.Hw,Z.lW,g.KE,g.bx,g.hX,U.Nt,d.a8,d.dk,d.dn,d.n5]}),r})();var W=i(17318),J=i(81001),x=i(15627),M=i(11790),I=i(36895);function B(r,m){1&r&&(t.TgZ(0,"th",22),t._uU(1,"Comments"),t.qZA())}function Y(r,m){if(1&r&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&r){const e=m.$implicit;t.xp6(1),t.Oqu(e.DCCOMM)}}function F(r,m){1&r&&t._UZ(0,"th",22)}function H(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"td",23)(1,"div",24)(2,"button",25)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",26)(6,"li")(7,"button",27),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.updateComment(c))}),t.TgZ(8,"mat-icon",28),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Update"),t.qZA()()(),t.TgZ(12,"li")(13,"button",27),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.deleteComment(c))}),t.TgZ(14,"mat-icon",29),t._uU(15,"delete"),t.qZA(),t.TgZ(16,"mat-label"),t._uU(17,"Delete"),t.qZA()()()()()()}}function R(r,m){1&r&&t._UZ(0,"tr",30)}function O(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"tr",31),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.rowClick(c))}),t.qZA()}}function q(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.createDockSchedulerDetails(n.element))}),t._uU(1," Skip "),t.qZA()}}function E(r,m){if(1&r){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onBack())}),t._uU(1," Skip "),t.qZA()}}const Q=function(){return[8,16,24]};let G=(()=>{class r{constructor(e,o,n,c,s,h,v){this.router=e,this.iHeaderSvc=o,this.dockSchedulerService=n,this.CustomAlertService=c,this.fb=s,this.route=h,this.matDialog=v,this.user=localStorage.getItem("userName")||"",this.dataSource=new l.by,this.duplicateSource=[],this.displayedColumns=["Comments","Actions"],this.INITIAL_PAGE=1,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.show=!1}ngOnInit(){this.element=history.state,this.fromTallyCreate=!0===this.element?.fromTallyCreate,this.tally=this.element?.tally,this.fromTallyCreate&&(this.show=!1);const e=this.element&&!0===this.element.shouldHideBackButton;this.appointment=e?this.element.apptNumber:this.element.DSAPPT||0,this.show=!e,this.form=this.fb.group({appointmentNo:[this.appointment]}),this.getComments(this.pageSize,this.INITIAL_PAGE)}ngOnDestroy(){this.commentsDockSchedulerSubscription&&this.commentsDockSchedulerSubscription.unsubscribe()}rowClick(e){this.selectedRow=e}onPaginateChange(e){this.pageSize=e.pageSize,this.getComments(e.pageSize,e.pageIndex+this.INITIAL_PAGE)}getComments(e,o){this.commentsDockSchedulerSubscription&&this.commentsDockSchedulerSubscription.unsubscribe(),this.commentsDockSchedulerSubscription=this.dockSchedulerService.getDockSchedulerComments(this.user,this.appointment,e,o).subscribe(n=>{const c=n?.[0]?.data?.[1]?.value;if(c)try{const s=JSON.parse(c);s?.returnedData?(this.duplicateSource=s.returnedData,this.dataSource=new l.by(this.duplicateSource),this.dataSource.paginator=this.paginator,this.totalRecords=s.TotalRecords||0):console.error("Returned data is undefined or null.")}catch(s){console.error("Error parsing response data:",s)}else console.error("Error fetching dock scheduler comments")})}createDockSchedulerDetails(e){e.shouldHideBackButton=!0,e.apptNumber=this.appointment,this.matDialog.open(W.s,{width:"1000px",maxHeight:"80vh",data:e,autoFocus:!1})}createComment(e){const n=this.element&&!0===this.element.shouldHideBackButton?{apptNumber:this.appointment,shouldHideBackButton:!0}:{DSAPPT:this.appointment,...this.element};this.matDialog.open(N,{width:"1000px",maxHeight:"80vh",data:n,autoFocus:!1})}updateComment(e){this.matDialog.open(w,{width:"1000px",maxHeight:"80vh",data:[this.element,e],autoFocus:!1})}deleteComment(e){this.CustomAlertService.openCustomAlert("Are you sure want to delete this comment: "+this.appointment+" ?").afterClosed().subscribe(c=>{c&&(this.deleteCommentsSubscription&&this.deleteCommentsSubscription.unsubscribe(),this.deleteCommentsSubscription=this.dockSchedulerService.deleteComments(this.user,this.appointment,e.DCSEQN).subscribe(s=>{const h=s[0]?.data?.length,v=h?s[0]?.data[h-1]?.value:void 0,y=(v?JSON.parse(v):void 0)?.returnedData?.message?.trim();y?.toUpperCase()===k.R.deleteMsg.toUpperCase()?(this.successMessage(y),this.getComments()):this.failureMessage(y)}))})}successMessage(e){u().fire(e,"","success")}failureMessage(e){u().fire(e,"","error")}onBack(){this.fromTallyCreate?this.openTimeslotFromComments():this.router.navigateByUrl("/main-nav/WorkWithDockScheduler/read",{state:this.element})}openTimeslotFromComments(){const e=this.tally?.IHTALY;e?this.iHeaderSvc.dockApptRead(this.user,e,10,1).subscribe(o=>{const n=o[0]?.data[1]?.value,s=n?JSON.parse(n):null;this.openTimeslotDialog(s)}):this.router.navigateByUrl("/main-nav/tallys/read")}openTimeslotDialog(e){this.matDialog.open(J.z,{width:"1000px",maxHeight:"80vh",data:{...e,fromTallyCreate:!0},autoFocus:!1}).afterClosed().subscribe(()=>{this.router.navigateByUrl("/main-nav/tallys/read")})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(D.F0),t.Y36(x.X),t.Y36(_.A),t.Y36(M.y),t.Y36(a.qu),t.Y36(D.gz),t.Y36(f.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-comments-work-with-dock-scheduler"]],viewQuery:function(e,o){if(1&e&&t.Gf(p.NW,5),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first)}},standalone:!0,features:[t.jDz],decls:35,vars:10,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","",1,"addButton",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","appointmentNo"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Comments"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],[1,"right-side"],["class","buttons button2",3,"click",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row","",3,"click"],[1,"buttons","button2",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return o.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Maintain Dock Scheduler Comments"),t.qZA(),t.TgZ(7,"div",3)(8,"button",4),t.NdJ("click",function(){return o.createComment(o.element)}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA(),t.TgZ(11,"span"),t._uU(12,"New Comment"),t.qZA()()()(),t.TgZ(13,"mat-card-content",5)(14,"form",6)(15,"div",7)(16,"div",8)(17,"mat-form-field",9)(18,"mat-label"),t._uU(19,"Appointment Number"),t.qZA(),t._UZ(20,"input",10),t.qZA()()()()(),t.TgZ(21,"table",11),t.ynx(22,12),t.YNc(23,B,2,0,"th",13),t.YNc(24,Y,2,1,"td",14),t.BQk(),t.ynx(25,15),t.YNc(26,F,1,0,"th",13),t.YNc(27,H,18,0,"td",14),t.BQk(),t.YNc(28,R,1,0,"tr",16),t.YNc(29,O,1,0,"tr",17),t.qZA(),t.TgZ(30,"div",18),t.YNc(31,q,2,0,"button",19),t.YNc(32,E,2,0,"button",19),t.qZA(),t.TgZ(33,"mat-paginator",20,21),t.NdJ("page",function(c){return o.onPaginateChange(c)}),t.qZA()()),2&e&&(t.xp6(14),t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("ngIf",!o.show),t.xp6(1),t.Q6J("ngIf",o.fromTallyCreate),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(9,Q))("pageSize",o.pageSize))},dependencies:[b.m,I.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,p.NW,T.Hw,Z.lW,g.KE,g.hX,U.Nt,d.a8,d.dk,d.dn,d.n5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk]}),r})()}}]);