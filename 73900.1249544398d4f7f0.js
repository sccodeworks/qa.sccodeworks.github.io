"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[73900,11790,38754,85645],{11790:(C,h,n)=>{n.d(h,{y:()=>t});var l=n(65412),a=n(94650),D=n(97392),b=n(4859);let g=(()=>{class s{constructor(m,f){this.dialogRef=m,this.data=f}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return s.\u0275fac=function(m){return new(m||s)(a.Y36(l.so),a.Y36(l.WI))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-alert-dialog"]],decls:16,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["aria-label","Close dialog",1,"close-btn",3,"click"],[1,"icon-wrapper"],["src","assets/svg/icons/Delete.svg","alt","Delete",1,"delete-svg-icon"],[1,"confirm-dialog-title"],[1,"confirmation-message"],[1,"footer","confirm-dialog"],["mat-raised-button","","id","no-button",1,"buttons","cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","id","yes-button",1,"buttons","removeButton","new-tally-form-btn",3,"mat-dialog-close"]],template:function(m,f){1&m&&(a.TgZ(0,"div",0)(1,"div",1)(2,"button",2),a.NdJ("click",function(){return f.closeDialog()}),a.TgZ(3,"mat-icon"),a._uU(4,"close"),a.qZA()(),a.TgZ(5,"div",3),a._UZ(6,"img",4),a.qZA(),a.TgZ(7,"h2",5),a._uU(8,"Confirmation"),a.qZA(),a.TgZ(9,"span",6),a._uU(10),a.qZA()(),a.TgZ(11,"div",7)(12,"button",8),a._uU(13,"Cancel"),a.qZA(),a.TgZ(14,"button",9),a._uU(15,"Delete"),a.qZA()()()),2&m&&(a.xp6(10),a.Oqu(f.data.message),a.xp6(2),a.Q6J("mat-dialog-close",!1),a.xp6(2),a.Q6J("mat-dialog-close",!0))},dependencies:[D.Hw,b.lW,l.ZT]}),s})(),t=(()=>{class s{constructor(m){this.dialog=m}openCustomAlert(m){return this.dialog.open(g,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:m}})}}return s.\u0275fac=function(m){return new(m||s)(a.LFG(l.uw))},s.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},81001:(C,h,n)=>{n.d(h,{z:()=>y});var l=n(24006),a=n(65412),D=n(70879),b=n(35226),g=n.n(b),t=n(94650),s=n(72122),p=n(19132),m=n(36895),f=n(97392),v=n(4859),Z=n(59549),A=n(44144),_=n(73546);function U(d,T){if(1&d){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.skipAssign())}),t._uU(1," Skip "),t.qZA()}}let y=(()=>{class d{constructor(e,o,r,i,u){this.anyvariable=e,this.dialogRef=o,this.dockSchedulerService=r,this.fb=i,this.router=u,this.user=localStorage.getItem("userName"),this.show=!1,this.updateMsg="Timeslot Updated Successfully",this.dockSchedulerUrl="/main-nav/WorkWithDockScheduler/read"}ngOnInit(){const e=this.anyvariable&&!0===this.anyvariable.shouldHideBackButton;this.fromTallyCreate=!0===this.anyvariable?.fromTallyCreate,this.appointmentNumber=e?this.anyvariable.apptNumber:this.anyvariable.DSAPPT||0,this.show=e;const o=this.getRequestedDateTime(this.anyvariable);let r="",i="";this.anyvariable.DSAPDT&&(r=this.formatCompressedDate(this.anyvariable.DSAPDT),i=this.formatCompressedTime(this.anyvariable.DSAPDT)),this.form=this.fb.group({appointmentNumber:[{value:this.appointmentNumber,disabled:!0}],buildingNumber:[{value:this.anyvariable.DSBLDG,disabled:!0}],inOut:[{value:this.anyvariable.DSINOU,disabled:!0}],appointmentType:[{value:this.anyvariable.DSATYP,disabled:!0}],loadType:[{value:this.anyvariable.DSLTYP,disabled:!0}],scacCode:[{value:this.anyvariable.DSSCAC,disabled:!0}],trailerRailCarNumber:[{value:this.anyvariable.DSTRAL,disabled:!0}],contact:[{value:this.anyvariable.DSCONT,disabled:!0}],contactPhone:[{value:this.anyvariable.DSCNPH,disabled:!0}],email:[{value:this.anyvariable.DSCNEM,disabled:!0}],requestedDateTime:[{value:o,disabled:!0}],expectedDuration:[{value:this.formatDuration(this.anyvariable.DSDURN),disabled:!0}],givenDate:[r,l.kI.required],givenTime:[i,l.kI.required],expectedDoor:this.anyvariable.DSDOOR||this.anyvariable.DSLOCN})}ngOnDestroy(){this.assignTimeDockSubscription&&this.assignTimeDockSubscription.unsubscribe()}formatDateToMMDDYY(e){if(!e)return 0;const o=new Date(e);if(isNaN(o.getTime()))return 0;const r=String(o.getMonth()+1).padStart(2,"0"),i=String(o.getDate()).padStart(2,"0"),u=String(o.getFullYear()).slice(2);return Number(`${r}${i}${u}`)}convertTimeToNumber(e){if(!e)return 0;const[o,r]=e.split(":").map(i=>i.padStart(2,"0"));return Number(`${o}${r}`)}assignTimeSlot(){const e=this.form.getRawValue(),o=this.formatDateToMMDDYY(e.givenDate),r=this.convertTimeToNumber(e.givenTime);this.assignTimeDockSubscription&&this.assignTimeDockSubscription.unsubscribe(),this.assignTimeDockSubscription=this.dockSchedulerService.updateTimeLoc(e.appointmentNumber,o,r,e.expectedDoor,"").subscribe(i=>{const u=i[0]?.data?.length,c=u?i[0]?.data[u-1]?.value:void 0;if(c?.toUpperCase()!==this.updateMsg.toUpperCase())return this.failureMessage(c),void this.closeDialog();this.successMessage(c),this.closeDialog(),this.router.navigateByUrl(this.fromTallyCreate?"/main-nav/tallys/read":"/main-nav/WorkWithDockScheduler/read")})}skipAssign(){this.closeDialog(),this.router.navigateByUrl(this.fromTallyCreate?"/main-nav/tallys/read":this.dockSchedulerUrl)}formatCompressedDate(e){return e?e.split("-").slice(0,3).join("-"):""}formatCompressedTime(e){if(!e)return"";const o=e.split("-");if(o.length<4)return"";const[r,i]=o[3].split(".");return`${r}:${i}`}formatCompressedDateTime(e){if(!e)return"";const[o,r,i,u]=e.split("-");if(!u)return"";const[c,S]=u.split(".");return`${r}/${i}/${o.slice(2)} ${c}:${S}`}formatDuration(e){const o=Number(e);return Number.isFinite(o)?o.toFixed(2):""}getRequestedDateTime(e){if(e?.DSRQDT)return this.formatCompressedDateTime(e.DSRQDT);if(e?.REQDT){const o=e.REQDT,r=e.REQTM;if(!r)return o;const i=String(r).replace(/\D/g,"");return 6===i.length||4===i.length?`${o} ${i.substring(0,2)}:${i.substring(2,4)}`:o}return""}successMessage(e){g().fire(e,"","success")}failureMessage(e){g().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(a.WI),t.Y36(a.so),t.Y36(s.A),t.Y36(l.qu),t.Y36(p.F0))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-loc-work-with-dock-scheduler"]],standalone:!0,features:[t.jDz],decls:81,vars:3,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","appointmentNumber"],["matInput","","formControlName","buildingNumber"],["matInput","","formControlName","inOut"],["matInput","","formControlName","appointmentType"],["matInput","","formControlName","loadType",2,"text-transform","uppercase"],["matInput","","formControlName","scacCode",2,"text-transform","uppercase"],["matInput","","formControlName","trailerRailCarNumber",2,"text-transform","uppercase"],["matInput","","formControlName","contact",2,"text-transform","uppercase"],["matInput","","formControlName","contactPhone"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","email"],["matInput","","formControlName","requestedDateTime"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","type","date","formControlName","givenDate","required",""],["matInput","","type","time","formControlName","givenTime","required",""],["matInput","","formControlName","expectedDuration"],["matInput","","formControlName","expectedDoor"],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"],["mat-raised-button","","class","buttons addButton new-tally-form-btn","type","submit",3,"click",4,"ngIf"],["mat-raised-button","","type","submit",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Assign Appointment Time Slot "),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Appointment Number"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Building"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"In/Out"),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Appointment Type"),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Load Type"),t.qZA(),t._UZ(31,"input",13),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34,"SCAC Code"),t.qZA(),t._UZ(35,"input",14),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38,"Trailer#"),t.qZA(),t._UZ(39,"input",15),t.qZA(),t.TgZ(40,"mat-form-field",8)(41,"mat-label"),t._uU(42,"Contact"),t.qZA(),t._UZ(43,"input",16),t.qZA(),t.TgZ(44,"mat-form-field",8)(45,"mat-label"),t._uU(46,"Contact Phone#"),t.qZA(),t._UZ(47,"input",17),t.qZA(),t.TgZ(48,"mat-form-field",18)(49,"mat-label"),t._uU(50,"Email"),t.qZA(),t._UZ(51,"input",19),t.qZA(),t.TgZ(52,"mat-form-field",18)(53,"mat-label"),t._uU(54,"Requested"),t.qZA(),t._UZ(55,"input",20),t.qZA(),t._UZ(56,"br"),t.TgZ(57,"div",21)(58,"label",22),t._uU(59,"Given"),t.qZA(),t.TgZ(60,"div",23)(61,"mat-form-field",8)(62,"mat-label"),t._uU(63,"Date"),t.qZA(),t._UZ(64,"input",24),t.qZA(),t.TgZ(65,"mat-form-field",8)(66,"mat-label"),t._uU(67," Time"),t.qZA(),t._UZ(68,"input",25),t.qZA(),t._UZ(69,"br"),t.qZA()(),t.TgZ(70,"mat-form-field",8)(71,"mat-label"),t._uU(72,"Duration"),t.qZA(),t._UZ(73,"input",26),t.qZA(),t.TgZ(74,"mat-form-field",8)(75,"mat-label"),t._uU(76,"Expected Door"),t.qZA(),t._UZ(77,"input",27),t.qZA()()(),t.TgZ(78,"button",28),t.NdJ("click",function(){return o.assignTimeSlot()}),t._uU(79," Add "),t.qZA(),t.YNc(80,U,2,0,"button",29),t.qZA()()()),2&e){let r;t.xp6(9),t.Q6J("formGroup",o.form),t.xp6(69),t.Q6J("disabled",!(null!=(r=o.form.get("givenDate"))&&r.value&&null!=(r=o.form.get("givenTime"))&&r.value)),t.xp6(2),t.Q6J("ngIf",o.show||o.fromTallyCreate)}},dependencies:[D.m,m.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,f.Hw,v.lW,Z.KE,Z.hX,A.Nt,_.a8,_.dk,_.dn,_.n5]}),d})()}}]);