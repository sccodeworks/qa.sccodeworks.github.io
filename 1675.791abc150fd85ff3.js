"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[1675,34894,11790,26628,38754,85645,70096,49741],{34894:(N,M,s)=>{s.d(M,{e:()=>d});var Z=s(94650),l=s(24006);let d=(()=>{class T{constructor(_,u){this.el=_,this.control=u}onInputChange(_){const u=this.el.nativeElement,g=u.value.toUpperCase();u.value=g,this.control&&this.control.control&&this.control.control.setValue(g,{emitEvent:!1})}}return T.\u0275fac=function(_){return new(_||T)(Z.Y36(Z.SBq),Z.Y36(l.a5))},T.\u0275dir=Z.lG2({type:T,selectors:[["","appUppercase",""]],hostBindings:function(_,u){1&_&&Z.NdJ("input",function(m){return u.onInputChange(m)})},standalone:!0}),T})()},11790:(N,M,s)=>{s.d(M,{y:()=>_});var Z=s(65412),l=s(94650),d=s(97392),T=s(4859);let f=(()=>{class u{constructor(m,t){this.dialogRef=m,this.data=t}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return u.\u0275fac=function(m){return new(m||u)(l.Y36(Z.so),l.Y36(Z.WI))},u.\u0275cmp=l.Xpm({type:u,selectors:[["app-alert-dialog"]],decls:16,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["aria-label","Close dialog",1,"close-btn",3,"click"],[1,"icon-wrapper"],["src","assets/svg/icons/Delete.svg","alt","Delete",1,"delete-svg-icon"],[1,"confirm-dialog-title"],[1,"confirmation-message"],[1,"footer","confirm-dialog"],["mat-raised-button","","id","no-button",1,"buttons","cancel-btn",3,"mat-dialog-close"],["mat-raised-button","","id","yes-button",1,"buttons","removeButton","new-tally-form-btn",3,"mat-dialog-close"]],template:function(m,t){1&m&&(l.TgZ(0,"div",0)(1,"div",1)(2,"button",2),l.NdJ("click",function(){return t.closeDialog()}),l.TgZ(3,"mat-icon"),l._uU(4,"close"),l.qZA()(),l.TgZ(5,"div",3),l._UZ(6,"img",4),l.qZA(),l.TgZ(7,"h2",5),l._uU(8,"Confirmation"),l.qZA(),l.TgZ(9,"span",6),l._uU(10),l.qZA()(),l.TgZ(11,"div",7)(12,"button",8),l._uU(13,"Cancel"),l.qZA(),l.TgZ(14,"button",9),l._uU(15,"Delete"),l.qZA()()()),2&m&&(l.xp6(10),l.Oqu(t.data.message),l.xp6(2),l.Q6J("mat-dialog-close",!1),l.xp6(2),l.Q6J("mat-dialog-close",!0))},dependencies:[d.Hw,T.lW,Z.ZT]}),u})(),_=(()=>{class u{constructor(m){this.dialog=m}openCustomAlert(m){return this.dialog.open(f,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:m}})}}return u.\u0275fac=function(m){return new(m||u)(l.LFG(Z.uw))},u.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},1675:(N,M,s)=>{s.r(M),s.d(M,{MaintQuestionsComponent:()=>qt});var Z=s(15861),l=s(98739),d=s(7155),T=s(73367),f=s(65412),_=s(35226),u=s.n(_),g=s(70879),m=s(48529),t=s(94650),C=s(19132),c=s(24006),E=s(12011),A=s(97392),y=s(4859),S=s(59549),U=s(44144),Y=s(84385),w=s(3238),b=s(73546),I=s(34894);let B=(()=>{class n{constructor(e,i,a,r,p,h){this.data=e,this.dialogRef=i,this.router=a,this.fb=r,this.anyvariable=p,this.MaintQuestionsSvc=h,this.user=localStorage.getItem("userName")||"",this.updateUrl="/main-nav/maintquestions/read"}ngOnInit(){console.log(this.anyvariable),this.form=this.fb.group({EZBLDG:{value:this.anyvariable.EZBLDG,disabled:!0},EZTYPE:{value:this.anyvariable.EZTYPE,disabled:!0},EZSEQ:{value:this.anyvariable.EZSEQ,disabled:!0},EZQUES:this.anyvariable.EZQUES,EZSEV:this.anyvariable.EZSEV,EZFORM:this.anyvariable.EZFORM,EZMAND:this.anyvariable.EZMAND,EZSTAT:this.anyvariable.EZSTAT})}ngOnDestroy(){this.maintSubscription&&this.maintSubscription.unsubscribe()}updateMaintQuestions(){var e=this.form.value;console.log(e),this.maintSubscription&&this.maintSubscription.unsubscribe(),this.maintSubscription=this.MaintQuestionsSvc.updateMaintQuestions(this.user,m.R.fullBuilding(this.anyvariable.EZBLDG),this.anyvariable.EZTYPE,this.anyvariable.EZSEQ,e.EZQUES,e.EZSEV,e.EZFORM,e.EZMAND,e.EZSTAT).subscribe(i=>{const r=JSON.parse(i[0].data[i[0].data.length-1].value).returnedData.message;r.toUpperCase()===m.R.updateMsg.toUpperCase()?(this.successMessage(r),this.closeDialog(),this.router.navigate([this.updateUrl])):this.failureMessage(r)})}successMessage(e){u().fire(e,"","success")}failureMessage(e){u().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.WI),t.Y36(f.so),t.Y36(C.F0),t.Y36(c.qu),t.Y36(f.WI),t.Y36(E.X))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-maintquestions-change"]],standalone:!0,features:[t.jDz],decls:51,vars:2,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EZBLDG"],["matInput","","formControlName","EZTYPE","appUppercase",""],["matInput","","formControlName","EZSEQ","appUppercase",""],["matInput","","formControlName","EZQUES","maxlength","30","appUppercase",""],["matInput","","formControlName","EZSEV","maxlength","2","appUppercase",""],["matInput","","formControlName","EZFORM","maxlength","10","appUppercase",""],["formControlName","EZMAND","appUppercase",""],["value","Y"],["value","N"],["matInput","","formControlName","EZSTAT","maxlength","2","appUppercase",""],[1,"footer"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Equipment Maintenance Questions"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Building Number "),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Equipment Type"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"Sequence Number"),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Maintenance Question"),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Maintenance Severity"),t.qZA(),t._UZ(31,"input",13),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34," Program/Action "),t.qZA(),t._UZ(35,"input",14),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38,"Mandatory Question"),t.qZA(),t.TgZ(39,"mat-select",15)(40,"mat-option",16),t._uU(41,"Yes"),t.qZA(),t.TgZ(42,"mat-option",17),t._uU(43,"No"),t.qZA()()(),t.TgZ(44,"mat-form-field",8)(45,"mat-label"),t._uU(46,"Status Code"),t.qZA(),t._UZ(47,"input",18),t.qZA()()(),t.TgZ(48,"div",19)(49,"button",20),t.NdJ("click",function(){return i.updateMaintQuestions()}),t._uU(50," Update "),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",i.form),t.xp6(40),t.Q6J("disabled",!(i.form.valid&&i.form.dirty)))},dependencies:[g.m,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.sg,c.u,A.Hw,y.lW,S.KE,S.hX,U.Nt,Y.gD,w.ey,b.a8,b.dk,b.dn,b.n5,I.e]}),n})(),O=(()=>{class n{constructor(e,i,a,r,p){this.dialogRef=e,this.router=i,this.fb=a,this.anyvariable=r,this.MaintQuestionsSvc=p,this.user=localStorage.getItem("userName")||"",this.copyUrl="/main-nav/maintquestions/read"}ngOnInit(){console.log(this.anyvariable),this.form=this.fb.group({EZBLDG:"",EZTYPE:this.anyvariable.EZTYPE,EZSEQ:this.anyvariable.EZSEQ,EZQUES:this.anyvariable.EZQUES,EZSEV:this.anyvariable.EZSEV,EZFORM:this.anyvariable.EZFORM,EZMAND:this.anyvariable.EZMAND,EZSTAT:this.anyvariable.EZSTAT})}ngOnDestroy(){this.maintSubscription&&this.maintSubscription.unsubscribe()}copyMaintQuestions(){var e=this.form.value;console.log(e),this.maintSubscription&&this.maintSubscription.unsubscribe(),this.maintSubscription=this.MaintQuestionsSvc.CopyMaintQuestions(m.R.fullBuilding(this.anyvariable.EZBLDG),this.anyvariable.EZTYPE,this.anyvariable.EZSEQ,e.EZBLDG,e.EZTYPE,e.EZSEQ,e.EZQUES,e.EZSEV,e.EZFORM,e.EZMAND,e.EZSTAT).subscribe(i=>{const r=i[0].data[i[0].data.length-1].value;r.toUpperCase()===m.R.copyMsg.toUpperCase()?(this.successMessage(r),this.closeDialog(),this.router.navigate([this.copyUrl])):this.failureMessage(r)})}successMessage(e){u().fire(e,"","success")}failureMessage(e){u().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.so),t.Y36(C.F0),t.Y36(c.qu),t.Y36(f.WI),t.Y36(E.X))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-maintquestions-copy"]],standalone:!0,features:[t.jDz],decls:51,vars:1,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EZBLDG"],["matInput","","formControlName","EZTYPE","appUppercase",""],["matInput","","formControlName","EZSEQ","appUppercase",""],["matInput","","formControlName","EZQUES","maxlength","30","appUppercase",""],["matInput","","formControlName","EZSEV","maxlength","2","appUppercase",""],["matInput","","formControlName","EZFORM","maxlength","10","appUppercase",""],["formControlName","EZMAND","appUppercase",""],["value","Y"],["value","N"],["matInput","","formControlName","EZSTAT","maxlength","2","appUppercase",""],[1,"footer"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Equipment Maintenance Questions"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14,"Building Number "),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Equipment Type"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"Sequence Number"),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Maintenance Question"),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Maintenance Severity"),t.qZA(),t._UZ(31,"input",13),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34," Program/Action "),t.qZA(),t._UZ(35,"input",14),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38,"Mandatory Question"),t.qZA(),t.TgZ(39,"mat-select",15)(40,"mat-option",16),t._uU(41,"Yes"),t.qZA(),t.TgZ(42,"mat-option",17),t._uU(43,"No"),t.qZA()()(),t.TgZ(44,"mat-form-field",8)(45,"mat-label"),t._uU(46,"Status Code"),t.qZA(),t._UZ(47,"input",18),t.qZA()()(),t.TgZ(48,"div",19)(49,"button",20),t.NdJ("click",function(){return i.copyMaintQuestions()}),t._uU(50," Copy "),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",i.form))},dependencies:[g.m,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.sg,c.u,A.Hw,y.lW,S.KE,S.hX,U.Nt,Y.gD,w.ey,b.a8,b.dk,b.dn,b.n5,I.e]}),n})();var k=s(11790);let G=(()=>{class n{constructor(e,i,a,r,p,h,v){this.data=e,this.dialogRef=i,this.router=a,this.fb=r,this.anyvariable=p,this.MaintQuestionsSvc=h,this.CustomAlertService=v,this.user=localStorage.getItem("userName")||"",this.deleteUrl="/main-nav/maintquestions/read"}ngOnInit(){this.form=this.fb.group({EZBLDG:this.anyvariable.EZBLDG,EZTYPE:this.anyvariable.EZTYPE,EZSEQ:this.anyvariable.EZSEQ,EZQUES:this.anyvariable.EZQUES,EZSEV:this.anyvariable.EZSEV,EZFORM:this.anyvariable.EZFORM,EZMAND:this.anyvariable.EZMAND,EZSTAT:this.anyvariable.EZSTAT}),this.form.disable()}deleteMaintQuestions(){this.CustomAlertService.openCustomAlert("Are you sure you want to delete this Maint Question ?").afterClosed().subscribe(i=>{i&&(this.MaintQuestionsSubscription&&this.MaintQuestionsSubscription.unsubscribe(),this.MaintQuestionsSubscription=this.MaintQuestionsSvc.deleteMaintQuestions(this.user,m.R.fullBuilding(this.anyvariable.EZBLDG),this.anyvariable.EZTYPE,this.anyvariable.EZSEQ).subscribe(a=>{const p=JSON.parse(a[0].data[a[0].data.length-1].value).returnedData.message;p.toUpperCase()===m.R.deleteMsg.toUpperCase()?(this.successMessage(p),this.closeDialog(),this.router.navigate([this.deleteUrl])):this.failureMessage(p)}))})}ngOnDestroy(){this.MaintQuestionsSubscription&&this.MaintQuestionsSubscription.unsubscribe()}successMessage(e){u().fire(e,"","success")}failureMessage(e){u().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.WI),t.Y36(f.so),t.Y36(C.F0),t.Y36(c.qu),t.Y36(f.WI),t.Y36(E.X),t.Y36(k.y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-maintquestions-delete"]],standalone:!0,features:[t.jDz],decls:50,vars:1,consts:[[1,"over-Flow-panel"],[1,"main-header-title"],["mat-icon-button","",1,"close-btn",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","EZBLDG"],["matInput","","formControlName","EZTYPE"],["matInput","","formControlName","EZSEQ"],["matInput","","formControlName","EZQUES"],["matInput","","formControlName","EZSEV"],["matInput","","formControlName","EZFORM"],["matInput","","formControlName","EZMAND"],["matInput","","formControlName","EZSTAT"],[1,"form-warning-message"],[1,"footer"],[1,"buttons","removeButton","new-tally-form-btn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Delete Equipment Maintenance Questions"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14," Building Number "),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18," Equipment Type"),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"Sequence Number"),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Maintenance Question"),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Maintenance Severity"),t.qZA(),t._UZ(31,"input",13),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34," Program/Action "),t.qZA(),t._UZ(35,"input",14),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38,"Manditory Question"),t.qZA(),t._UZ(39,"input",15),t.qZA(),t.TgZ(40,"mat-form-field",8)(41,"mat-label"),t._uU(42,"Status Code"),t.qZA(),t._UZ(43,"input",16),t.qZA()()(),t.TgZ(44,"div",17)(45,"p"),t._uU(46,"Press Enter to confirm Deletion"),t.qZA()(),t.TgZ(47,"div",18)(48,"button",19),t.NdJ("click",function(){return i.deleteMaintQuestions()}),t._uU(49," Delete "),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",i.form))},dependencies:[g.m,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,A.Hw,y.lW,S.KE,S.hX,U.Nt,b.a8,b.dk,b.dn,b.n5],styles:["p[_ngcontent-%COMP%]{color:red}"]}),n})();var P=s(77579),L=s(78372),z=s(71884),$=s(80529),F=s(36895),H=s(10266);function j(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchMaintQuestions())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA(),t.TgZ(3,"span"),t._uU(4," Filter"),t.qZA()()}}function K(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.searchMaintQuestions())}),t._UZ(1,"img",31),t.TgZ(2,"span"),t._uU(3,"Filter"),t.qZA()()}}function W(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"form",32),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getBySearch(a.form.value))}),t.TgZ(1,"div",33)(2,"div",34)(3,"mat-form-field",35)(4,"mat-label"),t._uU(5,"Building Number"),t.qZA(),t._UZ(6,"input",36),t.qZA(),t.TgZ(7,"mat-form-field",35)(8,"mat-label"),t._uU(9,"Equipment Type"),t.qZA(),t._UZ(10,"input",37),t.qZA(),t.TgZ(11,"mat-form-field",35)(12,"mat-label"),t._uU(13,"Status"),t.qZA(),t._UZ(14,"input",38),t.qZA()()(),t.TgZ(15,"div",39)(16,"button",40),t._uU(17," Search "),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.form)}}function V(n,o){1&n&&(t.TgZ(0,"th",41),t._uU(1,"Building Number"),t.qZA())}function X(n,o){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.EZBLDG)}}function tt(n,o){1&n&&(t.TgZ(0,"th",41),t._uU(1,"Equipment Type"),t.qZA())}function et(n,o){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.EZTYPE)}}function nt(n,o){1&n&&(t.TgZ(0,"th",41),t._uU(1,"Sequence Number"),t.qZA())}function it(n,o){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.EZSEQ)}}function at(n,o){1&n&&(t.TgZ(0,"th",41),t._uU(1,"Maintenance Question"),t.qZA())}function ot(n,o){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.EZQUES)}}function st(n,o){1&n&&(t.TgZ(0,"th",41),t._uU(1,"Maintenance Severity"),t.qZA())}function rt(n,o){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.EZSEV)}}function lt(n,o){1&n&&(t.TgZ(0,"th",41),t._uU(1,"Action"),t.qZA())}function ct(n,o){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.EZFORM)}}function ut(n,o){1&n&&(t.TgZ(0,"th",41),t._uU(1,"Manditory Question"),t.qZA())}function mt(n,o){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.EZMAND)}}function pt(n,o){1&n&&(t.TgZ(0,"th",41),t._uU(1,"Current Status"),t.qZA())}function dt(n,o){if(1&n&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.EZSTAT)}}function ht(n,o){1&n&&(t.TgZ(0,"th",43),t._uU(1," Actions "),t.qZA())}function ft(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw().$implicit,h=t.oxw();return t.KtG(h.executeAction(r,p))}),t._UZ(1,"img",60),t.TgZ(2,"span",61),t._uU(3),t.qZA()()}if(2&n){const e=o.$implicit;t.Q6J("color",e.color),t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH),t.xp6(2),t.Oqu(e.label)}}function gt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",69)(1,"button",70),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw(2).$implicit,h=t.oxw();return t.KtG(h.handleRecentClick(r,p))}),t._uU(2),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e.label," ")}}function Zt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",62)(1,"div",63)(2,"span",64),t._uU(3,"Recent Searches"),t.qZA(),t.TgZ(4,"button",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.clearRecentSearches())}),t.TgZ(5,"span",66),t._uU(6,"Clear"),t.qZA()()(),t.TgZ(7,"ul",67),t.YNc(8,gt,3,1,"li",68),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(8),t.Q6J("ngForOf",e.filteredRecentSearches)}}function _t(n,o){1&n&&(t.TgZ(0,"li",71)(1,"div",72)(2,"mat-icon",73),t._uU(3,"search"),t.qZA(),t.TgZ(4,"span",74),t._uU(5,"No results found"),t.qZA(),t.TgZ(6,"span",75),t._uU(7,"We couldn\u2019t find any items matching your search. Try adjusting your keywords."),t.qZA()()())}function bt(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"img",78),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH)}}function Tt(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.icon)}}function Ct(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",76)(1,"button",70),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw().$implicit,h=t.oxw();return t.KtG(h.handleItemClick(r,p))}),t.YNc(2,bt,2,2,"ng-container",77),t.YNc(3,Tt,3,1,"ng-container",77),t._uU(4),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Q6J("ngIf",null==e.icon?null:e.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=e.icon&&e.icon.includes("assets"))),t.xp6(1),t.hij(" ",e.label," ")}}function St(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"img",82),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("alt",e.label),t.Q6J("src",e.icon,t.LSH)}}function Mt(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-icon",83),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.icon)}}function vt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",79)(1,"button",70),t.NdJ("click",function(){const r=t.CHM(e).$implicit,p=t.oxw().$implicit,h=t.oxw();return t.KtG(h.handleItemClick(r,p))}),t.TgZ(2,"div",80),t.YNc(3,St,2,2,"ng-container",77),t.YNc(4,Mt,3,1,"ng-container",77),t.TgZ(5,"span",81),t._uU(6),t.qZA()()()()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("hidden",i.filteredItems.includes(e)),t.xp6(3),t.Q6J("ngIf",null==e.icon?null:e.icon.includes("assets")),t.xp6(1),t.Q6J("ngIf",!(null!=e.icon&&e.icon.includes("assets"))),t.xp6(2),t.Oqu(e.label)}}function Qt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",42)(1,"div",44)(2,"button",45),t._UZ(3,"img",46),t.qZA(),t.TgZ(4,"ul",47)(5,"li",48),t.YNc(6,ft,4,4,"button",49),t.qZA(),t.TgZ(7,"li",50)(8,"mat-form-field",51)(9,"input",52),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.searchDropdownText=a)})("input",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onSearchChange())}),t.qZA()()(),t.YNc(10,Zt,9,1,"li",53),t.TgZ(11,"div",54),t._UZ(12,"hr",55),t.qZA(),t.YNc(13,_t,8,0,"li",56),t.YNc(14,Ct,5,3,"li",57),t.YNc(15,vt,7,4,"li",58),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.headerActions),t.xp6(3),t.Q6J("ngModel",e.searchDropdownText),t.xp6(1),t.Q6J("ngIf",e.filteredRecentSearches.length>0),t.xp6(3),t.Q6J("ngIf",0===e.filteredItems.length),t.xp6(1),t.Q6J("ngForOf",e.filteredItems),t.xp6(1),t.Q6J("ngForOf",e.menuItems)}}function Et(n,o){1&n&&t._UZ(0,"tr",84)}function At(n,o){1&n&&t._UZ(0,"tr",85)}function yt(n,o){1&n&&(t.TgZ(0,"div",86),t._UZ(1,"img",87),t.TgZ(2,"h3",88),t._uU(3,"No Data Available"),t.qZA(),t.TgZ(4,"p",89),t._uU(5," There\u2019s no data to display right now. Try adjusting your filters or check back later. "),t.qZA()())}const Ut=function(){return[8,16,24]};let qt=(()=>{class n{constructor(e,i,a,r,p,h){this.MaintQuestionsSvc=e,this.fb=i,this.router=a,this.route=r,this.matDialog=p,this.http=h,this.user=localStorage.getItem("userName")||"",this.form=this.fb.group({BLDG:"",TYPE:"",STAT:"AC"}),this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.displayedColumns=["Building Number","Equipment Type","Sequence Number","Maintenance Question","Maintenance Severity","Action","Manditory Question","Current Status","Actions"],this.searchTextDisplay=!1,this.dataSource=new d.by,this.allData=[],this.filteredData=[],this.pageData=[],this.duplicateSource=[],this.headerActions=[],this.menuItems=[],this.filteredItems=[],this.remainingItems=[],this.searchDropdownText="",this.recentSearches=[],this.filteredRecentSearches=[],this.isLoading=!0,this.noData=!1,this.searchInput$=new P.x,this.isSearchMode=!1}ngOnInit(){const e=this.pageSize,i=this.pageNumber;this.getMaintQuestions(e,i),this.currentFilters=this.form.value,this.getMaintQuestions(e,i),this.dataSource.filterPredicate=this.createFilter(),this.searchInput$.pipe((0,L.b)(500),(0,z.x)()).subscribe(a=>{this.handleSearch(a)}),this.http.get("assets/jsondata/maintQuestions.json").subscribe(a=>{this.headerActions=a.header,this.menuItems=a.items,this.filteredItems=[...this.menuItems],this.remainingItems=[...this.menuItems],this.searchConfig=a.search;const r=localStorage.getItem("recentSearches");if(r){const p=JSON.parse(r);this.recentSearches=this.menuItems.filter(h=>p.includes(h.label))}this.filteredRecentSearches=[...this.recentSearches]})}handleItemClick(e,i){this.executeAction(e,i),this.addToRecentSearches(e)}executeAction(e,i){"function"==typeof this[e.action]?this[e.action](i):console.warn("Action not implemented:",e.action)}handleSearch(e){if(!(e=e.trim().toLowerCase()))return this.isSearchMode=!1,this.allData=[],this.filteredData=[],void this.getMaintQuestions(this.pageSize,1);this.isSearchMode=!0,this.loadSearchChunks(e,()=>{if(0===this.filteredData.length)return this.noData=!0,void(this.dataSource.data=[]);this.noData=!1,this.loadPage(1)})}loadSearchChunks(e,i){var a=this;return(0,Z.Z)(function*(){const r=a.currentFilters||{},{BLDG:p="",TYPE:h="",STAT:v=""}=r,{chunkSize:q,maxCalls:x}=a.getSearchStrategy(a.totalRecords||0);let Q=1,J=0,D=[];for(;J<x;){const xt=(yield a.MaintQuestionsSvc.getMaintQuestions(a.user,m.R.fullBuilding(p),h,v,q,Q).toPromise())?.[0]?.data?.[1]?.value,R=JSON.parse(xt||"{}")?.returnedData||[],Dt=R.filter(Nt=>Object.values(Nt).some(It=>String(It).toLowerCase().includes(e)));if(D.push(...Dt),R.length<q)break;Q++,J++}a.allData=D,a.filteredData=D,a.totalRecords=D.length,i?.()})()}applyManualFilter(e){this.filteredData=this.allData.filter(i=>Object.values(i).some(a=>String(a).toLowerCase().includes(e))),this.noData=0===this.filteredData.length,this.totalRecords=this.filteredData.length,this.noData?this.dataSource.data=[]:this.loadPage(1)}loadPage(e){const i=(e-1)*this.pageSize;this.pageData=this.filteredData.slice(i,i+this.pageSize),this.dataSource.data=this.pageData,this.paginator&&(this.paginator.pageIndex=e-1,this.paginator.length=this.totalRecords,this.paginator.pageSize=this.pageSize)}onPaginateChange(e){this.pageSize=e.pageSize,this.isSearchMode?this.loadPage(e.pageIndex+1):this.getMaintQuestions(e.pageSize,e.pageIndex+1)}getSearchStrategy(e){return e<=1500?{chunkSize:300,maxCalls:4}:e<=1e4?{chunkSize:2e3,maxCalls:5}:{chunkSize:5e3,maxCalls:5}}handleRecentClick(e,i){this.searchDropdownText=e.label,this.onSearchChange(),"function"==typeof this[e.action]&&this[e.action](i),this.addToRecentSearches(e)}applyGlobalFilterInput(e){this.searchInput$.next(e)}getMaintQuestions(e,i){this.isLoading=!0,this.noData=!1,this.dataSource=new d.by([]);const a=this.currentFilters||{},{BLDG:r="",TYPE:p="",STAT:h=""}=a;this.MaintQuestionsSubscription&&this.MaintQuestionsSubscription.unsubscribe(),this.MaintQuestionsSubscription=this.MaintQuestionsSvc.getMaintQuestions(this.user,m.R.fullBuilding(r),p,h,e,i).subscribe({next:v=>{this.isLoading=!1;const x=JSON.parse(v?.[0]?.data?.[1]?.value||"{}"),Q=x?.returnedData||[];this.totalRecords=x?.TotalRecords||0,this.dataSource.data=Q,this.noData=0===Q.length,this.paginator&&(this.paginator.length=this.totalRecords)},error:()=>this.handleMaintQuestionsNoData()})}handleMaintQuestionsNoData(){this.isLoading=!1,this.noData=!0,this.totalRecords=0,this.allData=[],this.filteredData=[],this.pageData=[],this.dataSource=new d.by([])}onSearchChange(){const e=(this.searchDropdownText||"").toLowerCase();this.filteredItems=this.menuItems.filter(i=>i.label.toLowerCase().includes(e)),this.filteredRecentSearches=e?[]:[...this.recentSearches]}addToRecentSearches(e){this.recentSearches=this.recentSearches.filter(i=>i.label!==e.label),this.recentSearches.unshift(e),this.recentSearches.length>5&&this.recentSearches.pop(),localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches.map(i=>i.label))),this.filteredRecentSearches=[...this.recentSearches]}clearRecentSearches(){this.recentSearches=[],this.filteredRecentSearches=[],localStorage.removeItem("recentSearches")}createFilter(){return(e,i)=>{const a=JSON.parse(i);return Object.keys(a).every(r=>e[r].toString().toLowerCase().includes(a[r].toLowerCase()))}}getBySearch(e){const i=this.pageSize;this.currentFilters=e,this.paginator.firstPage(),this.getMaintQuestions(i,this.pageNumber)}resetSearch(){const e=this.pageSize,i=this.pageNumber;this.form.reset(),this.currentFilters=null,this.paginator.firstPage(),this.getMaintQuestions(e,i)}ngOnDestroy(){this.MaintQuestionsSubscription&&this.MaintQuestionsSubscription.unsubscribe()}addMaintQuestions(){this.matDialog.open(T.MaintquestionsAddComponent,{panelClass:"right-dialog",autoFocus:!1})}MaintQuestionsUpdateForm(e){this.matDialog.open(B,{panelClass:"right-dialog",data:e,autoFocus:!1})}MaintQuestionsDeleteForm(e){this.matDialog.open(G,{panelClass:"right-dialog",data:e,autoFocus:!1})}MaintQuestionsCopyForm(e){this.matDialog.open(O,{panelClass:"right-dialog",data:e,autoFocus:!1})}searchMaintQuestions(){this.searchTextDisplay=1!=this.searchTextDisplay}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(E.X),t.Y36(c.qu),t.Y36(C.F0),t.Y36(C.gz),t.Y36(f.uw),t.Y36($.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-maint-questions"]],viewQuery:function(e,i){if(1&e&&t.Gf(l.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(i.paginator=a.first)}},standalone:!0,features:[t.jDz],decls:52,vars:11,consts:[[1,"over-Flow"],[1,"header-buttons"],["appearance","outline",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Equipment PM Questions",3,"click",4,"ngIf"],["mat-button","","type","reset","value","Reset","matTooltip","Reset Values",1,"addButton","buttons",3,"click"],["mat-button","","matTooltip","Add New Maint Question",1,"addButton",3,"click"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup","ngSubmit",4,"ngIf"],["id","myTable","mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Building Number"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Equipment Type"],["matColumnDef","Sequence Number"],["matColumnDef","Maintenance Question"],["matColumnDef","Maintenance Severity"],["matColumnDef","Action"],["matColumnDef","Manditory Question"],["matColumnDef","Current Status"],["matColumnDef","Actions"],["mat-header-cell","","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data-container",4,"ngIf"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Equipment PM Questions",1,"addButton",3,"click"],["src","assets/svg/header/filter.svg"],[1,"form","over-Flow",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","BLDG","appUppercase","","maxlength","3"],["matInput","","formControlName","TYPE","maxlength","10","appUppercase",""],["matInput","","formControlName","STAT","appUppercase","","maxlength","2"],[1,"footer"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"pending_actions_sec"],[1,"dropdown","more_options_btn","dropup"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false","data-bs-toggle","dropdown","aria-expanded","false","data-bs-auto-close","outside","data-bs-boundary","viewport","data-bs-popper","auto","data-popper-placement","auto",1,"btn"],["src","assets/svg/dropdownicons/Action.svg","alt","Actions",1,"Actions"],[1,"dropdown-menu","p-3"],[1,"header-dropdown","mb-2","d-flex","justify-content-between"],["mat-raised-button","","class","action-btn",3,"color","click",4,"ngFor","ngForOf"],[1,"search-section"],["appearance","outline",1,"search-input"],["matInput","","placeholder","Type to search",1,"full-width-search",3,"ngModel","ngModelChange","input"],["class","recent-searches",4,"ngIf"],[1,"filtered-divider-container"],[1,"filtered-divider"],["class","no-results",4,"ngIf"],["class","mb-menu-label",4,"ngFor","ngForOf"],["class","menu-items mb-1",3,"hidden",4,"ngFor","ngForOf"],["mat-raised-button","",1,"action-btn",3,"color","click"],[1,"action-icon",3,"src","alt"],[1,"action-label"],[1,"recent-searches"],[1,"d-flex","justify-content-between","align-items-center"],[1,"Recent-search-label"],["mat-icon-button","",3,"click"],[1,"clear"],[1,"list-unstyled"],["class","mb-recent-label",4,"ngFor","ngForOf"],[1,"mb-recent-label"],[1,"w-100","text-start",3,"click"],[1,"no-results"],[1,"no-results-content"],[1,"no-results-icon"],[1,"no-results-header"],[1,"no-results-text"],[1,"mb-menu-label"],[4,"ngIf"],[3,"src","alt"],[1,"menu-items","mb-1",3,"hidden"],[1,"menu-content"],[1,"menu-label"],[1,"menu-icon",3,"src","alt"],[1,"drop-menu-icon"],["mat-header-row",""],["mat-row",""],[1,"no-data-container"],["src","assets/svg/table-icons/file.svg",1,"mat-table-icon"],[1,"no-data-title"],[1,"no-data-message"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"div",1)(3,"mat-form-field",2)(4,"mat-icon",3),t._uU(5,"search"),t.qZA(),t.TgZ(6,"input",4),t.NdJ("input",function(r){return i.applyGlobalFilterInput(r.target.value)}),t.qZA()(),t.YNc(7,j,5,0,"button",5),t.YNc(8,K,4,0,"button",6),t.TgZ(9,"button",7),t.NdJ("click",function(){return i.resetSearch()}),t.TgZ(10,"mat-icon"),t._uU(11,"loop"),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){return i.addMaintQuestions()}),t.TgZ(13,"mat-icon"),t._uU(14,"add"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Create Maint Question"),t.qZA()()()(),t.TgZ(17,"mat-card-content",9),t.YNc(18,W,18,1,"form",10),t.qZA(),t.TgZ(19,"table",11),t.ynx(20,12),t.YNc(21,V,2,0,"th",13),t.YNc(22,X,2,1,"td",14),t.BQk(),t.ynx(23,15),t.YNc(24,tt,2,0,"th",13),t.YNc(25,et,2,1,"td",14),t.BQk(),t.ynx(26,16),t.YNc(27,nt,2,0,"th",13),t.YNc(28,it,2,1,"td",14),t.BQk(),t.ynx(29,17),t.YNc(30,at,2,0,"th",13),t.YNc(31,ot,2,1,"td",14),t.BQk(),t.ynx(32,18),t.YNc(33,st,2,0,"th",13),t.YNc(34,rt,2,1,"td",14),t.BQk(),t.ynx(35,19),t.YNc(36,lt,2,0,"th",13),t.YNc(37,ct,2,1,"td",14),t.BQk(),t.ynx(38,20),t.YNc(39,ut,2,0,"th",13),t.YNc(40,mt,2,1,"td",14),t.BQk(),t.ynx(41,21),t.YNc(42,pt,2,0,"th",13),t.YNc(43,dt,2,1,"td",14),t.BQk(),t.ynx(44,22),t.YNc(45,ht,2,0,"th",23),t.YNc(46,Qt,16,6,"td",14),t.BQk(),t.YNc(47,Et,1,0,"tr",24),t.YNc(48,At,1,0,"tr",25),t.qZA(),t.YNc(49,yt,6,0,"div",26),t.TgZ(50,"mat-paginator",27,28),t.NdJ("page",function(r){return i.onPaginateChange(r)}),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",i.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!i.searchTextDisplay),t.xp6(10),t.Q6J("ngIf",i.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&i.noData),t.xp6(1),t.Q6J("length",i.totalRecords)("pageSizeOptions",t.DdM(10,Ut))("pageSize",i.pageSize))},dependencies:[g.m,F.sg,F.O5,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.On,c.sg,c.u,l.NW,A.Hw,y.lW,S.KE,S.hX,S.qo,U.Nt,b.a8,b.dk,b.dn,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,H.gM,I.e]}),n})()},15861:(N,M,s)=>{function Z(d,T,f,_,u,g,m){try{var t=d[g](m),C=t.value}catch(c){return void f(c)}t.done?T(C):Promise.resolve(C).then(_,u)}function l(d){return function(){var T=this,f=arguments;return new Promise(function(_,u){var g=d.apply(T,f);function m(C){Z(g,_,u,m,t,"next",C)}function t(C){Z(g,_,u,m,t,"throw",C)}m(void 0)})}}s.d(M,{Z:()=>l})}}]);