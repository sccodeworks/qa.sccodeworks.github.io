"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[41802],{39505:(B,I,e)=>{e.d(I,{L:()=>m});var i=e(24006),g=e(59549),D=e(69751),R=e(68675),T=e(54004),a=e(94650),P=e(36895),t=e(47957),A=e(3238),r=e(44144);function c(n,d){if(1&n&&(a.TgZ(0,"mat-option",4),a._uU(1),a.qZA()),2&n){const s=d.$implicit;a.Q6J("value",s),a.xp6(1),a.Oqu(s)}}let m=(()=>{class n{constructor(s){this.fb=s,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=p=>{},this.onChange=p=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new D.y,this.filteredOptions=this.control.valueChanges.pipe((0,R.O)(this.value),(0,T.U)(p=>this._filter(p)))}setDescribedByIds(s){}onContainerClick(s){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(s){null!=s&&(this.control.setValue(s),this.value=s)}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}setDisabledState(s){this.disabled=s}_filter(s){if(null==s||0==s.length)return this.options;const p=s.toLowerCase(),f=this.options.filter(O=>O.toLowerCase().includes(p));return!this.disabled&&1===f.length&&this.control.value!=f[0]&&s.length>=(this.previousValue?.length??0)&&this.control.setValue(f[0]),this.onChange(this.control.value),this.previousValue=this.control.value,f}}return n.\u0275fac=function(s){return new(s||n)(a.Y36(i.qu))},n.\u0275cmp=a.Xpm({type:n,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(s,p){2&s&&a.uIk("aria-describedby",p.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[a._Bn([{provide:i.JU,multi:!0,useExisting:n},{provide:g.Eo,useExisting:n}],[{provide:i.gN,useExisting:i.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(s,p){if(1&s&&(a.TgZ(0,"mat-form-field",0)(1,"mat-label"),a._uU(2),a.qZA(),a._UZ(3,"input",1),a.TgZ(4,"mat-autocomplete",null,2),a.YNc(6,c,2,2,"mat-option",3),a.ALo(7,"async"),a.qZA()()),2&s){const f=a.MAs(5);a.Q6J("appearance",p.appearance),a.xp6(2),a.Oqu(p.label),a.xp6(1),a.Q6J("id",p.id)("placeholder",p.placeholder)("formControl",p.control)("matAutocomplete",f),a.xp6(3),a.Q6J("ngForOf",a.lcZ(7,7,p.filteredOptions))}},dependencies:[P.sg,i.Fj,i.JJ,i.oH,t.XC,t.ZL,A.ey,g.KE,g.hX,r.Nt,P.Ov]}),n})()},12652:(B,I,e)=>{e.d(I,{u:()=>P});var i=e(80529),g=e(75625),D=e(70262),R=e(62843),T=e(92340),a=e(94650);let P=(()=>{class t{constructor(r){this.httpClient=r,this.url=T.N.API_BASE_URL,this.httpHeader={headers:new i.WM({"Content-Type":"application/json"})}}getDockrules(r,c,m,n,d,s){return this.httpClient.get(this.url+"/dockRules/read",{params:{user:r,rule:c??"",description:m??"",type:n??"",recordsPerPage:d??"",pageNo:s??""}})}createDockrules(r,c,m,n,d){return this.httpClient.post(this.url+"/dockRules/create",{type:r,description:c,message:m,apptStatus:n,email:d}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}updateDockrules(r,c,m,n,d,s,p){return this.httpClient.put(this.url+"/dockRules/update",{user:r,rule:c,type:m,description:n,message:d,apptStatus:s,email:p}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}deleteDockrules(r,c,m,n,d,s,p,f,O,W){return this.httpClient.delete(this.url+`/dockRules/deleteRule?user=${r}&rule=${c}&description=${m}&type=${n}&apptStatus=${d}&exitPoint=${s}&msgID=${p}&severity=${f}&exitLogic=${O}&status=${W}`)}getMessage(){return this.httpClient.get(this.url+"/dockRules/messages")}getRules(){return this.httpClient.get(this.url+"/dockRules/rules")}getapptStatus(){return this.httpClient.get(this.url+"/dockRules/apptStatus")}emailPoint(){return this.httpClient.get(this.url+"/dockRules/epoint")}hold(r){return this.httpClient.put(this.url+"/dockRules/hold",{rule:r}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}release(r){return this.httpClient.put(this.url+"/dockRules/release",{rule:r}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}constraintRead(r,c,m,n){return this.httpClient.get(this.url+"/dockRules/constraint/read",{params:{user:r,rule:c??"",recordsPerPage:m??"",pageNo:n??""}})}constraintCreate(r,c,m,n,d,s,p,f){return this.httpClient.post(this.url+"/dockRules/constraint/create",{user:r,ruleNumber:c,constraintNumber:m,andOr:n,constraint:d,relationshipOperator:s,constraintValue:p,valueIncrement:f}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}constraintUpdate(r,c,m,n,d,s,p,f){return this.httpClient.put(this.url+"/dockRules/constraint/update",{user:r,ruleNumber:c,constraintNumber:m,andOr:n,constraint:d,relationshipOperator:s,constraintValue:p,valueIncrement:f}).pipe((0,g.X)(1),(0,D.K)(this.httpError))}constraintDelete(r,c,m){return this.httpClient.delete(this.url+`/dockRules/constraint/delete?user=${r}&rule=${c}&seq=${m}`)}constraints(){return this.httpClient.get(this.url+"/dockRules/constraints")}operators(){return this.httpClient.get(this.url+"/dockRules/operators")}values(){return this.httpClient.get(this.url+"/dockRules/values")}httpError(r){let c="";return c=r.error instanceof ErrorEvent?r.error.message:`Error Code: ${r.status}\nMessage: ${r.message}`,console.log(c),(0,R._)(()=>new Error(c))}}return t.\u0275fac=function(r){return new(r||t)(a.LFG(i.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},28366:(B,I,e)=>{e.d(I,{i:()=>f});var i=e(24006),g=e(65412),D=e(35226),R=e.n(D),T=e(70879),a=e(86385),P=e(48529),t=e(94650),A=e(19132),r=e(12652),c=e(97392),m=e(4859),n=e(59549),d=e(44144),s=e(73546),p=e(39505);let f=(()=>{class O{constructor(_,h,U,L,E){this.anyvariable=_,this.dialogRef=h,this.router=U,this.fb=L,this.dockRulesService=E,this.constraintsUrl="/main-nav/dockrules/constraints",this.user=localStorage.getItem("userName")||"",this.andOptions=["AND","OR"],this.constraintOptions=[],this.operatorOptions=[],this.valueOptions=[],this.rule=_}ngOnDestroy(){this.dockSubscription&&this.dockSubscription.unsubscribe()}ngOnInit(){this.form=this.fb.group({AndOr:["",i.kI.required],Constraint:["",i.kI.required],Operator:["",i.kI.required],Value:["",i.kI.required],ValueIncrement:["",[i.kI.pattern(/^\d{0,3}$/)]]}),this.fetchOperators(),this.fetchConstraints(),this.fetchValues()}fetchOperators(){this.dockRulesService.operators().subscribe(_=>{for(const h of _)this.operatorOptions.push(h.VLVALU)})}fetchConstraints(){this.dockRulesService.constraints().subscribe(_=>{for(const h of _)this.constraintOptions.push(h.VLVALU)})}fetchValues(){this.dockRulesService.values().subscribe(_=>{for(const h of _)this.valueOptions.push(h.VLVALU)})}ConstraintCreate(){var _=this.form.value;this.dockSubscription&&this.dockSubscription.unsubscribe(),this.dockSubscription=this.dockRulesService.constraintCreate(this.user,this.anyvariable.RUNMBR,0,_.AndOr,_.Constraint,_.Operator,_.Value,_.ValueIncrement).subscribe(h=>{const L=JSON.parse(h[0].data[h[0].data.length-1].value).returnedData.message;L.toUpperCase()===P.R.createMsg.toUpperCase()?(this.successMessage(L),this.dialogRef.close({success:!0,rule:this.rule})):this.failureMessage(L)})}successMessage(_){R().fire(_,"","success")}failureMessage(_){R().fire(_,"","error")}closeDialog(){this.dialogRef.close()}}return O.\u0275fac=function(_){return new(_||O)(t.Y36(g.WI),t.Y36(g.so),t.Y36(A.F0),t.Y36(i.qu),t.Y36(r.u))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-dock-constraint-create"]],standalone:!0,features:[t.jDz],decls:25,vars:6,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["formControlName","AndOr","label","And/Or*","required","",3,"options"],["formControlName","Constraint","label","Constraint*","required","",3,"options"],["formControlName","Operator","label","Operator*","required","",3,"options"],["formControlName","Value","label","Value*","required","",3,"options"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","ValueIncrement"],["mat-raised-button","",1,"buttons","addButton",3,"disabled","click"]],template:function(_,h){1&_&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Dock Rule Constraint"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return h.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7),t._UZ(12,"custom-input-autocomplete",8)(13,"custom-input-autocomplete",9)(14,"custom-input-autocomplete",10)(15,"custom-input-autocomplete",11)(16,"br"),t.TgZ(17,"mat-form-field",12)(18,"mat-label"),t._uU(19,"Value Increment"),t.qZA(),t._UZ(20,"input",13),t.TgZ(21,"mat-hint"),t._uU(22,"(+/-) Minutes (if *CURRENT)"),t.qZA()()()(),t.TgZ(23,"button",14),t.NdJ("click",function(){return h.ConstraintCreate()}),t._uU(24," Add "),t.qZA()()()()),2&_&&(t.xp6(9),t.Q6J("formGroup",h.form),t.xp6(3),t.Q6J("options",h.andOptions),t.xp6(1),t.Q6J("options",h.constraintOptions),t.xp6(1),t.Q6J("options",h.operatorOptions),t.xp6(1),t.Q6J("options",h.valueOptions),t.xp6(8),t.Q6J("disabled",!h.form.valid))},dependencies:[T.m,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,c.Hw,m.lW,n.KE,n.bx,n.hX,d.Nt,s.a8,s.dk,s.dn,s.n5,a.j,p.L]}),O})()},41802:(B,I,e)=>{e.r(I),e.d(I,{WwDockrulesCreateComponent:()=>L});var i=e(65412),g=e(35226),D=e.n(g),R=e(70879),T=e(48529),a=e(86385),P=e(28366),t=e(94650),A=e(12652),r=e(24006),c=e(19132),m=e(36895),n=e(97392),d=e(4859),s=e(59549),p=e(44144),f=e(73546),O=e(39505);const W=["itemInput"];function _(E,k){if(1&E){const o=t.EpF();t.TgZ(0,"custom-input-autocomplete",17,10),t.NdJ("focus",function(){t.CHM(o);const u=t.oxw();return t.KtG(u.onItemFocus())}),t.qZA()}if(2&E){const o=t.oxw();t.Q6J("options",o.msgIdOptions)}}function h(E,k){if(1&E&&t._UZ(0,"custom-input-autocomplete",18),2&E){const o=t.oxw();t.Q6J("options",o.apptOptions)}}function U(E,k){if(1&E&&t._UZ(0,"custom-input-autocomplete",19),2&E){const o=t.oxw();t.Q6J("options",o.emailOptions)}}let L=(()=>{class E{constructor(o,l,u,C,M,v,S){this.DockrulesService=o,this.anyvariable=l,this.dialogRef=u,this.fb=C,this.router=M,this.cdr=v,this.matDialog=S,this.ruleOptions=[],this.ruleTypeMap=new Map,this.msgIdOptions=[],this.apptOptions=[],this.apptTypeMap=new Map,this.emailOptions=[],this.dockUrl="/main-nav/dock-rules/read",this.msgIdMap=new Map}ngOnInit(){this.form=this.fb.group({TYPE:[""],MSGID:[""],RUDESC:[""],apptStatus:[""],email:[""]}),this.fetchRules(),this.fetchMessage(),this.fetchAppt(),this.fetchEmail()}onItemFocus(){if(this.ruleOptions.length>0&&this.itemInputComponent?.control){const o=this.itemInputComponent.control.value||"";this.itemInputComponent.control.setValue(o+" "),setTimeout(()=>{this.itemInputComponent.control.setValue(o)},0)}}ngOnDestroy(){this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe()}get normalizedType(){const o=this.form.get("TYPE")?.value;return(this.ruleTypeMap.get(o)||o||"").trim().toUpperCase()}get normalizedApptStatus(){const o=this.form.get("apptStatus")?.value;return(this.apptTypeMap.get(o)||o||"").trim()}fetchRules(){this.ruleOptions=[],this.ruleTypeMap.clear(),this.DockrulesService.getRules().subscribe(o=>{o.forEach(l=>{const u=l.VLVALU?.trim(),M=`${u} - ${l.VLSDSC?.trim()||""}`;this.ruleOptions.push(M),this.ruleTypeMap.set(M,u)}),this.cdr.detectChanges()})}fetchMessage(){this.msgIdOptions=[],this.msgIdMap.clear(),this.DockrulesService.getMessage().subscribe(o=>{const l=new Set;o.forEach(u=>{const C=u.MSGID?.trim(),M=u.MESSAGE?.trim();if(!C)return;const v=M?`${C} - ${M}`:C;l.has(v)||(l.add(v),this.msgIdOptions.push(v),this.msgIdMap.set(v,C))}),this.cdr.detectChanges()})}get normalizedMsgId(){const o=this.form.get("MSGID")?.value;return(this.msgIdMap.get(o)||o||"").trim()}fetchAppt(){this.DockrulesService.getapptStatus().subscribe(o=>{const l=o.filter((u,C,M)=>C===M.findIndex(v=>v.VLVALU?.trim()===u.VLVALU?.trim()));this.apptOptions=l.map(u=>{const C=`${u.VLVALU.trim()} - ${u.VLSDSC?.trim()||""}`;return this.apptTypeMap.set(C,u.VLVALU.trim()),C}),this.cdr.detectChanges()})}fetchEmail(){this.emailOptions=[],this.DockrulesService.emailPoint().subscribe(o=>{const l=new Set(o.map(u=>u.EPPOIN?.trim()).filter(u=>!!u));this.emailOptions=[...l],this.cdr.detectChanges()})}isAddDisabled(){const o=this.normalizedType;return"DY"===o?!(this.form.get("RUDESC")?.value?.trim()&&this.normalizedApptStatus&&this.form.get("email")?.value?.trim()):"EN"!==o&&"CL"!==o||!(this.form.get("RUDESC")?.value?.trim()&&this.form.get("MSGID")?.value?.trim())}addDockrules(){const o=this.form.value,l=this.normalizedType,u=this.normalizedApptStatus;this.dockRulesSubscription&&this.dockRulesSubscription.unsubscribe(),this.dockRulesSubscription=this.DockrulesService.createDockrules(l,o.RUDESC,this.normalizedMsgId,u,o.email).subscribe(C=>{const v=C[0].data[C[0].data.length-1].value;v.toUpperCase()===T.R.create.toUpperCase()?(this.createdRule={RUNMBR:C[0].data[1].value,RUDESC:C[0].data[4].value},this.matDialog.open(P.i,{width:"1000px",maxHeight:"80vh",data:this.createdRule,disableClose:!0}).afterClosed().subscribe(K=>{K?.success&&(this.dialogRef.close(),this.router.navigateByUrl("/main-nav/dockrules/constraints",{state:K.rule}))})):this.failureMessage(v)})}successMessage(o){D().fire(o,"","success")}failureMessage(o){D().fire(o,"","error")}closeDialog(){this.dialogRef.close()}}return E.\u0275fac=function(o){return new(o||E)(t.Y36(A.u),t.Y36(i.WI),t.Y36(i.so),t.Y36(r.qu),t.Y36(c.F0),t.Y36(t.sBO),t.Y36(i.uw))},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-ww-dockrules-create"]],viewQuery:function(o,l){if(1&o&&t.Gf(W,5),2&o){let u;t.iGM(u=t.CRH())&&(l.itemInputComponent=u.first)}},standalone:!0,features:[t.jDz],decls:23,vars:6,consts:[[1,"over-Flow"],[1,"main-header-title"],[1,"title"],["mat-icon-button","",1,"closeIcon",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["formControlName","TYPE","label","Rule Type*","appearance","outline","required","",1,"large-input",3,"options","focus","click"],["itemInput",""],["appearance","outline",1,"full-width2"],["matInput","","required","","formControlName","RUDESC"],["formControlName","MSGID","label","Message ID*","appearance","outline","required","","class","large-input",3,"options","focus",4,"ngIf"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","","class","large-input",3,"options",4,"ngIf"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options",4,"ngIf"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"disabled","click"],["formControlName","MSGID","label","Message ID*","appearance","outline","required","",1,"large-input",3,"options","focus"],["formControlName","apptStatus","label","For Appt Status*","appearance","outline","required","",1,"large-input",3,"options"],["formControlName","email","label","Email To Issue*","appearance","outline","required","",3,"options"]],template:function(o,l){1&o&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title",2),t._uU(4,"Maintain Dock Rules"),t.qZA()(),t.TgZ(5,"button",3),t.NdJ("click",function(){return l.closeDialog()}),t.TgZ(6,"mat-icon",4),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"custom-input-autocomplete",9,10),t.NdJ("focus",function(){return l.onItemFocus()})("click",function(){return l.onItemFocus()}),t.qZA(),t.TgZ(14,"mat-form-field",11)(15,"mat-label"),t._uU(16,"Description"),t.qZA(),t._UZ(17,"input",12),t.qZA(),t.YNc(18,_,2,1,"custom-input-autocomplete",13),t.YNc(19,h,1,1,"custom-input-autocomplete",14),t.YNc(20,U,1,1,"custom-input-autocomplete",15),t.qZA()(),t.TgZ(21,"button",16),t.NdJ("click",function(){return l.addDockrules()}),t._uU(22," Add "),t.qZA()()()()),2&o&&(t.xp6(9),t.Q6J("formGroup",l.form),t.xp6(3),t.Q6J("options",l.ruleOptions),t.xp6(6),t.Q6J("ngIf","EN"===l.normalizedType||"CL"===l.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===l.normalizedType),t.xp6(1),t.Q6J("ngIf","DY"===l.normalizedType),t.xp6(1),t.Q6J("disabled",l.isAddDisabled()))},dependencies:[R.m,m.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,n.Hw,d.lW,s.KE,s.hX,p.Nt,f.a8,f.dk,f.dn,f.n5,a.j,O.L],styles:["custom-input-autocomplete.large-input mat-form-field{width:50%}"]}),E})()}}]);