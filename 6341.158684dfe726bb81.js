"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[6341],{6341:(ot,g,a)=>{a.r(g),a.d(g,{StorerAccessInvoiceEnquiryComponent:()=>et});var T=a(98739),l=a(7155),I=a(70879),Z=a(35226),A=a.n(Z),t=a(94650),S=a(19132),C=a(11240),m=a(24006),D=a(65412),E=a(36895),y=a(97392),q=a(4859),f=a(59549),P=a(44144),d=a(99602),p=a(73546),N=a(10266);function O(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.searchAccessInvInq())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function b(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.searchAccessInvInq())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function U(e,r){if(1&e&&(t.TgZ(0,"form",30)(1,"div",31)(2,"div",32)(3,"mat-form-field",33)(4,"mat-label"),t._uU(5,"Period"),t.qZA(),t._UZ(6,"input",34),t.qZA(),t.TgZ(7,"mat-form-field",33)(8,"mat-label"),t._uU(9,"Date "),t.qZA(),t._UZ(10,"input",35)(11,"mat-datepicker-toggle",36)(12,"mat-datepicker",null,37),t.qZA(),t.TgZ(14,"mat-form-field",33)(15,"mat-label"),t._uU(16,"Time"),t.qZA(),t._UZ(17,"input",38),t.qZA(),t.TgZ(18,"div",39)(19,"label",40),t._uU(20,"Generated"),t.qZA(),t.TgZ(21,"div",41)(22,"mat-form-field",33)(23,"mat-label"),t._uU(24,"Generated Date "),t.qZA(),t._UZ(25,"input",42)(26,"mat-datepicker-toggle",36)(27,"mat-datepicker",null,43),t.qZA(),t.TgZ(29,"mat-form-field",33)(30,"mat-label"),t._uU(31,"Generated Time"),t.qZA(),t._UZ(32,"input",44),t.qZA()()(),t.TgZ(33,"mat-form-field",33)(34,"mat-label"),t._uU(35," Page Of "),t.qZA(),t._UZ(36,"input",45),t.qZA(),t.TgZ(37,"mat-form-field",33)(38,"mat-label"),t._uU(39,"Document"),t.qZA(),t._UZ(40,"input",46),t.qZA(),t.TgZ(41,"mat-form-field",47)(42,"mat-label"),t._uU(43," Storer "),t.qZA(),t._UZ(44,"input",48),t.qZA()()(),t.TgZ(45,"button",49),t._uU(46," Search "),t.qZA()()),2&e){const n=t.MAs(13),o=t.MAs(28),i=t.oxw();t.Q6J("formGroup",i.form),t.xp6(6),t.Q6J("value",i.period),t.xp6(4),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(14),t.Q6J("matDatepicker",o),t.xp6(1),t.Q6J("for",o)}}function M(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Date"),t.qZA())}function x(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WDATE)}}function R(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Tally Order"),t.qZA())}function W(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WTALLY)}}function B(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Reference Number"),t.qZA())}function Y(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WREFNO)}}function k(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Pieces"),t.qZA())}function K(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WPIECE)}}function G(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Weight"),t.qZA())}function J(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WWEIGH)}}function L(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Type"),t.qZA())}function Q(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WTYPE)}}function F(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Return Payment Type"),t.qZA())}function w(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WRTNTP)}}function $(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Consignee"),t.qZA())}function z(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WCONS)}}function H(e,r){1&e&&(t.TgZ(0,"th",50),t._uU(1,"Min"),t.qZA())}function X(e,r){if(1&e&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&e){const n=r.$implicit;t.xp6(1),t.Oqu(n.WMIN)}}function j(e,r){1&e&&t._UZ(0,"tr",52)}function V(e,r){1&e&&t._UZ(0,"tr",53)}const tt=function(){return[4,8,16]};let et=(()=>{class e{constructor(n,o,i,u,s,c){this.router=n,this.StorerServiceService=o,this.fb=i,this.route=u,this.matDialog=s,this.cdr=c,this.StorerRead="/main-nav/storer",this.dataSource=new l.by,this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.headerColumns=["Date","TallyOrder","ReferenceNo","Pieces","Weight","Type","RtnPayTp","Consignee","Min"],this.WKINVN="0",this.searchTextDisplay=!1,this.user=localStorage.getItem("userName")||"",this.columnShowHideList=[],this.StorerName="",this.period="",this.totalAmountDue=0,this.total=0}ngOnInit(){this.element=history.state,this.StorerName=this.element.STNAME,this.form=this.fb.group({Period:this.element.Period,P1STOR:[this.element.STORE]+"\xa0"+[this.element.STNAME],P1SSFX:this.element.STSFX,GEND:"",INVNO:"",Date:[new Date],Time:[this.formatCurrentTime()],GENDT:"",GENTM:"",CPAG:"1",WKDOCN:"",SNAME:""}),this.getAccessInvoiceEnquiry(this.pageSize,1),this.dataSource.filterPredicate=this.createFilter()}formatCurrentTime(){const n=new Date;return`${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`}createFilter(){return(n,o)=>{const i=JSON.parse(o);return Object.keys(i).every(u=>{const s=n[u]?.toString().toLowerCase()||"",c=i[u].toLowerCase();return s.includes(c)})}}resetSearch(){this.form.reset(),this.currentFilters=null,this.paginator.firstPage(),this.getAccessInvoiceEnquiry(this.pageSize,1)}onPaginateChange(n){this.pageSize=n.pageSize,this.getAccessInvoiceEnquiry(n.pageSize,n.pageIndex+1)}searchAccessInvInq(){this.searchTextDisplay=1!=this.searchTextDisplay}getAccessInvoiceEnquiry(n,o){const i=this.currentFilters||{},{P1STOR:u=`${this.element.STORE}`,P1SSFX:s="",GEND:c="",WKDOCN:h=""}=i;this.getAll2Subscription&&this.getAll2Subscription.unsubscribe(),this.getAll2Subscription=this.StorerServiceService.AccessInvoiceInquiry(this.user,u,s,c,h,this.WKINVN,n,o).subscribe(nt=>{var _=JSON.parse(nt[0].data[1]?.value),v=_.returnedData;this.dataSource.data=v,this.period=_.Period,this.totalAmountDue=_["Total Amount Due"],this.loadGeneratedDateTime(v[0].WKGEND),this.StorerName=_.StorerName,this.totalRecords=_.TotalRecords})}loadGeneratedDateTime(n){const o=n.replace('WKGEND":"',"").replace(/"/g,""),i="20"+o.substring(1,3),u=o.substring(3,5),s=o.substring(5,7),c=o.substring(7,9),h=o.substring(9,11);this.form.patchValue({GENDT:new Date(`${i}-${u}-${s}`),GENTM:`${c}:${h}`})}getSupplyBySearch(n){this.currentFilters=n,this.paginator.firstPage(),this.getAccessInvoiceEnquiry(this.pageSize,1)}onPrintAccessInvoice(){const o=this.element.STORE,i=this.form.get("P1SSFX")?.value;this.StorerServiceService.PrintAccessInvoice("P",o,i,"").subscribe({next:s=>{console.log("Print Access Invoice response:",s);const c=s.msg||"Submitted Successfully";"Submitted Successfully"===c?this.successMessage(c):this.failureMessage(c)},error:s=>{console.error("Print Access Invoice error:",s),this.failureMessage("Submission Failed")}})}onPostAccessInvoice(){const o=this.element.STORE,i=this.form.get("P1SSFX")?.value;this.StorerServiceService.PostAccessInvoice("U",o,i,"").subscribe({next:s=>{console.log("Post Access Invoice response:",s);const c=s.msg||"Submitted Successfully";"Submitted Successfully"===c?this.successMessage(c):this.failureMessage(c)},error:s=>{console.error("Post Access Invoice error:",s),this.failureMessage("Submission Failed")}})}successMessage(n){A().fire(n,"","success")}failureMessage(n){A().fire(n,"","error")}onBack(){this.router.navigate([this.StorerRead])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(S.F0),t.Y36(C.h),t.Y36(m.qu),t.Y36(S.gz),t.Y36(D.uw),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-storer-access-invoice-enquiry"]],viewQuery:function(n,o){if(1&n&&t.Gf(T.NW,5),2&n){let i;t.iGM(i=t.CRH())&&(o.paginator=i.first)}},standalone:!0,features:[t.jDz],decls:59,vars:14,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","search AccessInvInq",3,"click",4,"ngIf"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","TallyOrder"],["matColumnDef","ReferenceNo"],["matColumnDef","Pieces"],["matColumnDef","Weight"],["matColumnDef","Type"],["matColumnDef","RtnPayTp"],["matColumnDef","Consignee"],["matColumnDef","Min"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"Content-page-both"],[1,"left-side"],[1,"buttons","button3"],["mat-raised-button","","type","submit",1,"buttons","addButton","tally-search-btn",3,"click"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","search AccessInvInq",1,"addButton",3,"click"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","readonly","",3,"value"],["matInput","","formControlName","Date",3,"matDatepicker"],["matSuffix","",3,"for"],["DatePicker",""],["matInput","","type","Time","formControlName","Time","placeholder","HH:mm","id","generatedtime","required",""],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","GENDT",3,"matDatepicker"],["GeneratedDatePicker",""],["matInput","","type","time","formControlName","GENTM","placeholder","HH:mm","id","generatedtime","required",""],["matInput","","formControlName","CPAG"],["matInput","","formControlName","WKDOCN"],["appearance","outline",1,"full-width2"],["matInput","","formControlName","P1STOR",2,"text-transform","uppercase"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return o.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Accessorial Invoice WorkSheet Inquiry"),t.qZA(),t.TgZ(7,"div",3),t.YNc(8,O,3,0,"button",4),t.YNc(9,b,3,0,"button",5),t.qZA()(),t.TgZ(10,"mat-card-content",6),t.YNc(11,U,47,6,"form",7),t.qZA(),t.TgZ(12,"table",8),t.ynx(13,9),t.YNc(14,M,2,0,"th",10),t.YNc(15,x,2,1,"td",11),t.BQk(),t.ynx(16,12),t.YNc(17,R,2,0,"th",10),t.YNc(18,W,2,1,"td",11),t.BQk(),t.ynx(19,13),t.YNc(20,B,2,0,"th",10),t.YNc(21,Y,2,1,"td",11),t.BQk(),t.ynx(22,14),t.YNc(23,k,2,0,"th",10),t.YNc(24,K,2,1,"td",11),t.BQk(),t.ynx(25,15),t.YNc(26,G,2,0,"th",10),t.YNc(27,J,2,1,"td",11),t.BQk(),t.ynx(28,16),t.YNc(29,L,2,0,"th",10),t.YNc(30,Q,2,1,"td",11),t.BQk(),t.ynx(31,17),t.YNc(32,F,2,0,"th",10),t.YNc(33,w,2,1,"td",11),t.BQk(),t.ynx(34,18),t.YNc(35,$,2,0,"th",10),t.YNc(36,z,2,1,"td",11),t.BQk(),t.ynx(37,19),t.YNc(38,H,2,0,"th",10),t.YNc(39,X,2,1,"td",11),t.BQk(),t.YNc(40,j,1,0,"tr",20),t.YNc(41,V,1,0,"tr",21),t.qZA(),t.TgZ(42,"div",22),t._UZ(43,"br")(44,"br"),t.TgZ(45,"div",23)(46,"button",24),t._uU(47),t.ALo(48,"number"),t.qZA()()(),t._UZ(49,"br")(50,"br"),t.TgZ(51,"div",22)(52,"div",23)(53,"button",25),t.NdJ("click",function(){return o.onPostAccessInvoice()}),t._uU(54,"Post & Print"),t.qZA(),t.TgZ(55,"button",25),t.NdJ("click",function(){return o.onPrintAccessInvoice()}),t._uU(56," Print "),t.qZA()()(),t.TgZ(57,"mat-paginator",26,27),t.NdJ("page",function(u){return o.onPaginateChange(u)}),t.qZA()()),2&n&&(t.xp6(8),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!o.searchTextDisplay),t.xp6(2),t.Q6J("ngIf",o.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",o.headerColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.headerColumns),t.xp6(6),t.hij(" Total Amount : $",t.xi3(48,10,o.totalAmountDue,"1.2-2")," "),t.xp6(10),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(13,tt))("pageSize",o.pageSize))},dependencies:[I.m,E.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,T.NW,y.Hw,q.lW,f.KE,f.hX,f.R9,P.Nt,d.Mq,d.hl,d.nW,p.a8,p.dk,p.dn,p.n5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,N.gM,E.JJ]}),e})()}}]);